language: node_js
cache:
  npm: true
  directories:
    - ~/.cache
addons:
  apt:
    packages:
    - libgconf-2-4
jobs:
  fast_finish: true
  include:
    - node_js: '12.14'
    - node_js: 'node'
      if: head_branch = master
    - node_js: '15.2.0'
      if: branch = node-v15
  allow_failures:
    - node_js: 'node'
      if: head_branch = master
    - node_js: '15.2.0'
      if: branch = node-v15
branches:
  only:
    - master
    - /^release-.*$/
    - node-v15
after_script:
  - cat test/unit/coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js
