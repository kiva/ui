import{_ as L}from"./iframe-Cc_r_Bkf.js";import{_ as F}from"./entry-orderBy-CUrcrXTfYx.js";import{c as i,a as H,q as m,A as l,m as C,J as N,I as D,L as f,r as T,o as c}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import"./entry-KvWwwHeader-C1bm1YMh4q.js";import{A}from"./entry-KvTextInput-CnVgGp-sYq.js";import"./entry-numeral-xVHG5DEP0A.js";import{_ as P}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-get-D3xDH2SX94.js";import"./entry-isSymbol-5pnFTpIKM9.js";import"./entry-keys-B9dmm4b_qU.js";import"./entry-index-CWclSTHHJk.js";import"./entry-mdi-B1ONwcTkQ2.js";import"./entry-attrs-C2OODjD6EW.js";import"./entry-KvMaterialIcon-C3KLX5OV-L.js";const O="No results found",b={name:"KvSelectBox",components:{KvTextInput:A},emits:["selected"],props:{id:{type:String,required:!0},items:{type:Array,default:()=>[]},headerKey:{type:String,default:null},shouldSort:{type:Boolean,default:!0},placeholder:{type:String,default:""},isFullWidth:{type:Boolean,default:!1},selectedIds:{type:Array,default:()=>[]}},data(){return{NO_RESULTS:O,popper:null,show:!1,search:""}},mounted(){document.addEventListener("click",this.clickDocument),document.addEventListener("touchstart",this.clickDocument)},beforeUnmount(){document.removeEventListener("click",this.clickDocument),document.removeEventListener("touchstart",this.clickDocument),this.popper&&this.popper.destroy()},computed:{filteredItems(){let t=this.items.filter(e=>e.name.toLowerCase().includes(this.search.toLowerCase().trim()));if(this.shouldSort&&(t=F(t,this.headerKey?[this.headerKey,"name"]:["name"])),this.headerKey)for(let e=0;e<t.length;++e){const s=t[e],n=t[e+1],o=s==null?void 0:s[this.headerKey],r=n==null?void 0:n[this.headerKey];e===0?t.splice(0,0,{name:o,isHeader:!0}):e<t.length-1&&o!==r&&(t.splice(e+1,0,{name:r,isHeader:!0}),e+=1)}return t}},methods:{async open(){await this.initPopper(),this.show=!0},close(){this.show=!1},async initPopper(){if(this.popper)return;const{default:t}=await L(async()=>{const{default:e}=await import("./entry-popper-DpEq4IeYnp.js");return{default:e}},[],import.meta.url);this.popper||(this.popper=new t(this.$refs.input.$el,this.$refs.dropdown,{placement:"bottom-start"}))},clickDocument(t){var e,s,n,o,r;!((n=(s=(e=this.$refs)==null?void 0:e.input)==null?void 0:s.$el)!=null&&n.contains(t.target))&&!((r=(o=this.$refs)==null?void 0:o.dropdown)!=null&&r.contains(t.target))&&this.close()},clickItem({id:t}){this.$emit("selected",{id:t})},itemSelected(t){return this.selectedIds.includes(t)}}},U=["onClick"],W={key:0,class:"tw-py-0.5 tw-px-1.5"};function q(t,e,s,n,o,r){const V=T("kv-text-input");return c(),i("div",{class:l({"tw-w-full":s.isFullWidth})},[H(V,{ref:"input",id:s.id,modelValue:o.search,"onUpdate:modelValue":e[0]||(e[0]=a=>o.search=a),placeholder:s.placeholder,"can-clear":!0,autocomplete:"off",class:l({"tw-w-full":s.isFullWidth}),onFocus:r.open},null,8,["id","modelValue","placeholder","class","onFocus"]),m("div",{ref:"dropdown",class:l([{"tw-hidden":!o.show},"tw-border tw-border-tertiary tw-py-0.5 tw-rounded-xs tw-bg-white tw-overflow-auto tw-z-2"]),style:{"max-height":"200px"}},[m("ul",null,[(c(!0),i(N,null,D(r.filteredItems,(a,B)=>(c(),i("li",{key:B,class:l(["tw-py-0.5 tw-px-1.5",{"tw-pb-1":a.isHeader,"tw-cursor-pointer hover:tw-bg-action-highlight hover:tw-text-white":!a.isHeader,"tw-bg-tertiary tw-pointer-events-none":r.itemSelected(a.id)}]),onClick:R=>!a.isHeader&&!r.itemSelected(a.id)&&r.clickItem(a)},[m("span",{class:l({"tw-border-b tw-pb-0.5":a.isHeader})},f(a.name),3)],10,U))),128)),r.filteredItems.length===0?(c(),i("li",W,f(o.NO_RESULTS),1)):C("",!0)])],2)],2)}const K=P(b,[["render",q]]);b.__docgenInfo={displayName:"KvSelectBox",exportName:"default",description:"",tags:{},props:[{name:"id",type:{name:"string"},required:!0},{name:"items",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"headerKey",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"shouldSort",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"placeholder",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"isFullWidth",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"selectedIds",type:{name:"array"},defaultValue:{func:!1,value:"[]"}}],events:[{name:"selected",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Kv/KvSelectBox.vue"]};const ae={title:"Kv/Form Elements/KvSelectBox",component:K},E=[...Array(20)].map((t,e)=>({id:e,name:`Item ${e+1}`,header:`Header ${e%5}`})),h=t=>{const e=(s,{argTypes:n})=>({props:Object.keys(n),components:{KvSelectBox:K},data:()=>({myCoolModel:""}),setup(){return t},template:`<kv-select-box id="select-box" :items="items" header-key="header" :selected-ids="selectedIds">
            <option value="test">Test</option>
            <option value="test2">Test2</option>
            <option value="test3">Test3</option>
        </kv-select-box>`});return e.args=t,e},d=h(),u=h({items:E}),p=h({items:E,selectedIds:[0,2]});var y,w,v;d.parameters={...d.parameters,docs:{...(y=d.parameters)==null?void 0:y.docs,source:{originalSource:"story()",...(v=(w=d.parameters)==null?void 0:w.docs)==null?void 0:v.source}}};var _,g,S;u.parameters={...u.parameters,docs:{...(_=u.parameters)==null?void 0:_.docs,source:{originalSource:`story({
  items
})`,...(S=(g=u.parameters)==null?void 0:g.docs)==null?void 0:S.source}}};var x,k,I;p.parameters={...p.parameters,docs:{...(x=p.parameters)==null?void 0:x.docs,source:{originalSource:`story({
  items,
  selectedIds: [0, 2]
})`,...(I=(k=p.parameters)==null?void 0:k.docs)==null?void 0:I.source}}};const ne=["Empty","Items","Selected"];export{d as Empty,u as Items,p as Selected,ne as __namedExportsOrder,ae as default};
