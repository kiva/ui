import{w as V}from"./entry-mdi-B1ONwcTkQ2.js";import{S as j}from"./entry-SupportedByLenders-kzcvNbRX1z.js";import{z as D,C as R,r as m,K as F,o as n,c as p,m as h,a as w,q as l,D as I,L as f}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{x as E}from"./entry-KvMaterialIcon-C3KLX5OV-L.js";import"./entry-KvWwwHeader-C1bm1YMh4q.js";import"./entry-numeral-xVHG5DEP0A.js";import{j as K}from"./entry-KvToast-BgoIv09PyW.js";import{_ as O}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{a as z}from"./entry-apollo-story-mixin-CB9BNmK9U5.js";import"./entry-KvUserAvatar-DmX-R6-wYd.js";import"./entry-imageUtils-XCIqTGZvrk.js";import"./entry-KvLoadingPlaceholder-B_9_tltQhY.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-index-CWclSTHHJk.js";import"./entry-KvPageContainer-Dh8GJwjiow.js";const N={name:"ChallengeCallout",components:{KvMaterialIcon:E,KvToast:K,SupportedByLenders:j},emits:["close"],props:{currentLender:{type:Object,default:()=>({})},showAddedToCartMessage:{type:Boolean,default:!1},goalParticipationForLoan:{type:Array,default:null},borrowerName:{type:String,default:void 0}},data(){return{mdiArrowTopRight:V}},computed:{participants(){const a=(this.goalParticipationForLoan??[]).filter(e=>{var t,r,o;return((t=e==null?void 0:e.lender)==null?void 0:t.id)!==((o=(r=this.currentLender)==null?void 0:r.lender)==null?void 0:o.id)}).concat(this.currentLender).map(e=>{var t,r;return{...e==null?void 0:e.lender,image:{url:((r=(t=e==null?void 0:e.lender)==null?void 0:t.image)==null?void 0:r.url)??""}}}).slice(0,3);return{totalCount:a.length,values:a}},participantsMessage(){return this.participants.length>1?`You & ${this.participants.length-1} other members are supporting`:"You are on your way to supporting the team challenge!"}},watch:{showAddedToCartMessage(a){a&&this.$refs.toastRef.show("","",!0)}},methods:{closeCallback(){this.$kvTrackEvent("Lending","click","close-challenge-callout"),this.$emit("close")}},mounted(){this.showAddedToCartMessage&&this.$refs.toastRef.show("","",!0)}},Y={key:0,class:"tw-flex tw-gap-1 tw-items-center"},q={class:"tw-flex tw-gap-0.5 tw-flex-wrap"},H={key:0,class:"data-hj-suppress tw-whitespace-nowrap"},$={href:"/basket",class:"tw-flex"};function G(a,e,t,r,o,s){const x=m("supported-by-lenders"),S=m("kv-material-icon"),B=m("kv-toast"),P=F("kv-track-event");return n(),D(B,{ref:"toastRef",class:"tw-fixed tw-top-9 md:tw-top-11 tw-left-0 tw-right-0 tw-z-banner toast-container tw-rounded-t-none md:tw-rounded-t",onClose:s.closeCallback},{toastContent:R(()=>[t.showAddedToCartMessage?(n(),p("div",Y,[w(x,{participants:s.participants,"is-challenge":"",minimal:""},null,8,["participants"]),l("div",q,[e[1]||(e[1]=l("span",{class:"tw-whitespace-nowrap"},"Added to cart!",-1)),l("span",null,f(s.participantsMessage),1),s.participants.length>1&&t.borrowerName?(n(),p("span",H,f(t.borrowerName)+".",1)):h("",!0),I((n(),p("a",$,[e[0]||(e[0]=l("span",{class:"tw-whitespace-nowrap"},"Head to checkout",-1)),w(S,{class:"tw-w-3",icon:o.mdiArrowTopRight},null,8,["icon"])])),[[P,["basket","click","challenge-callout"]]])])])):h("",!0)]),_:1},8,["onClose"])}const T=O(N,[["render",G],["__scopeId","data-v-2d578add"]]);N.__docgenInfo={displayName:"ChallengeCallout",exportName:"default",description:"",tags:{},props:[{name:"currentLender",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"showAddedToCartMessage",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"goalParticipationForLoan",type:{name:"array"},defaultValue:{func:!1,value:"null"}},{name:"borrowerName",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}}],events:[{name:"close"}],sourceFiles:["/home/runner/work/ui/ui/src/components/Lend/LoanSearch/ChallengeCallout.vue"]};const ie={title:"Components/ChallengeCallout",component:T},u=(a={})=>{const e=(t,{argTypes:r})=>({props:Object.keys(r),components:{ChallengeCallout:T},mixins:[z()],setup(){return{args:a}},template:`
            <challenge-callout v-bind="args" />
        `});return e.args=a,e},M={id:2383848,name:"Mary",image:{url:"https://www-0.development.kiva.org/img/s100/4da4a17c4b35913d22114bf29bb1911b.jpg",width:3264,height:2448},publicId:"mary19806605"},c=u({teamName:"A+",showAddedToCartMessage:!0}),i=u({shareLender:M,teamName:"A+",showAddedToCartMessage:!0}),d=u({currentLender:{lender:M},teamName:"A+",showAddedToCartMessage:!0,borrowerName:"Borrower"});var g,_,C;c.parameters={...c.parameters,docs:{...(g=c.parameters)==null?void 0:g.docs,source:{originalSource:`story({
  teamName: 'A+',
  showAddedToCartMessage: true
})`,...(C=(_=c.parameters)==null?void 0:_.docs)==null?void 0:C.source}}};var v,b,y;i.parameters={...i.parameters,docs:{...(v=i.parameters)==null?void 0:v.docs,source:{originalSource:`story({
  shareLender: publicLendProfile,
  teamName: 'A+',
  showAddedToCartMessage: true
})`,...(y=(b=i.parameters)==null?void 0:b.docs)==null?void 0:y.source}}};var k,A,L;d.parameters={...d.parameters,docs:{...(k=d.parameters)==null?void 0:k.docs,source:{originalSource:`story({
  currentLender: {
    lender: publicLendProfile
  },
  teamName: 'A+',
  showAddedToCartMessage: true,
  borrowerName: 'Borrower'
})`,...(L=(A=d.parameters)==null?void 0:A.docs)==null?void 0:L.source}}};const de=["Default","Lender","AddToCard"];export{d as AddToCard,c as Default,i as Lender,de as __namedExportsOrder,ie as default};
