import{K}from"./entry-KvIcon-DpMQFaEAGT.js";import{K as B}from"./entry-KvCheckboxList-CJuOYvkfeF.js";import{a as h}from"./entry-filterUtils-D0mz1tA9_E.js";import{g as T,a as f,m as C}from"./entry-regions-iDsXyep4ay.js";import{c as m,H as U,I as A,E as D,r as y,o as a,e as v,f as $,d as z,n as L,a as H,J,K as M}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";import{_ as j}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import"./iframe-CWeBLAo0.js";import"./entry-KvWwwHeader-CVdIzOPj6Q.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-numeral-DJCTM12wUX.js";import"./entry-KvCheckbox-DOGFVMmKkd.js";import"./entry-index.browser-vcSNLBTfP4.js";import"./entry-mdi-BJHOrBfjV3.js";import"./entry-KvMaterialIcon-DcajXwg-0j.js";import"./entry-attrs-C2OODjD6EW.js";import"./entry-orderBy-CUrcrXTfYx.js";import"./entry-get-D3xDH2SX94.js";import"./entry-isSymbol-5pnFTpIKM9.js";import"./entry-keys-B9dmm4b_qU.js";const O={name:"LoanSearchLocationFilter",components:{KvIcon:K,KvCheckboxList:B},emits:["updated"],props:{regions:{type:Array,default:void 0},activeIsoCodes:{type:Array,default:void 0}},data(){return{displayedRegions:this.regions,selectedCountries:C(this.activeIsoCodes,this.regions),openRegions:[],getCheckboxLabel:h}},methods:{getItems(e){return e.map(s=>({value:s.name,title:h(s),disabled:s.numLoansFundraising===0}))},isOpenRegion(e){return this.openRegions.includes(e)},toggleRegion(e){const s=this.openRegions.indexOf(e);s===-1?this.openRegions.push(e):this.openRegions.splice(s,1)},updateRegion(e,{values:s,changed:r,wasSelectAll:i}){var o;this.selectedCountries[e]=s,this.$emit("updated",{countryIsoCode:f(this.displayedRegions,this.selectedCountries)});let t="";i?t=s.length?"select-all":"deselect-all":t=s.includes(r)?"selected":"deselected",(o=this.$kvTrackEvent)==null||o.call(this,"Lending","click-location-filter",i?`Region: ${e}`:`Country: ${r}`,t)},updateSelectedCountries(e){if(!this.activeIsoCodes||!this.regions)return;const s=[...e||this.activeIsoCodes],r=f(this.displayedRegions,this.selectedCountries);s.sort().toString()!==r.sort().toString()&&(this.selectedCountries=C(this.activeIsoCodes,this.regions))}},watch:{regions(e){this.displayedRegions=T(this.displayedRegions,e),this.updateSelectedCountries()},activeIsoCodes(e){this.updateSelectedCountries(e)}}},q=["onClick"];function G(e,s,r,i,t,o){const V=y("kv-icon"),E=y("kv-checkbox-list");return a(),m("form",{class:"tw-flex tw-flex-col tw-gap-1.5 tw-mb-2",onSubmit:s[0]||(s[0]=D(()=>{},["prevent"]))},[(a(!0),m(U,null,A(t.displayedRegions,n=>(a(),m("fieldset",{key:n.region},[v("legend",null,[v("button",{class:L(["tw-transition-all",{"tw-mb-1":o.isOpenRegion(n.region)}]),onClick:g=>o.toggleRegion(n.region)},[H(V,{name:"fat-chevron","from-sprite":!0,class:L(["tw-h-1.5 tw-w-1.5 tw-mr-1 tw-transition-all",{"tw--rotate-90":!o.isOpenRegion(n.region)}])},null,8,["class"]),J(" "+M(t.getCheckboxLabel(n)),1)],10,q)]),o.isOpenRegion(n.region)?(a(),$(E,{key:0,"show-select-all":!0,items:o.getItems(n.countries),"selected-values":t.selectedCountries[n.region],class:"tw-pl-3",onUpdated:g=>o.updateRegion(n.region,g)},null,8,["items","selected-values","onUpdated"])):z("",!0)]))),128))],32)}const N=j(O,[["render",G]]);O.__docgenInfo={displayName:"LoanSearchLocationFilter",exportName:"default",description:"",tags:{},props:[{name:"regions",description:`The regions with countries used to build the checkbox lists. Expected format:
[{
  region: 'region',
  numLoansFundraising: 1,
  countries: [{
    name: 'name',
    isoCode: 'US',
    numLoansFundraising: 1,
  }]
}]`,type:{name:"array"},defaultValue:{func:!1,value:"undefined"}},{name:"activeIsoCodes",type:{name:"array"},defaultValue:{func:!1,value:"undefined"}}],events:[{name:"updated",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Lend/LoanSearch/LoanSearchLocationFilter.vue"]};const pe={title:"Loan Search/Loan Search Location Filter",component:N},p=(e={})=>(r,{argTypes:i})=>({props:Object.keys(i),components:{LoanSearchLocationFilter:N},setup(){return e},template:'<loan-search-location-filter :regions="regions" :active-iso-codes="activeIsoCodes" />'}),u=(e=!1)=>[...Array(4)].map((s,r)=>({region:`Region ${r}`,numLoansFundraising:e?0:20,countries:[...Array(4)].map((i,t)=>({name:`Country ${t}`,isoCode:`ISO ${t}`,numLoansFundraising:e?0:5}))})),c=p({regions:u()}),d=p({regions:u(),activeIsoCodes:u()[0].countries.slice(0,2).map(e=>e.isoCode)}),l=p({regions:u(!0)});var S,_,k;c.parameters={...c.parameters,docs:{...(S=c.parameters)==null?void 0:S.docs,source:{originalSource:`story({
  regions: regions()
})`,...(k=(_=c.parameters)==null?void 0:_.docs)==null?void 0:k.source}}};var I,R,x;d.parameters={...d.parameters,docs:{...(I=d.parameters)==null?void 0:I.docs,source:{originalSource:`story({
  regions: regions(),
  activeIsoCodes: regions()[0].countries.slice(0, 2).map(c => c.isoCode)
})`,...(x=(R=d.parameters)==null?void 0:R.docs)==null?void 0:x.source}}};var w,F,b;l.parameters={...l.parameters,docs:{...(w=l.parameters)==null?void 0:w.docs,source:{originalSource:`story({
  regions: regions(true)
})`,...(b=(F=l.parameters)==null?void 0:F.docs)==null?void 0:b.source}}};const ge=["Default","Selected","NoneFundraising"];export{c as Default,l as NoneFundraising,d as Selected,ge as __namedExportsOrder,pe as default};
