const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./entry-KvHeaderMobileMenu-CCCU_JYWiF.js","./entry-mdi-BJHOrBfjV3.js","./entry-KvAccordionItem-Bt-JNbOfTg.js","./entry-vue.esm-bundler-Bf_Yeyugwo.js","./entry-KvExpandable-DLPQ2-gM4K.js","./entry-KvWwwHeader-CVdIzOPj6Q.js","./entry-_commonjsHelpers-Cpj98o6Yn6.js","./entry-numeral-DJCTM12wUX.js","./KvWwwHeader-CNHTwYuN.css","./entry-KvMaterialIcon-DcajXwg-0j.js","./KvHeaderMobileMenu-DUsMt0pH.css","./entry-KvHeaderMyKivaMenu-CXAioRiqNG.js","./entry-KvHeaderMenuLink-BpKUjMcWA7.js","./entry-KvLendMenu-C7MZ3ATlF1.js","./entry-KvLoadingPlaceholder-DUZzoT9CoU.js","./entry-KvTabs-Dt0rMR23wJ.js","./entry-KvTabPanel-Dqe0lxZDeq.js","./entry-KvGrid-A3hpmYTsti.js","./entry-KvPageContainer-B9-1kg27t_.js","./KvLendMenu-DvrrI1Au.css","./entry-KvHeaderTakeActionMenu-BIR0tXAgcB.js","./entry-KvHeaderAboutMenu-nD9YUo0y-9.js","./entry-TheLendMenu-7xyXvKyGTn.js","./entry-get-BUjo_hX5jl.js","./entry-get-D3xDH2SX94.js","./entry-isSymbol-5pnFTpIKM9.js","./entry-sortBy-BF-uf42VgF.js","./entry-orderBy-CUrcrXTfYx.js","./entry-keys-B9dmm4b_qU.js","./entry-PromoCreditBanner-CCrPa6t4Rf.js","./entry-promoCredit-A8tDfJh8uJ.js","./entry-_plugin-vue_export-helper-DlAUqK2UKH.js","./entry-KvAccordionItem-BUdedcIFQ1.js","./entry-KvExpandable-DeDyumYo7d.js","./iframe-CWeBLAo0.js","./entry-kiva-logo-fyRkKmi0FM.js","./entry-touchEvents-DzV-rvy7P4.js","./entry-CampaignLogoGroup-D5aVYDQ4uA.js","./entry-KvContentfulImg-ClwkYYkTk_.js","./entry-throttle-DL1zg7kAk0.js","./entry-toNumber-MeiYJWOH0A.js","./entry-imageUtils-_95xo2d0ng.js","./entry-settingsUtils-CXPrtFAPl-.js","./entry-index-COmIkRYU2t.js","./entry-myKivaUtils-USlSQzpKdw.js","./entry-logReadQueryError-Codcl0QZ_g.js","./entry-logFormatter-DhjghUk5Me.js","./entry-myKivaForAllUsers-DI6rZrUMxZ.js","./entry-KvButton-DF0Vhz1EWA.js","./entry-KvLoadingSpinner-D0IZcQeh_0.js","./entry-KvUserAvatar-CcUKtQr-4i.js","./entry-throttle-DR-Bh3IiJx.js","./entry-KvThemeProvider-CJZWo36001.js","./entry-toInteger-XI_MWEAzOD.js","./entry-lock-scroll-Bww220JhDP.js","./entry-getCacheKey-BX3EO2qX-W.js","./entry-KvTextInput-DOWiWB5Pob.js","./entry-attrs-C2OODjD6EW.js","./TheLendMenu-D3hlyjtR.css"])))=>i.map(i=>d[i]);
import{_ as ye}from"./iframe-CWeBLAo0.js";import{c as B,o as b,e as L,K as Le,r as Y,g as Rn,a as z,n as se,E as me,D as br,j as He,F as C,d as ge,P as je,f as V,b as U,J as H,G as ce,h as ae,R as De,w as Yt,A as Hn,B as Mr,k as Sr,s as xr,S as Tr,x as Te,T as Ft,y as Lr,l as Ir,u as ut,H as we,I as Bt,a1 as Zt}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";import{g as Pr,n as Rt}from"./entry-numeral-DJCTM12wUX.js";import{K as Nr}from"./entry-kiva-logo-fyRkKmi0FM.js";import{o as Er,a as Cr,i as Ar}from"./entry-touchEvents-DzV-rvy7P4.js";import{_ as nt}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{V as Or,W as Dt,d as Ut,X as Dn,Y as qr}from"./entry-mdi-BJHOrBfjV3.js";import Fr from"./entry-CampaignLogoGroup-D5aVYDQ4uA.js";import{_ as Br}from"./entry-throttle-DL1zg7kAk0.js";import{w as $e}from"./entry-KvMaterialIcon-DcajXwg-0j.js";import{w as Un}from"./entry-imageUtils-_95xo2d0ng.js";import{_ as Vn}from"./entry-KvLoadingPlaceholder-DUZzoT9CoU.js";import{s as Ue,t as Kn}from"./entry-KvWwwHeader-CVdIzOPj6Q.js";import{r as Vt,b as Rr}from"./entry-settingsUtils-CXPrtFAPl-.js";import{g as Hr,M as Dr,_ as Kt}from"./entry-myKivaUtils-USlSQzpKdw.js";import{l as jn}from"./entry-logReadQueryError-Codcl0QZ_g.js";import{_ as Ur}from"./entry-myKivaForAllUsers-DI6rZrUMxZ.js";import{U as Vr}from"./entry-KvButton-DF0Vhz1EWA.js";import{x as $n}from"./entry-KvPageContainer-B9-1kg27t_.js";import{J as Kr}from"./entry-KvUserAvatar-CcUKtQr-4i.js";import{c as Wn}from"./entry-throttle-DR-Bh3IiJx.js";import{v as jr}from"./entry-KvThemeProvider-CJZWo36001.js";import{g as Ie,c as en}from"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import{k as $r,b as rt,c as zn}from"./entry-get-D3xDH2SX94.js";import{f as Gn,g as jt,l as Wr,e as Xn,m as Jn,n as zr,o as Gr}from"./entry-orderBy-CUrcrXTfYx.js";import{r as Xr}from"./entry-toInteger-XI_MWEAzOD.js";import{r as Jr,k as Qr,g as Yr}from"./entry-keys-B9dmm4b_qU.js";import{d as Zr,f as ei}from"./entry-isSymbol-5pnFTpIKM9.js";import{s as ti,i as ni,P as ri}from"./entry-PromoCreditBanner-CCrPa6t4Rf.js";import{l as ii}from"./entry-lock-scroll-Bww220JhDP.js";import{g as oi}from"./entry-getCacheKey-BX3EO2qX-W.js";import{J as ai}from"./entry-KvTextInput-DOWiWB5Pob.js";import{l as si}from"./entry-logFormatter-DhjghUk5Me.js";const ui="kvu_lb",li="kvu_db";function it(n,t){typeof window>"u"||(window.optimizely=window.optimizely||[],window.optimizely.push({type:"user",attributes:{[n]:t}}))}function Is(n){it("us_loan_checkout",n?"yes":"no")}function Ps(n){it("has_ever_logged_in_before",n?"yes":"no")}function ci(n){it("has_lent_before",n?"yes":"no")}function di(n){it("has_deposited_before",n?"yes":"no")}Pr`query optimizelyUserDataQuery {
	my {
		id
		loans(limit:1) {
				totalCount
		}
		transactions(limit:1, filter:{category:deposit}) {
				totalCount
		}
	}
}`;const fi={props:{count:{type:Number,default:0}}},hi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},mi={id:"countMask"},vi={x:"12",y:"17",fill:"#000",style:{"font-size":"9px","font-weight":"631","text-anchor":"middle"}};function pi(n,t,i,r,o,e){return b(),B("svg",hi,[L("defs",null,[L("mask",mi,[t[0]||(t[0]=L("rect",{width:"100%",height:"100%",fill:"#fff"},null,-1)),L("text",vi,Le(i.count),1)])]),t[1]||(t[1]=L("path",{d:"M12,3A3,3 0 0,1 15,6H9A3,3 0 0,1 12,3M19,6H17A5,5 0 0,0 12,1A5,5 0 0,0 7,6H5C3.89,6 3,6.89 3,8V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V8C21,6.89 20.1,6 19,6Z",fill:"currentColor",mask:"url(#countMask)"},null,-1))])}const gi=Ue(fi,[["render",pi]]),yi={components:{KvMaterialIcon:$e},props:{refName:{type:String,default:""},href:{type:String,default:void 0},menuComponent:{type:Object,default:()=>({})},openMenuItem:{type:Object,default:()=>({})},dropdownIcon:{type:String,default:""},baseClass:{type:String,default:""},sendLinkPosition:{type:Boolean,default:!1}},emits:["on-hover","user-tap"],setup(n,{emit:t}){const{proxy:i}=br(),r=He(()=>[n.baseClass,{"tw-text-tertiary":n.openMenuItem&&n.openMenuItem!==n.menuComponent}]),o=()=>{if(!n.sendLinkPosition)return null;const e=i.$refs[n.refName];if(!e)return null;const a=e.getBoundingClientRect();return{left:`${a.left+a.width/2}px`,transform:"translateX(-50%)",borderRadius:"0px 0px 8px 8px"}};return{computedClass:r,handleMouseOver:()=>{const e=o();t("on-hover",n.refName,n.menuComponent,e)},handleTouchStart:()=>{const e=o();t("user-tap",n.refName,n.menuComponent,e)}}}},wi=["href"];function _i(n,t,i,r,o,e){const a=Y("KvMaterialIcon");return b(),B("a",{ref:i.refName,class:"tw-py-1 tw-no-underline hover:tw-no-underline tw-text-primary hover:tw-text-action tw-items-center tw-cursor-pointer",href:i.href,onMouseenter:t[0]||(t[0]=(...s)=>r.handleMouseOver&&r.handleMouseOver(...s)),onTouchstart:t[1]||(t[1]=me((...s)=>r.handleTouchStart&&r.handleTouchStart(...s),["prevent"]))},[L("div",{class:se(["tw-flex tw-items-center",r.computedClass])},[Rn(n.$slots,"default"),z(a,{class:se(["tw-inline tw-w-3 tw-ml-0.5 tw-transition-transform tw-duration-300",{"tw-rotate-180":i.openMenuItem===i.menuComponent}]),icon:i.dropdownIcon},null,8,["class","icon"])],2)],40,wi)}const ki=Ue(yi,[["render",_i]]),bi=De(()=>ye(()=>import("./entry-KvHeaderMobileMenu-CCCU_JYWiF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),tn=De(()=>ye(()=>import("./entry-KvHeaderMyKivaMenu-CXAioRiqNG.js"),__vite__mapDeps([11,12,3,5,6,7,8]),import.meta.url)),Mi=De(()=>ye(()=>import("./entry-KvLendMenu-C7MZ3ATlF1.js"),__vite__mapDeps([13,3,1,2,4,5,6,7,8,9,14,15,16,17,18,19]),import.meta.url)),Si=De(()=>ye(()=>import("./entry-KvHeaderTakeActionMenu-BIR0tXAgcB.js"),__vite__mapDeps([20,12,3,5,6,7,8]),import.meta.url)),xi=De(()=>ye(()=>import("./entry-KvHeaderAboutMenu-nD9YUo0y-9.js"),__vite__mapDeps([21,12,3,5,6,7,8]),import.meta.url)),nn=150,Be="avatar-menu",Qe="menuButton",rn={top:"-3.75rem",width:"100%"},Ti="lendButton",Li="takeActionButton",Ii="aboutUsLink",Pi={components:{KvMaterialIcon:$e,KvIconBag:gi,KvHeaderDropdownLink:ki,KvUserAvatar:Kr},props:{loggedIn:{type:Boolean,default:!1},basketCount:{type:Number,default:0},openMenuItem:{type:[Object,Function],default:null},loginUrl:{type:String,default:"/ui-login"},myDashboardUrl:{type:String,default:"/mykiva"},lenderName:{type:String,default:""},lenderImageUrl:{type:String,default:""},isMobile:{type:Boolean,default:!1},balance:{type:Number,default:0}},emits:["item-hover"],setup(n,{emit:t}){const i=ae(null),r=ae(null),o=ae(null),e=ae(null),a=ae(null),s=ae(null),c=ae(null),p=ae(null),y=ae(null),v=ae(null),h=Sr("$kvTrackEvent"),g={[Ti]:{action:"hover-Lend-menu",label:"Lend"},[Li]:{action:"hover-Take-action-menu",label:"Take action"},[Ii]:{action:"hover-About-menu",label:"About"},[Qe]:{action:"hover-Hamburger-menu",label:"Hamburger"},[Be]:{action:"hover-Avatar-menu",label:"Avatar"}},T=(P,te,oe=null)=>{t("item-hover",P,te,oe)},_=(P,te,oe=null)=>{if(!navigator.maxTouchPoints){if(P&&v.value!==P){const re=g[P];re&&h("TopNav",re.action,re.label)}v.value=P,T(P,te,P===Qe&&n.isMobile?rn:oe)}},w=P=>{!navigator.maxTouchPoints&&v.value===P&&(v.value=null,T())},I=()=>{var P;const te=(P=i.value)==null?void 0:P.getBoundingClientRect();if(!te)return null;const oe=te.left+te.width/2-nn/2,re=`${window.innerWidth-oe-nn}px`;return{right:(window==null?void 0:window.innerWidth)<Kn.breakpoints.md?0:re}},K=()=>{v.value=Be,T(i.value,tn,I())},E=(P,te,oe)=>{if(P&&v.value!==P){const re=g[P];re&&h("TopNav",re.action,re.label)}v.value===Qe&&(v.value=null),!v.value||v.value!==P?(v.value=P,P===Be?K():P===Qe&&n.isMobile?T(P,te,rn):T(P,te,oe)):(v.value=null,T())},k=Wn(()=>{v.value===Be&&K()},100),m=He(()=>n.isMobile?void 0:"/lend-by-category"),M=He(()=>{var P;return((P=n.lenderImageUrl)==null?void 0:P.split("/").pop())??""}),A=He(()=>Math.floor(n.balance)),j=P=>{P.target===P.currentTarget&&T()};return Yt(()=>n.isMobile,()=>{v.value===Be&&K()}),Yt(()=>n.openMenuItem,P=>{P||(v.value=null)}),Hn(()=>{ye(()=>import("./entry-KvHeaderMobileMenu-CCCU_JYWiF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url),ye(()=>import("./entry-KvHeaderMyKivaMenu-CXAioRiqNG.js"),__vite__mapDeps([11,12,3,5,6,7,8]),import.meta.url),ye(()=>import("./entry-KvLendMenu-C7MZ3ATlF1.js"),__vite__mapDeps([13,3,1,2,4,5,6,7,8,9,14,15,16,17,18,19]),import.meta.url),ye(()=>import("./entry-KvHeaderTakeActionMenu-BIR0tXAgcB.js"),__vite__mapDeps([20,12,3,5,6,7,8]),import.meta.url),ye(()=>import("./entry-KvHeaderAboutMenu-nD9YUo0y-9.js"),__vite__mapDeps([21,12,3,5,6,7,8]),import.meta.url),window.addEventListener("resize",k)}),Mr(()=>{window.removeEventListener("resize",k)}),{AVATAR_MENU_ID:Be,openMenuId:v,numeral:Rt,mdiAccountCircle:Dn,mdiChevronDown:Ut,mdiMagnify:Dt,mdiMenu:Or,onHover:T,avatar:i,lendButton:r,aboutUsLink:o,partnerWithUsLink:e,borrowLink:a,supportKivaLink:s,basketLink:c,signInLink:p,menuButton:y,lendUrl:m,avatarFilename:M,handleOnHover:_,handleTouchStart:E,handleMouseOut:w,handleAvatarMenuPosition:K,KvHeaderMobileMenu:bi,KvHeaderMyKivaMenu:tn,KvLendMenu:Mi,KvHeaderTakeActionMenu:Si,KvHeaderAboutMenu:xi,isLegacyPlaceholderAvatar:Un,getAvatarMenuPosition:I,handleEmptySpaceClick:j,roundedBalance:A}}},Ni=["href"],Ei={ref:"avatar",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-1 tw-bg-eco-green-1 tw-rounded-md tw-py-0.5 md:tw-py-1 tw-px-1 md:tw-px-2"},Ci={class:"tw-text-eco-green-4"},Ai=["href"];function Oi(n,t,i,r,o,e){const a=Y("kv-material-icon"),s=Y("KvHeaderDropdownLink"),c=Y("kv-icon-bag"),p=Y("KvUserAvatar"),y=je("kv-track-event");return b(),B("div",{class:"tw-h-full tw-flex tw-items-center tw-gap-0.5 md:tw-gap-2 lg:tw-gap-2.5",onTouchstart:t[10]||(t[10]=(...v)=>r.handleEmptySpaceClick&&r.handleEmptySpaceClick(...v))},[C((b(),B("button",{ref:"menuButton",class:se(["header-link tw-inline-flex md:tw-hidden",{"tw-text-tertiary":i.openMenuItem&&i.openMenuItem!==r.KvHeaderMobileMenu}]),onMouseover:t[0]||(t[0]=v=>r.handleOnHover("menuButton",r.KvHeaderMobileMenu)),onMouseout:t[1]||(t[1]=v=>r.handleMouseOut("menuButton")),onTouchstart:t[2]||(t[2]=me(v=>r.handleTouchStart("menuButton",r.KvHeaderMobileMenu),["stop"]))},[z(a,{icon:r.mdiMenu},null,8,["icon"])],34)),[[y,i.openMenuItem===r.KvHeaderMobileMenu?["TopNav","click-Hamburger-menu"]:null]]),C((b(),V(s,{class:"tw-py-1","ref-name":"lendButton",href:r.lendUrl,"menu-component":r.KvLendMenu,"open-menu-item":i.openMenuItem,"dropdown-icon":r.mdiChevronDown,"base-class":"tw-inline-flex md:tw-border md:tw-rounded-md tw-px-1.5 tw-py-0.5",onOnHover:r.handleOnHover,onMouseleave:t[3]||(t[3]=v=>r.handleMouseOut("lendButton")),onTouchstart:t[4]||(t[4]=me(v=>r.handleTouchStart("lendButton",r.KvLendMenu),["stop"]))},{default:U(()=>t[11]||(t[11]=[H(" Lend ")])),_:1},8,["href","menu-component","open-menu-item","dropdown-icon","onOnHover"])),[[y,["TopNav","click-Lend"]]]),C((b(),V(s,{"ref-name":"takeActionButton","base-class":"tw-hidden md:tw-inline-flex tw-py-1","menu-component":r.KvHeaderTakeActionMenu,"open-menu-item":i.openMenuItem,"dropdown-icon":r.mdiChevronDown,"send-link-position":"",onOnHover:r.handleOnHover,onMouseleave:t[5]||(t[5]=v=>r.handleMouseOut("takeActionButton")),onUserTap:r.handleTouchStart},{default:U(()=>t[12]||(t[12]=[H(" Take action ")])),_:1},8,["menu-component","open-menu-item","dropdown-icon","onOnHover","onUserTap"])),[[y,["TopNav","click-take-action"]]]),z(s,{"ref-name":"aboutUsLink","data-testid":"header-about","base-class":"tw-hidden md:tw-inline-flex tw-py-1","menu-component":r.KvHeaderAboutMenu,"open-menu-item":i.openMenuItem,"dropdown-icon":r.mdiChevronDown,"send-link-position":"",onOnHover:r.handleOnHover,onMouseleave:t[6]||(t[6]=v=>r.handleMouseOut("aboutUsLink")),onUserTap:r.handleTouchStart},{default:U(()=>t[13]||(t[13]=[H(" About ")])),_:1},8,["menu-component","open-menu-item","dropdown-icon","onOnHover","onUserTap"]),t[17]||(t[17]=L("div",{class:"tw-flex-1 tw-h-full"},null,-1)),i.loggedIn?C((b(),B("a",{key:0,ref:"dashboardLink",href:i.myDashboardUrl,class:se(["header-link tw-hidden md:tw-block",{"tw-text-tertiary":!!i.openMenuItem}])},t[14]||(t[14]=[H(" My dashboard ")]),10,Ni)),[[y,["TopNav","click-Dashboard"]]]):ge("",!0),C((b(),B("a",{ref:"basketLink",href:"/basket",class:se(["header-link tw-relative md:!tw-mr-0 tw-flex tw-items-center tw-gap-0.5",{"tw-text-tertiary":!!i.openMenuItem}]),style:{"margin-right":"2px"},"data-testid":"header-basket"},[z(c,{class:"tw-w-3 tw-h-3 md:tw-w-3.5 md:tw-h-3.5 tw-pointer-events-none tw-text-action",count:i.basketCount},null,8,["count"]),t[15]||(t[15]=L("span",{class:"tw-hidden md:tw-block"},"Basket",-1))],2)),[[ce,i.basketCount>0],[y,["TopNav","click-Basket"]]]),L("div",{class:"md:tw-py-1",onMouseenter:t[7]||(t[7]=v=>r.handleOnHover(r.AVATAR_MENU_ID,r.KvHeaderMyKivaMenu,r.getAvatarMenuPosition())),onMouseleave:t[8]||(t[8]=v=>r.handleMouseOut(r.AVATAR_MENU_ID)),onTouchstart:t[9]||(t[9]=me(v=>r.handleTouchStart(r.AVATAR_MENU_ID),["stop"]))},[C(L("div",Ei,[r.isLegacyPlaceholderAvatar(r.avatarFilename)||!r.avatarFilename?(b(),V(a,{key:0,icon:r.mdiAccountCircle,class:"tw-w-3"},null,8,["icon"])):(b(),V(p,{key:1,class:"avatar","lender-name":i.lenderName,"lender-image-url":i.lenderImageUrl,"is-small":""},null,8,["lender-name","lender-image-url"])),L("span",Ci,Le(r.numeral(r.roundedBalance).format("$0")),1)],512),[[ce,i.loggedIn]])],32),i.loggedIn?ge("",!0):C((b(),B("a",{key:1,ref:"signInLink",href:i.loginUrl,class:se(["header-link",{"tw-text-tertiary":!!i.openMenuItem}])},t[16]||(t[16]=[H(" Sign in ")]),10,Ai)),[[y,["TopNav","click-Sign-in"]]])],32)}const qi=Ue(Pi,[["render",Oi],["__scopeId","data-v-d30fd983"]]),Fi={},Bi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 57 23"};function Ri(n,t){return b(),B("svg",Bi,t[0]||(t[0]=[L("path",{d:"M4.695.391H0v22.141h4.695V.391zm12.899 22.141h4.695V7.011h-4.695v15.521zm12.159 0h5.413l5.413-15.521h-4.662s-2.544 8.445-3.293 11.119h-.066c-.75-2.674-3.326-11.119-3.326-11.119h-4.956l5.477 15.521zm-23.537-8.31c7.37 0 9.092-6.158 9.092-7.21h-.637c-7.372 0-9.094 6.157-9.094 7.21h.639zm-.639.969c0 1.117 1.276 7.403 9.222 7.403h.638c0-1.119-1.277-7.403-9.221-7.403h-.639zM22.746 2.739C22.746 1.272 21.671 0 19.941 0c-1.727 0-2.804 1.272-2.804 2.739 0 1.468 1.077 2.739 2.804 2.739 1.73 0 2.805-1.271 2.805-2.739M57 7.011h-4.532V9.13c-.783-1.631-2.608-2.543-4.729-2.543-3.848 0-6.88 3.129-6.88 8.184 0 5.087 2.935 8.185 6.652 8.185 2.608 0 4.173-1.272 4.956-2.675v2.25H57V7.011zm-4.663 8.151c0 2.871-1.76 4.208-3.522 4.208-1.924 0-3.163-1.956-3.163-4.598 0-2.608 1.305-4.598 3.326-4.598 1.663 0 3.359 1.37 3.359 4.206v.782z",fill:"currentColor"},null,-1)]))}const Hi=Ue(Fi,[["render",Ri]]),Di={components:{KvLogo:Hi}},Ui={class:"tw-h-2 lg:tw-h-2.5"};function Vi(n,t,i,r,o,e){const a=Y("kv-logo");return b(),B("div",Ui,[z(a,{class:"tw-text-brand tw-w-auto tw-h-full tw-mx-auto"})])}const Ki=Ue(Di,[["render",Vi]]),ji=(n,t)=>{let i;return(...r)=>{clearTimeout(i),i=setTimeout(()=>n(...r),t)}},$i="4rem",Wi=["lendMenu","aboutUsLink","takeActionButton"],zi={components:{KvHeaderLinkBar:qi,KvHeaderLogo:Ki,KvThemeProvider:jr,KvPageContainer:$n},props:{loggedIn:{type:Boolean,default:!1},basketCount:{type:Number,default:0},loginUrl:{type:String,default:"/ui-login"},balance:{type:Number,default:0},isBorrower:{type:Boolean,default:!1},isTrustee:{type:Boolean,default:!1},userId:{type:Number,default:null},myDashboardUrl:{type:String,default:"/mykiva"},lenderName:{type:String,default:""},lenderImageUrl:{type:String,default:""},showMGUpsellLink:{type:Boolean,default:!1},countriesNotLentToUrl:{type:String,default:"/lend/countries-not-lent"}},emits:["load-lend-menu-data"],setup(n,{emit:t}){const i=ae(!0),r=ae(null),o=ae(!1),e=xr(null),a=ae(null),s=ae({left:0,position:"relative"}),c=ae(!1),p=ae(null),y=ae(!1),v=He(()=>{var E,k;return((k=(E=a.value)==null?void 0:E.$options)==null?void 0:k.name)==="KvHeaderMobileMenu"}),h=ji((E,k,m)=>{y.value&&(k?(p.value=E,e.value!==k&&(s.value={left:0,position:"relative"}),e.value=k,o.value=!0,m&&(s.value={...m,position:"absolute"})):o.value&&(o.value=!1,e.value=null))},100),g=E=>{var k;(k=a.value)==null||k.onLoad(E)},T=()=>{if(!v.value)return h()},_=()=>{t("load-lend-menu-data")},w=()=>c.value&&Wi.includes(p.value)||!c.value&&v.value,I=()=>{c.value=(window==null?void 0:window.innerWidth)<Kn.breakpoints.md,w()&&(e.value=null,o.value=!1)},K=Wn(I,100);return Hn(()=>{I(),window.addEventListener("resize",K),y.value=!0}),Tr(()=>{window.removeEventListener("resize",K)}),{HEADER_HEIGHT:$i,emitLendMenuEvent:_,isMobile:c,linksVisible:i,menuOpen:o,isMobileMenuActive:v,onHover:h,loadMenuData:g,handleOverlayClick:T,activeHeaderItem:r,menuComponent:e,menuComponentInstance:a,menuPosition:s}}},Gi={href:"/",class:"tw-px-1 tw-py-2 tw-cursor-pointer tw-absolute tw-top-1/2 tw-left-1/2 tw--translate-y-1/2 tw--translate-x-1/2 tw-transition-all tw-duration-300"};function Xi(n,t,i,r,o,e){const a=Y("kv-header-link-bar"),s=Y("kv-header-logo"),c=Y("kv-page-container"),p=Y("kv-theme-provider"),y=je("kv-track-event");return b(),V(p,{tag:"div",class:"tw-bg-primary"},{default:U(()=>[L("nav",{class:"tw-font-medium tw-relative",style:Te({height:r.HEADER_HEIGHT})},[z(c,{class:"tw-h-full"},{default:U(()=>[z(Ft,{name:"header-fade"},{default:U(()=>[C(z(a,{"logged-in":i.loggedIn,"basket-count":i.basketCount,"login-url":i.loginUrl,"open-menu-item":r.menuComponent,"my-dashboard-url":i.myDashboardUrl,"lender-name":i.lenderName,"lender-image-url":i.lenderImageUrl,"is-mobile":r.isMobile,balance:i.balance,onItemHover:r.onHover},null,8,["logged-in","basket-count","login-url","open-menu-item","my-dashboard-url","lender-name","lender-image-url","is-mobile","balance","onItemHover"]),[[ce,r.linksVisible]])]),_:1}),C((b(),B("a",Gi,[z(s)])),[[y,["TopNav","click-Logo"]]])]),_:1})],4),z(Ft,{name:"header-fade"},{default:U(()=>[C(L("div",{class:"tw-absolute tw-z-modal tw-h-full tw-inset-x-0 tw-bg-eco-green-4 bg-opacity-50 tw-min-h-screen",style:Te({top:r.HEADER_HEIGHT}),onTouchstart:t[4]||(t[4]=(...v)=>r.handleOverlayClick&&r.handleOverlayClick(...v))},[L("div",{class:se(["tw-bg-primary tw-overflow-y-auto tw-w-full md:tw-w-auto tw-rounded-none md:tw-rounded-b-sm",{"tw-min-h-dvh":r.isMobileMenuActive}]),style:Te({...r.menuPosition,maxHeight:r.isMobileMenuActive?"auto":`calc(100dvh - ${r.HEADER_HEIGHT})`}),onMouseenter:t[2]||(t[2]=v=>r.onHover(r.activeHeaderItem,r.menuComponent)),onMouseleave:t[3]||(t[3]=v=>r.onHover())},[(b(),V(Lr(r.menuComponent),{ref:"menuComponentInstance","logged-in":i.loggedIn,"login-url":i.loginUrl,"user-id":i.userId,"is-borrower":i.isBorrower,"is-trustee":i.isTrustee,"my-dashboard-url":i.myDashboardUrl,"show-m-g-upsell-link":i.showMGUpsellLink,"is-mobile":r.isMobile,"countries-not-lent-to-url":i.countriesNotLentToUrl,onLoadLendMenuData:r.emitLendMenuEvent,onClosingMenu:t[0]||(t[0]=v=>r.onHover()),onTouchstart:t[1]||(t[1]=me(()=>{},["stop"]))},null,40,["logged-in","login-url","user-id","is-borrower","is-trustee","my-dashboard-url","show-m-g-upsell-link","is-mobile","countries-not-lent-to-url","onLoadLendMenuData"]))],38)],36),[[ce,r.menuOpen]])]),_:1})]),_:1})}const Ji=Ue(zi,[["render",Xi],["__scopeId","data-v-7732c044"]]);function Qi(n){typeof window>"u"||window.hj&&(window.hj("identify",n==null?void 0:n.userId,{"Has ever logged in":n==null?void 0:n.hasEverLoggedIn,"Has lent before":n==null?void 0:n.hasLentBefore,"Has deposit before":n==null?void 0:n.hasDepositBefore}),(n==null?void 0:n.isFirstLoan)!==void 0&&window.hj("identify",n==null?void 0:n.userId,{"First loan":n==null?void 0:n.isFirstLoan,"Has direct loan":n==null?void 0:n.hasDirectLoan,"Has core loan":n==null?void 0:n.hasCoreLoan}))}function Ns(n){typeof window>"u"||window.hj&&window.hj("event",n)}const Yi=`query wwwHeaderPrivate($basketId: String) {
	hasEverLoggedIn @client
	shop (basketId: $basketId) {
		id
		nonTrivialItemCount
		basket {
			id
			totals {
				itemTotal
			}
		}
	}
	my {
		id
		userAccount {
			id
			balance
		}
		lender {
			id
			image {
				id
				url( presetSize:lender_default )
			}
		}
		isBorrower
		mostRecentBorrowedLoan {
			id
		}
		trustee {
			id
		}
		teams (limit: 5) {
			totalCount
			values {
				id
				team {
					id
					name
					teamPublicId
				}
			}
		}
	}
}
`,Zi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"wwwHeaderPrivate"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasEverLoggedIn"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonTrivialItemCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"basket"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totals"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemTotal"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"my"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userAccount"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"lender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"presetSize"},value:{kind:"EnumValue",value:"lender_default"}}],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"isBorrower"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mostRecentBorrowedLoan"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"trustee"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"teams"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"5"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"team"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"teamPublicId"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:541,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Yi}}},eo=`query wwwHeaderPublic {
	general {
		teamsMenuEnabled: featureSetting(key: "teams_in_navbar.enabled") {
			key
			value
		}
	}
}
`,to={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"wwwHeaderPublic"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"general"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"teamsMenuEnabled"},name:{kind:"Name",value:"featureSetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"teams_in_navbar.enabled",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:167,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:eo}}},no=`query dropdown {
	usingTouch @client
}
`,ro={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"dropdown"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"usingTouch"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:77,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:no}}},Qn={name:"KvDropdown",inject:{apollo:{default:null},cookieStore:{default:null}},emits:["show","hide"],props:{controller:{type:String,required:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200}},data(){return{popper:null,styles:{},show:!1,timeout:null,usingTouch:!1}},computed:{reference(){return document.getElementById(this.controller)}},apollo:{query:ro,result({data:n}){this.usingTouch=n.usingTouch}},watch:{usingTouch(){this.usingTouch&&this.popper&&this.removeMouseEvents()},show(n){this.reference&&this.reference.setAttribute("aria-expanded",n?"true":"false"),this.$emit(n?"show":"hide")}},mounted(){this.reference?this.makeDropdown():console.error(`KvDropdown: Controller element with id ${this.controller} not found in document.`)},updated(){this.popper&&this.popper.scheduleUpdate()},beforeUnmount(){this.unmakeDropdown()},methods:{open(){this.setTimeout(async()=>{await this.initPopper(),this.show=!0,this.usingTouch&&this.attachBodyEvents()},this.openDelay)},close(){this.setTimeout(()=>{this.show=!1,this.usingTouch&&this.removeBodyEvents()},this.closeDelay)},toggle(){this.show?this.close():this.open()},makeDropdown(){this.attachEvents()},unmakeDropdown(){this.removeEvents(),this.popper&&this.popper.destroy()},remakeDropdown(){this.unmakeDropdown(),this.makeDropdown()},async initPopper(){if(this.popper)return;const{default:n}=await ye(async()=>{const{default:t}=await import("./entry-popper-DpEq4IeYnp.js");return{default:t}},[],import.meta.url);this.popper||(this.popper=new n(this.reference,this.$el,{placement:"bottom-start",modifiers:{applyStyle:t=>{this.styles=t.styles,this.setAttributes(t.attributes)},preventOverflow:{padding:0}}}))},bodyTouchHandler(n){Ar(n,[this.reference,this.$el])||(this.show=!1,this.removeBodyEvents())},referenceTapHandler(n){n.preventDefault(),this.toggle()},attachEvents(){this.reference.addEventListener("mouseover",this.open),this.reference.addEventListener("mouseout",this.close),this.$el.addEventListener("mouseover",this.open),this.$el.addEventListener("mouseout",this.close),this.reference.addEventListener("touchstart",this.referenceTapHandler)},attachBodyEvents(){Cr(this.bodyTouchHandler)},removeEvents(){this.removeMouseEvents(),this.removeBodyEvents(),this.reference.removeEventListener("touchstart",this.referenceTapHandler)},removeMouseEvents(){this.reference.removeEventListener("mouseover",this.open),this.reference.removeEventListener("mouseover",this.close),this.$el.removeEventListener("mouseover",this.open),this.$el.removeEventListener("mouseout",this.close)},removeBodyEvents(){Er(this.bodyTouchHandler)},setAttributes(n){Object.keys(n).forEach(t=>{const i=n[t];i===!1?this.$el.removeAttribute(t):this.$el.setAttribute(t,i)})},setTimeout(n,t){window.clearTimeout(this.timeout),this.timeout=window.setTimeout(n,t)}}},io=["aria-hidden"];function oo(n,t,i,r,o,e){return b(),B("div",{class:se(["dropdown-pane",{"is-open":o.show}]),style:Te(o.styles),"aria-hidden":o.show?"false":"true"},[Rn(n.$slots,"default",{},void 0,!0)],14,io)}const Yn=nt(Qn,[["render",oo],["__scopeId","data-v-b84b249d"]]);Qn.__docgenInfo={displayName:"KvDropdown",exportName:"default",description:"",tags:{},props:[{name:"controller",type:{name:"string"},required:!0},{name:"openDelay",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"closeDelay",type:{name:"number"},defaultValue:{func:!1,value:"200"}}],events:[{name:"show"},{name:"hide"}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/ui/ui/src/components/Kv/KvDropdown.vue"]};const ao={class:"tw-bg-secondary tw-rounded-xs tw-py-0.5 tw-px-1 tw-mr-1"},so={key:0,class:"tw-w-3 tw-h-3"},uo=["src"],Zn=Ir({__name:"MyKivaButton",props:{isUserDataLoading:{type:Boolean,default:!1},balance:{type:[String,Number],default:0},profilePic:{type:String,default:""},profilePicId:{type:[String,Number],default:""}},setup(n){const t=He(()=>Un(n.profilePicId));return(i,r)=>{const o=Y("router-link"),e=je("kv-track-event");return C((b(),V(o,{"data-testid":"header-portfolio",to:"/portfolio",class:"tw-inline-flex"},{default:U(()=>[r[0]||(r[0]=L("span",{class:"tw-sr-only"},"My Portfolio",-1)),L("span",ao,[n.isUserDataLoading?(b(),B("div",so,[z(ut(Vn))])):(b(),B(we,{key:1},[H(Le(i.$filters.numeral(n.balance,"$0")),1)],64))]),z(ut($e),{icon:ut(Dn),class:"tw-w-3 tw-h-3 md:tw-w-3.5 md:tw-h-3.5",style:Te(n.isUserDataLoading?{display:"var(--ui-data-user-avatar-legacy-display, inline-block)"}:{display:t.value?"inline-block":"none"})},null,8,["icon","style"]),C(L("img",{src:n.profilePic,alt:"My portfolio",class:"data-hj-suppress tw-w-3 tw-h-3 md:tw-w-3.5 md:tw-h-3.5 tw-rounded-full tw-overflow-hidden tw-object-fill",style:Te(n.isUserDataLoading?{content:"var(--ui-data-user-avatar)",display:"var(--ui-data-user-avatar-display, inline-block)"}:{display:t.value?"none":"inline-block"})},null,12,uo),[[ce,!t.value]])],void 0),_:1,__:[0]})),[[e,["TopNav","click-Portfolio"]]])}}});Zn.__docgenInfo={exportName:"default",displayName:"MyKivaButton",description:"",tags:{},props:[{name:"isUserDataLoading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"balance",type:{name:"string|number"},defaultValue:{func:!1,value:"0"}},{name:"profilePic",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"profilePicId",type:{name:"string|number"},defaultValue:{func:!1,value:"''"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/Header/MyKivaButton.vue"]};const er={name:"TeamsMenu",components:{KvDropdown:Yn,KvMaterialIcon:$e},data(){return{mdiChevronDown:Ut,teamMenuId:"teams-header-dropdown"}},props:{teams:{type:Object,default:()=>({})}},computed:{teamsData(){var n,t;return((t=(n=this.teams)==null?void 0:n.values)==null?void 0:t.slice(0,5))??[]},totalTeams(){var n;return((n=this.teams)==null?void 0:n.totalCount)??0},onlyTeamId(){var n,t,i;return((i=(t=(n=this.teamsData)==null?void 0:n[0])==null?void 0:t.team)==null?void 0:i.id)??null},onlyTeamPublicId(){var n,t,i;return((i=(t=(n=this.teamsData)==null?void 0:n[0])==null?void 0:t.team)==null?void 0:i.teamPublicId)??null}}},lo={class:"tw-group"},co={class:"tw-flex"},fo={key:0},ho=["href"],mo=["href"],vo={key:1,style:{width:"9rem"}},po=["href"],go={key:0},yo={href:"/teams/my-teams"};function wo(n,t,i,r,o,e){const a=Y("kv-material-icon"),s=Y("router-link"),c=Y("kv-dropdown"),p=je("kv-track-event");return b(),B("div",lo,[C((b(),V(s,{id:o.teamMenuId,to:"/teams","data-testid":"header-lending-teams",class:"header__button tw-inline-flex"},{default:U(()=>[L("span",co,[t[0]||(t[0]=H(" Lending Teams ")),e.totalTeams?(b(),V(a,{key:0,class:"tw-w-3 tw-h-3 tw-transition-transform tw-duration-300 group-hover:tw-rotate-180",icon:o.mdiChevronDown},null,8,["icon"])):ge("",!0)])],void 0),_:1},8,["id"])),[[p,["topnav","click","lending-teams"]]]),e.totalTeams?(b(),V(c,{key:0,controller:o.teamMenuId,class:"dropdown-list","data-testid":"header-lending-teams-dropdown-list"},{default:U(()=>[e.totalTeams===1?(b(),B("ul",fo,[L("li",null,[C((b(),B("a",{href:`/team/${e.onlyTeamPublicId}`},t[1]||(t[1]=[H(" My Team's activity ")]),8,ho)),[[p,["topnav","click","lending-teams","my-teams-activity",e.onlyTeamId]]])]),L("li",null,[C((b(),B("a",{href:`/team/${e.onlyTeamPublicId}/impact`},t[2]||(t[2]=[H(" My Team's impact ")]),8,mo)),[[p,["topnav","click","lending-teams","my-teams-impact",e.onlyTeamId]]])])])):(b(),B("ul",vo,[(b(!0),B(we,null,Bt(e.teamsData,({team:y})=>(b(),B("li",{key:y.id},[C((b(),B("a",{href:`/team/${y.teamPublicId}`,class:"tw-whitespace-nowrap tw-text-ellipsis tw-overflow-hidden"},[H(Le(y.name),1)],8,po)),[[p,["topnav","click","lending-teams",y.name]]])]))),128)),e.totalTeams>e.teamsData.length?(b(),B("li",go,[C((b(),B("a",yo,t[3]||(t[3]=[H(" View all my teams ")]))),[[p,["topnav","click","lending-teams","view-all-my-teams"]]])])):ge("",!0)]))],void 0),_:1},8,["controller"])):ge("",!0)])}const _o=nt(er,[["render",wo],["__scopeId","data-v-27c54cda"]]);er.__docgenInfo={displayName:"TeamsMenu",exportName:"default",description:"",tags:{},props:[{name:"teams",type:{name:"object"},defaultValue:{func:!1,value:"{}"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/Header/TeamsMenu.vue"]};const ko=`query uiConfigSetting($key: String!) {
	general {
		uiConfigSetting(key: $key) {
			key
			value
		}
	}
}
`,bo={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"uiConfigSetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"key"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"general"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uiConfigSetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"key"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:144,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:ko}}},Mo="new_atb_experience_enable",So={inject:["apollo"],data(){return{enableAddToBasketExp:!1}},emits:["show-cart-modal"],created(){this.apollo.query({query:bo,variables:{key:Mo}}).then(({data:n})=>{this.enableAddToBasketExp=Vt(n,"general.uiConfigSetting.value")}).catch(n=>{jn(n,"New Add to basket experience")})},methods:{showCartModal(n){this.$emit("show-cart-modal",n)}},computed:{isInExperimentPages(){const{path:n}=this.$route;return n.includes("lend")||n.includes("mykiva")}}},xo={data(){return{redirectToMyKivaHomepage:!1}},computed:{homePagePath(){return this.redirectToMyKivaHomepage?"/mykiva":"/"},portfolioPath(){return this.redirectToMyKivaHomepage?"/mykiva":"/portfolio"}},async mounted(){const{data:n}=await this.apollo.query({query:Ur}),t=(n==null?void 0:n.my)??null,i=Vt(n,Dr);i&&(this.redirectToMyKivaHomepage=Hr(this.apollo,this.$kvTrackEvent,i,this.cookieStore)&&(t==null?void 0:t.id))}},To=`query experimentAssignment($id: String) {
	experiment(id: $id) @client {
		id
		version
	}
}
`,on={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"experimentAssignment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"experiment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:131,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:To}}},Lo=`query experimentSetting($key: String!) {
	general {
		uiExperimentSetting(key: $key) {
			key
			value
		}
	}
}
`,Io={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"experimentSetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"key"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"general"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uiExperimentSetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"key"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:150,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Lo}}};function Es(n,t){try{const i=n.readQuery({query:Io,variables:{key:t}});return Rr(i,"general.uiExperimentSetting.value")??{}}catch(i){return jn(i,`getExperimentSettingCached experimentSetting: ${t}`),{}}}function an(n,t,i,r,o,e=void 0){const a=n.readFragment({id:`Experiment:${r}`,fragment:Kt})??{};return a.version&&a.version!=="unassigned"&&t(i,o??r,a.version,e),a}const tr="combo_page_countries_not_lent_to",Po={inject:["apollo","cookieStore"],data(){return{isCountriesNotLentToExp:!1}},computed:{countriesNotLentToUrl(){return this.isCountriesNotLentToExp?"/lend/filter?countries-not-lent-to=true":"/lend/countries-not-lent"}},mounted(){var n;this.isCountriesNotLentToExp=((n=this.apollo.readFragment({id:`Experiment:${tr}`,fragment:Kt}))==null?void 0:n.version)==="b"}};var lt,sn;function nr(){if(sn)return lt;sn=1;var n=$r(),t=function(){try{var i=n(Object,"defineProperty");return i({},"",{}),i}catch{}}();return lt=t,lt}var ct,un;function No(){if(un)return ct;un=1;var n=nr();function t(i,r,o){r=="__proto__"&&n?n(i,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):i[r]=o}return ct=t,ct}var dt,ln;function Eo(){if(ln)return dt;ln=1;function n(t,i,r,o){for(var e=-1,a=t==null?0:t.length;++e<a;){var s=t[e];i(o,s,r(s),t)}return o}return dt=n,dt}var ft,cn;function Co(){if(cn)return ft;cn=1;var n=Gn();function t(i,r,o,e){return n(i,function(a,s,c){r(e,a,o(a),c)}),e}return ft=t,ft}var ht,dn;function Ao(){if(dn)return ht;dn=1;var n=Eo(),t=Co(),i=jt(),r=rt();function o(e,a){return function(s,c){var p=r(s)?n:t,y=a?a():{};return p(s,e,i(c,2),y)}}return ht=o,ht}var mt,fn;function Oo(){if(fn)return mt;fn=1;var n=No(),t=Ao(),i=Object.prototype,r=i.hasOwnProperty,o=t(function(e,a,s){r.call(e,s)?e[s].push(a):n(e,s,[a])});return mt=o,mt}var qo=Oo();const Fo=Ie(qo);var vt,hn;function Bo(){if(hn)return vt;hn=1;var n=zn(),t=jt(),i=Wr(),r=rt();function o(e,a){var s=r(e)?n:i;return s(e,t(a,3))}return vt=o,vt}var Ro=Bo();const tt=Ie(Ro);var pt,mn;function Ho(){if(mn)return pt;mn=1;function n(t,i,r){var o=-1,e=t.length;i<0&&(i=-i>e?0:e+i),r=r>e?e:r,r<0&&(r+=e),e=i>r?0:r-i>>>0,i>>>=0;for(var a=Array(e);++o<e;)a[o]=t[o+i];return a}return pt=n,pt}var gt,vn;function Do(){if(vn)return gt;vn=1;var n=Ho(),t=Xr();function i(r,o,e){return r&&r.length?(o=e||o===void 0?1:t(o),n(r,0,o<0?0:o)):[]}return gt=i,gt}var Uo=Do();const Vo=Ie(Uo);var yt,pn;function Ko(){if(pn)return yt;pn=1;function n(t,i,r){switch(r.length){case 0:return t.call(i);case 1:return t.call(i,r[0]);case 2:return t.call(i,r[0],r[1]);case 3:return t.call(i,r[0],r[1],r[2])}return t.apply(i,r)}return yt=n,yt}var wt,gn;function jo(){if(gn)return wt;gn=1;var n=Ko(),t=Math.max;function i(r,o,e){return o=t(o===void 0?r.length-1:o,0),function(){for(var a=arguments,s=-1,c=t(a.length-o,0),p=Array(c);++s<c;)p[s]=a[o+s];s=-1;for(var y=Array(o+1);++s<o;)y[s]=a[s];return y[o]=e(p),n(r,this,y)}}return wt=i,wt}var _t,yn;function $o(){if(yn)return _t;yn=1;function n(t){return function(){return t}}return _t=n,_t}var kt,wn;function Wo(){if(wn)return kt;wn=1;var n=$o(),t=nr(),i=Xn(),r=t?function(o,e){return t(o,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:i;return kt=r,kt}var bt,_n;function zo(){if(_n)return bt;_n=1;var n=800,t=16,i=Date.now;function r(o){var e=0,a=0;return function(){var s=i(),c=t-(s-a);if(a=s,c>0){if(++e>=n)return arguments[0]}else e=0;return o.apply(void 0,arguments)}}return bt=r,bt}var Mt,kn;function Go(){if(kn)return Mt;kn=1;var n=Wo(),t=zo(),i=t(n);return Mt=i,Mt}var St,bn;function Xo(){if(bn)return St;bn=1;var n=Xn(),t=jo(),i=Go();function r(o,e){return i(t(o,e,n),o+"")}return St=r,St}var xt,Mn;function Jo(){if(Mn)return xt;Mn=1;var n=Jr(),t=Zr();function i(r){return t(r)&&n(r)}return xt=i,xt}var Tt,Sn;function Qo(){if(Sn)return Tt;Sn=1;var n=Jn(),t=zn(),i=zr(),r=Qr(),o=Jo(),e=Math.max;function a(s){if(!(s&&s.length))return[];var c=0;return s=n(s,function(p){if(o(p))return c=e(p.length,c),!0}),r(c,function(p){return t(s,i(p))})}return Tt=a,Tt}var Lt,xn;function Yo(){if(xn)return Lt;xn=1;var n=Xo(),t=Qo(),i=n(t);return Lt=i,Lt}var Zo=Yo();const ea=Ie(Zo),ta=`query loanSearchSuggestions {
	lend {
		loanSearchSuggestions {
			group
			label
			query
		}
	}
}
`,na={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"loanSearchSuggestions"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lend"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"loanSearchSuggestions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"query"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:138,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:ta}}};var It,Tn;function ra(){if(Tn)return It;Tn=1;var n=Gn();function t(i,r){var o=[];return n(i,function(e,a,s){r(e,a,s)&&o.push(e)}),o}return It=t,It}var Pt,Ln;function ia(){if(Ln)return Pt;Ln=1;var n=Jn(),t=ra(),i=jt(),r=rt();function o(e,a){var s=r(e)?n:t;return s(e,i(a,3))}return Pt=o,Pt}var oa=ia();const aa=Ie(oa);var Nt,In;function sa(){if(In)return Nt;In=1;var n=ei(),t=Yr(),i=rt(),r=n?n.isConcatSpreadable:void 0;function o(e){return i(e)||t(e)||!!(r&&e&&e[r])}return Nt=o,Nt}var Et,Pn;function ua(){if(Pn)return Et;Pn=1;var n=Gr(),t=sa();function i(r,o,e,a,s){var c=-1,p=r.length;for(e||(e=t),s||(s=[]);++c<p;){var y=r[c];o>0&&e(y)?o>1?i(y,o-1,e,a,s):n(s,y):a||(s[s.length]=y)}return s}return Et=i,Et}var Ct,Nn;function la(){if(Nn)return Ct;Nn=1;var n=ua();function t(i){var r=i==null?0:i.length;return r?n(i,1):[]}return Ct=t,Ct}var ca=la();const da=Ie(ca);var At,En;function fa(){if(En)return At;En=1;function n(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function t(f,l){for(var u=0;u<l.length;u++){var d=l[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}function i(f,l,u){return l&&t(f.prototype,l),u&&t(f,u),f}function r(f,l,u){return l in f?Object.defineProperty(f,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):f[l]=u,f}function o(f,l){var u=Object.keys(f);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(f);l&&(d=d.filter(function(x){return Object.getOwnPropertyDescriptor(f,x).enumerable})),u.push.apply(u,d)}return u}function e(f){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?o(Object(u),!0).forEach(function(d){r(f,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(u)):o(Object(u)).forEach(function(d){Object.defineProperty(f,d,Object.getOwnPropertyDescriptor(u,d))})}return f}function a(f,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),l&&c(f,l)}function s(f){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},s(f)}function c(f,l){return c=Object.setPrototypeOf||function(d,x){return d.__proto__=x,d},c(f,l)}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function y(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function v(f,l){return l&&(typeof l=="object"||typeof l=="function")?l:y(f)}function h(f){return function(){var l=s(f),u;if(p()){var d=s(this).constructor;u=Reflect.construct(l,arguments,d)}else u=l.apply(this,arguments);return v(this,u)}}function g(f){return T(f)||_(f)||w(f)||K()}function T(f){if(Array.isArray(f))return I(f)}function _(f){if(typeof Symbol<"u"&&Symbol.iterator in Object(f))return Array.from(f)}function w(f,l){if(f){if(typeof f=="string")return I(f,l);var u=Object.prototype.toString.call(f).slice(8,-1);if(u==="Object"&&f.constructor&&(u=f.constructor.name),u==="Map"||u==="Set")return Array.from(u);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return I(f,l)}}function I(f,l){(l==null||l>f.length)&&(l=f.length);for(var u=0,d=new Array(l);u<l;u++)d[u]=f[u];return d}function K(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E=function(l){return Array.isArray?Array.isArray(l):Object.prototype.toString.call(l)==="[object Array]"},k=function(l){if(typeof l=="string")return l;var u=l+"";return u=="0"&&1/l==-1/0?"-0":u},m=function(l){return l==null?"":k(l)},M=function(l){return typeof l=="string"},A=function(l){return typeof l=="number"},j=function(l){return l!=null},P=function(l){return!l.trim().length};function te(f,l){var u=[],d=!1,x=function S(N,O){if(!O)u.push(N);else{var q=O.indexOf("."),F=O,D=null;q!==-1&&(F=O.slice(0,q),D=O.slice(q+1));var R=N[F];if(j(R))if(!D&&(M(R)||A(R)))u.push(m(R));else if(E(R)){d=!0;for(var G=0,$=R.length;G<$;G+=1)S(R[G],D)}else D&&S(R,D)}};return x(f,l),d?u:u[0]}var oe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},re={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(l,u){return l.score===u.score?l.idx<u.idx?-1:1:l.score<u.score?-1:1}},Ee={location:0,threshold:.6,distance:100},Me={useExtendedSearch:!1,getFn:te},W=e({},re,{},oe,{},Ee,{},Me);function We(f){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=l.errors,d=u===void 0?0:u,x=l.currentLocation,S=x===void 0?0:x,N=l.expectedLocation,O=N===void 0?0:N,q=l.distance,F=q===void 0?W.distance:q,D=d/f.length,R=Math.abs(O-S);return F?D+R/F:R?1:D}function or(){for(var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:W.minMatchCharLength,u=[],d=-1,x=-1,S=0,N=f.length;S<N;S+=1){var O=f[S];O&&d===-1?d=S:!O&&d!==-1&&(x=S-1,x-d+1>=l&&u.push([d,x]),d=-1)}return f[S-1]&&S-d>=l&&u.push([d,S-1]),u}var Pe=32;function ar(f,l,u){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},x=d.location,S=x===void 0?W.location:x,N=d.distance,O=N===void 0?W.distance:N,q=d.threshold,F=q===void 0?W.threshold:q,D=d.findAllMatches,R=D===void 0?W.findAllMatches:D,G=d.minMatchCharLength,$=G===void 0?W.minMatchCharLength:G,J=d.includeMatches,Z=J===void 0?W.includeMatches:J;if(l.length>Pe)throw new Error("Pattern length exceeds max of ".concat(Pe,"."));var X=l.length,ee=f.length,Q=Math.max(0,Math.min(S,ee)),ie=F,ue=Q,le=[];if(Z)for(var ne=0;ne<ee;ne+=1)le[ne]=0;for(var fe;(fe=f.indexOf(l,ue))>-1;){var he=We(l,{currentLocation:fe,expectedLocation:Q,distance:O});if(ie=Math.min(he,ie),ue=fe+X,Z)for(var ve=0;ve<X;)le[fe+ve]=1,ve+=1}ue=-1;for(var de=[],Se=1,Ce=X+ee,Ae=1<<(X<=Pe-1?X-1:Pe-2),_e=0;_e<X;_e+=1){for(var Oe=0,ke=Ce;Oe<ke;){var Ve=We(l,{errors:_e,currentLocation:Q+ke,expectedLocation:Q,distance:O});Ve<=ie?Oe=ke:Ce=ke,ke=Math.floor((Ce-Oe)/2+Oe)}Ce=ke;var Xe=Math.max(1,Q-ke+1),Ke=R?ee:Math.min(Q+ke,ee)+X,xe=Array(Ke+2);xe[Ke+1]=(1<<_e)-1;for(var pe=Ke;pe>=Xe;pe-=1){var qe=pe-1,Fe=u[f.charAt(qe)];if(Fe&&Z&&(le[qe]=1),xe[pe]=(xe[pe+1]<<1|1)&Fe,_e!==0&&(xe[pe]|=(de[pe+1]|de[pe])<<1|1|de[pe+1]),xe[pe]&Ae&&(Se=We(l,{errors:_e,currentLocation:qe,expectedLocation:Q,distance:O}),Se<=ie)){if(ie=Se,ue=qe,ue<=Q)break;Xe=Math.max(1,2*Q-ue)}}var st=We(l,{errors:_e+1,currentLocation:Q,expectedLocation:Q,distance:O});if(st>ie)break;de=xe}var Je={isMatch:ue>=0,score:Se||.001};return Z&&(Je.matchedIndices=or(le,$)),Je}function sr(f){for(var l={},u=f.length,d=0;d<u;d+=1)l[f.charAt(d)]=0;for(var x=0;x<u;x+=1)l[f.charAt(x)]|=1<<u-x-1;return l}var $t=function(){function f(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=u.location,x=d===void 0?W.location:d,S=u.threshold,N=S===void 0?W.threshold:S,O=u.distance,q=O===void 0?W.distance:O,F=u.includeMatches,D=F===void 0?W.includeMatches:F,R=u.findAllMatches,G=R===void 0?W.findAllMatches:R,$=u.minMatchCharLength,J=$===void 0?W.minMatchCharLength:$,Z=u.isCaseSensitive,X=Z===void 0?W.isCaseSensitive:Z;n(this,f),this.options={location:x,threshold:N,distance:q,includeMatches:D,findAllMatches:G,minMatchCharLength:J,isCaseSensitive:X},this.pattern=X?l:l.toLowerCase(),this.chunks=[];for(var ee=0;ee<this.pattern.length;){var Q=this.pattern.substring(ee,ee+Pe);this.chunks.push({pattern:Q,alphabet:sr(Q)}),ee+=Pe}}return i(f,[{key:"searchIn",value:function(u){var d=u.$;return this.searchInString(d)}},{key:"searchInString",value:function(u){var d=this.options,x=d.isCaseSensitive,S=d.includeMatches;if(x||(u=u.toLowerCase()),this.pattern===u){var N={isMatch:!0,score:0};return S&&(N.matchedIndices=[[0,u.length-1]]),N}for(var O=this.options,q=O.location,F=O.distance,D=O.threshold,R=O.findAllMatches,G=O.minMatchCharLength,$=[],J=0,Z=!1,X=0,ee=this.chunks.length;X<ee;X+=1){var Q=this.chunks[X],ie=Q.pattern,ue=Q.alphabet,le=ar(u,ie,ue,{location:q+Pe*X,distance:F,threshold:D,findAllMatches:R,minMatchCharLength:G,includeMatches:S}),ne=le.isMatch,fe=le.score,he=le.matchedIndices;ne&&(Z=!0),J+=fe,ne&&he&&($=[].concat(g($),g(he)))}var ve={isMatch:Z,score:Z?J/this.chunks.length:1};return Z&&S&&(ve.matchedIndices=$),ve}}]),f}(),Ne=function(){function f(l){n(this,f),this.pattern=l}return i(f,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(u){return Wt(u,this.multiRegex)}},{key:"isSingleMatch",value:function(u){return Wt(u,this.singleRegex)}}]),f}();function Wt(f,l){var u=f.match(l);return u?u[1]:null}var zt=function(f){a(u,f);var l=h(u);function u(d){return n(this,u),l.call(this,d)}return i(u,[{key:"search",value:function(x){for(var S=0,N,O=[],q=this.pattern.length;(N=x.indexOf(this.pattern,S))>-1;)S=N+q,O.push([N,S-1]);var F=!!O.length;return{isMatch:F,score:F?1:0,matchedIndices:O}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),u}(Ne),ur=function(f){a(u,f);var l=h(u);function u(d){return n(this,u),l.call(this,d)}return i(u,[{key:"search",value:function(x){var S=x.indexOf(this.pattern),N=S===-1;return{isMatch:N,score:N?0:1,matchedIndices:[0,x.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),u}(Ne),lr=function(f){a(u,f);var l=h(u);function u(d){return n(this,u),l.call(this,d)}return i(u,[{key:"search",value:function(x){var S=x.startsWith(this.pattern);return{isMatch:S,score:S?0:1,matchedIndices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),u}(Ne),cr=function(f){a(u,f);var l=h(u);function u(d){return n(this,u),l.call(this,d)}return i(u,[{key:"search",value:function(x){var S=!x.startsWith(this.pattern);return{isMatch:S,score:S?0:1,matchedIndices:[0,x.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),u}(Ne),dr=function(f){a(u,f);var l=h(u);function u(d){return n(this,u),l.call(this,d)}return i(u,[{key:"search",value:function(x){var S=x.endsWith(this.pattern);return{isMatch:S,score:S?0:1,matchedIndices:[x.length-this.pattern.length,x.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),u}(Ne),fr=function(f){a(u,f);var l=h(u);function u(d){return n(this,u),l.call(this,d)}return i(u,[{key:"search",value:function(x){var S=!x.endsWith(this.pattern);return{isMatch:S,score:S?0:1,matchedIndices:[0,x.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),u}(Ne),Gt=function(f){a(u,f);var l=h(u);function u(d){var x,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=S.location,O=N===void 0?W.location:N,q=S.threshold,F=q===void 0?W.threshold:q,D=S.distance,R=D===void 0?W.distance:D,G=S.includeMatches,$=G===void 0?W.includeMatches:G,J=S.findAllMatches,Z=J===void 0?W.findAllMatches:J,X=S.minMatchCharLength,ee=X===void 0?W.minMatchCharLength:X,Q=S.isCaseSensitive,ie=Q===void 0?W.isCaseSensitive:Q;return n(this,u),x=l.call(this,d),x._bitapSearch=new $t(d,{location:O,threshold:F,distance:R,includeMatches:$,findAllMatches:Z,minMatchCharLength:ee,isCaseSensitive:ie}),x}return i(u,[{key:"search",value:function(x){return this._bitapSearch.searchInString(x)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),u}(Ne),ot=[zt,lr,cr,fr,dr,ur,Gt],Xt=ot.length,hr=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,mr="|";function vr(f){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return f.split(mr).map(function(u){for(var d=u.trim().split(hr).filter(function(J){return J&&!!J.trim()}),x=[],S=0,N=d.length;S<N;S+=1){for(var O=d[S],q=!1,F=-1;!q&&++F<Xt;){var D=ot[F],R=D.isMultiMatch(O);R&&(x.push(new D(R,l)),q=!0)}if(!q)for(F=-1;++F<Xt;){var G=ot[F],$=G.isSingleMatch(O);if($){x.push(new G($,l));break}}}return x})}var pr=new Set([Gt.type,zt.type]),gr=function(){function f(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=u.isCaseSensitive,x=d===void 0?W.isCaseSensitive:d,S=u.includeMatches,N=S===void 0?W.includeMatches:S,O=u.minMatchCharLength,q=O===void 0?W.minMatchCharLength:O,F=u.findAllMatches,D=F===void 0?W.findAllMatches:F,R=u.location,G=R===void 0?W.location:R,$=u.threshold,J=$===void 0?W.threshold:$,Z=u.distance,X=Z===void 0?W.distance:Z;n(this,f),this.query=null,this.options={isCaseSensitive:x,includeMatches:N,minMatchCharLength:q,findAllMatches:D,location:G,threshold:J,distance:X},this.pattern=x?l:l.toLowerCase(),this.query=vr(this.pattern,this.options)}return i(f,[{key:"searchIn",value:function(u){var d=this.query;if(!d)return{isMatch:!1,score:1};var x=u.$,S=this.options,N=S.includeMatches,O=S.isCaseSensitive;x=O?x:x.toLowerCase();for(var q=0,F=[],D=0,R=0,G=d.length;R<G;R+=1){var $=d[R];F.length=0,q=0;for(var J=0,Z=$.length;J<Z;J+=1){var X=$[J],ee=X.search(x),Q=ee.isMatch,ie=ee.matchedIndices,ue=ee.score;if(Q){if(q+=1,D+=ue,N){var le=X.constructor.type;pr.has(le)?F=[].concat(g(F),g(ie)):F.push(ie)}}else{D=0,q=0,F.length=0;break}}if(q){var ne={isMatch:!0,score:D/q};return N&&(ne.matchedIndices=F),ne}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(u,d){return d.useExtendedSearch}}]),f}(),at=/[^ ]+/g;function Jt(f,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=u.getFn,x=d===void 0?W.getFn:d,S=[];if(M(l[0]))for(var N=0,O=l.length;N<O;N+=1){var q=l[N];if(j(q)&&!P(q)){var F={$:q,idx:N,t:q.match(at).length};S.push(F)}}else for(var D=f.length,R=0,G=l.length;R<G;R+=1){for(var $=l[R],J={idx:R,$:{}},Z=0;Z<D;Z+=1){var X=f[Z],ee=x($,X);if(j(ee)){if(E(ee)){for(var Q=[],ie=[{arrayIndex:-1,value:ee}];ie.length;){var ue=ie.pop(),le=ue.arrayIndex,ne=ue.value;if(j(ne)){if(M(ne)&&!P(ne)){var fe={$:ne,idx:le,t:ne.match(at).length};Q.push(fe)}else if(E(ne))for(var he=0,ve=ne.length;he<ve;he+=1)ie.push({arrayIndex:he,value:ne[he]})}}J.$[X]=Q}else if(!P(ee)){var de={$:ee,t:ee.match(at).length};J.$[X]=de}}}S.push(J)}return S}var yr=function(){function f(l){if(n(this,f),this._keys={},this._keyNames=[],this._length=l.length,l.length&&M(l[0]))for(var u=0;u<this._length;u+=1){var d=l[u];this._keys[d]={weight:1},this._keyNames.push(d)}else{for(var x=0,S=0;S<this._length;S+=1){var N=l[S];if(!Object.prototype.hasOwnProperty.call(N,"name"))throw new Error('Missing "name" property in key object');var O=N.name;if(this._keyNames.push(O),!Object.prototype.hasOwnProperty.call(N,"weight"))throw new Error('Missing "weight" property in key object');var q=N.weight;if(q<=0||q>=1)throw new Error('"weight" property in key must be in the range of (0, 1)');this._keys[O]={weight:q},x+=q}for(var F=0;F<this._length;F+=1){var D=this._keyNames[F],R=this._keys[D].weight;this._keys[D].weight=R/x}}}return i(f,[{key:"get",value:function(u,d){return this._keys[u]?this._keys[u][d]:-1}},{key:"keys",value:function(){return this._keyNames}},{key:"count",value:function(){return this._length}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),f}();function wr(f,l){var u=f.matches;if(l.matches=[],!!j(u))for(var d=0,x=u.length;d<x;d+=1){var S=u[d];if(!(!j(S.indices)||S.indices.length===0)){var N={indices:S.indices,value:S.value};S.key&&(N.key=S.key),S.idx>-1&&(N.refIndex=S.idx),l.matches.push(N)}}}function _r(f,l){l.score=f.score}var ze=[];function kr(){ze.push.apply(ze,arguments)}var Ge=function(){function f(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;n(this,f),this.options=e({},W,{},u),this._processKeys(this.options.keys),this.setCollection(l,d)}return i(f,[{key:"setCollection",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.list=u,this.listIsStringArray=M(u[0]),d?this.setIndex(d):this.setIndex(this._createIndex())}},{key:"setIndex",value:function(u){this._indexedList=u}},{key:"_processKeys",value:function(u){this._keyStore=new yr(u)}},{key:"_createIndex",value:function(){return Jt(this._keyStore.keys(),this.list,{getFn:this.options.getFn})}},{key:"search",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{limit:!1};if(u=u.trim(),!u.length)return[];for(var x=this.options.shouldSort,S=null,N=0,O=ze.length;N<O;N+=1){var q=ze[N];if(q.condition(u,this.options)){S=new q(u,this.options);break}}S||(S=new $t(u,this.options));var F=this._searchUsing(S);return this._computeScore(F),x&&this._sort(F),d.limit&&A(d.limit)&&(F=F.slice(0,d.limit)),this._format(F)}},{key:"_searchUsing",value:function(u){var d=this._indexedList,x=[],S=this.options.includeMatches;if(this.listIsStringArray)for(var N=0,O=d.length;N<O;N+=1){var q=d[N],F=q.$,D=q.idx,R=q.t;if(j(F)){var G=u.searchIn(q),$=G.isMatch,J=G.score;if($){var Z={score:J,value:F,t:R};S&&(Z.indices=G.matchedIndices),x.push({item:F,idx:D,matches:[Z]})}}}else for(var X=this._keyStore.keys(),ee=this._keyStore.count(),Q=0,ie=d.length;Q<ie;Q+=1){var ue=d[Q],le=ue.$,ne=ue.idx;if(j(le)){for(var fe=[],he=0;he<ee;he+=1){var ve=X[he],de=le[ve];if(j(de))if(E(de))for(var Se=0,Ce=de.length;Se<Ce;Se+=1){var Ae=de[Se],_e=Ae.$,Oe=Ae.idx,ke=Ae.t;if(j(_e)){var Ve=u.searchIn(Ae),Xe=Ve.isMatch,Ke=Ve.score;if(Xe){var xe={score:Ke,key:ve,value:_e,idx:Oe,t:ke};S&&(xe.indices=Ve.matchedIndices),fe.push(xe)}}}else{var pe=de.$,qe=de.t,Fe=u.searchIn(de),st=Fe.isMatch,Je=Fe.score;if(!st)continue;var Qt={score:Je,key:ve,value:pe,t:qe};S&&(Qt.indices=Fe.matchedIndices),fe.push(Qt)}}fe.length&&x.push({idx:ne,item:le,matches:fe})}}return x}},{key:"_computeScore",value:function(u){for(var d=u.length,x=0;x<d;x+=1){for(var S=u[x],N=S.matches,O=N.length,q=1,F=0;F<O;F+=1){var D=N[F],R=D.key,G=D.t,$=this._keyStore.get(R,"weight"),J=$>-1?$:1,Z=D.score===0&&$>-1?Number.EPSILON:D.score,X=1/Math.sqrt(G);q*=Math.pow(Z,J*X)}S.score=q}}},{key:"_sort",value:function(u){u.sort(this.options.sortFn)}},{key:"_format",value:function(u){var d=[],x=this.options,S=x.includeMatches,N=x.includeScore,O=[];S&&O.push(wr),N&&O.push(_r);for(var q=0,F=u.length;q<F;q+=1){var D=u[q],R=D.idx,G={item:this.list[R],refIndex:R};if(O.length)for(var $=0,J=O.length;$<J;$+=1)O[$](D,G);d.push(G)}return d}}]),f}();return kr(gr),Ge.version="5.2.3",Ge.createIndex=Jt,Ge.config=W,At=Ge,At}var ha=fa();const ma=Ie(ha);class va{constructor(t=[]){this.ready=new Promise(i=>{this.resolveReady=i}),t.length&&this.init(t)}reset(t){this.fuse?this.fuse.setCollection(t):this.init(t)}init(t){this.fuse=new ma(t,{threshold:.25,distance:1e5,includeMatches:!0,keys:["label","keywords"]}),this.resolveReady()}search(t){return this.ready.then(()=>new Promise(i=>{const r=this.fuse.search(t),o=aa(r,a=>a.matches.length),e=tt(o,({item:a,matches:s})=>({...a,matches:da(tt(s,"indices"))}));i(e.sort(ti(t,"label")))}))}}function pa(n){const t=["city_state","loanTags","state","loanLimit"];return Object.keys(n).filter(r=>t.includes(r)).length>0}const Cn=new va,rr={name:"SearchBar",serverCacheKey:()=>oi("SearchBar"),components:{KvTextInput:ai},inject:["apollo"],mixins:[ii],data(){return{term:"",listIndex:-1,hasFocus:!1,searching:!1,rawResults:[],searchResultsStyle:null,mdiMagnify:Dt}},computed:{displayTerm(){return this.highlighted.label?this.highlighted.label:this.term},highlighted(){if(this.listIndex>-1){let n=this.listIndex;for(let t=0;t<this.sections.length;t+=1){if(this.sections[t].suggestions.length>n)return this.sections[t].suggestions[n];n-=this.sections[t].suggestions.length}}return{}},showResults(){return this.sections.length>0&&this.hasFocus&&!this.searching},sections(){const n=Fo(this.rawResults,"group"),t=tt(n,(r,o)=>{const e=Vo(r,5);return{name:o,suggestions:e}}),i=["Gender","Regions","Countries and Territories","United States","U.S. cities","Sectors","Group or Individual","Attributes","User tags","Partners","Gifts"];return t.sort(ni(i,"name"))}},methods:{focus(){this.$refs.input.focus()},onFocus(){this.hasFocus=!0,this.apollo.query({query:na}).then(({data:n})=>{n&&n.lend&&Cn.reset([...n.lend.loanSearchSuggestions,{group:"Gifts",label:"Kiva Cards",keywords:["gift card","kiva card","gift","gift certificate"],url:"https://www.kiva.org/gifts/kiva-cards"},{group:"Gifts",label:"Kiva Store",keywords:["gift card","kiva card","gift","gift certificate"],url:"https://store.kiva.org"}])}),this.$kvTrackEvent("search","click","Nav-search-bar")},onBlur(){this.hasFocus=!1,this.listIndex=-1},onInput(n){this.term=n},onSubmit(){this.listIndex>-1?this.runSearch(this.highlighted):this.runSearch(this.term)},listDown(){this.listIndex+=1,this.listIndex===this.rawResults.length&&(this.listIndex=-1)},listUp(){this.listIndex===-1&&(this.listIndex=this.rawResults.length),this.listIndex-=1},runSearch(n){let t;if(this.searching=!0,typeof n=="string"?this.$kvTrackEvent("search","click","custom-search-option",n):this.$kvTrackEvent("search","click","type-ahead-search",n.label),n.url)window.location=n.url;else{if(n.query){const[r,o]=n.query.split("=");t={[r]:o}}else t={queryString:n};let i="/lend/filter";pa(t)&&(i="/lend"),this.$router.currentRoute.fullPath!==`${i}?${new URLSearchParams(t).toString()}`&&this.$router.push({path:i,query:t}),this.searching=!1,this.$refs.input.blur()}},formatResult({label:n,matches:t}){if(!t||!t.length)return n;const[i,r]=ea(...t);return tt(n,(e,a)=>{const s=i.indexOf(a)>-1?'<mark class="tw-bg-tertiary tw-rounded-xs tw-mix-blend-multiply tw-p-0.5 tw--m-0.5">':"",c=r.indexOf(a)>-1?"</mark>":"";return`${s}${e}${c}`}).join("")}},watch:{hasFocus(n){if(n){const t=this.$refs.input.$el.getBoundingClientRect().bottom;this.searchResultsStyle={"--search-input-bottom":`${t}px`},this.lockScrollSmallOnly()}else this.unlockScrollSmallOnly()},term(n){this.listIndex=-1,n.length>0?Cn.search(n).then(t=>{this.rawResults=t}):this.rawResults=[]}}},ga=["data-testid"],ya={class:"tw-text-base tw-py-0.5"},wa=["onClick"],_a=["innerHTML"];function ka(n,t,i,r,o,e){const a=Y("kv-text-input");return b(),B("form",{class:"search-form tw-relative",autocomplete:"off",onSubmit:t[1]||(t[1]=me((...s)=>e.onSubmit&&e.onSubmit(...s),["prevent"]))},[t[2]||(t[2]=L("label",{for:"top-nav-search",class:"tw-sr-only"},"Search all loans",-1)),z(a,{type:"text",id:"top-nav-search",ref:"input",name:"queryString","data-testid":"header-search-text-input",icon:o.mdiMagnify,"model-value":e.displayTerm,"can-clear":!0,class:"tw-w-full",onInput:e.onInput,onFocus:e.onFocus,onBlur:e.onBlur,onKeydown:[Zt(me(e.listUp,["prevent"]),["up"]),Zt(me(e.listDown,["prevent"]),["down"])],placeholder:"Search all loans"},null,8,["icon","model-value","onInput","onFocus","onBlur","onKeydown"]),C(L("ol",{style:Te(o.searchResultsStyle),class:"search-results tw-w-full tw-bg-primary tw-p-2.5 tw-border tw-border-tertiary tw-fixed tw-z-popover tw-right-0 tw-bottom-0 tw-left-0 tw-overflow-auto md:tw-absolute md:tw-bottom-auto md:tw-top-auto md:tw-rounded-b"},[(b(!0),B(we,null,Bt(e.sections,s=>(b(),B("li",{key:s.name,class:"section","data-testid":`header-search-results-${s.name}`},[L("h2",ya,Le(s.name),1),L("ol",null,[(b(!0),B(we,null,Bt(s.suggestions,c=>(b(),B("li",{key:c.label,onMousedown:t[0]||(t[0]=me(()=>{},["prevent"])),onClick:p=>e.runSearch(c),"data-testid":"header-search-result-item",class:se(["tw-pl-1.5 tw-py-0.5 tw-rounded-xs tw-font-medium tw-cursor-pointer hover:tw-bg-secondary hover:tw-underline",{"tw-bg-secondary tw-underline":c.label===e.highlighted.label}])},[L("span",{innerHTML:e.formatResult(c)},null,8,_a)],42,wa))),128))])],8,ga))),128))],4),[[ce,e.showResults]]),t[3]||(t[3]=L("input",{type:"submit",class:"tw-sr-only","aria-hidden":"true",tabindex:"-1"},null,-1))],32)}const ba=nt(rr,[["render",ka],["__scopeId","data-v-1fa80218"]]);rr.__docgenInfo={displayName:"SearchBar",exportName:"default",description:"",tags:{},sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/SearchBar.vue"]};const An="opt_in_comms",On="home_page",ir={name:"TheHeader",components:{CampaignLogoGroup:Fr,KivaLogo:Nr,KvDropdown:Yn,KvLoadingPlaceholder:Vn,KvMaterialIcon:$e,KvPageContainer:$n,MyKivaButton:Zn,PromoCreditBanner:ri,SearchBar:ba,KvButton:Vr,TheLendMenu:De(()=>ye(()=>import("./entry-TheLendMenu-7xyXvKyGTn.js"),__vite__mapDeps([22,23,6,24,25,26,27,28,7,29,30,3,31,32,33,1,9,5,8,14,15,16,17,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,18,50,51,52,53,54,55,56,57,58]),import.meta.url)),TeamsMenu:_o,KvWwwHeader:Ji},inject:{apollo:{default:null},cookieStore:{default:null},kvAuth0:{default:null}},mixins:[So,xo,Po],data(){return{aboutMenuId:"about-header-dropdown",balance:0,basketCount:0,basketTotal:0,hasEverLoggedIn:!1,hideLendMenuTimeout:null,isBasketLoading:!1,isBorrower:!1,isLendMenuDesired:!1,isLendMenuVisible:!1,isMobile:!1,isUserDataLoading:!1,lcaLoanCount:0,lendMenuId:"lend-header-dropdown",loanId:null,mdiBriefcase:qr,mdiChevronDown:Ut,mdiMagnify:Dt,myKivaMenuId:"my-kiva-header-dropdown",profilePic:"",profilePicId:null,searchOpen:!1,teams:null,teamsMenuEnabled:!1,trusteeId:null,userId:null,isNavUpdateExp:!1,isCountriesNotLentToExp:!1,throttledDetermineIfMobile:null}},emits:["show-basket"],props:{hideSearchInHeader:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},corporate:{type:Boolean,default:!1},corporateLogoUrl:{type:String,default:""},logoHeight:{type:String,default:"28",required:!1},logoClasses:{type:String,default:"",required:!1}},computed:{isVisitor(){var n;return!this.userId&&!((n=this.$renderConfig)!=null&&n.cdnNotedLoggedIn)},isTrustee(){return!!this.trusteeId},trusteeLoansUrl(){return{path:"/lend",query:{trustee:this.trusteeId,status:"fundraising",sortBy:"newest"}}},hasBasket(){return this.corporate?this.basketCount-this.lcaLoanCount>0:this.basketCount>0},hidePromoCreditBanner(){var r;const n=["/cc","/checkout"],t=(r=this.$route)==null?void 0:r.path;return n.filter(o=>t.indexOf(o)!==-1).length>0},loginUrl(){return this.$route.path==="/"?"/ui-login":`/ui-login?doneUrl=${encodeURIComponent(this.$route.fullPath)}`},openTabletVariant(){return this.hasBasket&&this.isVisitor||this.hasBasket||this.balance},hasLargeBasket(){return this.basketTotal>500},basketNumber(){return this.hasLargeBasket?Rt(this.basketTotal).format("$0,0"):this.basketCount}},apollo:[{query:to,preFetch:!0,result({data:n}){this.teamsMenuEnabled=Vt(n,"general.teamsMenuEnabled.value")}},{query:Zi,preFetch:!0,shouldPreFetch(n,{renderConfig:t}){return!t.useCDNCaching},result({data:n}){var t,i,r,o,e,a,s,c,p,y,v,h,g,T,_,w,I,K,E,k;this.isBasketLoading=!1,this.isUserDataLoading=!1,this.userId=((i=(t=n==null?void 0:n.my)==null?void 0:t.userAccount)==null?void 0:i.id)??null,this.isBorrower=((r=n==null?void 0:n.my)==null?void 0:r.isBorrower)??!1,this.loanId=((e=(o=n==null?void 0:n.my)==null?void 0:o.mostRecentBorrowedLoan)==null?void 0:e.id)??null,this.trusteeId=((s=(a=n==null?void 0:n.my)==null?void 0:a.trustee)==null?void 0:s.id)??null,this.basketCount=((c=n==null?void 0:n.shop)==null?void 0:c.nonTrivialItemCount)??0,this.balance=Math.floor(((y=(p=n==null?void 0:n.my)==null?void 0:p.userAccount)==null?void 0:y.balance)??0),this.profilePic=((g=(h=(v=n==null?void 0:n.my)==null?void 0:v.lender)==null?void 0:h.image)==null?void 0:g.url)??"",this.profilePicId=((w=(_=(T=n==null?void 0:n.my)==null?void 0:T.lender)==null?void 0:_.image)==null?void 0:w.id)??null,this.hasEverLoggedIn=n==null?void 0:n.hasEverLoggedIn,this.basketTotal=Rt((E=(K=(I=n.shop)==null?void 0:I.basket)==null?void 0:K.totals)==null?void 0:E.itemTotal).value()||0,this.teams=((k=n==null?void 0:n.my)==null?void 0:k.teams)??{}}},{query:on,preFetch(n,t){return t.query({query:on,variables:{id:On}})}}],created(){var t,i,r;this.isBasketLoading=((t=this.$renderConfig)==null?void 0:t.useCDNCaching)??!1,this.isUserDataLoading=((i=this.$renderConfig)==null?void 0:i.useCDNCaching)&&((r=this.$renderConfig)==null?void 0:r.cdnNotedLoggedIn);const n=an(this.apollo,this.$kvTrackEvent,"event-tracking",On,"EXP-MP-1696-Aug2025");this.isNavUpdateExp=(n==null?void 0:n.version)==="b"},mounted(){var r;const{version:n}=this.apollo.readFragment({id:`Experiment:${An}`,fragment:Kt})??{};n&&this.cookieStore.set(An,n,{path:"/"});const t=this.cookieStore.get(ui)==="true",i=this.cookieStore.get(li)==="true";ci(t),di(i),Qi({userId:this.userId,hasEverLoggedIn:this.hasEverLoggedIn,hasLentBefore:t,hasDepositBefore:i}),this.throttledDetermineIfMobile=Br(()=>{this.determineIfMobile()},200),this.determineIfMobile(),window.addEventListener("resize",this.throttledDetermineIfMobile),this.isVisitor||(this.isCountriesNotLentToExp=((r=an(this.apollo,this.$kvTrackEvent,"Lending",tr,"EXP-MP-1824-Aug2025"))==null?void 0:r.version)==="b")},beforeUnmount(){window.removeEventListener("resize",this.throttledDetermineIfMobile)},methods:{determineIfMobile(){this.isMobile=document.documentElement.clientWidth<735},toggleLendMenu(n=!1){var i,r,o;const t=this.isLendMenuVisible;n?this.isLendMenuVisible=!this.isLendMenuVisible:this.isLendMenuVisible?(clearTimeout(this.hideLendMenuTimeout),this.hideLendMenuTimeout=setTimeout(()=>{this.isLendMenuDesired||(this.isLendMenuVisible=!1)},500)):this.isLendMenuVisible=!0,!t&&this.isLendMenuVisible&&((o=(r=(i=this.$refs)==null?void 0:i.lendMenu)==null?void 0:r.onLoad)==null||o.call(r))},onLendLinkPointerEnter(n){n.pointerType!=="touch"&&(this.isLendMenuDesired=!0,this.toggleLendMenu())},onLendLinkPointerLeave(n){n.pointerType!=="touch"&&(this.isLendMenuDesired=!1,this.toggleLendMenu())},onLendLinkPointerUp(n){n.pointerType==="touch"?this.toggleLendMenu(!0):this.$router.push({path:"/lend-by-category"}).catch(()=>{})},onLendLinkClick(n){n.pointerType!=="touch"&&this.$router.push({path:"/lend-by-category"}).catch(()=>{})},onLendMenuPointerEnter(n){n.pointerType!=="touch"&&(this.isLendMenuDesired=!0,this.toggleLendMenu())},onLendMenuPointerLeave(n){n.pointerType!=="touch"&&(this.isLendMenuDesired=!1,this.toggleLendMenu())},onLendMenuShow(){this.$kvTrackEvent("TopNav","hover-Lend-menu","Lend")},onLendMenuHide(){this.$refs.lendMenu&&this.$refs.lendMenu.onClose()},addHashToRoute(n){const t={...this.$route};return t.hash=n,t},loadLendInfo(){this.$refs.lendMenu&&this.$refs.lendMenu.onLoad()},toggleMobileSearch(){this.searchOpen=!this.searchOpen,document.activeElement.blur(),this.searchOpen&&this.$nextTick(()=>{this.$refs.search.focus()})},withinBoundaryCheck(n){var r,o;const t=((o=(r=this.$refs)==null?void 0:r.lendMenu)==null?void 0:o.$el)??null;if(!t)return!1;n.composedPath().includes(t)||this.toggleLendMenu(!0)},loadMenu(){this.$refs.newExpHeader&&this.$refs.newExpHeader.loadMenuData(this.apollo)}},watch:{isVisitor(n,t){n!==t&&!n&&this.$refs.userDropdown&&this.$nextTick(()=>{this.$refs.userDropdown.remakeDropdown()})},isLendMenuVisible(){setTimeout(()=>{this.isLendMenuVisible===!0?(this.onLendMenuShow(),document.addEventListener("pointerup",this.withinBoundaryCheck)):(this.onLendMenuHide(),document.removeEventListener("pointerup",this.withinBoundaryCheck))})},basketCount(){this.lcaLoanCount=this.cookieStore.get("lcaid")?1:0}}},Ma={key:1,"aria-label":"Primary navigation",class:"tw-bg-primary tw-border-b tw-border-tertiary tw-relative"},Sa={key:0,class:"tw-flex tw-justify-center"},xa=["href"],Ta={key:1,class:"tw-flex tw-gap-2.5 lg:tw-gap-6 tw-items-center align-middle"},La={class:"tw-bg-secondary tw-rounded-xs tw-py-0.5 tw-px-1 tw-mr-1"},Ia={key:0,class:"tw-w-1 tw-h-3"},Pa={class:"header__logo"},Na=["href"],Ea={class:"tw-flex tw-items-center"},Ca={class:"tw-absolute tw-left-0 tw-right-0 tw-top-8 md:tw-top-9 tw-z-dropdown tw-bg-primary tw-border-b tw-border-tertiary","data-testid":"header-lend-dropdown-list",style:{"margin-top":"1px"}},Aa=["aria-expanded","aria-pressed"],Oa={class:"tw-flex"},qa={href:"/about/partner-with-us"},Fa={href:"/about/how"},Ba={href:"/about/press-center"},Ra={class:"tw-bg-secondary tw-rounded-xs tw-py-0.5 tw-px-1 tw-mr-1"},Ha={key:0,class:"tw-w-1 tw-h-3"},Da={class:"tw-absolute tw-w-4 tw-h-4 tw-pt-0.5 tw-flex tw-items-center tw-justify-center tw-text-white tw-text-small tw-font-medium"},Ua={key:0,class:"tw-w-1 tw-h-1.5"};function Va(n,t,i,r,o,e){const a=Y("KvWwwHeader"),s=Y("kiva-logo"),c=Y("campaign-logo-group"),p=Y("kv-loading-placeholder"),y=Y("my-kiva-button"),v=Y("kv-button"),h=Y("kv-material-icon"),g=Y("router-link"),T=Y("the-lend-menu"),_=Y("kv-page-container"),w=Y("search-bar"),I=Y("teams-menu"),K=Y("kv-dropdown"),E=Y("promo-credit-banner"),k=je("kv-track-event");return b(),B("header",{class:se(["tw-transition-all tw-duration-1000 tw-ease-in-out",n.isInExperimentPages&n.enableAddToBasketExp?"tw-sticky tw-top-0 tw-z-sticky":""])},[o.isNavUpdateExp?(b(),V(a,{key:0,class:"tw-bg-primary tw-border-b tw-border-tertiary tw-relative",ref:"newExpHeader","logged-in":!e.isVisitor,"basket-count":o.basketCount,"login-url":e.loginUrl,balance:o.balance,"is-borrower":o.isBorrower,"is-trustee":e.isTrustee,"user-id":o.userId,"is-mobile":o.isMobile,"lender-image-url":o.profilePic,"countries-not-lent-to-url":n.countriesNotLentToUrl,"show-m-g-upsell-link":"",onLoadLendMenuData:e.loadMenu},null,8,["logged-in","basket-count","login-url","balance","is-borrower","is-trustee","user-id","is-mobile","lender-image-url","countries-not-lent-to-url","onLoadLendMenuData"])):(b(),B("nav",Ma,[z(_,null,{default:U(()=>[i.minimal?(b(),B("div",Sa,[C((b(),B("a",{class:"header__button tw-inline-flex",href:n.homePagePath,"data-testid":"header-home"},[z(s,{class:"tw-w-6 tw-text-brand",style:{transform:"translateY(-0.1875rem)"}}),t[2]||(t[2]=L("span",{class:"tw-sr-only"},"Kiva Home",-1))],8,xa)),[[k,["TopNav","click-Logo"]]])])):i.corporate?(b(),B("div",Ta,[z(c,{class:"tw-h-2.5 lg:tw-h-3.5","corporate-logo-url":i.corporateLogoUrl,"logo-height":i.logoHeight,"logo-classes":i.logoClasses},null,8,["corporate-logo-url","logo-height","logo-classes"]),t[5]||(t[5]=L("div",{class:"tw-flex-1"},null,-1)),C((b(),B("span",{onClick:t[0]||(t[0]=m=>n.$emit("show-basket")),"data-testid":"header-basket",class:"header__button header__basket tw-cursor-pointer",style:Te(o.isBasketLoading?{display:"var(--ui-data-corporate-basket-count-display, inline-flex)"}:{display:e.hasBasket?"inline-flex":"none"})},[L("span",La,[o.isBasketLoading?(b(),B("div",Ia,[z(p)])):(b(),B(we,{key:1},[H(Le(o.basketCount-o.lcaLoanCount),1)],64))]),t[3]||(t[3]=H(" Basket "))],4)),[[k,["TopNav","click-Basket"]]]),C(z(y,{id:o.myKivaMenuId,class:"header__button header__portfolio",balance:o.balance,"is-user-data-loading":o.isUserDataLoading,"profile-pic":o.profilePic,"profile-pic-id":o.profilePicId},null,8,["id","balance","is-user-data-loading","profile-pic","profile-pic-id"]),[[ce,!e.isVisitor]]),C((b(),V(v,{variant:"secondary",class:"tw-bg-white tw-whitespace-nowrap",to:e.loginUrl,"data-testid":"header-log-in"},{default:U(()=>t[4]||(t[4]=[H(" Log in ")]),void 0,!0),_:1,__:[4]},8,["to"])),[[ce,e.isVisitor],[k,["TopNav","click-Sign-in"]]])])):(b(),B("div",{key:2,class:se(["header tw-grid xl:tw-gap-x-4 tw-items-center",{"tw-gap-x-1 ":o.isMobile,"tw-gap-x-2.5":!o.isMobile,"header--mobile-open":o.searchOpen||e.isVisitor,"header--tablet-open":e.openTabletVariant}])},[L("div",Pa,[C((b(),B("a",{class:"header__button tw-inline-flex",href:n.homePagePath,"data-testid":"header-home"},[z(s,{class:"tw-w-6 tw-text-brand",style:{transform:"translateY(-0.1875rem)"}}),t[6]||(t[6]=L("span",{class:"tw-sr-only"},"Kiva Home",-1))],8,Na)),[[k,["TopNav","click-Logo"]]])]),C((b(),V(g,{id:o.lendMenuId,to:"/lend-by-category","data-testid":"header-lend",class:"header__button header__lend tw-inline-flex",onPointerenter:me(e.onLendLinkPointerEnter,["stop"]),onPointerleave:me(e.onLendLinkPointerLeave,["stop"]),onPointerup:me(e.onLendLinkPointerUp,["stop"]),onClick:me(e.onLendLinkClick,["stop"])},{default:U(()=>[L("span",Ea,[t[7]||(t[7]=H("Lend ")),z(h,{class:se(["tw-w-3 tw-h-3 tw-transition-transform tw-duration-300",{"tw-rotate-180":o.isLendMenuVisible}]),icon:o.mdiChevronDown},null,8,["icon","class"])])],void 0,!0),_:1},8,["id","onPointerenter","onPointerleave","onPointerup","onClick"])),[[k,["TopNav","click-Lend"]]]),z(Ft,{name:"kvfastfade"},{default:U(()=>[C(L("div",Ca,[z(_,null,{default:U(()=>[z(T,{ref:"lendMenu",onPointerenter:e.onLendMenuPointerEnter,onPointerleave:e.onLendMenuPointerLeave},null,8,["onPointerenter","onPointerleave"])],void 0,!0),_:1})],512),[[ce,o.isLendMenuVisible]])],void 0,!0),_:1}),i.hideSearchInHeader?ge("",!0):(b(),B("div",{key:0,"data-testid":"header-search-area",id:"top-nav-search-area",class:se(["header__search tw-py-1.5 md:py-0 tw--mx-2.5 tw-px-2 md:tw-mx-0 md:tw-px-0 tw-border-t tw-border-tertiary md:tw-border-t-0 lg:tw-block",{"tw-hidden":!o.searchOpen||e.isVisitor,"md:tw-hidden":e.hasBasket&&e.isVisitor&&!o.searchOpen||!o.searchOpen,"md:tw-block":o.searchOpen||!e.isVisitor,"md:!tw-block":o.searchOpen&&e.hasBasket&&o.balance||!e.hasBasket,"lg:tw-block":e.hasBasket}])},[z(w,{ref:"search"},null,512)],2)),L("div",{class:se(["header__right-side tw-flex tw-justify-end xl:tw-gap-4 align-middle",{"tw-gap-1":o.isMobile,"tw-gap-2.5":!o.isMobile}])},[C((b(),B("button",{class:se(["header__button header__search-icon tw-inline-flex",{"!tw-hidden":e.isVisitor,"md:!tw-hidden":!e.hasBasket,"md:!tw-inline-flex lg:!tw-hidden":e.isVisitor&&e.hasBasket,"lg:!tw-hidden":!e.isVisitor}]),"data-testid":"header-mobile-search-toggle","aria-expanded":o.searchOpen?"true":"false","aria-pressed":o.searchOpen?"true":"false","aria-controls":"top-nav-search-area",onClick:t[1]||(t[1]=(...m)=>e.toggleMobileSearch&&e.toggleMobileSearch(...m))},[z(h,{class:"tw-w-3 tw-h-3",icon:o.mdiMagnify},null,8,["icon"])],10,Aa)),[[ce,!i.hideSearchInHeader],[k,["TopNav","click-search-toggle"]]]),C((b(),V(g,{to:"/borrow","data-testid":"header-borrow",class:se(["header__borrow",{"tw-hidden":!e.isVisitor,"header__button !tw-hidden md:!tw-flex":e.isVisitor}])},{default:U(()=>t[8]||(t[8]=[H(" Borrow ")]),void 0,!0),_:1,__:[8]},8,["class"])),[[ce,!o.isMobile],[k,["TopNav","click-Borrow"]]]),!e.isVisitor&&o.teamsMenuEnabled?(b(),V(I,{key:0,class:"tw-hidden lg:tw-block",teams:o.teams},null,8,["teams"])):ge("",!0),L("div",{class:se(["tw-group",{"tw-hidden md:tw-block":!e.isVisitor}])},[C((b(),V(g,{id:o.aboutMenuId,to:"/about","data-testid":"header-about",class:"header__about header__button tw-inline-flex"},{default:U(()=>[L("span",Oa,[t[9]||(t[9]=H(" About ")),z(h,{class:"tw-w-3 tw-h-3 tw-transition-transform tw-duration-300 group-hover:tw-rotate-180",icon:o.mdiChevronDown},null,8,["icon"])])],void 0,!0),_:1},8,["id"])),[[k,["TopNav","click-About"]]]),z(K,{controller:o.aboutMenuId,class:"dropdown-list","data-testid":"header-about-dropdown-list"},{default:U(()=>[L("ul",null,[L("li",null,[C((b(),V(g,{to:"/about"},{default:U(()=>t[10]||(t[10]=[H(" About us ")]),void 0,!0),_:1,__:[10]})),[[k,["TopNav","click-About-About us"]]])]),L("li",null,[C((b(),B("a",qa,t[11]||(t[11]=[H(" Partner with us ")]))),[[k,["TopNav","click-About-Partner with us"]]])]),L("li",null,[C((b(),B("a",Fa,t[12]||(t[12]=[H(" How Kiva works ")]))),[[k,["TopNav","click-About-How Kiva works"]]])]),L("li",null,[C((b(),V(g,{to:"/donate/supportus"},{default:U(()=>t[13]||(t[13]=[H(" Support Kiva ")]),void 0,!0),_:1,__:[13]})),[[k,["TopNav","click-Support-Kiva"]]])]),L("li",null,[C((b(),V(g,{to:"/about/where-kiva-works"},{default:U(()=>t[14]||(t[14]=[H(" Where Kiva works ")]),void 0,!0),_:1,__:[14]})),[[k,["TopNav","click-About-Where Kiva works"]]])]),L("li",null,[C((b(),V(g,{to:"/impact"},{default:U(()=>t[15]||(t[15]=[H(" Impact ")]),void 0,!0),_:1,__:[15]})),[[k,["TopNav","click-About-Impact"]]])]),L("li",null,[C((b(),V(g,{to:"/about/leadership"},{default:U(()=>t[16]||(t[16]=[H(" Leadership ")]),void 0,!0),_:1,__:[16]})),[[k,["TopNav","click-About-Leadership"]]])]),L("li",null,[C((b(),V(g,{to:"/about/finances"},{default:U(()=>t[17]||(t[17]=[H(" Finances ")]),void 0,!0),_:1,__:[17]})),[[k,["TopNav","click-About-Finances"]]])]),L("li",null,[C((b(),B("a",Ba,t[18]||(t[18]=[H(" Press ")]))),[[k,["TopNav","click-About-Press"]]])]),L("li",null,[C((b(),V(g,{to:"/about/due-diligence"},{default:U(()=>t[19]||(t[19]=[H(" Due diligence ")]),void 0,!0),_:1,__:[19]})),[[k,["TopNav","click-About-Due diligence"]]])])])],void 0,!0),_:1},8,["controller"])],2),L("div",{style:Te(o.isBasketLoading?{display:"var(--ui-data-basket-count-display, flex)"}:{display:e.hasBasket?"flex":"none"})},[C((b(),V(g,{to:"/basket","data-testid":"header-basket",class:se(["header__button header__basket",{"tw-hidden md:tw-flex":!e.hasLargeBasket,"tw-flex":e.hasLargeBasket}])},{default:U(()=>[L("span",Ra,[o.isBasketLoading?(b(),B("div",Ha,[z(p)])):(b(),B(we,{key:1},[H(Le(e.basketNumber),1)],64))]),t[20]||(t[20]=L("span",{class:"tw-hidden md:tw-flex"},"Basket",-1))],void 0,!0),_:1,__:[20]},8,["class"])),[[k,["TopNav","click-Basket"]]]),C((b(),V(g,{to:"/basket","data-testid":"header-basket",class:"tw-flex tw-items-center tw-relative md:tw-hidden tw-text-eco-green-4"},{default:U(()=>[L("span",Da,[o.isBasketLoading?(b(),B("div",Ua,[z(p)])):(b(),B(we,{key:1},[H(Le(o.basketCount),1)],64))]),z(h,{icon:o.mdiBriefcase,class:"tw-inline-block tw-w-4 tw-h-4"},null,8,["icon"])],void 0,!0),_:1})),[[k,["TopNav","click-Basket"]]])],4),C((b(),V(g,{class:"header__button tw-bg-white tw-whitespace-nowrap tw-inline-flex",to:e.loginUrl,"data-testid":"header-log-in"},{default:U(()=>t[21]||(t[21]=[H(" Log in ")]),void 0,!0),_:1,__:[21]},8,["to"])),[[ce,e.isVisitor],[k,["TopNav","click-Sign-in"]]]),C((b(),V(v,{variant:"secondary",class:"tw-hidden md:tw-block tw-bg-white tw-whitespace-nowrap",href:"/donate/supportus","data-testid":"header-support-kiva"},{default:U(()=>t[22]||(t[22]=[H(" Support Kiva ")]),void 0,!0),_:1,__:[22]})),[[ce,!o.isMobile],[k,["TopNav","click-Support-Kiva"]]]),C(z(y,{id:o.myKivaMenuId,class:"header__button header__portfolio",balance:o.balance,"is-user-data-loading":o.isUserDataLoading,"profile-pic":o.profilePic,"profile-pic-id":o.profilePicId},null,8,["id","balance","is-user-data-loading","profile-pic","profile-pic-id"]),[[ce,!e.isVisitor]]),C(z(K,{controller:o.myKivaMenuId,class:"dropdown-list","data-testid":"header-my-kiva-dropdown-list",id:"my-kiva-dropdown",ref:"userDropdown"},{default:U(()=>[L("ul",null,[o.isBorrower?(b(),B(we,{key:0},[L("li",null,[C((b(),V(g,{to:"/my/borrower"},{default:U(()=>t[23]||(t[23]=[H(" My borrower dashboard ")]),void 0,!0),_:1,__:[23]})),[[k,["TopNav","click-Portfolio-My borrower dashboard"]]])]),o.loanId!==null?(b(),B(we,{key:0},[L("li",null,[C((b(),V(g,{to:`/lend/${o.loanId}`},{default:U(()=>t[24]||(t[24]=[H(" My loan page ")]),void 0,!0),_:1,__:[24]},8,["to"])),[[k,["TopNav","click-Portfolio-My loan page"]]])]),L("li",null,[C((b(),V(g,{to:`/lend-classic/${o.loanId}#loanComments`},{default:U(()=>t[25]||(t[25]=[H(" My conversations ")]),void 0,!0),_:1,__:[25]},8,["to"])),[[k,["TopNav","click-Portfolio-My Conversations"]]])])],64)):ge("",!0)],64)):ge("",!0),e.isTrustee?(b(),B(we,{key:1},[o.isBorrower?ge("",!0):(b(),B(we,{key:0},[L("li",null,[C((b(),V(g,{to:e.trusteeLoansUrl},{default:U(()=>t[26]||(t[26]=[H(" My Trustee loans ")]),void 0,!0),_:1,__:[26]},8,["to"])),[[k,["TopNav","click-Portfolio-My Trustee loans"]]])]),L("li",null,[C((b(),V(g,{to:`/trustees/${o.trusteeId}`},{default:U(()=>t[27]||(t[27]=[H(" My public Trustee page ")]),void 0,!0),_:1,__:[27]},8,["to"])),[[k,["TopNav","click-Portfolio-My public Trustee page"]]])])],64)),L("li",null,[C((b(),V(g,{to:"/my/trustee"},{default:U(()=>t[28]||(t[28]=[H(" My Trustee dashboard ")]),void 0,!0),_:1,__:[28]})),[[k,["TopNav","click-Portfolio-My Trustee dashboard"]]])]),t[29]||(t[29]=L("hr",null,null,-1))],64)):ge("",!0),L("li",null,[C((b(),V(g,{to:"/portfolio"},{default:U(()=>t[30]||(t[30]=[H(" Portfolio ")]),void 0,!0),_:1,__:[30]})),[[k,["TopNav","click-Portfolio-Portfolio"]]])]),L("li",null,[C((b(),V(g,{to:"/teams/my-teams"},{default:U(()=>t[31]||(t[31]=[H(" My teams ")]),void 0,!0),_:1,__:[31]})),[[k,["TopNav","click-Portfolio-My teams"]]])]),L("li",null,[C((b(),V(g,{to:"/portfolio/donations"},{default:U(()=>t[32]||(t[32]=[H(" Donations ")]),void 0,!0),_:1,__:[32]})),[[k,["TopNav","click-Portfolio-Donations"]]])]),L("li",null,[C((b(),V(g,{to:"/settings"},{default:U(()=>t[33]||(t[33]=[H(" Settings ")]),void 0,!0),_:1,__:[33]})),[[k,["TopNav","click-Portfolio-Settings"]]])]),C(L("li",null,[C((b(),V(g,{to:"/donate/supportus"},{default:U(()=>t[34]||(t[34]=[H(" Support Kiva ")]),void 0,!0),_:1,__:[34]})),[[k,["TopNav","click-Support-Kiva"]]])],512),[[ce,o.isMobile]]),t[36]||(t[36]=L("hr",null,null,-1)),L("li",null,[C((b(),V(g,{to:"/ui-logout"},{default:U(()=>t[35]||(t[35]=[H(" Sign out ")]),void 0,!0),_:1,__:[35]})),[[k,["TopNav","click-Portfolio-Sign out"]]])])])],void 0,!0),_:1},8,["controller"]),[[ce,!e.isVisitor]])],2)],2))],void 0),_:1})])),e.hidePromoCreditBanner?ge("",!0):(b(),V(E,{key:2}))],2)}const Cs=nt(ir,[["render",Va],["__scopeId","data-v-28ef7639"]]);ir.__docgenInfo={displayName:"TheHeader",exportName:"default",description:"",tags:{},props:[{name:"hideSearchInHeader",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"minimal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"corporate",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"corporateLogoUrl",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"logoHeight",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"'28'"}},{name:"logoClasses",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"''"}}],events:[{name:"show-basket"}],sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/TheHeader.vue"]};var et={exports:{}};/*! store2 - v2.14.3 - 2024-02-14
* Copyright (c) 2024 Nathan Bubna; Licensed MIT */var Ot=et.exports,qn;function Ka(){return qn||(qn=1,function(n){(function(t,i){var r={version:"2.14.3",areas:{},apis:{},nsdelim:".",inherit:function(e,a){for(var s in e)a.hasOwnProperty(s)||Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(e,s));return a},stringify:function(e,a){return e===void 0||typeof e=="function"?e+"":JSON.stringify(e,a||r.replace)},parse:function(e,a){try{return JSON.parse(e,a||r.revive)}catch{return e}},fn:function(e,a){r.storeAPI[e]=a;for(var s in r.apis)r.apis[s][e]=a},get:function(e,a){return e.getItem(a)},set:function(e,a,s){e.setItem(a,s)},remove:function(e,a){e.removeItem(a)},key:function(e,a){return e.key(a)},length:function(e){return e.length},clear:function(e){e.clear()},Store:function(e,a,s){var c=r.inherit(r.storeAPI,function(y,v,h){return arguments.length===0?c.getAll():typeof v=="function"?c.transact(y,v,h):v!==void 0?c.set(y,v,h):typeof y=="string"||typeof y=="number"?c.get(y):typeof y=="function"?c.each(y):y?c.setAll(y,v):c.clear()});c._id=e;try{var p="__store2_test";a.setItem(p,"ok"),c._area=a,a.removeItem(p)}catch{c._area=r.storage("fake")}return c._ns=s||"",r.areas[e]||(r.areas[e]=c._area),r.apis[c._ns+c._id]||(r.apis[c._ns+c._id]=c),c},storeAPI:{area:function(e,a){var s=this[e];return(!s||!s.area)&&(s=r.Store(e,a,this._ns),this[e]||(this[e]=s)),s},namespace:function(e,a,s){if(s=s||this._delim||r.nsdelim,!e)return this._ns?this._ns.substring(0,this._ns.length-s.length):"";var c=e,p=this[c];if((!p||!p.namespace)&&(p=r.Store(this._id,this._area,this._ns+c+s),p._delim=s,this[c]||(this[c]=p),!a))for(var y in r.areas)p.area(y,r.areas[y]);return p},isFake:function(e){return e?(this._real=this._area,this._area=r.storage("fake")):e===!1&&(this._area=this._real||this._area),this._area.name==="fake"},toString:function(){return"store"+(this._ns?"."+this.namespace():"")+"["+this._id+"]"},has:function(e){return this._area.has?this._area.has(this._in(e)):this._in(e)in this._area},size:function(){return this.keys().length},each:function(e,a){for(var s=0,c=r.length(this._area);s<c;s++){var p=this._out(r.key(this._area,s));if(p!==void 0&&e.call(this,p,this.get(p),a)===!1)break;c>r.length(this._area)&&(c--,s--)}return a||this},keys:function(e){return this.each(function(a,s,c){c.push(a)},e||[])},get:function(e,a){var s=r.get(this._area,this._in(e)),c;return typeof a=="function"&&(c=a,a=null),s!==null?r.parse(s,c):a??s},getAll:function(e){return this.each(function(a,s,c){c[a]=s},e||{})},transact:function(e,a,s){var c=this.get(e,s),p=a(c);return this.set(e,p===void 0?c:p),this},set:function(e,a,s){var c=this.get(e),p;return c!=null&&s===!1?a:(typeof s=="function"&&(p=s,s=void 0),r.set(this._area,this._in(e),r.stringify(a,p),s)||c)},setAll:function(e,a){var s,c;for(var p in e)c=e[p],this.set(p,c,a)!==c&&(s=!0);return s},add:function(e,a,s){var c=this.get(e);if(c instanceof Array)a=c.concat(a);else if(c!==null){var p=typeof c;if(p===typeof a&&p==="object"){for(var y in a)c[y]=a[y];a=c}else a=c+a}return r.set(this._area,this._in(e),r.stringify(a,s)),a},remove:function(e,a){var s=this.get(e,a);return r.remove(this._area,this._in(e)),s},clear:function(){return this._ns?this.each(function(e){r.remove(this._area,this._in(e))},1):r.clear(this._area),this},clearAll:function(){var e=this._area;for(var a in r.areas)r.areas.hasOwnProperty(a)&&(this._area=r.areas[a],this.clear());return this._area=e,this},_in:function(e){return typeof e!="string"&&(e=r.stringify(e)),this._ns?this._ns+e:e},_out:function(e){return this._ns?e&&e.indexOf(this._ns)===0?e.substring(this._ns.length):void 0:e}},storage:function(e){return r.inherit(r.storageAPI,{items:{},name:e})},storageAPI:{length:0,has:function(e){return this.items.hasOwnProperty(e)},key:function(e){var a=0;for(var s in this.items)if(this.has(s)&&e===a++)return s},setItem:function(e,a){this.has(e)||this.length++,this.items[e]=a},removeItem:function(e){this.has(e)&&(delete this.items[e],this.length--)},getItem:function(e){return this.has(e)?this.items[e]:null},clear:function(){for(var e in this.items)this.removeItem(e)}}},o=r.Store("local",function(){try{return localStorage}catch{}}());o.local=o,o._=r,o.area("session",function(){try{return sessionStorage}catch{}}()),o.area("page",r.storage("page")),typeof i=="function"&&i.amd!==void 0?i("store2",[],function(){return o}):n.exports?n.exports=o:(t.store&&(r.conflict=t.store),t.store=o)})(Ot,Ot&&Ot.define)}(et)),et.exports}var ja=Ka();const Ye=Ie(ja);function Ze(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qt={exports:{}},Fn;function $a(){return Fn||(Fn=1,function(n,t){(function(i){n.exports=i()})(function(){return function(){function i(r,o,e){function a(p,y){if(!o[p]){if(!r[p]){var v=typeof Ze=="function"&&Ze;if(!y&&v)return v(p,!0);if(s)return s(p,!0);var h=new Error("Cannot find module '"+p+"'");throw h.code="MODULE_NOT_FOUND",h}var g=o[p]={exports:{}};r[p][0].call(g.exports,function(T){var _=r[p][1][T];return a(_||T)},g,g.exports,i,r,o,e)}return o[p].exports}for(var s=typeof Ze=="function"&&Ze,c=0;c<e.length;c++)a(e[c]);return a}return i}()({1:[function(i,r,o){var e=i("./raw"),a=[],s=[],c=e.makeRequestCallFromTimer(p);function p(){if(s.length)throw s.shift()}r.exports=y;function y(h){var g;a.length?g=a.pop():g=new v,g.task=h,e(g)}function v(){this.task=null}v.prototype.call=function(){try{this.task.call()}catch(h){y.onerror?y.onerror(h):(s.push(h),c())}finally{this.task=null,a[a.length]=this}}},{"./raw":2}],2:[function(i,r,o){r.exports=e;function e(_){a.length||s(),a[a.length]=_}var a=[],s,c=0,p=1024;function y(){for(;c<a.length;){var _=c;if(c=c+1,a[_].call(),c>p){for(var w=0,I=a.length-c;w<I;w++)a[w]=a[w+c];a.length-=c,c=0}}a.length=0,c=0}var v=typeof en<"u"?en:self,h=v.MutationObserver||v.WebKitMutationObserver;typeof h=="function"?s=g(y):s=T(y),e.requestFlush=s;function g(_){var w=1,I=new h(_),K=document.createTextNode("");return I.observe(K,{characterData:!0}),function(){w=-w,K.data=w}}function T(_){return function(){var I=setTimeout(E,0),K=setInterval(E,50);function E(){clearTimeout(I),clearInterval(K),_()}}}e.makeRequestCallFromTimer=T},{}],3:[function(i,r,o){r.exports=i("./lib")},{"./lib":8}],4:[function(i,r,o){var e=i("asap/raw");function a(){}var s=null,c={};function p(m){try{return m.then}catch(M){return s=M,c}}function y(m,M){try{return m(M)}catch(A){return s=A,c}}function v(m,M,A){try{m(M,A)}catch(j){return s=j,c}}r.exports=h;function h(m){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof m!="function")throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,m!==a&&k(m,this)}h._Y=null,h._Z=null,h._0=a,h.prototype.then=function(m,M){if(this.constructor!==h)return g(this,m,M);var A=new h(a);return T(this,new E(m,M,A)),A};function g(m,M,A){return new m.constructor(function(j,P){var te=new h(a);te.then(j,P),T(m,new E(M,A,te))})}function T(m,M){for(;m._V===3;)m=m._W;if(h._Y&&h._Y(m),m._V===0){if(m._U===0){m._U=1,m._X=M;return}if(m._U===1){m._U=2,m._X=[m._X,M];return}m._X.push(M);return}_(m,M)}function _(m,M){e(function(){var A=m._V===1?M.onFulfilled:M.onRejected;if(A===null){m._V===1?w(M.promise,m._W):I(M.promise,m._W);return}var j=y(A,m._W);j===c?I(M.promise,s):w(M.promise,j)})}function w(m,M){if(M===m)return I(m,new TypeError("A promise cannot be resolved with itself."));if(M&&(typeof M=="object"||typeof M=="function")){var A=p(M);if(A===c)return I(m,s);if(A===m.then&&M instanceof h){m._V=3,m._W=M,K(m);return}else if(typeof A=="function"){k(A.bind(M),m);return}}m._V=1,m._W=M,K(m)}function I(m,M){m._V=2,m._W=M,h._Z&&h._Z(m,M),K(m)}function K(m){if(m._U===1&&(T(m,m._X),m._X=null),m._U===2){for(var M=0;M<m._X.length;M++)T(m,m._X[M]);m._X=null}}function E(m,M,A){this.onFulfilled=typeof m=="function"?m:null,this.onRejected=typeof M=="function"?M:null,this.promise=A}function k(m,M){var A=!1,j=v(m,function(P){A||(A=!0,w(M,P))},function(P){A||(A=!0,I(M,P))});!A&&j===c&&(A=!0,I(M,s))}},{"asap/raw":2}],5:[function(i,r,o){var e=i("./core.js");r.exports=e,e.prototype.done=function(a,s){var c=arguments.length?this.then.apply(this,arguments):this;c.then(null,function(p){setTimeout(function(){throw p},0)})}},{"./core.js":4}],6:[function(i,r,o){var e=i("./core.js");r.exports=e;var a=h(!0),s=h(!1),c=h(null),p=h(void 0),y=h(0),v=h("");function h(T){var _=new e(e._0);return _._V=1,_._W=T,_}e.resolve=function(T){if(T instanceof e)return T;if(T===null)return c;if(T===void 0)return p;if(T===!0)return a;if(T===!1)return s;if(T===0)return y;if(T==="")return v;if(typeof T=="object"||typeof T=="function")try{var _=T.then;if(typeof _=="function")return new e(_.bind(T))}catch(w){return new e(function(I,K){K(w)})}return h(T)};var g=function(T){return typeof Array.from=="function"?(g=Array.from,Array.from(T)):(g=function(_){return Array.prototype.slice.call(_)},Array.prototype.slice.call(T))};e.all=function(T){var _=g(T);return new e(function(w,I){if(_.length===0)return w([]);var K=_.length;function E(m,M){if(M&&(typeof M=="object"||typeof M=="function"))if(M instanceof e&&M.then===e.prototype.then){for(;M._V===3;)M=M._W;if(M._V===1)return E(m,M._W);M._V===2&&I(M._W),M.then(function(P){E(m,P)},I);return}else{var A=M.then;if(typeof A=="function"){var j=new e(A.bind(M));j.then(function(P){E(m,P)},I);return}}_[m]=M,--K===0&&w(_)}for(var k=0;k<_.length;k++)E(k,_[k])})},e.reject=function(T){return new e(function(_,w){w(T)})},e.race=function(T){return new e(function(_,w){g(T).forEach(function(I){e.resolve(I).then(_,w)})})},e.prototype.catch=function(T){return this.then(null,T)}},{"./core.js":4}],7:[function(i,r,o){var e=i("./core.js");r.exports=e,e.prototype.finally=function(a){return this.then(function(s){return e.resolve(a()).then(function(){return s})},function(s){return e.resolve(a()).then(function(){throw s})})}},{"./core.js":4}],8:[function(i,r,o){r.exports=i("./core.js"),i("./done.js"),i("./finally.js"),i("./es6-extensions.js"),i("./node-extensions.js"),i("./synchronous.js")},{"./core.js":4,"./done.js":5,"./es6-extensions.js":6,"./finally.js":7,"./node-extensions.js":9,"./synchronous.js":10}],9:[function(i,r,o){var e=i("./core.js"),a=i("asap");r.exports=e,e.denodeify=function(y,v){return typeof v=="number"&&v!==1/0?c(y,v):p(y)};var s="function (err, res) {if (err) { rj(err); } else { rs(res); }}";function c(y,v){for(var h=[],g=0;g<v;g++)h.push("a"+g);var T=["return function ("+h.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(h).concat([s]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],T)(e,y)}function p(y){for(var v=Math.max(y.length-1,3),h=[],g=0;g<v;g++)h.push("a"+g);var T=["return function ("+h.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+v+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+s+";","var res;","switch (argLength) {",h.concat(["extra"]).map(function(_,w){return"case "+w+":res = fn.call("+["self"].concat(h.slice(0,w)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],T)(e,y)}e.nodeify=function(y){return function(){var v=Array.prototype.slice.call(arguments),h=typeof v[v.length-1]=="function"?v.pop():null,g=this;try{return y.apply(this,arguments).nodeify(h,g)}catch(T){if(h===null||typeof h>"u")return new e(function(_,w){w(T)});a(function(){h.call(g,T)})}}},e.prototype.nodeify=function(y,v){if(typeof y!="function")return this;this.then(function(h){a(function(){y.call(v,null,h)})},function(h){a(function(){y.call(v,h)})})}},{"./core.js":4,asap:1}],10:[function(i,r,o){var e=i("./core.js");r.exports=e,e.enableSynchronous=function(){e.prototype.isPending=function(){return this.getState()==0},e.prototype.isFulfilled=function(){return this.getState()==1},e.prototype.isRejected=function(){return this.getState()==2},e.prototype.getValue=function(){if(this._V===3)return this._W.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._W},e.prototype.getReason=function(){if(this._V===3)return this._W.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._W},e.prototype.getState=function(){return this._V===3?this._W.getState():this._V===-1||this._V===-2?0:this._V}},e.disableSynchronous=function(){e.prototype.isPending=void 0,e.prototype.isFulfilled=void 0,e.prototype.isRejected=void 0,e.prototype.getValue=void 0,e.prototype.getReason=void 0,e.prototype.getState=void 0}},{"./core.js":4}],11:[function(i,r,o){r.exports=typeof window>"u"||typeof window.Promise>"u"?i("promise"):window.Promise},{promise:3}],12:[function(i,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=e;function e(a){var s={};return a.emit=function(c,p){var y=s[c];y&&y.forEach(function(v){return v(p)})},a.on=function(c,p){var y=s[c]||(s[c]=[]);return y.push(p),a},a.off=function(c,p){if(p){var y=s[c],v=y.indexOf(p);v!==-1&&y.splice(v,1),y.length===0&&delete s[c]}else delete s[c];return a},a.list=function(c){return s[c]||[]},a}},{}],13:[function(i,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.fetch=e,o.post=a;function e(s,c,p,y,v,h){try{var g=new XMLHttpRequest;if(g.onreadystatechange=function(){if(g.readyState==4){var _=g.getResponseHeader("Content-Type");if(_&&_.indexOf("json")!==-1)try{var w=JSON.parse(g.responseText);v(null,w,g.status)}catch(I){v(I,null,g.status)}else v(null,g.responseText,g.status)}},y)for(var T in y)y.hasOwnProperty(T)&&g.setRequestHeader(T,y[T]);g.ontimeout=function(_){v(_,null,0)},g.open(s,c,!0),g.timeout=h,typeof p=="string"?g.send(p):p?(g.setRequestHeader("Content-Type","application/json"),g.send(JSON.stringify(p))):g.send()}catch(_){v(_,null,0)}}function a(s,c,p){return new Promise(function(y,v){var h=function(T,_,w){if(T)return v(T);y([_,w])};e("POST",s,c,null,h,p)})}},{}],14:[function(i,r,o){var e=typeof document<"u",a=typeof navigator<"u"&&navigator.product==="ReactNative";r.exports=i(e||a?"./request.browser":"./request.node")},{"./request.browser":13,"./request.node":15}],15:[function(i,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.post=y;var e=c(i("http")),a=c(i("https")),s=c(i("url"));function c(v){return v&&v.__esModule?v:{default:v}}var p=s.default.parse;function y(v,h,g){return new Promise(function(T,_){var w=h==="string"?h:JSON.stringify(h),I=p(v),K={host:I.hostname,port:I.port,path:I.path,method:"POST",headers:{"Content-Length":w.length}};h!=="string"&&(K.headers["Content-Type"]="application/json");var E=I.protocol==="https:"?a.default:e.default,k=E.request(K,function(m){m.setEncoding("utf8");var M="";m.on("data",function(A){M+=A}),m.on("end",function(){var A=m.headers["content-type"],j=A&&A.indexOf("json")!==-1;try{var P=j?JSON.parse(M):M;T([P,m.statusCode])}catch(te){_(te)}})});k.on("error",_),k.on("socket",function(m){m.setTimeout(g,function(){k.abort()})}),k.write(w),k.end()})}},{http:void 0,https:void 0,url:void 0}],16:[function(i,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.compare=e,o.add=a,o.sum=s,o.mean=c,o.std=p,o.variance=y,o.median=v;function e(h,g){return h>g?1:h<g?-1:0}function a(h,g){return h+g}function s(h){return h.reduce(a)}function c(h){return s(h)/h.length}function p(h){return Math.sqrt(y(h))}function y(h){if(h.length<2)return 0;var g=c(h);return h.map(function(T){return Math.pow(T-g,2)}).reduce(a)/(h.length-1)}function v(h){if(h.length<2)return h[0];var g=h.slice().sort(e);return g.length%2===0?(g[h.length/2-1]+g[h.length/2])/2:g[(h.length-1)/2]}},{}],17:[function(i,r,o){function e(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(I){return typeof I}:e=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},e(_)}Object.defineProperty(o,"__esModule",{value:!0}),o.create=T;var a=h(i("./util.js")),s=h(i("./stat.js")),c=h(i("./request/request")),p=y(i("./emitter.js"));function y(_){return _&&_.__esModule?_:{default:_}}function v(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return v=function(){return _},_}function h(_){if(_&&_.__esModule)return _;if(_===null||e(_)!=="object"&&typeof _!="function")return{default:_};var w=v();if(w&&w.has(_))return w.get(_);var I={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in _)if(Object.prototype.hasOwnProperty.call(_,E)){var k=K?Object.getOwnPropertyDescriptor(_,E):null;k&&(k.get||k.set)?Object.defineProperty(I,E,k):I[E]=_[E]}return I.default=_,w&&w.set(_,I),I}var g=i("./Promise");function T(_){var w={options:{interval:36e5,timeout:1e4,delay:1e3,repeat:5,peers:[],server:null,now:Date.now},offset:0,_timeout:null,_inProgress:{},_isFirst:!0,send:function(k,m,M){return c.post(k,m,M).then(function(A){var j=A[0];w.receive(k,j)}).catch(function(A){K(A)})},receive:function(k,m){m===void 0&&(m=k,k=void 0),m&&m.id in w._inProgress?w._inProgress[m.id](m.result):m&&m.id!==void 0&&w.send(k,{jsonrpc:"2.0",id:m.id,result:w.now()})},_handleRPCSendError:function(k,m,M){delete w._inProgress[k],m(new Error("Send failure"))},rpc:function(k,m,M){var A=a.nextId(),j,P,te=new g(function(re,Ee){j=re,P=Ee});w._inProgress[A]=function(re){delete w._inProgress[A],j(re)};var oe;try{oe=w.send(k,{jsonrpc:"2.0",id:A,method:m,params:M},w.options.timeout)}catch(re){w._handleRPCSendError(A,P,re)}return oe&&(oe instanceof g||oe.then&&oe.catch)?oe.catch(w._handleRPCSendError.bind(this,A,P)):console.warn("Send should return a promise"),te},sync:function(){w.emit("sync","start");var k=w.options.server?[w.options.server]:w.options.peers;return g.all(k.map(function(m){return w._syncWithPeer(m)})).then(function(m){var M=m.filter(function(A){return w._validOffset(A)});M.length>0&&(w.offset=s.mean(M),w.emit("change",w.offset)),w.emit("sync","end")})},_validOffset:function(k){return k!==null&&!isNaN(k)&&isFinite(k)},_syncWithPeer:function(k){var m=[];function M(){return w._getOffset(k).then(function(P){return m.push(P)})}function A(){return a.wait(w.options.delay).then(M)}function j(){return m.length<w.options.repeat}return M().then(function(){return a.whilst(j,A)}).then(function(){var P=m.filter(function(Me){return Me!==null}),te=P.map(function(Me){return Me.roundtrip}),oe=s.median(te)+s.std(te),re=P.filter(function(Me){return Me.roundtrip<oe}),Ee=re.map(function(Me){return Me.offset});return Ee.length>0?s.mean(Ee):null})},_getOffset:function(k){var m=w.options.now();return w.rpc(k,"timesync").then(function(M){var A=w.options.now(),j=A-m,P=M-A+j/2;return w._isFirst&&(w._isFirst=!1,w.offset=P,w.emit("change",P)),{roundtrip:j,offset:P}}).catch(function(M){return null})},now:function(){return w.options.now()+w.offset},destroy:function(){clearTimeout(w._timeout)}};if(_){if(_.server&&_.peers)throw new Error('Configure either option "peers" or "server", not both.');for(var I in _)_.hasOwnProperty(I)&&(I==="peers"&&typeof _.peers=="string"?w.options.peers=_.peers.split(",").map(function(E){return E.trim()}).filter(function(E){return E!==""}):w.options[I]=_[I])}(0,p.default)(w);function K(E){w.list("error").length>0?w.emit("error",E):console.log("Error",E)}return w.options.interval!==null&&(w._timeout=setInterval(w.sync,w.options.interval),setTimeout(function(){w.sync().catch(function(E){return K(E)})},0)),w}},{"./Promise":11,"./emitter.js":12,"./request/request":14,"./stat.js":16,"./util.js":18}],18:[function(i,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.wait=a,o.repeat=s,o.whilst=c,o.nextId=p;var e=i("./Promise");function a(v){return new e(function(h){setTimeout(h,v)})}function s(v,h){return new e(function(g,T){var _=0,w=[];function I(){_<h?(_++,v().then(function(K){w.push(K),I()})):g(w)}I()})}function c(v,h){return new e(function(g,T){function _(){v()?h().then(function(){return _()}):g()}_()})}function p(){return y++}var y=0},{"./Promise":11}]},{},[17])(17)})}(qt)),qt.exports}var Wa=$a();const Ht=Date.now,be=Wa.create({server:"/timesync",delay:250,interval:null,now:Ht});let Re;function As(){if(Re)return Re;const n=10*60*1e3,t=Ye.get("timesync.lastSyncTime");if(t&&Ht()-t<n){const i=Ye.get("timesync.lastOffset");return i&&!be.offset&&(be.offset=i),Promise.resolve()}return Re=new Promise(i=>{be.on("sync",r=>{r==="end"&&(Ye.set("timesync.lastOffset",be.offset),be.off("sync"),Re=null,i())}),be.on("error",r=>{si(r,"error"),be.off("error"),Re=null,i()}),be.sync(),Ye.set("timesync.lastSyncTime",Ht())}),Re}const{bind:Bn}=Function,za=Bn.bind(Bn);function Ga(n,t){return new(za(n,null).apply(null,t))}Date=function(t){function i(){const r=Ga(t,arguments);return arguments.length===0&&r.setTime(Math.round(be.now())),r}return i.now=function(){return Math.round(be.now())},i.parse=function(){return t.parse.apply(this,arguments)},i.UTC=function(){return t.UTC.apply(this,arguments)},i.prototype=t.prototype,i}(Date);export{Yn as K,Cs as T,tt as _,Xo as a,di as b,Ze as c,Ps as d,Po as e,Fo as f,Jo as g,Ho as h,Ko as i,No as j,on as k,Es as l,Ns as m,aa as n,Is as o,As as p,ua as r,Qi as s,an as t,ci as u};
