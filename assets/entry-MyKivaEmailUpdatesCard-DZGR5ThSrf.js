import{g as o,k as b,b as i,c as C,q as a,a as r,u as s,L as M,D as L,z as N,C as K,K as O,o as p,M as S}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{i as j}from"./entry-mdi-B1ONwcTkQ2.js";import{x as D}from"./entry-KvMaterialIcon-C3KLX5OV-L.js";import"./entry-KvWwwHeader-C1bm1YMh4q.js";import{k as U}from"./entry-KvBorrowerImage-CeCTvTJdRR.js";import{g as V}from"./entry-KvButton-BA7nBLyz1b.js";import"./entry-numeral-xVHG5DEP0A.js";import{u as B}from"./entry-useOptIn-BkeZO2Hx1-.js";import{f as I}from"./entry-stringParserUtils-DNVsfKTBwa.js";import{_ as z}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";const T={class:"card-container tw-h-full"},$={class:"tw-inline-flex tw-items-center tw-gap-1 tw-mb-2 tw-rounded-md tw-bg-eco-green-1 tw-px-1.5 tw-py-0.5 tw-absolute md:!tw-top-2.5 md:!tw-left-2.5 tw-top-1.5 tw-left-1.5 tw-z-1"},F={class:"tw-relative tw-w-full tw-overflow-hidden image-container"},P={class:"tw-flex tw-flex-col tw-pt-1 tw-grow"},q={class:"tw-pt-1"},c={__name:"MyKivaEmailUpdatesCard",props:{loans:{type:Array,default:()=>[]},latestLoan:{type:Object,default:null}},emits:["accept-email-updates"],setup(m,{emit:u}){const n=m,d=u,l=o(()=>{var e;const t=((e=n.loans)==null?void 0:e[0])||null;return n.latestLoan!==null?n.latestLoan:t}),w=o(()=>{var t;return I((t=l.value)==null?void 0:t.name)||"this borrower"}),f=o(()=>{var t;return((t=l.value)==null?void 0:t.name)||""}),v=o(()=>{var t,e;return((e=(t=l.value)==null?void 0:t.image)==null?void 0:e.hash)||""}),h=i("apollo"),_=i("cookieStore"),k=i("$kvTrackEvent"),{setMailUpdatesOptOutCookie:y,updateCommunicationSettings:g}=B(h,_),x=async()=>{await g(!0,!0,!1)&&(y(!1),d("accept-email-updates",!0))};return b(()=>{k("portfolio","view","next-step-email-optin")}),(t,e)=>{const E=O("kv-track-event");return p(),C("div",T,[a("span",$,[r(s(D),{class:"tw-w-2 tw-h-2 tw-shrink-0",icon:s(j)},null,8,["icon"]),e[0]||(e[0]=a("span",{class:"tw-text-primary tw-font-medium tw-align-middle",style:{"font-size":"0.875rem"}}," Email updates ",-1))]),a("div",F,[r(s(U),{class:"tw-w-full tw-h-full tw-object-cover",alt:f.value,hash:v.value,"aspect-ratio":3/4,"default-image":{width:335},images:[{width:335}],"photo-path":t.$appConfig.photoPath},null,8,["alt","hash","photo-path"])]),a("div",P,[a("h3",null," Follow "+M(w.value)+" journey ",1),e[2]||(e[2]=a("p",{class:"tw-font-medium tw-text-base tw-pt-0.5 tw-grow"}," Don't miss out on borrower updates, stories, and new ways to help. ",-1)),a("div",q,[L((p(),N(s(V),{variant:"secondary",class:"tw-w-full",onClick:x},{default:K(()=>e[1]||(e[1]=[S(" Get email updates ")]),void 0),_:1,__:[1]})),[[E,["portfolio","click","next-step-email-optin"]]])])])])}}},tt=z(c,[["__scopeId","data-v-8d54cf30"]]);c.__docgenInfo={exportName:"default",displayName:"MyKivaEmailUpdatesCard",description:"",tags:{},props:[{name:"loans",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"latestLoan",type:{name:"object"},defaultValue:{func:!1,value:"null"}}],events:[{name:"accept-email-updates"}],sourceFiles:["/home/runner/work/ui/ui/src/components/MyKiva/MyKivaEmailUpdatesCard.vue"]};export{tt as M};
