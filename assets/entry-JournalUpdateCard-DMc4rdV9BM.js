import{c as u,o as l,H as P,I as A,x as K,n as R,e as n,d as f,z as Y,j as r,A as Z,k as q,u as m,a as T,f as I,K as g,J as O}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";import{D as W}from"./entry-mdi-BJHOrBfjV3.js";import{B as G}from"./entry-BorrowerImage-WXGsRE2huI.js";import{w as Q}from"./entry-KvMaterialIcon-DcajXwg-0j.js";import{J as X}from"./entry-KvUserAvatar-CcUKtQr-4i.js";import"./entry-KvWwwHeader-CVdIzOPj6Q.js";import"./entry-numeral-DJCTM12wUX.js";import{i as ee}from"./entry-loanUtils-5D9a5yj3H7.js";import{d as b}from"./entry-imageUtils-_95xo2d0ng.js";import{_ as C}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{f as te}from"./entry-index-CGacd2nhU3.js";const N={name:"MultiBorrowerImage",props:{images:{type:Array,required:!0},aspectRatio:{type:Number,default:1},imgWidth:{type:Number,default:70}},methods:{getDefaultUrl(s){return s.hash?b({...s.defaultImage,height:s.defaultImage.width*this.aspectRatio,base:this.$appConfig.photoPath,hash:s.hash}):""},getSizes(s){return s.hash?s.images.map(({width:c,viewSize:i})=>i?`(min-width: ${i}px) ${c}px`:`${c}px`).join(", "):""},getSrcset(s){return s.hash?s.images.map(({width:c,faceZoom:i})=>{const v=c*this.aspectRatio,t={width:c,height:v,faceZoom:i},p={width:c*2,height:v*2,faceZoom:i};return`${b({...t,base:this.$appConfig.photoPath,hash:s.hash})} ${c}w, ${b({...p,base:this.$appConfig.photoPath,hash:s.hash})} ${c*2}w`}).join(", "):""}}},ae={class:"tw-flex tw-items-center"},se={class:"tw-inline-block tw-relative tw-overflow-hidden tw-w-full tw-h-full",style:{"padding-bottom":"100%"}},re=["srcset","sizes"],ne=["src","alt"];function oe(s,c,i,v,t,p){return l(),u("div",ae,[(l(!0),u(P,null,A(i.images,(d,w)=>(l(),u("div",{key:w,class:R(["tw-rounded-full tw-overflow-hidden tw-border-4 tw-border-white tw-w-6 tw-h-6 lg:tw-w-8 lg:tw-h-8",w!==0?"tw--ml-6":""]),style:K(`z-index: ${10+w};`)},[n("picture",se,[n("source",{srcset:p.getSrcset(d),sizes:p.getSizes(d)},null,8,re),d.hash?(l(),u("img",{key:0,class:"tw-absolute tw-w-full tw-h-full tw-object-contain",src:p.getDefaultUrl(d),alt:d.alt,loading:"lazy"},null,8,ne)):f("",!0)])],6))),128))])}const le=C(N,[["render",oe]]);N.__docgenInfo={displayName:"MultiBorrowerImage",exportName:"default",description:"",tags:{},props:[{name:"images",type:{name:"array"},required:!0},{name:"aspectRatio",type:{name:"number"},defaultValue:{func:!1,value:"1"}},{name:"imgWidth",type:{name:"number"},defaultValue:{func:!1,value:"70"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/BorrowerProfile/MultiBorrowerImage.vue"]};const ie={class:"tw-rounded tw-bg-white tw-p-2 update-card tw-h-full tw-flex tw-flex-col"},ue={class:"tw-flex tw-gap-1"},ce={key:0},de={key:1,class:"tw-w-6 tw-h-6 lg:tw-w-8 lg:tw-h-8 tw-rounded-full tw-shadow tw-shrink-0"},me={class:"tw-flex tw-flex-col tw-items-start"},pe={class:"tw-mb-0.5 tw-font-medium tw-line-clamp-1"},we={class:"tw-py-0.5 tw-px-1 tw-font-medium tw-text-small tw-bg-eco-green-1 tw-rounded tw-w-auto"},he={class:"tw-my-1"},fe={class:"tw-line-clamp-3"},ve=["innerHTML"],ye={key:0},ge={class:"tw-rounded-full tw-bg-secondary tw-w-4 tw-h-4 tw-mr-1 tw-flex tw-items-center tw-justify-center"},_e={class:"tw-flex tw-text-secondary tw-text-small"},be={key:0},j={__name:"JournalUpdateCard",props:{update:{type:Object,required:!0},updateNumber:{type:String,default:""}},emits:["read-more-clicked","share-loan-clicked"],setup(s,{emit:c}){const i=q("$kvTrackEvent"),v=s,{update:t}=Y(v),p=c,d=r(()=>{var e;return((e=t.value)==null?void 0:e.loan)??{}}),w=r(()=>{var e;return((e=d.value)==null?void 0:e.name)??""}),k=r(()=>{var e,a,o;return((o=(a=(e=d.value)==null?void 0:e.geocode)==null?void 0:a.country)==null?void 0:o.name)??""}),x=r(()=>{var e,a;return((a=(e=d.value)==null?void 0:e.image)==null?void 0:a.hash)??""}),B=r(()=>{var e,a,o;return(e=t.value)!=null&&e.isTransaction&&((a=t.value)!=null&&a.isRepayment)?`${w.value} from ${k.value}`:(o=t.value)!=null&&o.isTransaction?"Kiva":`${w.value} from ${k.value}`}),y=r(()=>ee(d.value)),z=r(()=>{var e,a,o;return(e=t.value)!=null&&e.isTransaction&&((a=t.value)!=null&&a.isRepayment)?"Repayment":(o=t.value)!=null&&o.isTransaction?"Transaction":y.value?"ðŸŽ‰ Fundraising":"ðŸŽ‰ Repaying"}),_=r(()=>{var e;return((e=t.value)==null?void 0:e.subject)??""}),h=r(()=>{var e;return((e=t.value)==null?void 0:e.body)??""});function S(e){return e.replace(/<[^>]*>/g,"")}const L=r(()=>{var e,a;return(e=t.value)!=null&&e.isRepayment?h.value:(a=t.value)!=null&&a.isTransaction?_.value:_.value?S(`Re: ${_.value.trim()}. ${h.value}`):h.value}),U=r(()=>{let e=h.value.split(" ").splice(0,14).join(" ");return e.length<h.value.length&&(e+="...&nbsp;"),e}),M=r(()=>{var e;return h.value.length>U.value.length||((e=t.value)==null?void 0:e.isTransaction)}),V=r(()=>{var o;const e=((o=t.value)==null?void 0:o.date)??"",a=e?new Date(e):new Date;return te(a,"LLL. d, yyyy")}),$=r(()=>{var e;return(e=t.value)==null?void 0:e.repaymentImages.reduce((a,o)=>(a.some(H=>H.hash===o.hash)||a.push(o),a),[])}),D=()=>{p("read-more-clicked",t.value.id),i("portfolio","click","borrower-update-read-more",t.value.id)},F=()=>{p("share-loan-clicked"),i("portfolio","click","borrower-update-share-loan",d.value.id)};Z(()=>{var e;(e=t.value)!=null&&e.isRepayment&&i("portfolio","view","At least one repayment update viewed")});const J=r(()=>{var e,a;return((e=t.value)==null?void 0:e.livesToImpact)===1?`You-can-impact-${encodeURIComponent(t.value.livesToImpact)}-life-right-now`:((a=t.value)==null?void 0:a.livesToImpact)>1?`You-can-impact-${encodeURIComponent(t.value.livesToImpact)}-lives-right-now`:"You-can-impact-lives-right-now"}),E=()=>{i("portfolio","click","repayment-update-read-more",t.value.id),window.location.href=`/lend/filter?header=${J.value}`};return(e,a)=>(l(),u("div",ie,[n("div",ue,[m(t).isRepayment&&m(t).status==="repayment-summary"&&$.value.length?(l(),u("div",ce,[T(m(le),{images:$.value},null,8,["images"])])):(l(),u("div",de,[x.value?(l(),I(m(G),{key:0,class:"tw-w-full tw-rounded-full tw-bg-brand",alt:w.value,"aspect-ratio":1,"default-image":{width:80,faceZoom:50},hash:x.value,images:[{width:80,faceZoom:50,viewSize:1024},{width:72,faceZoom:50,viewSize:734},{width:64,faceZoom:50}]},null,8,["alt","hash"])):(l(),I(m(X),{key:1,class:"kiva-logo lg:tw-w-8"}))])),n("div",me,[n("p",pe,g(m(t).title||B.value),1),n("div",we,g(z.value),1)])]),n("div",he,[n("p",fe,[n("span",{innerHTML:L.value,class:""},null,8,ve),m(t).isRepayment?(l(),u("span",ye,[m(t).isRepayment?(l(),u("button",{key:0,class:"tw-inline tw-text-action hover:tw-underline",onClick:E}," relend now. ")):f("",!0)])):f("",!0)]),!m(t).isRepayment&&M.value?(l(),u("button",{key:0,class:"tw-inline tw-text-action hover:tw-underline",onClick:D}," read more ")):f("",!0)]),n("div",{class:R(["tw-flex tw-items-center tw-mt-auto",{"tw-justify-between":y.value},{"tw-justify-end":!y.value}])},[y.value?(l(),u("button",{key:0,class:"tw-flex tw-items-center",onClick:F},[n("div",ge,[T(m(Q),{class:"tw-w-2 tw-h-2 tw-text-action",icon:m(W)},null,8,["icon"])]),a[0]||(a[0]=n("span",{class:"tw-text-small tw-font-medium"},"Share",-1))])):f("",!0),n("div",_e,[s.updateNumber?(l(),u("span",be,[O(" Update #"+g(s.updateNumber)+" ",1),a[1]||(a[1]=n("span",{class:"tw-mx-1"},"â€¢",-1))])):f("",!0),n("span",null,g(V.value),1)])],2)]))}},Se=C(j,[["__scopeId","data-v-2cb9d1ff"]]);j.__docgenInfo={exportName:"default",displayName:"JournalUpdateCard",description:"",tags:{},props:[{name:"update",type:{name:"object"},required:!0},{name:"updateNumber",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"read-more-clicked"},{name:"share-loan-clicked"}],sourceFiles:["/home/runner/work/ui/ui/src/components/MyKiva/JournalUpdateCard.vue"]};export{Se as J};
