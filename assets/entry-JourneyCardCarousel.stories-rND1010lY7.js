import{r as me,P as De,c as k,o as r,a as L,b as Z,e as w,F as R,N as qe,f as b,K as ie,L as Fe,k as pe,j as N,w as Je,u as y,n as oe,d as ye,J as re,H as Ze,h as ve,O as $e,I as He}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";import{u as Ae}from"./entry-vue-router-DdFAIqQzgT.js";import{u as Re}from"./entry-useIsMobile-xayPsKkxoo.js";import{M as Ye}from"./entry-useBadgeModal-DDfZLk7ICY.js";import{b as ze,c as We}from"./entry-contentfulUtils-CqD1k4MYgu.js";import{d as ke}from"./entry-achievementUtils-Cf0LlmQMSn.js";import{T as Qe}from"./entry-myKivaUtils-USlSQzpKdw.js";import{u as Ue,b as Xe,e as Ce,c as et,I as Le,d as be}from"./entry-useBadgeData-BVPFKdTbm4.js";import"./entry-KvWwwHeader-CVdIzOPj6Q.js";import{l as tt}from"./entry-KvCarousel--umaisw_ND.js";import"./entry-numeral-DJCTM12wUX.js";import{t as at,G as nt,z as ot,A as st,f as it,F as rt}from"./entry-mdi-BJHOrBfjV3.js";import{s as lt,C as ct}from"./entry-social-sharing-mixin-mcFPgMmQne.js";import{w as Ie}from"./entry-KvMaterialIcon-DcajXwg-0j.js";import{U as fe}from"./entry-KvButton-DF0Vhz1EWA.js";import{u as dt}from"./entry-KvLightbox-Ccr5YlTKqp.js";import{_ as ge}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{M as Te}from"./entry-MyKivaCard-CDSpTmb9om.js";import{_ as H}from"./entry-KvLoadingPlaceholder-DUZzoT9CoU.js";import{q as ut}from"./entry-KvProgressBar-CQtXD0YVwH.js";import{o as we}from"./entry-imageUtils-BO57SRLi2g.js";import{d as mt,p as pt}from"./entry-index-CNzTSTNafD.js";import{c as yt}from"./entry-badge-journey-data-mock-CA_V6NnPCv.js";import"./entry-throttle-DL1zg7kAk0.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-isSymbol-5pnFTpIKM9.js";import"./entry-toNumber-MeiYJWOH0A.js";import"./entry-index-Dew-HucFLB.js";import"./entry-logReadQueryError-Codcl0QZ_g.js";import"./entry-logFormatter-DhjghUk5Me.js";import"./entry-throttle-DR-Bh3IiJx.js";import"./entry-urlUtils-D59-4GikCB.js";import"./entry-KvLoadingSpinner-D0IZcQeh_0.js";import"./iframe-CWeBLAo0.js";import"./entry-imageUtils-_95xo2d0ng.js";import"./entry-index-COmIkRYU2t.js";import"./entry-index-D4S0JsTkt8.js";import"./entry-index-CbPSoDvqj7.js";const ft="Join me and make lasting change on Kiva!",gt="social_share_mykiva",je={name:"MyKivaSharingModal",components:{KvButton:fe,KvLightbox:dt,KvMaterialIcon:Ie},inject:["apollo"],mixins:[lt],emits:["close-modal"],props:{isVisible:{type:Boolean,default:!1},lender:{type:Object,default:()=>({})}},data(){return{shareMessage:ft,KvBlueskyIcon:ct,mdiPencilOutline:it,mdiFacebook:st,mdiLinkedin:ot,mdiTwitter:nt,mdiLink:at,copyStatus:{disabled:!1,text:"Copy"}}},computed:{utmContent(){var o,n;return(o=this.lender)!=null&&o.public&&((n=this.lender)!=null&&n.inviterName)?this.lender.inviterName:"anonymous"},utmCampaign(){return gt},shareLink(){var T;const o=(T=this.lender)!=null&&T.inviterName?`/invitedby/${this.lender.inviterName}`:`${this.$route.path}`;return`${`https://${this.$appConfig.host}`}${o}`}},methods:{closeLightbox(){this.$emit("close-modal")}}},ht={class:"tw-relative"},vt={class:"tw-flex tw-mt-2.5 tw-flex-wrap"},kt={class:"tw-font-medium"};function Ct(o,n,T,G,h,m){const f=me("KvMaterialIcon"),K=me("KvButton"),p=me("KvLightbox"),U=De("kv-track-event");return r(),k("div",null,[L(p,{visible:T.isVisible,title:"Invite a friend to Kiva!",onLightboxClosed:m.closeLightbox},{default:Z(()=>[w("div",ht,[R(w("textarea",{class:"tw-w-full tw-border tw-border-tertiary tw-rounded-xs tw-h-12 tw-p-2",style:{height:"10rem"},"onUpdate:modelValue":n[0]||(n[0]=D=>h.shareMessage=D)},"				",512),[[qe,h.shareMessage]]),L(f,{class:"tw-w-2.5 tw-h-2.5 tw-absolute tw-bottom-2 tw-right-2",icon:h.mdiPencilOutline},null,8,["icon"])]),w("div",vt,[R((r(),b(K,{variant:"ghost",class:"social-button",onClick:n[1]||(n[1]=D=>o.showSharePopUp(o.facebookShareUrl({utmCampaign:m.utmCampaign,utmContent:m.utmContent}),"Thanks for sharing to Facebook!"))},{default:Z(()=>[L(f,{class:"social-button__icon social-button__icon--facebook",icon:h.mdiFacebook},null,8,["icon"]),n[5]||(n[5]=w("span",{class:"tw-font-medium"},"Facebook",-1))],void 0,!0),_:1,__:[5]})),[[U,["portfolio","share","facebook",m.utmCampaign]]]),R((r(),b(K,{variant:"ghost",class:"social-button",onClick:n[2]||(n[2]=D=>o.showSharePopUp(o.blueskyShareUrl({utmCampaign:m.utmCampaign,utmContent:m.utmContent}),"Thanks for sharing to Bluesky!"))},{default:Z(()=>[L(f,{class:"social-button__icon social-button__icon--bluesky",icon:h.KvBlueskyIcon},null,8,["icon"]),n[6]||(n[6]=w("span",{class:"tw-font-medium"},"Bluesky",-1))],void 0,!0),_:1,__:[6]})),[[U,["portfolio","share","bluesky",m.utmCampaign]]]),R((r(),b(K,{variant:"ghost",class:"social-button",onClick:n[3]||(n[3]=D=>o.showSharePopUp(o.linkedInShareUrl({utmCampaign:m.utmCampaign,utmContent:m.utmContent}),"Thanks for sharing to LinkedIn!"))},{default:Z(()=>[L(f,{class:"social-button__icon social-button__icon--linkedin",icon:h.mdiLinkedin},null,8,["icon"]),n[7]||(n[7]=w("span",{class:"tw-font-medium"},"LinkedIn",-1))],void 0,!0),_:1,__:[7]})),[[U,["portfolio","share","linkedin",m.utmCampaign]]]),R((r(),b(K,{variant:"ghost",class:"social-button",disabled:h.copyStatus.disabled,onClick:n[4]||(n[4]=D=>o.copyLink({utmCampaign:m.utmCampaign,utmContent:m.utmContent},h.copyStatus.text))},{default:Z(()=>[L(f,{class:"tw-w-4.5 tw-h-4.5 tw-pointer-events-none tw-inline-block tw-align-middle",icon:h.mdiLink},null,8,["icon"]),w("span",kt,ie(h.copyStatus.text),1)],void 0,!0),_:1},8,["disabled"])),[[U,["portfolio","share","copy-link",m.utmCampaign]]])])],void 0),_:1},8,["visible","onLightboxClosed"])])}const Lt=ge(je,[["render",Ct],["__scopeId","data-v-17ad4612"]]);je.__docgenInfo={displayName:"MyKivaSharingModal",exportName:"default",description:"",tags:{},props:[{name:"isVisible",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"lender",type:{name:"object"},defaultValue:{func:!1,value:"{}"}}],events:[{name:"close-modal"}],sourceFiles:["/home/runner/work/ui/ui/src/components/MyKiva/MyKivaSharingModal.vue"]};const bt={width:"161",height:"160",viewBox:"0 0 161 160",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Tt(o,n){return r(),k("svg",bt,n[0]||(n[0]=[Fe('<g clip-path="url(#clip0_4639_17979)"><path d="M40.4427 84.9195C40.4427 84.9195 40.4842 85.0165 40.4981 85.0719L42.1612 85.8897L43.6304 84.6977L44.6421 69.2027C44.6421 69.2027 44.6421 69.1057 44.6421 69.0641L44.157 50.2704C44.157 50.1734 44.3788 48.9122 44.3788 48.1361L44.6005 46.4452C44.656 45.9601 44.85 45.5166 45.1688 45.1424L45.8756 44.3108C47.1091 43.2852 48.4119 43.2436 49.6039 44.3247L50.574 46.6254C51.5581 47.5262 52.2095 59.7227 52.2233 61.0532L52.7223 73.4021L53.346 54.7055L53.6647 46.6947C53.6647 46.265 53.8726 43.8673 53.7895 43.0357L54.4963 41.5805C55.0091 40.6519 56.0486 40.1529 57.0881 40.3331L57.6009 40.4162C58.5433 40.5826 59.3056 41.2617 59.5689 42.1903L60.1926 44.9899C60.2758 47.3876 60.5807 50.7694 60.5807 50.9911L60.7886 60.5681L61.4816 71.2262L62.1607 63.1183L62.7982 51.2683L63.1863 44.7404L64.6831 41.4834L68.0094 40.5687L69.7003 43.1743L69.7696 55.2876L70.0468 70.0481L72.3059 51.3515L72.4307 47.5678L74.3849 45.0869L77.2538 45.475L78.5566 49.7853L78.8338 52.5711L80.7603 84.4205C80.8989 89.7149 80.885 89.9089 80.8573 90.1168L79.208 98.793C79.1803 98.9454 79.1387 99.0979 79.0694 99.2503L70.8368 119.79C70.7814 119.943 70.7259 120.109 70.6982 120.262L69.631 126.11L68.2035 134.149C68.2035 134.149 68.1896 134.232 68.1758 134.274L67.2887 138.057C67.0393 139.124 66.1107 139.887 65.0296 139.97C53.54 140.857 45.0579 136.505 41.6069 134.329C40.5951 133.691 40.1932 132.416 40.6506 131.308L42.9512 125.625C43.0067 125.487 43.0483 125.348 43.076 125.196L43.9491 121.024C44.0739 120.442 43.9769 119.832 43.6858 119.319L40.2763 113.179C40.1793 112.999 40.0546 112.833 39.9021 112.68L36.7144 109.326C36.5342 109.132 36.3818 108.91 36.2709 108.675L32.3071 100.29C32.1685 99.9987 32.0992 99.6938 32.0714 99.3751L31.919 96.7417L31.5032 88.0379L31.3092 85.0026L27.5255 75.0514L25.8346 71.6974L24.8506 69.4521C24.8506 69.4521 26.3197 68.08 27.5948 68.1771C28.8699 68.2741 31.0181 68.9532 31.0181 68.9532L34.6771 73.7763L40.4565 84.9056L40.4427 84.9195Z" fill="#D8A15B"></path><path d="M121.134 71.5309C121.134 71.5309 121.092 71.4339 121.078 71.3785L119.415 70.5607L117.946 71.7527L116.934 87.2477C116.934 87.2477 116.934 87.3447 116.934 87.3863L117.42 106.18C117.42 106.277 117.198 107.538 117.198 108.314L116.976 110.005C116.921 110.49 116.727 110.934 116.408 111.308L115.701 112.14C114.467 113.165 113.165 113.207 111.973 112.126L111.003 109.825C110.018 108.924 109.367 96.7277 109.353 95.3972L108.854 83.0483L108.231 101.745L107.912 109.756C107.912 110.185 107.704 112.583 107.787 113.415L107.08 114.87C106.567 115.799 105.528 116.298 104.489 116.117L103.976 116.034C103.033 115.868 102.271 115.189 102.008 114.26L101.384 111.46C101.301 109.063 100.996 105.681 100.996 105.459L100.788 95.8823L100.095 85.2242L99.4159 93.3321L98.7783 105.182L98.3903 111.71L96.8934 114.967L93.5671 115.882L91.8762 113.276L91.8069 101.163L91.5298 86.4023L89.2706 105.099L89.1459 108.883L87.1917 111.363L84.3228 110.975L83.02 106.665L82.7428 103.879L80.8163 72.0299C80.6777 66.7355 80.6915 66.5415 80.7193 66.3336L82.3685 57.6574C82.3963 57.505 82.4378 57.3525 82.5071 57.2001L90.7398 36.6601C90.7952 36.5077 90.8506 36.3413 90.8784 36.1889L91.9455 30.3401L93.3731 22.3016C93.3731 22.3016 93.3869 22.2184 93.4008 22.1768L94.2878 18.3931C94.5373 17.3259 95.4659 16.5637 96.5469 16.4805C108.037 15.5935 116.519 19.9454 119.97 22.1214C120.981 22.7589 121.383 24.034 120.926 25.1428L118.625 30.8252C118.57 30.9638 118.528 31.1024 118.501 31.2549L117.627 35.4266C117.503 36.0087 117.6 36.6185 117.891 37.1313L121.3 43.2712C121.397 43.4513 121.522 43.6176 121.674 43.7701L124.862 47.1241C125.042 47.3182 125.195 47.5399 125.306 47.7755L129.27 56.1606C129.408 56.4517 129.477 56.7566 129.505 57.0753L129.658 59.7087L130.073 68.4125L130.267 71.4478L134.051 81.399L135.742 84.753L136.726 86.9983C136.726 86.9983 135.257 88.3704 133.982 88.2733C132.707 88.1763 130.558 87.4972 130.558 87.4972L126.9 82.6741L121.12 71.5448L121.134 71.5309Z" fill="#AF752A"></path><path d="M46.541 95.2446C46.541 95.2446 54.8845 99.153 55.9378 107.774" stroke="#223829" stroke-width="5" stroke-linecap="square" stroke-linejoin="round"></path><path d="M112.11 60.582C112.11 60.582 102.713 58.4892 101.674 47.0134" stroke="#223829" stroke-width="5" stroke-linecap="square" stroke-linejoin="round"></path><path d="M76.1726 75.2587L83.5875 71.7384L91.238 67.234L98.6806 73.6926L96.6432 86.1524L92.1389 90.6568L77.0042 101.148L59.9014 89.451L57.4482 73.9836L61.9526 66.3331L73.2205 68.5784L76.1726 75.2587Z" fill="#F4B536"></path><path d="M77.1562 74.6631L82.5338 70.1726L91.9999 67.47L98.4862 73.6929L95.6034 84.5866L91.099 89.091L75.9505 99.5827L58.8615 87.8852L56.3945 72.4178L60.9128 64.7673L72.1668 67.0126L77.1562 74.6631Z" stroke="#223829" stroke-width="5" stroke-linecap="square"></path></g><defs><clipPath id="clip0_4639_17979"><rect width="112.45" height="129.25" fill="white" transform="translate(24.2754 15.375)"></rect></clipPath></defs>',2)]))}const wt={render:Tt},St=["src"],xt={key:0,class:"tw-mx-auto"},_t={key:1},Dt={key:3,class:"tw-flex tw-items-end tw-gap-3 tw-grow"},At={key:0},Ut={class:"tw-mb-1"},It={key:1},jt={key:0,class:"tw-text-small tw-pb-2 tw-grow"},Ee={__name:"GoalCard",props:{heroSlides:{type:Array,default:()=>[]},userGoal:{type:Object,default:void 0},loading:{type:Boolean,default:!1},goalProgress:{type:Number,default:0}},emits:["open-goal-modal"],setup(o){const n=o,T=pe("$kvTrackEvent"),G=Ae(),{getLoanFindingUrl:h}=Ue(),m=N(()=>{var s;return((s=n.userGoal)==null?void 0:s.target)||0}),f=N(()=>{var s;return!!((s=n.userGoal)!=null&&s.category)}),K=N(()=>f.value?"Work towards your goal":"Set your first impact goal!"),p=s=>{switch(s){case be:return"us-equality";case Le:return"fundamental-needs";case Ce:return"women";default:return s}},U=s=>{switch(s){case be:return"U.S. entrepreneurs";case Le:return"loans for basic needs";case et:return"eco-friendly loans";case Ce:return"women";case Xe:return"refugees";default:return"loans"}},D=N(()=>{var P,B,$;const s=U((P=n.userGoal)==null?void 0:P.category),i=`Your goal: Support ${(B=n.userGoal)==null?void 0:B.target} ${s}`,g=encodeURIComponent(i);return`${h(($=n.userGoal)==null?void 0:$.category,G.currentRoute.value)}?header=${g}`}),Y=N(()=>{var P,B,$,X,ee,z;const s=p((P=n.userGoal)==null?void 0:P.category)||"";if(!s)return"";const i=`my-kiva-${s}-journey`,g=n.heroSlides.find(j=>{var V;return((V=j==null?void 0:j.fields)==null?void 0:V.key)===i});let I=null;if(g){const j=ze(g);I=(B=j==null?void 0:j.richText)==null?void 0:B.content.find(V=>{var te,ae,W,ne;return V.nodeType==="embedded-asset-block"&&((ne=(W=(ae=(te=V.data)==null?void 0:te.target)==null?void 0:ae.fields)==null?void 0:W.file)==null?void 0:ne.url)})}return((z=(ee=(X=($=I==null?void 0:I.data)==null?void 0:$.target)==null?void 0:X.fields)==null?void 0:ee.file)==null?void 0:z.url)||""}),le=()=>{T("portfolio","click","continue-towards-goal"),G.push(D.value)};return Je(()=>n.userGoal,(s,i)=>{s!=null&&s.target&&(s!=null&&s.category)&&!(i!=null&&i.category)&&T("portfolio","show","goal-set",s.category,s.target)}),(s,i)=>{const g=De("kv-track-event");return r(),k("div",{class:oe(["card-container tw-h-full goal-card-bg",{"hide-bg":f.value||o.loading}])},[o.loading?(r(),b(y(H),{key:0,class:"achievement-card-bg"})):(r(),k("div",{key:1,class:oe({"tw-mx-auto tw-relative achievement-card-bg":f.value})},[w("span",{class:oe([{"tw-absolute tw-top-1 tw-left-1":f.value},"tw-inline-flex tw-items-center tw-gap-1 tw-mb-2 tw-rounded-md tw-bg-eco-green-1 tw-px-1.5 tw-py-1"]),title:"Your lending reach"},[L(y(Ie),{class:"tw-w-2 tw-h-2 tw-shrink-0",icon:y(rt)},null,8,["icon"]),i[1]||(i[1]=w("span",{class:"tw-text-primary tw-font-medium tw-align-middle",style:{"font-size":"0.875rem"}}," My goal ",-1))],2),f.value?(r(),k("img",{key:0,src:Y.value,class:"tw-rounded tw-w-full tw-h-full tw-object-cover tw-object-top"},null,8,St)):ye("",!0)],2)),w("div",{class:oe(["tw-flex tw-flex-col tw-grow tw-pt-0.5",{"tw-gap-1":f.value}])},[!f.value&&!o.loading?(r(),k("div",xt,[L(y(wt))])):ye("",!0),o.loading?(r(),b(y(H),{key:2,class:"!tw-h-3 tw-w-full tw-max-w-16 tw-my-1"})):(r(),k("h3",_t,ie(K.value),1)),f.value?(r(),k("div",Dt,[o.loading?(r(),k("div",It,[L(y(H),{class:"!tw-h-2 !tw-w-8 tw-mb-1"}),L(y(H),{class:"!tw-h-1.5 tw-w-13 tw-max-w-sm"})])):(r(),k("div",At,[w("h5",Ut,ie(o.goalProgress)+" / "+ie(m.value)+" Loans ",1),L(y(ut),{style:{width:"98px"},"aria-label":"Percent the loan has funded",value:o.goalProgress,max:m.value},null,8,["value","max"])])),L(y(fe),{class:"tw-flex-grow",onClick:le},{default:Z(()=>i[2]||(i[2]=[re(" Continue ")]),void 0),_:1,__:[2]})])):(r(),k(Ze,{key:4},[o.loading?(r(),b(y(H),{key:1,class:"!tw-h-1 tw-mb-1"})):(r(),k("p",jt," How many more people will you help this year? ")),o.loading?(r(),b(y(H),{key:3,class:"!tw-h-4 tw-mb-1"})):R((r(),b(y(fe),{key:2,onClick:i[0]||(i[0]=I=>s.$emit("open-goal-modal"))},{default:Z(()=>i[3]||(i[3]=[re(" Set a goal ")]),void 0),_:1,__:[3]})),[[g,["portfolio","click","set-a-goal"]]])],64))],2)],2)}}},Et=ge(Ee,[["__scopeId","data-v-410d3071"]]);Ee.__docgenInfo={exportName:"default",displayName:"GoalCard",description:"",tags:{},props:[{name:"heroSlides",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"userGoal",type:{name:"object"},defaultValue:{func:!1,value:"undefined"}},{name:"loading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"goalProgress",type:{name:"number"},defaultValue:{func:!1,value:"0"}}],events:[{name:"open-goal-modal"}],sourceFiles:["/home/runner/work/ui/ui/src/components/MyKiva/GoalCard.vue"]};const Mt={key:0,class:"tw-mb-3"},Nt="journey",Gt="refer-friend",Kt=30,Me={__name:"JourneyCardCarousel",props:{userInfo:{type:Object,default:()=>({})},lender:{type:Object,default:()=>({})},userInHomepage:{type:Boolean,default:!1},slides:{type:Array,default:()=>[]},heroContentfulData:{type:Array,default:()=>[]},heroTieredAchievements:{type:Array,default:()=>[]},slidesNumber:{type:Number,default:0},heroSlides:{type:Array,default:()=>[]},inLendingStats:{type:Boolean,default:!1},userGoalEnabled:{type:Boolean,default:!1},userGoal:{type:Object,default:()=>({})},userGoalAchieved:{type:Boolean,default:!1},disableDrag:{type:Boolean,default:!1},goalProgress:{type:Number,default:0},goalProgressLoading:{type:Boolean,default:!1}},emits:["update-journey","open-goal-modal"],setup(o,{emit:n}){pe("apollo");const T=pe("$kvTrackEvent"),G=Ae(),{getContentfulLevelData:h,combineBadgeData:m,getJourneysByLoan:f}=Ue(),K=n,p=o,{isMobile:U}=Re(Ye),D=ve(0),Y=ve(!1),le=N(()=>{const e=(p.heroContentfulData??[]).map(a=>h(a));return m(p.heroTieredAchievements,e)}),s=e=>{var a,t;return((t=(a=e==null?void 0:e.fields)==null?void 0:a.richText)==null?void 0:t.content)??[]},i=e=>{var S;const t=s(e).find(A=>{var x,C,d,l,v;return((v=(l=(d=(C=(x=A.data)==null?void 0:x.target)==null?void 0:C.sys)==null?void 0:d.contentType)==null?void 0:l.sys)==null?void 0:v.id)==="uiSetting"}),c=((S=t==null?void 0:t.data)==null?void 0:S.target)??{},u=We(c);return(u==null?void 0:u.dataObject)??{}},g=e=>{const a=i(e);return!ke.includes(a.achievementKey)},I=N(()=>p.inLendingStats?p.userGoalEnabled&&(!p.userGoal||!p.userGoalAchieved):!1),P=N(()=>{var S,A,x,C;const e=[];let a=[],t=[];const c=(x=(A=(S=p.userInfo)==null?void 0:S.transactions)==null?void 0:A.values)==null?void 0:x.filter(d=>{const l=mt(new Date,pt(d.createTime));return d.type===Qe&&l<=Kt});if(c!=null&&c.length){const d=((C=c==null?void 0:c[0])==null?void 0:C.loan)??{};a=f(d)}ke.forEach(d=>{var v,_,O,q,F,J;const l=le.value.find(E=>d===E.id);if(l){const E=((_=(v=l.achievementData)==null?void 0:v.tiers)==null?void 0:_.length)-1,M=(O=l.achievementData)==null?void 0:O.tiers[E];if(M!=null&&M.completedDate)return;const ce=(F=(q=l.achievementData)==null?void 0:q.tiers)==null?void 0:F.find(Q=>!Q.completedDate),Oe=ce.target-l.achievementData.totalProgressToAchievement,de=l.contentfulData.find(Q=>Q.level===ce.level),he=p.slides.find(Q=>{const ue=i(Q);return(ue==null?void 0:ue.achievementKey)===d});he&&e.push({...he,milestoneDiff:Oe,target:ce.target,totalProgressToAchievement:(J=l.achievementData)==null?void 0:J.totalProgressToAchievement,badgeImgUrl:de==null?void 0:de.imageUrl,badgeKey:d})}}),t=e.sort((d,l)=>d.milestoneDiff-l.milestoneDiff),a.length&&t.sort((d,l)=>a.indexOf(l.badgeKey)-a.indexOf(d.badgeKey));const u=p.slides.filter(d=>g(d));return u.length>0&&(t=[...t,...u]),I.value&&t.unshift({}),p.slidesNumber&&(t=t.slice(0,p.slidesNumber)),t}),B=e=>{var t,c,u,S,A,x,C;const a=((C=(x=(A=(S=(u=(c=(t=e==null?void 0:e.data)==null?void 0:t.target)==null?void 0:c.fields)==null?void 0:u.contentLight)==null?void 0:S[0])==null?void 0:A.fields)==null?void 0:x.file)==null?void 0:C.url)||"";return we(a,336)},$=e=>{var u,S,A,x;const a=s(e);if(g(e)){const C=a.find(l=>{var v,_,O,q,F,J,E,M;return((F=(q=(O=(_=(v=l.data)==null?void 0:v.target)==null?void 0:_.sys)==null?void 0:O.contentType)==null?void 0:q.sys)==null?void 0:F.id)==="media"&&((M=(E=(J=l.data)==null?void 0:J.target)==null?void 0:E.fields)==null?void 0:M.key.includes("mobile"))}),d=a.find(l=>{var v,_,O,q,F,J,E,M;return((F=(q=(O=(_=(v=l.data)==null?void 0:v.target)==null?void 0:_.sys)==null?void 0:O.contentType)==null?void 0:q.sys)==null?void 0:F.id)==="media"&&((M=(E=(J=l.data)==null?void 0:J.target)==null?void 0:E.fields)==null?void 0:M.key.includes("desktop"))});return U.value?B(C):B(d)}const t=a.find(C=>{var d,l,v,_;return C.nodeType==="embedded-asset-block"&&((_=(v=(l=(d=C.data)==null?void 0:d.target)==null?void 0:l.fields)==null?void 0:v.file)==null?void 0:_.url)}),c=((x=(A=(S=(u=t==null?void 0:t.data)==null?void 0:u.target)==null?void 0:S.fields)==null?void 0:A.file)==null?void 0:x.url)||"";return we(c,336)},X=e=>{if(e.totalProgressToAchievement)return`Your progress: ${e.totalProgressToAchievement}/${e.target} loans`;const a=i(e);return(a==null?void 0:a.title)||""},ee=e=>g(e)?i(e).contentText||"":e.totalProgressToAchievement?"Keep lending to reach your next achievement":"Get started to reach your first achievement",z=e=>i(e).primaryCtaText||"",j=e=>i(e).primaryCtaVariant||"secondary",V=e=>i(e).secondaryCtaText||"",te=e=>i(e).titleSans==="true",ae=e=>{const a=i(e);return!a.titleColor&&g(e)?"tw-text-action":a.titleColor},W=e=>e.split("?")[1],ne=e=>{const a=i(e),t=a.primaryCtaUrl||"";T("portfolio","click",`primary-cta-${z(e)}`,a.achievementKey);const c=W(t);if(c&&c.includes(Gt)){const u=c.split("=");u&&u[1]==="true"&&(Y.value=!0)}else G.push(t)},Ge=e=>{const a=i(e),t=a.secondaryCtaUrl||"";T("portfolio","click",`secondary-cta-${V(e)}`,a.achievementKey);const c=W(t);if(c&&c.includes(Nt)){const{achievementKey:u}=a;K("update-journey",u)}else G.push(t)},Ke=N(()=>U.value?"90%":"336px"),Pe=e=>{const a=D.value>e.value?"prev":"next";D.value=e.value,T("portfolio","click",`${a}-step-carousel`)},Be=e=>!!(e!=null&&e.isCustomCard),Ve=e=>p.inLendingStats?e===0&&I.value:!1;return(e,a)=>(r(),k("div",null,[o.userInHomepage?ye("",!0):(r(),k("h2",Mt,a[2]||(a[2]=[re(" Take the "),w("u",null,"next step",-1),re(" on your impact journey ")]))),(r(),b(y(tt),{key:P.value.length,"embla-options":{loop:!1,align:"start",...p.disableDrag&&{watchDrag:!1}},"slide-max-width":Ke.value,"multiple-slides-visible":!0,class:"journey-card-carousel tw-w-full",onChange:Pe},$e({_:2},[He(P.value,(t,c)=>({name:`slide${c}`,fn:Z(()=>[Ve(c)?(r(),b(y(Et),{key:0,"goal-progress":o.goalProgress,"hero-slides":o.slides,loading:o.goalProgressLoading,"user-goal":o.userGoal,onOpenGoalModal:a[0]||(a[0]=u=>e.$emit("open-goal-modal"))},null,8,["goal-progress","hero-slides","loading","user-goal"])):Be(t)?(r(),b(y(Te),{key:1,class:"kiva-card",title:t.title,"show-cta-icon":!0,"primary-cta-text":t.ctaText,"primary-cta-variant":"primary","is-full-width-primary-cta":!0,"is-title-font-sans":!0,"title-color":"tw-text-action-highlight",loans:t.loans,"tag-text":t.tagText,"show-tag-icon":t.showTagIcon,onPrimaryCtaClicked:t.primaryCta},null,8,["title","primary-cta-text","loans","tag-text","show-tag-icon","onPrimaryCtaClicked"])):(r(),b(y(Te),{key:2,class:"tw-w-full tw-h-full","bg-image":$(t),"is-bg-top-aligned":g(t),"has-gradient":!g(t),title:X(t),subtitle:ee(t),"is-black-subtitle":g(t),"secondary-cta-text":V(t),"primary-cta-text":z(t),"primary-cta-variant":j(t),"is-full-width-primary-cta":g(t),"is-title-font-sans":te(t),"title-color":ae(t),onPrimaryCtaClicked:u=>ne(t),onSecondaryCtaClicked:u=>Ge(t)},null,8,["bg-image","is-bg-top-aligned","has-gradient","title","subtitle","is-black-subtitle","secondary-cta-text","primary-cta-text","primary-cta-variant","is-full-width-primary-cta","is-title-font-sans","title-color","onPrimaryCtaClicked","onSecondaryCtaClicked"]))])}))]),1032,["embla-options","slide-max-width"])),L(y(Lt),{lender:o.lender,"is-visible":Y.value,onCloseModal:a[1]||(a[1]=t=>Y.value=!1)},null,8,["lender","is-visible"])]))}},Ne=ge(Me,[["__scopeId","data-v-a6afdf25"]]);Me.__docgenInfo={exportName:"default",displayName:"JourneyCardCarousel",description:"",tags:{},props:[{name:"userInfo",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"lender",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"userInHomepage",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"slides",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"heroContentfulData",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"heroTieredAchievements",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"slidesNumber",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"heroSlides",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"inLendingStats",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"userGoalEnabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"userGoal",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"userGoalAchieved",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disableDrag",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"goalProgress",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"goalProgressLoading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"open-goal-modal"},{name:"update-journey"}],sourceFiles:["/home/runner/work/ui/ui/src/components/Contentful/JourneyCardCarousel.vue"]};const _a={title:"MyKiva/JourneyCardCarousel",component:Ne},Pt={metadata:{tags:[],concepts:[]},sys:{space:{sys:{type:"Link",linkType:"Space",id:"j0p9a6ql0rn7"}},id:"3o3K7MEh5uVtlJVIpSeGo1",type:"Entry",createdAt:"2025-03-27T17:44:50.639Z",updatedAt:"2025-03-27T17:51:18.855Z",environment:{sys:{id:"development",type:"Link",linkType:"Environment"}},publishedVersion:9,revision:2,contentType:{sys:{type:"Link",linkType:"ContentType",id:"richTextContent"}},locale:"en-US"},fields:{key:"my-kiva-women-journey",name:"My Kiva Women's Journey",richText:{data:{},content:[{data:{target:{metadata:{tags:[],concepts:[]},sys:{space:{sys:{type:"Link",linkType:"Space",id:"j0p9a6ql0rn7"}},id:"4so9JjqLLH6edFsyfSiDSF",type:"Asset",createdAt:"2025-03-27T17:37:04.934Z",updatedAt:"2025-04-02T23:05:02.810Z",environment:{sys:{id:"development",type:"Link",linkType:"Environment"}},publishedVersion:8,revision:2,locale:"en-US"},fields:{title:"Women Journey Hero BG",description:"",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/4so9JjqLLH6edFsyfSiDSF/7ef2518cb8b28fab523ec723c9f113de/women_cta_bg.jpeg",details:{size:440061,image:{width:700,height:467}},fileName:"women_cta_bg.jpeg",contentType:"image/jpeg"}}}},content:[],nodeType:"embedded-asset-block"},{data:{target:{metadata:{tags:[],concepts:[]},sys:{space:{sys:{type:"Link",linkType:"Space",id:"j0p9a6ql0rn7"}},id:"2MmH5aNIzfqjWwLDPihyUE",type:"Entry",createdAt:"2025-03-27T17:44:39.011Z",updatedAt:"2025-04-17T17:10:25.192Z",environment:{sys:{id:"development",type:"Link",linkType:"Environment"}},publishedVersion:37,revision:10,contentType:{sys:{type:"Link",linkType:"ContentType",id:"uiSetting"}},locale:"en-US"},fields:{key:"women-journey-hero-settings",active:!0,startDate:"2025-03-26T00:00-06:00",endDate:"2125-03-27T00:00-06:00",dataObject:{title:"Women’s equality",primaryCtaText:"Lend to a woman",primaryCtaUrl:"/lend-by-category/women",secondaryCtaText:"See your progress",secondaryCtaUrl:"/mykiva?journey=womens-equality",achievementKey:"womens-equality"}}}},content:[],nodeType:"embedded-entry-block"},{data:{},content:[{data:{},marks:[],value:"",nodeType:"text"}],nodeType:"paragraph"}],nodeType:"document"}}},Bt={metadata:{tags:[],concepts:[]},sys:{space:{sys:{type:"Link",linkType:"Space",id:"j0p9a6ql0rn7"}},id:"76YwCih0L4FCiexX3zqk2n",type:"Entry",createdAt:"2025-04-15T16:37:45.939Z",updatedAt:"2025-04-22T16:18:46.743Z",environment:{sys:{id:"development",type:"Link",linkType:"Environment"}},publishedVersion:15,revision:6,contentType:{sys:{type:"Link",linkType:"ContentType",id:"richTextContent"}},locale:"en-US"},fields:{key:"my-kiva-join-team-card",name:"My Kiva Join Team",richText:{nodeType:"document",data:{},content:[{nodeType:"embedded-entry-block",data:{target:{metadata:{tags:[],concepts:[]},sys:{space:{sys:{type:"Link",linkType:"Space",id:"j0p9a6ql0rn7"}},id:"1sumKmVTAP4MrcuwayXPkP",type:"Entry",createdAt:"2025-04-22T16:11:10.912Z",updatedAt:"2025-04-22T16:11:10.912Z",environment:{sys:{id:"development",type:"Link",linkType:"Environment"}},publishedVersion:3,revision:1,contentType:{sys:{type:"Link",linkType:"ContentType",id:"media"}},locale:"en-US"},fields:{key:"my-kiva-join-team-card-mobile",contentLight:[{metadata:{tags:[],concepts:[]},sys:{space:{sys:{type:"Link",linkType:"Space",id:"j0p9a6ql0rn7"}},id:"6D5K2GfH04Vg3JtA14ql7o",type:"Asset",createdAt:"2025-04-22T16:11:04.194Z",updatedAt:"2025-04-22T16:11:04.194Z",environment:{sys:{id:"development",type:"Link",linkType:"Environment"}},publishedVersion:4,revision:1,locale:"en-US"},fields:{title:"my-kiva-join-team-card-mobile-asset",description:"",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/6D5K2GfH04Vg3JtA14ql7o/86b4eed566fd11c5eaa3f56afaac3aae/M_-_Join_Card.png",details:{size:56838,image:{width:644,height:804}},fileName:"M - Join Card.png",contentType:"image/png"}}}]}}},content:[]},{nodeType:"embedded-entry-block",data:{target:{metadata:{tags:[],concepts:[]},sys:{space:{sys:{type:"Link",linkType:"Space",id:"j0p9a6ql0rn7"}},id:"1TpB1xNbcklGgGdRtRhG72",type:"Entry",createdAt:"2025-04-22T16:15:22.104Z",updatedAt:"2025-04-22T16:15:22.104Z",environment:{sys:{id:"development",type:"Link",linkType:"Environment"}},publishedVersion:3,revision:1,contentType:{sys:{type:"Link",linkType:"ContentType",id:"media"}},locale:"en-US"},fields:{key:"my-kiva-join-team-card-desktop",contentLight:[{metadata:{tags:[],concepts:[]},sys:{space:{sys:{type:"Link",linkType:"Space",id:"j0p9a6ql0rn7"}},id:"1yLhf0Nkw8LdsYul6y6f56",type:"Asset",createdAt:"2025-04-22T16:15:15.777Z",updatedAt:"2025-04-22T16:15:15.777Z",environment:{sys:{id:"development",type:"Link",linkType:"Environment"}},publishedVersion:5,revision:1,locale:"en-US"},fields:{title:"my-kiva-join-team-card-desktop-asset",description:"",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/1yLhf0Nkw8LdsYul6y6f56/00e644c799dc787410fbb7c43f09e9c2/D_-_Join_Card.png",details:{size:68173,image:{width:1040,height:780}},fileName:"D - Join Card.png",contentType:"image/png"}}}]}}},content:[]},{nodeType:"embedded-entry-block",data:{target:{metadata:{tags:[],concepts:[]},sys:{space:{sys:{type:"Link",linkType:"Space",id:"j0p9a6ql0rn7"}},id:"71eZ7rwtSICIEgvYOyViMn",type:"Entry",createdAt:"2025-04-15T16:31:05.921Z",updatedAt:"2025-04-22T19:26:33.174Z",environment:{sys:{id:"development",type:"Link",linkType:"Environment"}},publishedVersion:29,revision:7,contentType:{sys:{type:"Link",linkType:"ContentType",id:"uiSetting"}},locale:"en-US"},fields:{key:"my-kiva-join-team-hero-settings",active:!0,startDate:"2025-04-14T00:00-07:00",endDate:"2125-04-14T00:00-07:00",dataObject:{title:"Lend together",primaryCtaText:"Explore lending teams",primaryCtaUrl:"/teams",primaryCtaVariant:"primary",contentText:"Lending teams are based on shared interests or location. Join a team and take your impact further!"}}}},content:[]},{nodeType:"paragraph",data:{},content:[{nodeType:"text",value:"",marks:[],data:{}}]}]}}},Vt=[yt],Ot=[Pt,Bt],qt=(o={})=>{const n=(T,{argTypes:G})=>({props:Object.keys(G),components:{JourneyCardCarousel:Ne},setup(){return{args:o}},template:`
            <div style="max-width: 1200px;">
                <journey-card-carousel v-bind="args" />
            </div>
        `});return n.args=o,n},se=qt({slides:Ot,badgesData:Vt});var Se,xe,_e;se.parameters={...se.parameters,docs:{...(Se=se.parameters)==null?void 0:Se.docs,source:{originalSource:`story({
  slides,
  badgesData
})`,...(_e=(xe=se.parameters)==null?void 0:xe.docs)==null?void 0:_e.source}}};const Da=["Default"];export{se as Default,Da as __namedExportsOrder,_a as default};
