import{c as u,o as l,J as E,I as J,G as P,A as R,q as n,m as f,t as A,g as r,k as H,b as Y,u as m,a as T,z as I,L as g,M as Z}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{q as K}from"./entry-mdi-B1ONwcTkQ2.js";import{B as O}from"./entry-BorrowerImage-CdYtz78wPt.js";import{x as W}from"./entry-KvMaterialIcon-C3KLX5OV-L.js";import{B as G}from"./entry-KvUserAvatar-DmX-R6-wYd.js";import"./entry-KvWwwHeader-C1bm1YMh4q.js";import"./entry-numeral-xVHG5DEP0A.js";import{i as Q}from"./entry-loanUtils-DSoWkICHcw.js";import{d as b}from"./entry-imageUtils-XCIqTGZvrk.js";import{_ as X}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{f as ee}from"./entry-index-CGacd2nhU3.js";const C={name:"MultiBorrowerImage",props:{images:{type:Array,required:!0},aspectRatio:{type:Number,default:1},imgWidth:{type:Number,default:70}},methods:{getDefaultUrl(s){return s.hash?b({...s.defaultImage,height:s.defaultImage.width*this.aspectRatio,base:this.$appConfig.photoPath,hash:s.hash}):""},getSizes(s){return s.hash?s.images.map(({width:c,viewSize:i})=>i?`(min-width: ${i}px) ${c}px`:`${c}px`).join(", "):""},getSrcset(s){return s.hash?s.images.map(({width:c,faceZoom:i})=>{const v=c*this.aspectRatio,t={width:c,height:v,faceZoom:i},w={width:c*2,height:v*2,faceZoom:i};return`${b({...t,base:this.$appConfig.photoPath,hash:s.hash})} ${c}w, ${b({...w,base:this.$appConfig.photoPath,hash:s.hash})} ${c*2}w`}).join(", "):""}}},te={class:"tw-flex tw-items-center"},ae={class:"tw-inline-block tw-relative tw-overflow-hidden tw-w-full tw-h-full",style:{"padding-bottom":"100%"}},se=["srcset","sizes"],re=["src","alt"];function ne(s,c,i,v,t,w){return l(),u("div",te,[(l(!0),u(E,null,J(i.images,(d,p)=>(l(),u("div",{key:p,class:R(["tw-rounded-full tw-overflow-hidden tw-border-4 tw-border-white tw-w-6 tw-h-6 lg:tw-w-8 lg:tw-h-8",p!==0?"tw--ml-6":""]),style:P(`z-index: ${10+p};`)},[n("picture",ae,[n("source",{srcset:w.getSrcset(d),sizes:w.getSizes(d)},null,8,se),d.hash?(l(),u("img",{key:0,class:"tw-absolute tw-w-full tw-h-full tw-object-contain",src:w.getDefaultUrl(d),alt:d.alt,loading:"lazy"},null,8,re)):f("",!0)])],6))),128))])}const oe=X(C,[["render",ne]]);C.__docgenInfo={displayName:"MultiBorrowerImage",exportName:"default",description:"",tags:{},props:[{name:"images",type:{name:"array"},required:!0},{name:"aspectRatio",type:{name:"number"},defaultValue:{func:!1,value:"1"}},{name:"imgWidth",type:{name:"number"},defaultValue:{func:!1,value:"70"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/BorrowerProfile/MultiBorrowerImage.vue"]};const le={class:"tw-rounded tw-bg-white tw-p-2 update-card tw-h-full tw-flex tw-flex-col"},ie={class:"tw-flex tw-gap-1"},ue={key:0},ce={key:1,class:"tw-w-6 tw-h-6 lg:tw-w-8 lg:tw-h-8 tw-rounded-full tw-shadow tw-shrink-0"},de={class:"tw-flex tw-flex-col tw-items-start"},me={class:"tw-mb-0.5 tw-font-medium tw-line-clamp-1"},we={class:"tw-py-0.5 tw-px-1 tw-font-medium tw-text-small tw-bg-eco-green-1 tw-rounded tw-w-auto"},pe={class:"tw-my-1"},he={class:"tw-line-clamp-3"},fe=["innerHTML"],ve={key:0},ye={class:"tw-rounded-full tw-bg-secondary tw-w-4 tw-h-4 tw-mr-1 tw-flex tw-items-center tw-justify-center"},ge={class:"tw-flex tw-text-secondary tw-text-small"},_e={key:0},be={__name:"JournalUpdateCard",props:{update:{type:Object,required:!0},updateNumber:{type:String,default:""}},emits:["read-more-clicked","share-loan-clicked"],setup(s,{emit:c}){const i=Y("$kvTrackEvent"),v=s,{update:t}=A(v),w=c,d=r(()=>{var e;return((e=t.value)==null?void 0:e.loan)??{}}),p=r(()=>{var e;return((e=d.value)==null?void 0:e.name)??""}),k=r(()=>{var e,a,o;return((o=(a=(e=d.value)==null?void 0:e.geocode)==null?void 0:a.country)==null?void 0:o.name)??""}),x=r(()=>{var e,a;return((a=(e=d.value)==null?void 0:e.image)==null?void 0:a.hash)??""}),N=r(()=>{var e,a,o;return(e=t.value)!=null&&e.isTransaction&&((a=t.value)!=null&&a.isRepayment)?`${p.value} from ${k.value}`:(o=t.value)!=null&&o.isTransaction?"Kiva":`${p.value} from ${k.value}`}),y=r(()=>Q(d.value)),B=r(()=>{var e,a,o;return(e=t.value)!=null&&e.isTransaction&&((a=t.value)!=null&&a.isRepayment)?"Repayment":(o=t.value)!=null&&o.isTransaction?"Transaction":y.value?"ðŸŽ‰ Fundraising":"ðŸŽ‰ Repaying"}),_=r(()=>{var e;return((e=t.value)==null?void 0:e.subject)??""}),h=r(()=>{var e;return((e=t.value)==null?void 0:e.body)??""});function j(e){return e.replace(/<[^>]*>/g,"")}const z=r(()=>{var e,a;return(e=t.value)!=null&&e.isRepayment?h.value:(a=t.value)!=null&&a.isTransaction?_.value:_.value?j(`Re: ${_.value.trim()}. ${h.value}`):h.value}),S=r(()=>{let e=h.value.split(" ").splice(0,14).join(" ");return e.length<h.value.length&&(e+="...&nbsp;"),e}),L=r(()=>{var e;return h.value.length>S.value.length||((e=t.value)==null?void 0:e.isTransaction)}),M=r(()=>{var o;const e=((o=t.value)==null?void 0:o.date)??"",a=e?new Date(e):new Date;return ee(a,"LLL. d, yyyy")}),$=r(()=>{var e;return(e=t.value)==null?void 0:e.repaymentImages.reduce((a,o)=>(a.some(q=>q.hash===o.hash)||a.push(o),a),[])}),U=()=>{w("read-more-clicked",t.value.id),i("portfolio","click","borrower-update-read-more",t.value.id)},V=()=>{w("share-loan-clicked"),i("portfolio","click","borrower-update-share-loan",d.value.id)};H(()=>{var e;(e=t.value)!=null&&e.isRepayment&&i("portfolio","view","At least one repayment update viewed")});const F=r(()=>{var e,a;return((e=t.value)==null?void 0:e.livesToImpact)===1?`You-can-impact-${encodeURIComponent(t.value.livesToImpact)}-life-right-now`:((a=t.value)==null?void 0:a.livesToImpact)>1?`You-can-impact-${encodeURIComponent(t.value.livesToImpact)}-lives-right-now`:"You-can-impact-lives-right-now"}),D=()=>{i("portfolio","click","repayment-update-read-more",t.value.id),window.location.href=`/lend/filter?header=${F.value}`};return(e,a)=>(l(),u("div",le,[n("div",ie,[m(t).isRepayment&&m(t).status==="repayment-summary"&&$.value.length?(l(),u("div",ue,[T(m(oe),{images:$.value},null,8,["images"])])):(l(),u("div",ce,[x.value?(l(),I(m(O),{key:0,class:"tw-w-full tw-rounded-full tw-bg-brand",alt:p.value,"aspect-ratio":1,"default-image":{width:80,faceZoom:50},hash:x.value,images:[{width:80,faceZoom:50,viewSize:1024},{width:72,faceZoom:50,viewSize:734},{width:64,faceZoom:50}]},null,8,["alt","hash"])):(l(),I(m(G),{key:1,class:"tw-w-6 tw-h-6 lg:tw-w-8 lg:tw-h-8"}))])),n("div",de,[n("p",me,g(m(t).title||N.value),1),n("div",we,g(B.value),1)])]),n("div",pe,[n("p",he,[n("span",{innerHTML:z.value,class:""},null,8,fe),m(t).isRepayment?(l(),u("span",ve,[m(t).isRepayment?(l(),u("button",{key:0,class:"tw-inline tw-text-action hover:tw-underline",onClick:D}," relend now. ")):f("",!0)])):f("",!0)]),!m(t).isRepayment&&L.value?(l(),u("button",{key:0,class:"tw-inline tw-text-action hover:tw-underline",onClick:U}," read more ")):f("",!0)]),n("div",{class:R(["tw-flex tw-items-center tw-mt-auto",{"tw-justify-between":y.value},{"tw-justify-end":!y.value}])},[y.value?(l(),u("button",{key:0,class:"tw-flex tw-items-center",onClick:V},[n("div",ye,[T(m(W),{class:"tw-w-2 tw-h-2 tw-text-action",icon:m(K)},null,8,["icon"])]),a[0]||(a[0]=n("span",{class:"tw-text-small tw-font-medium"},"Share",-1))])):f("",!0),n("div",ge,[s.updateNumber?(l(),u("span",_e,[Z(" Update #"+g(s.updateNumber)+" ",1),a[1]||(a[1]=n("span",{class:"tw-mx-1"},"â€¢",-1))])):f("",!0),n("span",null,g(M.value),1)])],2)]))}};be.__docgenInfo={exportName:"default",displayName:"JournalUpdateCard",description:"",tags:{},props:[{name:"update",type:{name:"object"},required:!0},{name:"updateNumber",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"read-more-clicked"},{name:"share-loan-clicked"}],sourceFiles:["/home/runner/work/ui/ui/src/components/MyKiva/JournalUpdateCard.vue"]};export{be as _};
