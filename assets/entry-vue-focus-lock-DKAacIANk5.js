import{l as yn,z as gn,h as j,j as A,w as Nn,A as En,B as xn,c as I,d as W,e as wn,u as q,g as Sn,C as Tn,D as V,o as M}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";var D="data-focus-lock",J="data-focus-lock-disabled",Q="data-no-focus-lock",X="data-autofocus-inside",Z="data-no-autofocus";const _n=Object.freeze(Object.defineProperty({__proto__:null,FOCUS_ALLOW:Q,FOCUS_AUTO:X,FOCUS_DISABLED:J,FOCUS_GROUP:D,FOCUS_NO_AUTOFOCUS:Z},Symbol.toStringTag,{value:"Module"}));var p=function(n){for(var t=Array(n.length),e=0;e<n.length;++e)t[e]=n[e];return t},w=function(n){return Array.isArray(n)?n:[n]},nn=function(n){return Array.isArray(n)?n[0]:n},An=function(n){if(n.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(n,null);return!t||!t.getPropertyValue?!1:t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"},tn=function(n){return n.parentNode&&n.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?n.parentNode.host:n.parentNode},en=function(n){return n===document||n&&n.nodeType===Node.DOCUMENT_NODE},In=function(n){return n.hasAttribute("inert")},Mn=function(n,t){return!n||en(n)||!An(n)&&!In(n)&&t(tn(n))},rn=function(n,t){var e=n.get(t);if(e!==void 0)return e;var r=Mn(t,rn.bind(void 0,n));return n.set(t,r),r},Cn=function(n,t){return n&&!en(n)?Dn(n)?t(tn(n)):!1:!0},on=function(n,t){var e=n.get(t);if(e!==void 0)return e;var r=Cn(t,on.bind(void 0,n));return n.set(t,r),r},un=function(n){return n.dataset},Un=function(n){return n.tagName==="BUTTON"},an=function(n){return n.tagName==="INPUT"},cn=function(n){return an(n)&&n.type==="radio"},Fn=function(n){return!((an(n)||Un(n))&&(n.type==="hidden"||n.disabled))},Dn=function(n){var t=n.getAttribute(Z);return![!0,"true",""].includes(t)},fn=function(n){var t;return!!(n&&!((t=un(n))===null||t===void 0)&&t.focusGuard)},z=function(n){return!fn(n)},kn=function(n){return!!n},Ln=function(n,t){var e=Math.max(0,n.tabIndex),r=Math.max(0,t.tabIndex),o=e-r,u=n.index-t.index;if(o){if(!e)return 1;if(!r)return-1}return o||u},Bn=function(n){return n.tabIndex<0&&!n.hasAttribute("tabindex")?0:n.tabIndex},Pn=function(n,t,e){return p(n).map(function(r,o){var u=Bn(r);return{node:r,index:o,tabIndex:u}}).filter(function(r){return!0}).sort(Ln)},Rn=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],dn=Rn.join(","),ln=function(n,t){return p((n.shadowRoot||n).children).reduce(function(e,r){return e.concat(r.matches(dn)?[r]:[],ln(r))},[])},Gn=function(n,t){var e;return n instanceof HTMLIFrameElement&&!((e=n.contentDocument)===null||e===void 0)&&e.body?B([n.contentDocument.body]):[n]},B=function(n,t){return n.reduce(function(e,r){var o,u=ln(r),a=(o=[]).concat.apply(o,u.map(function(l){return Gn(l)}));return e.concat(a,r.parentNode?p(r.parentNode.querySelectorAll(dn)).filter(function(l){return l===r}):[])},[])},jn=function(n){var t=n.querySelectorAll("[".concat(X,"]"));return p(t).map(function(e){return B([e])}).reduce(function(e,r){return e.concat(r)},[])},sn=function(n,t){return p(n).filter(function(e){return rn(t,e)}).filter(function(e){return Fn(e)})},H=function(n,t){return t===void 0&&(t=new Map),p(n).filter(function(e){return on(t,e)})},K=function(n,t){return Pn(sn(B(n),t))},Wn=function(n,t){return sn(jn(n),t)},y=function(n,t){return n.shadowRoot?y(n.shadowRoot,t):Object.getPrototypeOf(n).contains!==void 0&&Object.getPrototypeOf(n).contains.call(n,t)?!0:p(n.children).some(function(e){var r;if(e instanceof HTMLIFrameElement){var o=(r=e.contentDocument)===null||r===void 0?void 0:r.body;return o?y(o,t):!1}return y(e,t)})},qn=function(n){for(var t=new Set,e=n.length,r=0;r<e;r+=1)for(var o=r+1;o<e;o+=1){var u=n[r].compareDocumentPosition(n[o]);(u&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(o),(u&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(r)}return n.filter(function(a,l){return!t.has(l)})},vn=function(n){return n.parentNode?vn(n.parentNode):n},mn=function(n){var t=w(n);return t.filter(Boolean).reduce(function(e,r){var o=r.getAttribute(D);return e.push.apply(e,o?qn(p(vn(r).querySelectorAll("[".concat(D,'="').concat(o,'"]:not([').concat(J,'="disabled"])')))):[r]),e},[])},Vn=function(n){try{return n()}catch{return}},E=function(n){if(n===void 0&&(n=document),!(!n||!n.activeElement)){var t=n.activeElement;return t.shadowRoot?E(t.shadowRoot):t instanceof HTMLIFrameElement&&Vn(function(){return t.contentWindow.document})?E(t.contentWindow.document):t}},zn=function(n,t){return n===t},Hn=function(n,t){return!!p(n.querySelectorAll("iframe")).some(function(e){return zn(e,t)})},Kn=function(n,t){return t===void 0&&(t=E(nn(n).ownerDocument)),!t||t.dataset&&t.dataset.focusGuard?!1:mn(n).some(function(e){return y(e,t)||Hn(e,t)})},Yn=function(n){n===void 0&&(n=document);var t=E(n);return t?p(n.querySelectorAll("[".concat(Q,"]"))).some(function(e){return y(e,t)}):!1},$n=function(n,t){return t.filter(cn).filter(function(e){return e.name===n.name}).filter(function(e){return e.checked})[0]||n},P=function(n,t){return cn(n)&&n.name?$n(n,t):n},Jn=function(n){var t=new Set;return n.forEach(function(e){return t.add(P(e,n))}),n.filter(function(e){return t.has(e)})},Y=function(n){return n[0]&&n.length>1?P(n[0],n):n[0]},$=function(n,t){return n.indexOf(P(t,n))},k="NEW_FOCUS",Qn=function(n,t,e,r,o){var u=n.length,a=n[0],l=n[u-1],m=fn(r);if(!(r&&n.indexOf(r)>=0)){var i=r!==void 0?e.indexOf(r):-1,g=o?e.indexOf(o):i,s=o?n.indexOf(o):-1;if(i===-1)return s!==-1?s:k;if(s===-1)return k;var v=i-g,b=e.indexOf(a),f=e.indexOf(l),d=Jn(e),N=r!==void 0?d.indexOf(r):-1,S=N-(o?d.indexOf(o):i);if(!v&&s>=0||t.length===0)return s;var x=$(n,t[0]),h=$(n,t[t.length-1]);if(i<=b&&m&&Math.abs(v)>1)return h;if(i>=f&&m&&Math.abs(v)>1)return x;if(v&&Math.abs(S)>1)return s;if(i<=b)return h;if(i>f)return x;if(v)return Math.abs(v)>1?s:(u+s+v)%u}},Xn=function(n){return function(t){var e,r=(e=un(t))===null||e===void 0?void 0:e.autofocus;return t.autofocus||r!==void 0&&r!=="false"||n.indexOf(t)>=0}},Zn=function(n,t,e){var r=n.map(function(u){var a=u.node;return a}),o=H(r.filter(Xn(e)));return o&&o.length?Y(o):Y(H(t))},L=function(n,t){return t===void 0&&(t=[]),t.push(n),n.parentNode&&L(n.parentNode.host||n.parentNode,t),t},C=function(n,t){for(var e=L(n),r=L(t),o=0;o<e.length;o+=1){var u=e[o];if(r.indexOf(u)>=0)return u}return!1},nt=function(n,t,e){var r=w(n),o=w(t),u=r[0],a=!1;return o.filter(Boolean).forEach(function(l){a=C(a||l,l)||a,e.filter(Boolean).forEach(function(m){var i=C(u,m);i&&(!a||y(i,a)?a=i:a=C(i,a))})}),a},tt=function(n,t){return n.reduce(function(e,r){return e.concat(Wn(r,t))},[])},et=function(n,t){var e=new Map;return t.forEach(function(r){return e.set(r.node,r)}),n.map(function(r){return e.get(r)}).filter(kn)},rt=function(n,t){var e=E(w(n).length>0?document:nn(n).ownerDocument),r=mn(n).filter(z),o=nt(e||n,n,r),u=new Map,a=K(r,u),l=a.filter(function(f){var d=f.node;return z(d)});if(l[0]){var m=K([o],u).map(function(f){var d=f.node;return d}),i=et(m,l),g=i.map(function(f){var d=f.node;return d}),s=i.filter(function(f){var d=f.tabIndex;return d>=0}).map(function(f){var d=f.node;return d}),v=Qn(g,s,m,e,t);if(v===k){var b=Zn(a,s,tt(r,u));if(b)return{node:b};console.warn("focus-lock: cannot find any node to move focus into");return}return v===void 0?v:i[v]}},ot=function(n,t){n&&("focus"in n&&n.focus(t),"contentWindow"in n&&n.contentWindow&&n.contentWindow.focus())},U=0,F=!1,ut=function(n,t,e){e===void 0&&(e={});var r=rt(n,t);if(!F&&r){if(U>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),F=!0,setTimeout(function(){F=!1},1);return}U++,ot(r.node,e.focusOptions),U--}},at=_n;const it=["tabIndex"],ct=["tabIndex"],dt=yn({__name:"FocusLock",props:{returnFocus:{type:Boolean},disabled:{type:Boolean},noFocusGuards:{type:[Boolean,String]},group:{}},setup(n){let t=[],e;const r=n,{returnFocus:o,disabled:u,noFocusGuards:a,group:l}=gn(r),m=j(null),i=j({disabled:!0,onActivation:()=>{}}),g=A(()=>({[at.FOCUS_GROUP]:l.value})),s=A(()=>a.value!==!0),v=A(()=>s.value&&a.value!=="tail");Nn(u,()=>{i.value.disabled=u.value,T()}),En(()=>{const c=V();c&&(i.value={instance:c.proxy,observed:m.value.querySelector("[data-lock]"),disabled:u.value,onActivation:()=>{e=e||document&&document.activeElement}},t.length||hn(),t.push(i.value),T())}),xn(()=>{const c=V();c&&(t=t.filter(({instance:O})=>O!==c.proxy),t.length||On(),o.value&&e&&e.focus&&e.focus(),T())});function b(c){setTimeout(c,0)}let f=null,d=null,N=!1;const S=()=>document&&document.activeElement===document.body,x=()=>S()||Yn(),h=()=>{if(f){const{observed:c,onActivation:O}=f;(N||!x()||!d)&&(c&&!Kn(c)&&(O(),ut(c,d)),N=!1,d=document&&document.activeElement)}},pn=c=>c.filter(({disabled:O})=>!O).slice(-1)[0],bn=c=>{f!==c&&(f=null),f=c,c&&(h(),b(h))},T=()=>{bn(pn(t))},R=()=>{h()},_=()=>{b(h)},G=()=>{N=!0,d=null},hn=()=>{document.addEventListener("focusin",R,!0),document.addEventListener("focusout",_),window.addEventListener("blur",G)},On=()=>{document.removeEventListener("focusin",R,!0),document.removeEventListener("focusout",_),window.removeEventListener("blur",G)};return(c,O)=>(M(),I("div",{ref_key:"rootEl",ref:m},[s.value?(M(),I("div",{key:0,tabIndex:q(u)?-1:0,"aria-hidden":"true"},null,8,it)):W("",!0),wn("div",Tn({onFocusout:_},g.value,{"data-lock":""}),[Sn(c.$slots,"default")],16),v.value?(M(),I("div",{key:1,tabIndex:q(u)?-1:0,"aria-hidden":"true"},null,8,ct)):W("",!0)],512))}});export{dt as s};
