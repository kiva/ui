import{f as m}from"./entry-filterUtils-D0mz1tA9_E.js";import{_ as p}from"./entry-orderBy-CUrcrXTfYx.js";function y(o){const n=p(o,"region");return n.forEach(r=>{r.countries=p(r.countries,"name")}),n}function C(o,n=[]){const r=n.find(s=>s.isoCode===o);return(r==null?void 0:r.name)??null}function E(o,n){return!o||!n?{}:n.reduce((s,e)=>{const t=o.filter(u=>{var i;return(i=e==null?void 0:e.countries)==null?void 0:i.find(d=>d.isoCode===u)}).map(u=>C(u,e==null?void 0:e.countries));return t.length?{...s,[e.region]:t}:{...s}},{})}function R(o,n){return Object.keys(n).reduce((r,s)=>{var t;const e=(t=o.find(u=>u.region===s))==null?void 0:t.countries.filter(u=>n[s].includes(u.name)).map(u=>u.isoCode);return[...r,...e||[]]},[])}function g(o,n=[]){const r=[];return o.forEach(({key:s,value:e})=>{const t=n.find(({country:d})=>d.isoCode.toUpperCase()===s.toUpperCase());if(!t)return;const u={...t.country,isoCode:s,numLoansFundraising:e},i=r.find(d=>d.region===u.region);i?(i.countries.push(u),i.numLoansFundraising+=e):r.push({region:u.region,countries:[u],numLoansFundraising:e})}),y(r)}function I(o,n){var s;if(!o)return;const r=decodeURI(o).toUpperCase();return r.includes(",")||(s=n==null?void 0:n.countryIsoCodes)!=null&&s.includes(r)?r.split(",").filter(e=>e!==""):r.split("~").reduce((e,t)=>{var d;const[u,i]=t.toUpperCase().split(">").map(c=>c.trim());if((d=n==null?void 0:n.countryNames)!=null&&d.includes(i)){const c=n.countryFacets.find(({country:f})=>f.region.toUpperCase()===u&&f.name.toUpperCase()===i);c&&e.push(c.country.isoCode)}return e},[])}function h(o,n){if(!o)return n;const r=[];return o.forEach(s=>{const e=n.find(i=>i.region===s.region),t=!!e,u={region:s.region,numLoansFundraising:t?e.numLoansFundraising:0,countries:[]};r.push(u),s.countries.forEach(i=>{const d={...i};if(!t)d.numLoansFundraising=0;else{const c=e.countries.find(f=>f.name===d.name);d.numLoansFundraising=(c==null?void 0:c.numLoansFundraising)||0}u.countries.push(d)})}),n.forEach(s=>{let e=r.find(t=>t.region===s.region);e||(e={region:s.region,numLoansFundraising:s.numLoansFundraising,countries:[]},r.push(e)),s.countries.forEach(t=>{e.countries.find(u=>u.name===t.name)||e.countries.push({...t})})}),y(r)}const v={uiConfig:{type:m.location,hasAccordion:!0,topLine:!1,bottomLine:!1,title:"Location",itemHeaderKey:void 0,placeholder:void 0,facetsKey:"regions",stateKey:"countryIsoCode",eventAction:void 0,allOptionsTitle:void 0,valueMap:void 0,isPercentage:!1,displayedUnit:void 0},getOptions:(o={},n={})=>g(n.isoCodes,o.countryFacets),showSavedSearch:o=>o.countryIsoCode.length>0,getFilterChips:(o,n)=>{var r;return(r=o.countryIsoCode)!=null&&r.length?o.countryIsoCode.map(s=>{var e,t;return(t=(e=n.countryFacets)==null?void 0:e.find(u=>u.country.isoCode===s))==null?void 0:t.country}):[]},getRemovedFacet:(o,n)=>({countryIsoCode:[...((o==null?void 0:o.countryIsoCode)??[]).filter(r=>(n==null?void 0:n.isoCode)!==r)]}),getSavedSearch:o=>({country:o==null?void 0:o.countryIsoCode}),getFlssFilter:o=>{var n;return{...((n=o==null?void 0:o.countryIsoCode)==null?void 0:n.length)&&{countryIsoCode:{any:o.countryIsoCode}}}},getValidatedSearchState:(o,n)=>{var r;return{countryIsoCode:((r=o==null?void 0:o.countryIsoCode)==null?void 0:r.filter(s=>{var e;return(e=n==null?void 0:n.countryIsoCodes)==null?void 0:e.includes(s.toUpperCase())}))??[]}},getFilterFromQuery:(o,n)=>({countryIsoCode:I(o.country||o.countries,n)??[]}),getQueryFromFilter:o=>{var n;return{...((n=o.countryIsoCode)==null?void 0:n.length)&&{country:o.countryIsoCode.join()}}}};export{R as a,h as g,E as m,v as r};
