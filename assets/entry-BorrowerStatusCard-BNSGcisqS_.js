import{t as Z,j as D,g as a,w as q,c as r,m as h,q as s,L as d,D as z,a as f,u as l,J as H,I as W,b as G,K as X,o as i}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{H as J}from"./entry-HeroBackground-DUNtZ1thHe.js";import{B as Y}from"./entry-BorrowerImage-CdYtz78wPt.js";import{v as Q,f as ee}from"./entry-mdi-B1ONwcTkQ2.js";import{x as B}from"./entry-KvMaterialIcon-C3KLX5OV-L.js";import"./entry-KvWwwHeader-C1bm1YMh4q.js";import"./entry-numeral-xVHG5DEP0A.js";import{_ as te}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";const oe="defaulted",C="ended",N="expired",ae="funded",I="fundraising",se="inactiveExpired",ne="payingBack",re="raised",R="refunded",le={class:"card-container"},ie={key:0,class:"tw-bg-white tw-absolute tw-top-1 tw-left-1 tw-rounded tw-px-1 tw-py-0.5 tw-font-medium"},ue={key:1,class:"tw-absolute tw-top-1 tw-right-1"},ce={class:"tw-relative"},de=["onClick"],we={class:"tw-top-0 tw-h-full tw-w-full tw-overflow-hidden tw-rounded-t tw-flex tw-flex-col"},me={class:"tw-flex tw-justify-center tw-gap-1 md:tw-gap-3 tw-flex-col md:tw-flex-row tw-px-1.5 md:tw-px-2.5 md:tw-pb-1.5 tw-flex-grow tw-pb-1.5"},fe={class:"tw-text-center md:tw-text-left tw-flex-grow md:tw-flex-1"},ve={class:"tw-w-10 tw-h-10 tw-mx-auto md:tw-mx-0 tw-border-white tw-border-4 tw-rounded-full tw-shadow tw--mt-5"},pe={class:"tw-text-center md:tw-text-left tw-mb-1 tw-line-clamp-2 tw-font-medium"},he={class:"tw-text-center md:tw-text-left tw-line-clamp-2"},_e={class:"tw-text-action tw-font-medium md:tw-w-full md:tw-text-left"},S="comment",F="share",$={__name:"BorrowerStatusCard",props:{loan:{type:Object,required:!0},showMenu:{type:Boolean,default:!1}},emits:["open-comment-modal","open-share-modal","open-side-sheet"],setup(_,{emit:A}){const x=G("$kvTrackEvent"),v=A,g=_,{loan:t}=Z(g),n=D(!1),w=D(null),u=a(()=>{var e;return((e=t.value)==null?void 0:e.name)??""}),L=a(()=>{var e,o,c;return((c=(o=(e=t.value)==null?void 0:e.geocode)==null?void 0:o.country)==null?void 0:c.name)??""}),j=a(()=>{var e,o;return((o=(e=t.value)==null?void 0:e.image)==null?void 0:o.hash)??""}),M=a(()=>{var e,o;return((e=t.value)==null?void 0:e.gender)==="male"?"his":((o=t==null?void 0:t.value)==null?void 0:o.gender)==="female"?"her":"their"}),T=a(()=>`${u.value} in ${L.value}`),U=a(()=>{var e;return((e=t.value)==null?void 0:e.use)??""}),b=a(()=>{var e;return((e=t.value)==null?void 0:e.status)===I}),V=a(()=>{const e=[{id:F,label:"Share"}];return b.value&&e.unshift({id:S,label:"Leave a comment"}),e}),p=a(()=>{var e;return![R,N,C].includes((e=t.value)==null?void 0:e.status)}),y=a(()=>p.value?"Whatâ€™s next?":"Learn what this means"),k=a(()=>{var e;switch((e=t.value)==null?void 0:e.status){case I:return"ðŸŽ‰ Fundraising";case re:case ae:return"ðŸŽ‰ Funded";case ne:return"ðŸŽ‰ Repaying";case R:return"Refunded";case se:case N:return"Expired";case oe:return"Ended in default";case C:return"ðŸŽ‰ Repaid";default:return""}}),P=a(()=>{let e=b.value?"will use ":"used ";return e+=M.value,p.value&&(e="asked for a "),`${u.value}
		${e}
		loan ${U.value}`}),K=()=>{if(x("portfolio","click",y.value,u.value,t.value.id),p.value){v("open-side-sheet",{loan:t.value});return}window.location="https://help.kiva.org/s/article/What-happens-if-a-loan-doesn-t-fully-fund-on-Kiva-1611075923145"},O=e=>{e===S?v("open-comment-modal",{loan:t.value,borrowerName:u.value}):e===F&&(x("portfolio","click","share-lightbox","social_share_portfolio"),v("open-share-modal",{loan:t.value})),n.value=!1},E=e=>{const o=(w==null?void 0:w.value)??null;if(!o)return!1;!e.composedPath().includes(o)&&n.value&&(n.value=!1)};return q(()=>n.value,()=>{g.showMenu&&setTimeout(()=>{n.value?document.addEventListener("pointerup",E):document.removeEventListener("pointerup",E)})}),(e,o)=>{const c=X("kv-track-event");return i(),r("div",le,[k.value?(i(),r("div",ie,d(k.value),1)):h("",!0),_.showMenu?(i(),r("div",ue,[s("div",ce,[z((i(),r("button",{class:"tw-bg-white tw-rounded-full tw-w-4 tw-h-4 tw-flex tw-items-center tw-justify-center tw-absolute tw-right-0 menu-trigger",onClick:o[0]||(o[0]=m=>n.value=!0)},[f(l(B),{icon:l(Q)},null,8,["icon"])])),[[c,["portfolio","click","3-dot-menu"]]]),n.value?(i(),r("div",{key:0,ref_key:"optionsMenu",ref:w,class:"tw-absolute tw-right-0 tw-rounded tw-border tw-border-tertiary tw-bg-white tw-z-1 vertical-menu",style:{width:"236px"}},[(i(!0),r(H,null,W(V.value,m=>(i(),r("div",{key:m.id,class:"tw-px-3 tw-py-1.5 tw-border-b tw-border-gray-100 last:tw-border-b-0"},[s("button",{onClick:xe=>O(m.id),class:"tw-w-full tw-text-left"},d(m.label),9,de)]))),128))],512)):h("",!0)])])):h("",!0),s("div",we,[f(l(J),{style:{height:"92px"},"status-card":!0,class:"!tw-block","loan-id":l(t).id},null,8,["loan-id"]),s("div",me,[s("div",fe,[s("div",ve,[f(l(Y),{class:"tw-w-full tw-rounded-full",alt:u.value,"aspect-ratio":1,"default-image":{width:80,faceZoom:50},hash:j.value,images:[{width:80,faceZoom:50,viewSize:1024},{width:72,faceZoom:50,viewSize:734},{width:64,faceZoom:50}]},null,8,["alt","hash"])]),s("div",pe,d(T.value),1),s("p",he,d(P.value),1),s("button",{class:"tw-flex tw-items-center tw-justify-center tw-mt-1",onClick:K},[s("p",_e,d(y.value),1),f(l(B),{class:"tw-w-3 tw-h-3 tw-text-action",icon:l(ee)},null,8,["icon"])])])])])])}}},Ne=te($,[["__scopeId","data-v-4092dc2b"]]);$.__docgenInfo={exportName:"default",displayName:"BorrowerStatusCard",description:"",tags:{},props:[{name:"loan",type:{name:"object"},required:!0},{name:"showMenu",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"open-comment-modal"},{name:"open-share-modal"},{name:"open-side-sheet"}],sourceFiles:["/home/runner/work/ui/ui/src/components/MyKiva/BorrowerStatusCard.vue"]};export{Ne as B,N as E,I as F,ne as P,re as R,ae as a,R as b,C as c};
