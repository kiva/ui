const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./entry-right-leaning-line-0XpbhmS2af.js","./entry-vue.esm-bundler-Bf_Yeyugwo.js","./entry-left-leaning-line-yStJMzH8dZ.js"])))=>i.map(i=>d[i]);
import{_ as P}from"./iframe-CWeBLAo0.js";import{c as i,o as l,e as r,h as L,j as d,A as Z,B as ee,d as p,H as j,I as N,f as O,x as u,u as o,K as f,n as g,a as D,b as te,R as S}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";import{u as ae}from"./entry-useIsMobile-xayPsKkxoo.js";import{M as se,u as oe,i as le,b as B,a as _,d as z}from"./entry-useBadgeModal-DDfZLk7ICY.js";import{J as re}from"./entry-KvUserAvatar-CcUKtQr-4i.js";import"./entry-KvWwwHeader-CVdIzOPj6Q.js";import"./entry-numeral-DJCTM12wUX.js";import{K as ne}from"./entry-KvIcon-DpMQFaEAGT.js";import{u as ie,e as ce}from"./entry-useBadgeData-BVPFKdTbm4.js";import{B as de}from"./entry-BadgeContainer-BRPTRCHYtf.js";import{_ as ue}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{f as me}from"./entry-index-CGacd2nhU3.js";import"./entry-throttle-DL1zg7kAk0.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-isSymbol-5pnFTpIKM9.js";import"./entry-toNumber-MeiYJWOH0A.js";import"./entry-imageUtils-_95xo2d0ng.js";import"./entry-KvLoadingPlaceholder-DUZzoT9CoU.js";import"./entry-logReadQueryError-Codcl0QZ_g.js";import"./entry-logFormatter-DhjghUk5Me.js";import"./entry-achievementUtils-Cf0LlmQMSn.js";import"./entry-index-COmIkRYU2t.js";import"./entry-index-CbPSoDvqj7.js";import"./entry-index-tAHLmhMYuW.js";import"./entry-index-D4S0JsTkt8.js";const pe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 124 124"};function ge(y,b){return l(),i("svg",pe,b[0]||(b[0]=[r("path",{d:"M62 2C30.00842 2 4 28.00842 4 60s26.00842 58 58 58 58-26.00842 58-58S93.99158 2 62 2zm24.76943 50.88227L60.673 78.8278C59.21645 80.27594 57.2744 81 55.21094 81c-1.94206 0-3.88412-.72406-5.46204-2.17219L36.27585 65.312c-3.03447-3.01692-3.03447-7.72332 0-10.74025 3.03447-3.01692 7.76825-3.01692 10.80272 0l8.25375 8.20604 20.6344-20.51509c3.03447-3.01692 7.76824-3.01692 10.80271 0 3.03447 3.01693 2.9131 7.72333 0 10.61958z",fill:"#49953f"},null,-1)]))}const ve={render:ge},we={class:"tw-flex tw-flex-col tw-h-full"},he={key:0,class:"tw-flex tw-space-x-1 tw-items-center tw-pb-0.5 tw-pl-1"},fe={class:"tw-flex"},_e={key:0},ye={class:"tw-border-b-2 tw-border-tertiary tw-pb-1 tw-mx-1"},be={class:"tw-flex tw-justify-start tw-w-full"},De=["onClick"],Be=["src"],xe={class:"tw-text-left tw-bg-white tw-z-1 tw-relative tw-pl-2 tw-space-y-0.5"},Ce={key:0,class:"tw-font-small tw-px-0"},ke={key:0,class:"tw-inline-flex tw-items-center tw-rounded tw-space-x-1"},Le={class:"tw-font-medium"},Ee={key:0,class:"tw-h-0.5"},R={__name:"BadgeModalContentJourney",props:{badge:{type:Object,required:!0},loans:{type:Array,default:()=>[]}},emits:["badge-level-clicked","toggle-gradient"],setup(y,{emit:b}){const s=y,{getLevelCaption:G}=ie(),{isMobile:m}=ae(se),v=L(null),x=L(!1),K=e=>e===0?"0px":m.value?"25px":"50px",w=d(()=>s.badge.id===ce),E=d(()=>m.value?"98px":"108px"),M=d(()=>m.value?"150px":"170px"),I=d(()=>m.value?"50px":"100px"),{getTierPositions:V}=oe(s.badge),A=b,C=L(V()),H=e=>{var t;return(!s.badge.achievementData.tiers[e-1]||!!((t=s.badge.achievementData.tiers[e-1])!=null&&t.completedDate))&&!s.badge.achievementData.tiers[e].completedDate},c=e=>(s.badge.achievementData.tiers[e]??{}).completedDate?z:H(e)?_:B,J=e=>G(s.badge.achievementData.tiers[e]),U=e=>{let t;const n=s.badge.achievementData.tiers[e];return[_].includes(c(e))?t=s.badge.achievementData.totalProgressToAchievement:t=Math.min(s.badge.achievementData.totalProgressToAchievement,n.target),[B].includes(c(e))?`${n.target} loans`:`
		Progress:
		${t}/${n.target}
		loans
	`},q=e=>{const t=s.badge.achievementData.tiers[e];return`Achieved on ${me(new Date(t.completedDate),"MMMM do, yyyy")}!`},F=e=>{c(e)!==B&&A("badge-level-clicked",{id:s.badge.id,challengeName:s.badge.challengeName,tier:s.badge.achievementData.tiers[e]})},k=d(()=>{var e,t;return(t=((e=s.badge.achievementData)==null?void 0:e.loanPurchases)??[])==null?void 0:t.map(n=>n.loan).filter(n=>n!=null)}),h=d(()=>{var e;return((e=s.badge.achievementData)==null?void 0:e.totalProgressToAchievement)??0}),T=d(()=>h.value-3),W=d(()=>{const e=k.value.slice(0,3).map(t=>(t==null?void 0:t.name)??"");return e.length>1?`${e.slice(0,-1).join(", ")} and ${e.at(-1)}`:e[0]||""}),Y=d(()=>`${h.value?`Your loan${h.value>1?"s":""} to ${W.value} ${h.value>1?"have":"has"} made progress toward these achievements. `:""}${s.badge.description}`),Q=S(()=>P(()=>import("./entry-right-leaning-line-0XpbhmS2af.js"),__vite__mapDeps([0,1]),import.meta.url)),X=S(()=>P(()=>import("./entry-left-leaning-line-yStJMzH8dZ.js"),__vite__mapDeps([2,1]),import.meta.url)),$=e=>{const t=e.target.scrollTop+e.target.clientHeight+1>=e.target.scrollHeight;x.value!==t&&(x.value=t,A("toggle-gradient",x.value))};return Z(()=>{v.value=document.getElementById("sidesheet-content"),v.value&&v.value.addEventListener("scroll",$)}),ee(()=>{v.value&&v.value.removeEventListener("scroll",$)}),(e,t)=>(l(),i("div",we,[k.value.length?(l(),i("div",he,[r("div",fe,[(l(!0),i(j,null,N(k.value.slice(0,3),(n,a)=>(l(),O(o(re),{class:"avatar tw-border-white tw-rounded-full tw-border-2",key:n.id,"lender-name":n.name,"lender-image-url":n.image.url,style:u({"z-index":h.value,"margin-left":a>0?"-25px":0})},null,8,["lender-name","lender-image-url","style"]))),128))]),T.value>0?(l(),i("p",_e," +"+f(T.value),1)):p("",!0)])):p("",!0),r("p",ye,f(Y.value),1),r("div",be,[r("div",{class:g(["tw-flex tw-flex-col tw-overflow-x-auto tw-overflow-y-hidden tw-items-start",{"tw-flex-col tw-pt-2 tw-px-1":o(m),"tw-flex-row tw-py-2 tw-px-0.5":!o(m)}])},[(l(!0),i(j,null,N(C.value,(n,a)=>(l(),i("div",{key:a},[r("div",{class:"badge tw-relative tw-flex tw-items-center",style:u({marginTop:K(a),zIndex:C.value.length-a})},[r("div",{class:"tw-relative tw-flex tw-text-center tw-bg-white tw-cursor-pointer",onClick:Me=>F(a)},[D(o(de),{status:c(a),shape:o(le)(y.badge.id),style:u({width:E.value,height:E.value}),class:g({"tw--ml-1.5":w.value})},{default:te(()=>[r("img",{src:y.badge.contentfulData[a].imageUrl,alt:"Badge"},null,8,Be)],void 0),_:2},1032,["status","shape","style","class"])],8,De),r("div",xe,[r("div",null,[c(a)!==o(B)?(l(),i("div",Ce,[r("span",null,"Achievement "+f(J(a)),1)])):p("",!0),r("div",{class:g(["tw-inline-flex tw-items-center tw-rounded tw-space-x-1",{"tw-bg-eco-green-1 tw-px-1 tw-py-1":c(a)==o(_)}])},[c(a)==o(_)?(l(),O(o(ne),{key:0,class:"tw-text-eco-green-3 icon-width",name:"progress-checkmark"})):p("",!0),r("span",{class:g({"tw-font-medium":c(a)==o(_)})},f(U(a)),3)],2)]),c(a)==o(z)?(l(),i("div",ke,[D(o(ve),{class:"icon-width"}),r("span",Le,f(q(a)),1)])):p("",!0)])],4),a!==C.value.length-1?(l(),i("div",Ee,[a%2===0?(l(),i("div",{key:0,class:g(["tw-overflow-hidden",{"tw-pl-3 md:tw-pl-4":w.value,"tw-pl-5 md:tw-pl-5":!w.value}]),style:u({height:I.value})},[D(o(Q),{style:u({height:M.value})},null,8,["style"])],6)):(l(),i("div",{key:1,class:g(["tw-overflow-hidden",{"tw-pl-3 md:tw-pl-4":w.value,"tw-pl-4 md:tw-pl-5":!w.value}]),style:u({height:I.value})},[D(o(X),{style:u({height:M.value})},null,8,["style"])],6))])):p("",!0)]))),128))],2)])]))}},tt=ue(R,[["__scopeId","data-v-99730ffc"]]);R.__docgenInfo={exportName:"default",displayName:"BadgeModalContentJourney",description:"",tags:{},props:[{name:"badge",type:{name:"object"},required:!0},{name:"loans",type:{name:"array"},defaultValue:{func:!1,value:"[]"}}],events:[{name:"badge-level-clicked"},{name:"toggle-gradient"}],sourceFiles:["/home/runner/work/ui/ui/src/components/MyKiva/BadgeModalContentJourney.vue"]};export{tt as default};
