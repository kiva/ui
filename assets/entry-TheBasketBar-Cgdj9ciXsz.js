import{_ as y}from"./entry-KvButton-C9WvITgRyG.js";import{g as b}from"./entry-getCacheKey-CFbvtT9xx4.js";import{z as p,C as d,T as x,r as k,o as s,c,m as h,q as a,M as l,a as w,B as T,D as F,A as m,K as D,L as f,J as N}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{_}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{_ as S}from"./entry-basketCount-CZ-kE9ye_Z.js";import{z as V}from"./entry-mdi-B1ONwcTkQ2.js";import{x as K}from"./entry-KvMaterialIcon-C3KLX5OV-L.js";import"./entry-KvWwwHeader-C1bm1YMh4q.js";import{g as $}from"./entry-KvButton-BA7nBLyz1b.js";import"./entry-numeral-xVHG5DEP0A.js";const g={name:"CookieBanner",serverCacheKey:()=>b("CookieBanner"),inject:{cookieStore:{default:null}},components:{KvButton:y},data(){return{showBanner:!1}},methods:{handleClickClose(){this.showBanner=!1,this.$kvTrackEvent("global","gdpr-notice","click-close")},migrateCookie(){this.cookieStore.get("kvgdpr_closed")==="true"&&(this.cookieStore.remove("kvgdpr_closed"),this.setGdprCookie())},setGdprCookie(){const e=`viewed=true&viewed_date=${new Date().getTime()}`;try{this.cookieStore.set("kvgdpr",e,{expires:new Date(new Date().setFullYear(new Date().getFullYear()+1))})}catch{}}},mounted(){var t,e;this.migrateCookie(),(e=(t=this.$appConfig)==null?void 0:t.oneTrust)!=null&&e.enable||this.cookieStore.get("kvgdpr")===void 0&&(this.showBanner=!0,this.$kvTrackEvent("global","gdpr-notice","visible"),this.setGdprCookie())}},j={key:0,class:"cookie-banner-container"},I={class:"cookie-banner"},z={class:"cookie-banner-content"};function E(t,e,n,r,o,i){const u=k("kv-button");return s(),p(x,{name:"kvfade"},{default:d(()=>[o.showBanner?(s(),c("div",j,[a("div",I,[a("div",z,[e[1]||(e[1]=l(" We use cookies to improve your experience and enable the functionality and security of this site. By continuing to use this site, you agree to the use of these cookies. For more information or to change your cookie preferences please see our ")),e[2]||(e[2]=a("a",{href:"/legal/cookie",target:"_blank"},"cookie policy",-1)),e[3]||(e[3]=l(". ")),w(u,{class:"setting close-button",onClick:T(i.handleClickClose,["stop","prevent"]),"aria-label":"Close"},{default:d(()=>e[0]||(e[0]=[l(" Sounds good ")]),void 0,!0),_:1,__:[0]},8,["onClick"])])])])):h("",!0)],void 0),_:1})}const Q=_(g,[["render",E],["__scopeId","data-v-ef941843"]]);g.__docgenInfo={displayName:"CookieBanner",exportName:"default",description:"",tags:{},sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/CookieBanner.vue"]};const v={name:"TheBasketBar",components:{KvButton:$,KvMaterialIcon:K},inject:{apollo:{default:null},cookieStore:{default:null}},data(){return{count:0,mdiCart:V}},apollo:{query:S,preFetch:!0,shouldPreFetch(t,{renderConfig:e}){return!e.useCDNCaching},result({data:t}){var e;this.count=((e=t==null?void 0:t.shop)==null?void 0:e.nonTrivialItemCount)||0}},props:{corporate:{type:Boolean,default:!1},floating:{type:Boolean,default:!1}},computed:{basketLink(){return this.corporate?this.addHashToRoute("#show-basket"):"/basket"},hideBasketBar(){var r;const t=["/join-team","/checkout","/lend"],e=(r=this.$route)==null?void 0:r.path;return t.filter(o=>e.indexOf(o)!==-1).length>0}},methods:{addHashToRoute(t){const e={...this.$route};return e.hash=t,e}}},R={key:0,class:"tw-flex tw-content-center tw-justify-center tw-gap-1"};function q(t,e,n,r,o,i){const u=k("kv-material-icon"),B=k("kv-button"),C=D("kv-track-event");return o.count>0&&!i.hideBasketBar?(s(),c("div",{key:0,class:m(["basket-bar tw-flex md:tw-hidden tw-fixed tw-z-sticky",[{"tw-w-full tw-bg-primary tw-border-t tw-border-tertiary tw-py-1 tw-px-2 tw-left-0 tw-bottom-0":!n.floating},{"tw-w-auto tw-items-center tw-justify-center tw-bottom-2 tw-right-2 tw-rounded-full tw-p-1.5 ":n.floating}]])},[F((s(),p(B,{to:i.basketLink,class:m([{"tw-w-full tw-shadow-sm":!n.floating}])},{default:d(()=>[n.floating?(s(),c("span",R,[w(u,{icon:o.mdiCart,class:"tw-w-3 tw-h-3"},null,8,["icon"]),a("span",null,f(o.count),1),e[0]||(e[0]=a("span",{class:"tw-sr-only"},"items in your cart",-1))])):(s(),c(N,{key:1},[l(" Basket ("+f(o.count)+") ",1)],64))],void 0),_:1},8,["to","class"])),[[C,["BasketBar","click-Basket"]]])],2)):h("",!0)}const U=_(v,[["render",q]]);v.__docgenInfo={displayName:"TheBasketBar",exportName:"default",description:"",tags:{},props:[{name:"corporate",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"floating",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/TheBasketBar.vue"]};export{Q as C,U as T};
