const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./entry-BraintreeDropInInterface-DkrGCRTOL4.js","./iframe-CWeBLAo0.js","./entry-get-BUjo_hX5jl.js","./entry-_commonjsHelpers-Cpj98o6Yn6.js","./entry-get-D3xDH2SX94.js","./entry-isSymbol-5pnFTpIKM9.js","./entry-numeral-DJCTM12wUX.js","./entry-KvLoadingSpinner-D6PAL1PtJd.js","./entry-vue.esm-bundler-Bf_Yeyugwo.js","./entry-_plugin-vue_export-helper-DlAUqK2UKH.js","./KvLoadingSpinner-Ut_6a0b4.css","./entry-exports-CudK1O5XNw.js","./BraintreeDropInInterface-DZSa5ROF.css","./entry-CampaignLogoGroup-D5aVYDQ4uA.js","./entry-kiva-logo-fyRkKmi0FM.js","./entry-KvWwwHeader-CVdIzOPj6Q.js","./KvWwwHeader-CNHTwYuN.css","./entry-KvContentfulImg-ClwkYYkTk_.js","./entry-CampaignPartner-Yn71Z-PbOP.js","./entry-richTextRenderer-CZAKD6FB9X.js","./entry-contentfulUtils-CqD1k4MYgu.js","./entry-index-Dew-HucFLB.js","./entry-rich-text-html-renderer.es5-kBaKhcHuza.js","./entry-KvContentfulImg-DUC7wnP7UI.js","./KvContentfulImg-gue9I4IN.css","./entry-CampaignThanks-CJWTw8NLuo.js","./entry-confetti.module-BCnSlh9tqh.js","./entry-KvAccordionItem-BUdedcIFQ1.js","./entry-KvExpandable-DeDyumYo7d.js","./entry-mdi-BJHOrBfjV3.js","./entry-KvMaterialIcon-DcajXwg-0j.js","./entry-CheckoutReceipt-BWw2aPpW_l.js","./entry-KvIcon-DpMQFaEAGT.js","./entry-KvTooltip-Dc9Ho_TJhC.js","./entry-touchEvents-DzV-rvy7P4.js","./entry-KvThemeProvider-CJZWo36001.js","./KvTooltip-nHK0tuGS.css","./entry-KvButton-DF0Vhz1EWA.js","./entry-KvLoadingSpinner-D0IZcQeh_0.js","./entry-index-CGacd2nhU3.js","./entry-index-COmIkRYU2t.js","./entry-index-CbPSoDvqj7.js","./entry-index-tAHLmhMYuW.js","./entry-index-D4S0JsTkt8.js","./CheckoutReceipt-DxkijMdB.css","./entry-SocialShareV2-BCa_qBnGLD.js","./entry-orderBy-CUrcrXTfYx.js","./entry-keys-B9dmm4b_qU.js","./entry-social-sharing-mixin-mcFPgMmQne.js","./entry-urlUtils-D59-4GikCB.js","./SocialShareV2-DMhZQJhH.css","./entry-joinArray-BjvW27pIp5.js","./entry-syncDate-BmkM6LdPy7.js","./entry-throttle-DL1zg7kAk0.js","./entry-toNumber-MeiYJWOH0A.js","./entry-imageUtils-_95xo2d0ng.js","./entry-KvLoadingPlaceholder-DUZzoT9CoU.js","./entry-settingsUtils-CXPrtFAPl-.js","./entry-myKivaUtils-USlSQzpKdw.js","./entry-logReadQueryError-Codcl0QZ_g.js","./entry-logFormatter-DhjghUk5Me.js","./entry-myKivaForAllUsers-DI6rZrUMxZ.js","./entry-KvPageContainer-B9-1kg27t_.js","./entry-KvUserAvatar-CcUKtQr-4i.js","./entry-throttle-DR-Bh3IiJx.js","./entry-toInteger-XI_MWEAzOD.js","./entry-PromoCreditBanner-CCrPa6t4Rf.js","./entry-promoCredit-A8tDfJh8uJ.js","./entry-lock-scroll-Bww220JhDP.js","./entry-getCacheKey-BX3EO2qX-W.js","./entry-KvTextInput-DOWiWB5Pob.js","./entry-attrs-C2OODjD6EW.js","./syncDate-CEkmSjsg.css","./entry-KvButton-CZu-utW0a_.js","./KvButton-DmXAQ9b6.css","./CampaignThanks-BX3UmFFC.css","./entry-CampaignLoanWrapper-CLIORXccBT.js","./entry-KvGrid-A3hpmYTsti.js","./entry-KvProgressBar-CQtXD0YVwH.js","./entry-sortBy-BF-uf42VgF.js","./entry-_baseUniq-DhZtlzFzUZ.js","./entry-_baseIndexOf-qfoVQuLp0t.js","./entry-_baseFindIndex-Ca62E79BN9.js","./entry-KvCheckbox-W7DEvEGAdO.js","./KvCheckbox-CW_GltER.css","./entry-KvRadio-Ckc1q-vBRD.js","./entry-index.browser-vcSNLBTfP4.js","./entry-KvChipClassic-Bhp7TvRvWy.js","./entry-KvAccordionItem-Bt-JNbOfTg.js","./entry-KvExpandable-DLPQ2-gM4K.js","./entry-KvLightbox-Ccr5YlTKqp.js","./entry-KivaClassicBasicLoanCard-mqx9jt4fGB.js","./entry-loanUtils-5D9a5yj3H7.js","./entry-observerUtils-DveHpw6JZJ.js","./entry-time-left-mixin-BgOgttSZrl.js","./entry-index-CNzTSTNafD.js","./entry-index-DwHITppAlA.js","./entry-BorrowerImage-WXGsRE2huI.js","./entry-SummaryTag-BL5nRGkmuD.js","./entry-KvLoadingParagraph-B1vku9KEXS.js","./KvLoadingParagraph-BINezgCa.css","./entry-injectionCheck-B-GzsW2qm5.js","./entry-basketCount-CZ-kE9ye_Z.js","./entry-basketItems-B-09YWrzPC.js","./entry-updateLoanReservation-BaDuxVurTB.js","./entry-ActionButton-DBlbdMcglY.js","./entry-includes-CAVAVivXb3.js","./entry-KvSelect-DG6WmDJ0xC.js","./ActionButton-DBB24bTv.css","./entry-LoanTag-ByD8VlFF-R.js","./entry-KvTextLink-CFK6VYUYhK.js","./entry-KvCarousel--umaisw_ND.js","./entry-KvPagination-Bh-UNNeUcB.js","./entry-apollo-story-mixin-CB9BNmK9U5.js","./entry-event-emitter-BPMIn87Nxk.js","./entry-15YearsHowKivaWorksCarousel-ByzFxtjc0I.js","./entry-KvCarousel-DhbeYSKWX1.js","./KvCarousel--w0CnOyL.css","./entry-KvCarouselSlide-CeBzIvUqm1.js","./KvCarouselSlide-BWDUiYZ9.css","./15YearsHowKivaWorksCarousel-B3KXsd_g.css","./entry-teamInfoFromId-IKosKqIg9v.js","./teamInfoFromId-B4IlmFGE.css","./entry-KvLightbox-Bd591zHfoG.js","./entry-vue-focus-lock-DKAacIANk5.js","./KvLightbox-CEY3Syez.css","./entry-index-vQcuSVWmLL.js","./entry-KvCheckbox-DOGFVMmKkd.js","./entry-updateDonation-CfhElOgRHH.js","./entry-DonationNudgeLightbox-CmI4fzF1k7.js","./DonationNudgeLightbox-CaTyPC-Y.css","./entry-DepositIncentiveUpsell-CBq4E1ck82.js","./DepositIncentiveUpsell-1W0ajWDr.css","./entry-WwwPageCorporate-DhdtERrSCW.js","./entry-TheBasketBar-CAfv021hcH.js","./TheBasketBar-CnW9S1pM.css","./entry-KvAlert-BkleVpfpH3.js","./KvAlert-LPE8HdKK.css","./entry-TheFooterCorporate-FgtoQ8YSft.js","./entry-cookie-store-story-mixin-Bv_t57ys9l.js","./CampaignLoanWrapper-CCg_qr2n.css","./entry-CardRow-C6_JZ_MH5V.js","./entry-contentful-ui-setting-styles-mixin-O0hIwaljDi.js","./entry-SectionWithBackgroundClassic-CIto-a7N3g.js","./entry-StoryCard-DMNihxKFcG.js","./entry-DynamicRichText-BY4JLT5OgS.js","./StoryCard-_WS-0sqk.css","./entry-CenteredRichText-DkPm-pzPRH.js","./entry-DynamicHeroClassic-_XtA2DarTR.js","./entry-ButtonWrapper-BGMRIalvpY.js","./DynamicHeroClassic-ZBQ6W9_g.css","./entry-HeroWithCarousel-CZMv7DNRzQ.js","./entry-LoansByCategoryCarousel-CtA8tcV--b.js","./entry-KivaClassicLoanCarousel-k0btLiNi28.js","./entry-FrequentlyAskedQuestions-BM2QY5l494.js","./entry-KvFrequentlyAskedQuestions-DD4trZGbFf.js","./entry-KvExpandableQuestion-DCKADQZAEg.js","./entry-RichTextItemsCentered-bxu7cUylr5.js","./entry-MediaItemsCentered-7K0nzkyUoL.js","./entry-StoryCardCarousel-CljVQYQQDb.js","./StoryCardCarousel-Pgdyg_nj.css"])))=>i.map(i=>d[i]);
import{a as ge}from"./entry-apollo-story-mixin-CB9BNmK9U5.js";import{_ as A}from"./iframe-CWeBLAo0.js";import{g as V,n as b}from"./entry-numeral-DJCTM12wUX.js";import{c as d,e as m,a as _,r as h,o as s,x as nt,b as N,d as k,f as T,K as y,E as U,J as w,n as B,H as x,F,P as O,R as D,g as ot,I as K,L as pa,G as W,a1 as va,y as ka}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";import{i as ha}from"./entry-PromoCreditBanner-CCrPa6t4Rf.js";import{l as E}from"./entry-logFormatter-DhjghUk5Me.js";import{p as ga,e as fa}from"./entry-contentfulUtils-CqD1k4MYgu.js";import{g as re}from"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import{p as ya,g as st,_ as ba}from"./entry-orderBy-CUrcrXTfYx.js";import{c as Ca,d as _a}from"./entry-isSymbol-5pnFTpIKM9.js";import{t as rt,n as wa,o as Ta,l as Na,k as Ia,_ as xe,f as Sa,p as La}from"./entry-syncDate-BmkM6LdPy7.js";import{r as Fa,b as xa}from"./entry-keys-B9dmm4b_qU.js";import{r as Aa}from"./entry-_baseFindIndex-Ca62E79BN9.js";import{r as Da}from"./entry-toInteger-XI_MWEAzOD.js";import{_ as R}from"./entry-get-BUjo_hX5jl.js";import{c as H,b as Va,s as Ae}from"./entry-injectionCheck-B-GzsW2qm5.js";import{a as j,w as me}from"./entry-exports-CudK1O5XNw.js";import{e as Pa}from"./entry-event-emitter-BPMIn87Nxk.js";import{F as Ea,s as $a,a as Ma,b as Ra,c as Ba}from"./entry-15YearsHowKivaWorksCarousel-ByzFxtjc0I.js";import{_ as L}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{_ as lt}from"./entry-KvButton-CZu-utW0a_.js";import{b as Oa,_ as Q,x as ja,r as qa,g as Ua,l as Ka,L as Ga}from"./entry-teamInfoFromId-IKosKqIg9v.js";import{_ as Ha}from"./entry-throttle-DL1zg7kAk0.js";import"./entry-KvWwwHeader-CVdIzOPj6Q.js";import{p as za}from"./entry-KvLoadingSpinner-D0IZcQeh_0.js";import{g as Wa}from"./entry-getCacheKey-BX3EO2qX-W.js";import{K as fe}from"./entry-KvLightbox-Bd591zHfoG.js";import{K as dt}from"./entry-KvIcon-DpMQFaEAGT.js";import{K as Qa}from"./entry-KvLoadingSpinner-D6PAL1PtJd.js";import{a as ye}from"./entry-urlUtils-D59-4GikCB.js";import{b as Ja,e as mt,r as ut,u as ct}from"./entry-index-vQcuSVWmLL.js";import{_ as Za}from"./entry-myKivaUtils-USlSQzpKdw.js";import{O as Ya}from"./entry-KvRadio-Ckc1q-vBRD.js";import{U as G}from"./entry-KvButton-DF0Vhz1EWA.js";import{t as be}from"./entry-KvCheckbox-DOGFVMmKkd.js";import{J as Ce}from"./entry-KvTextInput-DOWiWB5Pob.js";import{u as le}from"./entry-KvLightbox-Ccr5YlTKqp.js";import{b as Xa,g as ei,a as ti}from"./entry-index-DwHITppAlA.js";import{r as ai}from"./entry-index-COmIkRYU2t.js";import{_ as pt}from"./entry-updateLoanReservation-BaDuxVurTB.js";import{m as _e,p as ii,E as vt}from"./entry-mdi-BJHOrBfjV3.js";import{w as de}from"./entry-KvMaterialIcon-DcajXwg-0j.js";import{h as ni}from"./entry-loanUtils-5D9a5yj3H7.js";import{L as kt}from"./entry-KvSelect-DG6WmDJ0xC.js";import{_ as oi}from"./entry-updateDonation-CfhElOgRHH.js";import{H as si,D as ri}from"./entry-DonationNudgeLightbox-CmI4fzF1k7.js";import{f as li}from"./entry-index-CGacd2nhU3.js";import{p as di}from"./entry-index-CNzTSTNafD.js";import{D as mi}from"./entry-DepositIncentiveUpsell-CBq4E1ck82.js";import{K as ui}from"./entry-KvTooltip-Dc9Ho_TJhC.js";import{g as ci}from"./entry-KvGrid-A3hpmYTsti.js";import{W as De}from"./entry-WwwPageCorporate-DhdtERrSCW.js";import{a as pi}from"./entry-richTextRenderer-CZAKD6FB9X.js";import{r as vi}from"./entry-rich-text-html-renderer.es5-kBaKhcHuza.js";import{c as ki}from"./entry-cookie-store-story-mixin-Bv_t57ys9l.js";function hi(t,e,a){ai(2,arguments);var o=Xa(t,e)/1e3;return ei()(o)}const gi=`query promoCampaign($basketId: String, $promoFundId: String) {
	shop (basketId: $basketId) {
		id
		basket {
			id
			hasFreeCredits
			items {
				values {
					id
				}
			}
			credits {
				values {
					id
					applied
					available
					creditType
					promoFund {
						id
						displayName
						displayDescription
					}
				}
			}
		}
		promoCampaign (promoFundId: $promoFundId) {
			promoFund {
				id
				displayName
				displayDescription
				promoPrice
			}
			promoGroup {
				id
				type
				teamId
			}
			managedAccount {
				managementType
				audience
				allowDonations
				sendKivaNewsletter
				id
				isEmployee
				formId
				pageId
				loanSearchCriteria {
					filters {
						cityState
						country
						currencyLossPossible
						dafEligible
						distributionModel
						status
						excludeNonRated
						expiringSoon
						gender
						hasResearchScore
						isGroup
						lenderFavorite
						loanLimit
						isMatched
						sector
						loanTags
						theme
					}
					sortBy
				}
			}
		}
	}
}
`,fi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"promoCampaign"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"promoFundId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"basket"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasFreeCredits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"credits"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"applied"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"available"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creditType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"promoFund"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayDescription"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"promoCampaign"},arguments:[{kind:"Argument",name:{kind:"Name",value:"promoFundId"},value:{kind:"Variable",name:{kind:"Name",value:"promoFundId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"promoFund"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayDescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"promoPrice"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"promoGroup"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"teamId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"managedAccount"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"managementType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"audience"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"allowDonations"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sendKivaNewsletter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEmployee"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"formId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"loanSearchCriteria"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filters"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cityState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"country"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currencyLossPossible"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dafEligible"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"distributionModel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"excludeNonRated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiringSoon"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gender"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasResearchScore"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGroup"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lenderFavorite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"loanLimit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isMatched"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sector"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"loanTags"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"theme"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sortBy"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:1071,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:gi}}};function ht(t,e,a){const o=V`mutation addCreditMutation(
		$basketId: String!,
		$creditType: CreditTypeEnum!,
		$redemptionCode: String!
	) {
		shop(basketId: $basketId) {
			id
			addCreditByType(creditType: $creditType, redemptionCode: $redemptionCode)
		}
	}`;return a.mutate({mutation:o,variables:{creditType:t,redemptionCode:e}})}function yi(t,e){const a=V`mutation applyLendingRewardMutation(
		$basketId: String!,
		$promoFundId: String!
	) {
		shop(basketId: $basketId) {
			id
			applyLendingReward(promoFundId: $promoFundId)
		}
	}`;return e.mutate({mutation:a,variables:{promoFundId:t}})}function bi(t,e){return ht("universal_code",t,e)}function Ci(t,e){return ht("redemption_code",t,e)}function _i(t,e){const{upc:a,promoCode:o,lendingReward:n}=t;return a?bi(a,e):o?Ci(o,e):n?yi(n,e):Promise.reject("No promotion found.")}function wi(t=null,e={}){return e.query({query:fi,variables:{promoFundId:t!==null?String(t):t},fetchPolicy:"network-only"})}var ue,Ve;function Ti(){if(Ve)return ue;Ve=1;var t=ya();function e(a,o){return t(a,o)}return ue=e,ue}var Ni=Ti();const Gd=re(Ni);var ce,Pe;function Ii(){if(Pe)return ce;Pe=1;var t=Ca(),e=_a(),a="[object Number]";function o(n){return typeof n=="number"||e(n)&&t(n)==a}return ce=o,ce}var Si=Ii();const Ee=re(Si);function ne(){return{__typename:"MinMaxRange",min:null,max:null}}function oe(t){let e;return t&&Ee(t.min)&&(e=e||{},e.min=t.min),t&&Ee(t.max)&&(e=e||{},e.max=t.max),e}function Li(){const t=ne();return t.min=0,t.max=5,{__typename:"LoanSearchFilters",arrearsRate:ne(),theme:null,country:[],defaultRate:ne(),gender:null,isGroup:null,lenderTerm:ne(),loanLimit:null,partner:null,riskRating:t,sector:null,loanTags:null}}function $e(t){const{theme:e,country:a,gender:o,isGroup:n,partner:i,sector:r,loanTags:l,distributionModel:v,dafEligible:c,status:u,matcherAccountId:p}=t,g={theme:e,country:a,gender:o,isGroup:n,partner:i,sector:r,loanTags:l,distributionModel:v,dafEligible:c,status:u,matcherAccountId:p};if(t){const f=oe(t.arrearsRate);f&&(g.arrearsRate=f);const C=oe(t.defaultRate);C&&(g.defaultRate=C);const S=oe(t.lenderTerm);S&&(g.lenderTerm=S);const I=oe(t.riskRating);I&&(g.riskRating=I)}return g}const Fi=`mutation trackTransaction(
	$campaign: String,
	$campaignContent: String,
	$medium: String,
	$snowplowUserId: String,
	$snowplowSessionId: String,
	$source: String,
	$transactionId: Int!,
	$visitorId: String
) {
	shop {
		id
		trackTransaction(
			campaign: $campaign
			campaignContent: $campaignContent
			medium: $medium
			snowplowUserId: $snowplowUserId
			snowplowSessionId: $snowplowSessionId
			source: $source
			transactionId: $transactionId
			visitorId: $visitorId
		)
	}
}
`,xi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"trackTransaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"campaign"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"campaignContent"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"medium"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"snowplowUserId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"snowplowSessionId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"source"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"transactionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"visitorId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"trackTransaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"campaign"},value:{kind:"Variable",name:{kind:"Name",value:"campaign"}}},{kind:"Argument",name:{kind:"Name",value:"campaignContent"},value:{kind:"Variable",name:{kind:"Name",value:"campaignContent"}}},{kind:"Argument",name:{kind:"Name",value:"medium"},value:{kind:"Variable",name:{kind:"Name",value:"medium"}}},{kind:"Argument",name:{kind:"Name",value:"snowplowUserId"},value:{kind:"Variable",name:{kind:"Name",value:"snowplowUserId"}}},{kind:"Argument",name:{kind:"Name",value:"snowplowSessionId"},value:{kind:"Variable",name:{kind:"Name",value:"snowplowSessionId"}}},{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"Variable",name:{kind:"Name",value:"source"}}},{kind:"Argument",name:{kind:"Name",value:"transactionId"},value:{kind:"Variable",name:{kind:"Name",value:"transactionId"}}},{kind:"Argument",name:{kind:"Name",value:"visitorId"},value:{kind:"Variable",name:{kind:"Name",value:"visitorId"}}}],directives:[]}]}}]}}],loc:{start:0,end:524,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Fi}}};var pe,Me;function Ai(){if(Me)return pe;Me=1;function t(e){for(var a=-1,o=e==null?0:e.length,n={};++a<o;){var i=e[a];n[i[0]]=i[1]}return n}return pe=t,pe}var Di=Ai();const Vi=re(Di),Pi=/^[\d.]+/,Ei=/^\(+|\)+$/g,Re=/[,:;]/g;function $i(t){const e=t.get("__utmz");if(!e)return{};const a=e.replace(Pi,"").split("|").map(n=>n.split("=")).map(([n,i])=>[n,i&&i.replace(Ei,"")]),o=Vi(a);return{campaign:o.utmccn&&o.utmccn.replace(Re,""),campaignContent:o.utmcct&&o.utmcct.replace(Re,""),gclid:o.utmgclid,medium:o.utmcmd,source:o.utmcsr}}var ve,Be;function Mi(){if(Be)return ve;Be=1;var t=st(),e=Fa(),a=xa();function o(n){return function(i,r,l){var v=Object(i);if(!e(i)){var c=t(r,3);i=a(i),r=function(p){return c(v[p],p,v)}}var u=n(i,r,l);return u>-1?v[c?i[u]:u]:void 0}}return ve=o,ve}var ke,Oe;function Ri(){if(Oe)return ke;Oe=1;var t=Aa(),e=st(),a=Da(),o=Math.max;function n(i,r,l){var v=i==null?0:i.length;if(!v)return-1;var c=l==null?0:a(l);return c<0&&(c=o(v+c,0)),t(i,e(r,3),c)}return ke=n,ke}var he,je;function Bi(){if(je)return he;je=1;var t=Mi(),e=Ri(),a=t(e);return he=a,he}var Oi=Bi();const ji=re(Oi);function gt(t){const e=ji(t.getAll(),(o,n)=>n.indexOf("_sp_id")===0);if(!e)return{};const a=e.split(".");return a.length?{snowplowUserId:a[0],snowplowSessionId:a[a.length-1]}:{}}function qi(t,e,a){if(!t)return!1;const{campaign:o,campaignContent:n,gclid:i,medium:r,source:l}=$i(a),{snowplowUserId:v,snowplowSessionId:c}=gt(a);e.mutate({mutation:xi,variables:{campaign:o,campaignContent:n,medium:r,snowplowSessionId:c,snowplowUserId:v,source:i?"google-cpc":l,transactionId:t,visitorId:a.get("uiv")||null}}).then(()=>!0).catch(()=>!1)}const Ui=`mutation validatePreCheckout($basketId: String) {
	shop (basketId: $basketId) {
		id
		validatePreCheckout {
			error
			success
			value
		}
	}
}
`,Ki={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"validatePreCheckout"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validatePreCheckout"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:185,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Ui}}},Gi=`mutation validateGuestPreCheckout($basketId: String, $email: String, $visitorId: String, $emailOptIn: Boolean) {
	shop (basketId: $basketId) {
		id
		validatePreCheckout (email: $email, visitorId: $visitorId, emailOptIn: $emailOptIn) {
			error
			success
			value
		}
	}
}
`,Hi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"validateGuestPreCheckout"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"visitorId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"emailOptIn"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validatePreCheckout"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"Argument",name:{kind:"Name",value:"visitorId"},value:{kind:"Variable",name:{kind:"Name",value:"visitorId"}}},{kind:"Argument",name:{kind:"Name",value:"emailOptIn"},value:{kind:"Variable",name:{kind:"Name",value:"emailOptIn"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:312,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Gi}}},zi=`mutation validateLenderEmailForPromo($lenderEmailAddress: String!, $managedAccountId: Int!, $promoFundId: Int!) {
    validateLenderEmailForPromo (
      lenderEmailAddress: $lenderEmailAddress,
      managedAccountId: $managedAccountId,
      promoFundId: $promoFundId
    ) {
      status
    }
}
`,Wi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"validateLenderEmailForPromo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"lenderEmailAddress"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"managedAccountId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"promoFundId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"validateLenderEmailForPromo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"lenderEmailAddress"},value:{kind:"Variable",name:{kind:"Name",value:"lenderEmailAddress"}}},{kind:"Argument",name:{kind:"Name",value:"managedAccountId"},value:{kind:"Variable",name:{kind:"Name",value:"managedAccountId"}}},{kind:"Argument",name:{kind:"Name",value:"promoFundId"},value:{kind:"Variable",name:{kind:"Name",value:"promoFundId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:337,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:zi}}},Qi=`mutation checkout($basketId: String, $visitorId: String) {
	shop (basketId: $basketId) {
		id
		checkout (visitorId: $visitorId)
	}
}
`,qe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"checkout"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"visitorId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkout"},arguments:[{kind:"Argument",name:{kind:"Name",value:"visitorId"},value:{kind:"Variable",name:{kind:"Name",value:"visitorId"}}}],directives:[]}]}}]}}],loc:{start:0,end:172,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Qi}}},Ji=`mutation checkoutAsync($basketId: String, $visitorId: String) {
	shop (basketId: $basketId) {
		id
		checkoutAsync (visitorId: $visitorId)
	}
}
`,Ue={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"checkoutAsync"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"visitorId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkoutAsync"},arguments:[{kind:"Argument",name:{kind:"Name",value:"visitorId"},value:{kind:"Variable",name:{kind:"Name",value:"visitorId"}}}],directives:[]}]}}]}}],loc:{start:0,end:182,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Ji}}},Zi=`mutation showVerificationLightbox {
	showVerificationLightbox @client
}
`,ft={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"showVerificationLightbox"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"showVerificationLightbox"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:110,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Zi}}},z=["apollo","cookieStore"],ee={methods:{validateBasket(){return H(this,z),new Promise((t,e)=>{this.apollo.mutate({mutation:Ki}).then(a=>{const o=R(a,"data.shop.validatePreCheckout");typeof o<"u"&&o.length===0?(this.$kvTrackEvent("basket","Validate Basket","Validation Success"),t(!0)):(this.$kvTrackEvent("basket","Validate Basket","Validation Failure"),t(o))}).catch(a=>{E(a,"error"),j(a),e(a)})})},validateGuestBasket(t,e){return H(this,z),new Promise((a,o)=>{this.apollo.mutate({mutation:Hi,variables:{email:t,emailOptIn:e,visitorId:this.cookieStore.get("uiv")||null}}).then(n=>{const i=R(n,"data.shop.validatePreCheckout");typeof i<"u"&&i.length===0?(this.$kvTrackEvent("basket","Validate Guest Basket","Validation Success"),a(!0)):(this.$kvTrackEvent("basket","Validate Guest Basket","Validation Failure"),a(i))}).catch(n=>{E(n,"error"),j(n),o(n)})})},validateGuestPromoBasket(t,e,a,o){return H(this,z),new Promise((n,i)=>{this.apollo.mutate({mutation:Wi,variables:{lenderEmailAddress:t,promoFundId:Number(a),managedAccountId:Number(o)}}).then(()=>{n(this.validateGuestBasket(t,e))}).catch(r=>{E(r,"error"),j(r),i(r)})})},checkoutBasket(t=!1,e=!1){H(this,z);let a={mutation:e?Ue:qe};return t&&(a={mutation:e?Ue:qe,variables:{visitorId:this.cookieStore.get("uiv")||null}}),new Promise((o,n)=>{this.apollo.mutate(a).then(i=>{var l,v,c,u;const r=e?(v=(l=i==null?void 0:i.data)==null?void 0:l.shop)==null?void 0:v.checkoutAsync:(u=(c=i==null?void 0:i.data)==null?void 0:c.shop)==null?void 0:u.checkout;r!==null&&o(r),o(i)}).catch(i=>{E(i,"error"),j(i),n(i)})})},showCheckoutError(t=[],e=!1){H(this,z);let a="";t.forEach(({error:o,value:n,extension:i,message:r})=>{let l=n||r;const v=o||(i==null?void 0:i.code);if(v==="ERROR_OWN_LOAN"&&(l="As a Kiva borrower, you cannot support your own fundraising loan on Kiva. Please remove your loan before completing checkout."),v==="ERROR_OVER_DAILY_LIMIT"&&(l="You can not purchase more than $2,000 of Kiva Codes per day. Please remove the Kiva Card(s) from your basket."),!(v==="api.authenticationRequired"&&e)){if(j(`${v}:${l}`),v==="basket_requires_verification"){this.apollo.mutate({mutation:ft});return}a!==""?a=`${a} | ${l}`:a=l}}),a&&(this.$showTipMsg(a,"error"),this.$kvTrackEvent("basket","error-checkout-cta",a))},formatCheckoutStatusError(t={}){return[{error:t==null?void 0:t.errorCode,message:`${t==null?void 0:t.errorMessage}, Status: ${t==null?void 0:t.status}`}]},redirectToThanks(t,e){H(this,z),t&&(this.cookieStore.remove("kvbskt",{path:"/",secure:!0}),window.location=`/checkout/post-purchase?kiva_transaction_id=${t}${e}`)}}},Yi=`mutation updateLoanReservationTeam($loanId: Int!, $teamId: Int, $basketId: String) {
	shop (basketId: $basketId) {
		id
		updateLoanReservationTeam (loanReservation: {
			id: $loanId
			teamId: $teamId
		})
		{
			id
			team {
				id
				name
			}
		}
	}
}
`,yt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateLoanReservationTeam"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"loanId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"teamId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updateLoanReservationTeam"},arguments:[{kind:"Argument",name:{kind:"Name",value:"loanReservation"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"loanId"}}},{kind:"ObjectField",name:{kind:"Name",value:"teamId"},value:{kind:"Variable",name:{kind:"Name",value:"teamId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"team"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:295,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Yi}}},bt={name:"CampaignHowKivaWorks",components:{FifteenYearsHowKivaWorksCarousel:Ea},props:{isMatchingCampaign:{type:Boolean,default:!1}},computed:{slides(){const t=[{step:"Step One",title:"Choose a borrower",blurb:"Browse by category and find an entrepeneur to support",video:$a},{step:"Step Two",title:"Make a loan",blurb:"Help fund a loan with as little as $25",video:Ma},{step:"Step Three",title:"Borrower repays",blurb:`When the borrower repays, funds return back to the
						${this.isMatchingCampaign?"lenders":"funders"} account.`,video:Ra}];return this.isMatchingCampaign&&t.push({step:"Step Four",title:"Repeat",blurb:"Relend your money or withdraw your funds.",video:Ba}),t}}},Xi={class:"works section campaign-how-it-works section"},en={class:"row"},tn={class:"columns"};function an(t,e,a,o,n,i){const r=h("fifteen-years-how-kiva-works-carousel");return s(),d("div",Xi,[m("div",en,[m("div",tn,[e[0]||(e[0]=m("p",{class:"works__subhead tw-text-h2"}," By lending as little as $25 on Kiva, you can support the causes you care about and make a real personal impact. ",-1)),_(r,{class:"carousel",slides:i.slides},null,8,["slides"])])])])}const nn=L(bt,[["render",an],["__scopeId","data-v-26e74e17"]]);bt.__docgenInfo={displayName:"CampaignHowKivaWorks",exportName:"default",description:"",tags:{},props:[{name:"isMatchingCampaign",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/CorporateCampaign/CampaignHowKivaWorks.vue"]};const on=`mutation joinTeam($team_id: Int!, $team_recruitment_id: Int, $promo_id: Int) {
	my {
		joinTeam (teamId: $team_id, teamRecruitmentId: $team_recruitment_id, promoId: $promo_id)
	}
}
`,sn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"joinTeam"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"team_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"team_recruitment_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"promo_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"my"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"joinTeam"},arguments:[{kind:"Argument",name:{kind:"Name",value:"teamId"},value:{kind:"Variable",name:{kind:"Name",value:"team_id"}}},{kind:"Argument",name:{kind:"Name",value:"teamRecruitmentId"},value:{kind:"Variable",name:{kind:"Name",value:"team_recruitment_id"}}},{kind:"Argument",name:{kind:"Name",value:"promoId"},value:{kind:"Variable",name:{kind:"Name",value:"promo_id"}}}],directives:[]}]}}]}}],loc:{start:0,end:219,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:on}}},rn=`query myTeams($teamIds: [Int]) {
	my {
		id
		teams(teamIds:$teamIds) {
			values {
				id
				amountLent
				team {
	  				id
				}
			}
		}
	}
}
`,ln={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"myTeams"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"teamIds"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"my"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"teams"},arguments:[{kind:"Argument",name:{kind:"Name",value:"teamIds"},value:{kind:"Variable",name:{kind:"Name",value:"teamIds"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"amountLent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"team"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:185,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:rn}}},Ct={name:"KvLoadingOverlay",serverCacheKey:()=>Wa("KvLoadingOverlay"),components:{KvLoadingSpinner:za},data(){return{top:null}},computed:{throttledScroll(){return Ha(this.onScroll,100)}},methods:{onScroll(){let{top:t,bottom:e}=this.$el.getBoundingClientRect();if(t+=this.$el.firstChild.offsetHeight,e-=this.$el.firstChild.offsetHeight,t<0&&e>window.innerHeight)this.top="50%";else{const a=Math.max(t,0),o=Math.min(e,window.innerHeight);this.top=`${(o-a)/2+a}px`}}},mounted(){this.onScroll(),window.addEventListener("scroll",this.throttledScroll)},unmounted(){window.removeEventListener("scroll",this.throttledScroll)}},dn={class:"loading-overlay"};function mn(t,e,a,o,n,i){const r=h("kv-loading-spinner");return s(),d("div",dn,[m("div",{class:"spinner-wrapper",style:nt({top:n.top})},[_(r,{size:"large"})],4)])}const we=L(Ct,[["render",mn],["__scopeId","data-v-164c41da"]]);Ct.__docgenInfo={displayName:"KvLoadingOverlay",exportName:"default",description:"",tags:{},sourceFiles:["/home/runner/work/ui/ui/src/components/Kv/KvLoadingOverlay.vue"]};const _t={name:"CampaignJoinTeamForm",inject:["apollo"],components:{KvButton:lt,KvLightbox:fe,KvLoadingOverlay:we},emits:["team-process-complete"],props:{promoId:{type:Number,default:null},teamId:{type:Number,default:null},campaignName:{type:String,default:null}},data(){return{isMember:!1,loading:!1,joinStatus:null,showError:!1,showForm:!0,showSuccess:!1,showTeamLightbox:!1,teamName:"",myTeams:()=>[]}},computed:{campaignTitleText(){return`Join the ${this.teamName} Lending Team to do more good together`},campaignNameText(){return this.campaignName?`the ${this.campaignName}`:"this"}},mounted(){this.loading=!0,this.teamId&&this.fetchTeamData()},methods:{fetchTeamData(){this.apollo.query({query:Oa,variables:{team_id:this.teamId,team_ids:[this.teamId]}}).then(({data:t})=>{var e,a,o,n,i,r,l;this.teamName=((a=(e=t.community)==null?void 0:e.team)==null?void 0:a.name)??"",this.isMember=((i=(n=(o=t.my)==null?void 0:o.teams)==null?void 0:n.values)==null?void 0:i.length)??!1,this.isMember?(this.myTeams=((l=(r=t.my)==null?void 0:r.teams)==null?void 0:l.values)??[],this.joinStatus="existing-member",this.$emit("team-process-complete",{join:this.joinStatus})):(this.showTeamLightbox=!0,this.loading=!1)})},joinTeamMutation(){this.apollo.mutate({mutation:sn,variables:{team_id:this.teamId,promo_id:this.promoId}}).then(t=>{if(t.errors)throw t.errors;return this.apollo.query({query:ln,variables:{teamIds:[this.teamId]},fetchPolicy:"network-only"})}).then(t=>{var e,a,o,n,i,r,l;if(this.loading=!1,t.errors)throw t.errors;this.isMember=((n=(o=(a=(e=t.data)==null?void 0:e.my)==null?void 0:a.teams)==null?void 0:o.values)==null?void 0:n.length)??!1,this.isMember&&(this.myTeams=((l=(r=(i=t.data)==null?void 0:i.my)==null?void 0:r.teams)==null?void 0:l.values)??[]),this.showForm=!1,this.showSuccess=!0,this.joinStatus="joined"}).catch(t=>{this.loading=!1,this.showError=!0,this.joinStatus="error",console.log(t)})},handleJoinTeam(){this.loading=!0,this.showError=!1,this.joinTeamMutation()},handleContinue(){this.loading=!0,this.showError=!1,this.showTeamLightbox=!1,this.$emit("team-process-complete",{join:this.joinStatus})},handleRejectTeam(){this.showError=!1,this.showTeamLightbox=!1,this.$emit("team-process-complete",{join:"declined",myTeams:this.myTeams})},handleLightboxClosed(){}}},un={class:"campaign-join-tem section row align-center"},cn={class:"small-12 large-8 align-self-middle columns"},pn={class:"join-team-lightbox__content"},vn={key:0,class:"tw-text-center"},kn={key:0,class:"error"},hn={key:1,class:"tw-text-center"},gn={key:0},fn={key:1},yn={class:"tw-text-center"},bn={key:0},Cn={key:1};function _n(t,e,a,o,n,i){const r=h("kv-loading-overlay"),l=h("kv-button"),v=h("kv-lightbox");return s(),d("section",un,[m("div",cn,[_(v,{class:"join-team-lightbox",id:"joinTeamLightbox","prevent-close":!0,visible:n.showTeamLightbox,onLightboxClosed:i.handleLightboxClosed},{controls:N(()=>[m("div",yn,[n.showForm?(s(),d("div",bn,[_(l,{class:"smaller",onClick:U(i.handleJoinTeam,["prevent"])},{default:N(()=>e[2]||(e[2]=[w(" Join Now ")]),void 0,!0),_:1,__:[2]},8,["onClick"]),e[4]||(e[4]=m("br",null,null,-1)),e[5]||(e[5]=m("br",null,null,-1)),_(l,{class:"text-link",onClick:U(i.handleRejectTeam,["prevent"])},{default:N(()=>e[3]||(e[3]=[w(" Opt-out ")]),void 0,!0),_:1,__:[3]},8,["onClick"])])):k("",!0),n.showSuccess||n.showError?(s(),d("div",Cn,[_(l,{class:"smaller",onClick:U(i.handleContinue,["prevent"])},{default:N(()=>e[6]||(e[6]=[w(" Continue ")]),void 0,!0),_:1,__:[6]},8,["onClick"])])):k("",!0)])]),default:N(()=>[m("div",pn,[n.showForm?(s(),d("div",vn,[m("h2",null,y(i.campaignTitleText),1),m("p",null," Lending Teams are self-organized groups on Kiva.org where you can connect and rally around shared lending goals. By joining the "+y(n.teamName)+" Lending Team, you can easily see our collective impact across countries and sectors. ",1),n.showError?(s(),d("p",kn," Oh no! Something went wrong! Please try to join this team later. ")):k("",!0),n.loading?(s(),T(r,{key:1,id:"loading-overlay-teams"})):k("",!0)])):k("",!0),n.showSuccess?(s(),d("div",hn,[n.isMember?(s(),d("div",gn,[m("h2",null,"Congratulations! You've joined the "+y(n.teamName)+" Lending Team.",1),e[0]||(e[0]=m("p",null," When you make loans, you'll now have the option to count those loans towards this team. ",-1))])):(s(),d("div",fn,[m("h2",null,"You've requested to join the "+y(n.teamName)+" Lending Team.",1),e[1]||(e[1]=m("p",null," Once your request is approved, you'll have the option to count loans towards this team. ",-1))]))])):k("",!0)])],void 0),_:1},8,["visible","onLightboxClosed"])])])}const wn=L(_t,[["render",_n],["__scopeId","data-v-ec18a0cc"]]);_t.__docgenInfo={displayName:"CampaignJoinTeamForm",exportName:"default",description:"",tags:{},props:[{name:"promoId",type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"teamId",type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"campaignName",type:{name:"string"},defaultValue:{func:!1,value:"null"}}],events:[{name:"team-process-complete",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/CorporateCampaign/CampaignJoinTeamForm.vue"]};const wt={name:"CampaignStatus",components:{KvIcon:dt,KvLoadingSpinner:Qa},props:{activeCreditType:{type:String,default:null},inContext:{type:Boolean,default:!1},isMatching:{type:Boolean,default:!1},loadingPromotion:{type:Boolean,default:!1},promoErrorMessage:{type:String,default:null},promoApplied:{type:Boolean,default:null},promoAmount:{type:String,default:"0.00"},promoName:{type:String,default:null},statusMessageOverride:{type:String,default:null}},computed:{inContextClasses(){return this.inContext?"tw-relative tw-bg-secondary tw-rounded":""}},methods:{handlePromoLinkClick(){if(!this.inContext)return!1;window.location=window.location.origin+window.location.pathname}}},Tn={key:0},Nn={key:2},In={key:0},Sn={key:1},Ln={key:0},Fn={key:4};function xn(t,e,a,o,n,i){const r=h("kv-loading-spinner"),l=h("kv-icon");return s(),d("section",{class:B(["campaign-status section row align-center",[{"campaign-status--loading":a.loadingPromotion,"campaign-status--error":!a.promoApplied&&a.promoErrorMessage&&!a.loadingPromotion&&!a.inContext,"campaign-status--success":a.promoApplied&&!a.promoErrorMessage&&!a.inContext||a.statusMessageOverride,"campaign-status--incontext":a.inContext},i.inContextClasses]])},[m("div",{class:B(["small-12 columns",{"large-8":!a.inContext}])},[m("div",{class:B([{"tw-font-medium":a.inContext,"tw-font-book":!a.inContext}])},[a.statusMessageOverride?(s(),d("span",Tn,y(a.statusMessageOverride),1)):(s(),d(x,{key:1},[a.loadingPromotion&&!a.promoApplied&&!a.promoErrorMessage?(s(),d(x,{key:0},[_(r),e[1]||(e[1]=m("span",null,"Validating Promotion",-1))],64)):k("",!0),!a.promoApplied&&a.promoErrorMessage&&!a.loadingPromotion?(s(),d(x,{key:1},[_(l,{class:"campaign-status__icon",name:"error"}),m("span",null,y(a.promoErrorMessage),1)],64)):!a.loadingPromotion&&a.promoApplied===!1?(s(),d("span",Nn,"No promotion applied.")):k("",!0),!a.loadingPromotion&&a.promoApplied&&!a.promoErrorMessage&&!a.isMatching?(s(),d(x,{key:3},[a.promoName&&a.promoAmount!=="$0.00"&&a.activeCreditType!=="lending_reward"?(s(),d("span",{key:0,onClick:e[0]||(e[0]=(...v)=>i.handlePromoLinkClick&&i.handlePromoLinkClick(...v)),class:B({"tw-underline":a.inContext,"tw-cursor-pointer":a.inContext}),style:nt(a.inContext?"text-decoration: underline; cursor: pointer;":"")},[w(" You have "+y(t.$filters.numeral(a.promoAmount,"$0,0[.]00"))+" ",1),a.promoName?(s(),d("span",In,"from "+y(a.promoName),1)):k("",!0),e[2]||(e[2]=w(" to lend! "))],6)):k("",!0),a.activeCreditType==="lending_reward"?(s(),d("span",Sn,[e[3]||(e[3]=w(" Complete a loan to receive your lending reward ")),a.promoName?(s(),d("span",Ln," from "+y(a.promoName),1)):k("",!0),e[4]||(e[4]=w("! "))])):k("",!0)],64)):a.promoApplied&&!a.promoErrorMessage&&a.isMatching?(s(),d("span",Fn,"Make a matched loan while "+y(a.promoName)+"’s funds last",1)):k("",!0)],64))],2)],2)],2)}const Tt=L(wt,[["render",xn],["__scopeId","data-v-1efa97ae"]]);wt.__docgenInfo={displayName:"CampaignStatus",exportName:"default",description:"",tags:{},props:[{name:"activeCreditType",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"inContext",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isMatching",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"loadingPromotion",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"promoErrorMessage",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"promoApplied",type:{name:"boolean"},defaultValue:{func:!1,value:"null"}},{name:"promoAmount",type:{name:"string"},defaultValue:{func:!1,value:"'0.00'"}},{name:"promoName",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"statusMessageOverride",type:{name:"string"},defaultValue:{func:!1,value:"null"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/CorporateCampaign/CampaignStatus.vue"]};const Nt={name:"CampaignVerificationForm",inject:["apollo","cookieStore"],head:{},components:{KvLightbox:fe,KvButton:lt},emits:["verification-complete","campaign-verification-opt-out"],props:{formId:{type:String,default:null},maId:{type:String,default:""},pfId:{type:String,default:""},userId:{type:String,default:""}},data(){return{iFrameSrc:null,iFrameVisible:!1,iFrameWidth:500,iFrameHeight:500,spId:"",spUserId:""}},mounted(){this.formId&&this.checkFormSubmissionComplete()},methods:{checkFormSubmissionComplete(){this.apollo.query({query:V`query employeeVerificationFormQuery($formId: String!) {
					getForm(formId: $formId) {
						formId
						submittedTime
						userId
					}
				}`,variables:{formId:this.formId}}).then(({data:t,errors:e})=>{var o;if(e&&e.length)return e.forEach(n=>{E(n,"error")}),!1;((o=t==null?void 0:t.getForm)==null?void 0:o.submittedTime)??null?(this.iFrameVisible=!1,this.$kvTrackEvent("ManagedLendingCampaign","modal-campaign-verification-closed","Form Submission Exists in FormAssembly Service"),this.$emit("verification-complete")):this.initVerificationForm()})},initVerificationForm(){this.getSnowplowSession().then(()=>{this.setFrameSrc(),this.setIFrameDimensions(),this.formId&&(this.iFrameVisible=!0,this.$kvTrackEvent("ManagedLendingCampaign","modal-campaign-verification-shown")),window.addEventListener("message",t=>{this.handleIFrameMessage(t)})})},setFrameSrc(){typeof window<"u"&&window&&window.location&&this.formId&&(this.iFrameSrc=`https://kiva.tfaforms.net/${this.formId}?tfa_1=${this.userId}&tfa_2=${this.maId}&tfa_3=${this.pfId}&tfa_4=${this.spId}&tfa_5=${this.spUserId}`)},setIFrameDimensions(){this.iFrameWidth=this.$el.clientWidth<500?this.$el.clientWidth-90:500,this.iFrameHeight=500},handleIFrameMessage(t){var a;const e=(a=t==null?void 0:t.data)==null?void 0:a.type;e&&e==="fa_form_closed"&&this.$nextTick(()=>{window.setTimeout(()=>{this.iFrameVisible=!1,this.$kvTrackEvent("ManagedLendingCampaign","modal-campaign-verification-closed","Form Complete Signal from iframe"),this.$emit("verification-complete")},1e3)})},async getSnowplowSession(){const{snowplowUserId:t,snowplowSessionId:e}=gt(this.cookieStore);this.spId=e,this.spUserId=t},optOut(){this.iFrameVisible=!1,this.$kvTrackEvent("ManagedLendingCampaign","click-campaign-verification-optout","No thanks, I'll opt out"),this.$emit("campaign-verification-opt-out")}}},An={class:"content",ref:"formContainerRef"},Dn=["src","height","width"],Vn={class:"tw-text-center"};function Pn(t,e,a,o,n,i){const r=h("kv-button"),l=h("kv-lightbox");return s(),T(l,{visible:n.iFrameVisible,"prevent-close":!0,id:"faFormLightbox"},{default:N(()=>[m("div",An,[m("iframe",{id:"faForm",src:n.iFrameSrc,height:n.iFrameHeight,width:n.iFrameWidth,frameborder:"0"},null,8,Dn),m("div",Vn,[_(r,{class:"text-link",onClick:i.optOut},{default:N(()=>e[0]||(e[0]=[w(" No thanks, I'll opt out ")]),void 0,!0),_:1,__:[0]},8,["onClick"])])],512)],void 0),_:1},8,["visible"])}const En=L(Nt,[["render",Pn],["__scopeId","data-v-3c494693"]]);Nt.__docgenInfo={displayName:"CampaignVerificationForm",exportName:"default",description:"",tags:{},props:[{name:"formId",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"maId",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"pfId",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"userId",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"verification-complete"},{name:"campaign-verification-opt-out"}],sourceFiles:["/home/runner/work/ui/ui/src/components/CorporateCampaign/CampaignVerificationForm.vue"]};const $n=`query ftdQuery {
	my {
		id
		userAccount {
			id
			isFirstTimeDepositor
			hasDeposits
		}
	}
}
`,Mn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ftdQuery"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"my"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userAccount"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isFirstTimeDepositor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasDeposits"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:136,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:$n}}},Rn=`mutation removeCreditByType($creditType: CreditTypeEnum!, $creditId: Int, $basketId: String) {
	shop (basketId: $basketId) {
		id
		removeCreditByType	(creditType: $creditType, creditId: $creditId)
	}
}
`,Bn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"removeCreditByType"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"creditType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreditTypeEnum"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"creditId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"removeCreditByType"},arguments:[{kind:"Argument",name:{kind:"Name",value:"creditType"},value:{kind:"Variable",name:{kind:"Name",value:"creditType"}}},{kind:"Argument",name:{kind:"Name",value:"creditId"},value:{kind:"Variable",name:{kind:"Name",value:"creditId"}}}],directives:[]}]}}]}}],loc:{start:0,end:241,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Rn}}};function On(t=0,e=[],a=[],o=[],n={}){const i=e.reduce((c,u)=>(u.price?b(u.price):0).add(c).value(),0),r=o.reduce((c,u)=>(u.price?b(u.price):0).add(c).value(),0);let l=n.creditAmountNeeded!=="0.00"?"deposit":"";return n.kivaCreditAppliedTotal!=="0.00"&&(l+="+kiva_credit"),(n.bonusAppliedTotal!=="0.00"||n.redemptionCodeAppliedTotal!=="0.00"||n.universalCodeAppliedTotal!=="0.00")&&(l+="+promo_credit"),{transactionId:b(t).value(),itemTotal:n.itemTotal,loans:e.map(c=>{const{__typename:u,id:p,price:g}=c;return{__typename:u,id:p,price:g}}),loanCount:e.length>0?e.length:0,loanTotal:String(b(i).format("0.00")),donations:o.map(c=>{const{__typename:u,id:p,price:g}=c;return{__typename:u,id:p,price:g}}),donationTotal:String(b(r).format("0.00")),isTip:o.reduce((c,u)=>{const{isTip:p}=u;return c&&p},!0),isUserEdited:o.reduce((c,u)=>{const{isUserEdited:p}=u;return c||p},!1),kivaCardTotal:n.kivaCardTotal||null,kivaCardCount:a.length>0?a.length:0,kivaCards:a.map(c=>{const{__typename:u,id:p,price:g}=c;return{__typename:u,id:p,price:g}}),kivaCreditAppliedTotal:n.kivaCreditAppliedTotal||0,depositTotal:n.creditAmountNeeded||0,paymentType:l,isFTD:!1}}function jn(t){return t.query({query:Mn})}function It(t,e){return t.mutate({mutation:Bn,variables:{creditType:e}})}const qn={methods:{processBraintreeDropInError(t,e){var r,l;const a=(e==null?void 0:e[0])??((r=e==null?void 0:e.errors)==null?void 0:r[0])??e,o=((l=a==null?void 0:a.extensions)==null?void 0:l.code)??(a==null?void 0:a.error)??"UNKNOWN_ERROR_CODE",n=(a==null?void 0:a.message)??JSON.stringify(e);this.$showTipMsg('There was an error processing your payment. Please confirm your payment details and try again or contact our support team at <a href="mailto:contactus@kiva.org">contactus@kiva.org</a>.',"error"),this.$kvTrackEvent(t,"DropIn Payment Error",`${o}: ${n}`),j(`${o}: ${n}`)}}},Un=`mutation doNoncePaymentDepositAndCheckout($basketId: String, $amount: Money!, $nonce: String!, $savePaymentMethod: Boolean, $deviceData: String, $visitorId: String) {
	shop (basketId: $basketId) {
		id
		doNoncePaymentDepositAndCheckout (amount: $amount, nonce: $nonce, savePaymentMethod: $savePaymentMethod, deviceData: $deviceData, visitorId: $visitorId)
	}
}
`,Kn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"doNoncePaymentDepositAndCheckout"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"amount"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Money"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"nonce"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"savePaymentMethod"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"deviceData"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"visitorId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"doNoncePaymentDepositAndCheckout"},arguments:[{kind:"Argument",name:{kind:"Name",value:"amount"},value:{kind:"Variable",name:{kind:"Name",value:"amount"}}},{kind:"Argument",name:{kind:"Name",value:"nonce"},value:{kind:"Variable",name:{kind:"Name",value:"nonce"}}},{kind:"Argument",name:{kind:"Name",value:"savePaymentMethod"},value:{kind:"Variable",name:{kind:"Name",value:"savePaymentMethod"}}},{kind:"Argument",name:{kind:"Name",value:"deviceData"},value:{kind:"Variable",name:{kind:"Name",value:"deviceData"}}},{kind:"Argument",name:{kind:"Name",value:"visitorId"},value:{kind:"Variable",name:{kind:"Name",value:"visitorId"}}}],directives:[]}]}}]}}],loc:{start:0,end:400,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Un}}},Gn=`mutation doNoncePaymentDepositAndCheckoutAsync($basketId: String, $amount: Money!, $nonce: String!, $savePaymentMethod: Boolean, $deviceData: String, $visitorId: String) {
	shop (basketId: $basketId) {
		id
		doNoncePaymentDepositAndCheckoutAsync (amount: $amount, nonce: $nonce, savePaymentMethod: $savePaymentMethod, deviceData: $deviceData, visitorId: $visitorId)
	}
}
`,Hn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"doNoncePaymentDepositAndCheckoutAsync"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"amount"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Money"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"nonce"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"savePaymentMethod"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"deviceData"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"visitorId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"doNoncePaymentDepositAndCheckoutAsync"},arguments:[{kind:"Argument",name:{kind:"Name",value:"amount"},value:{kind:"Variable",name:{kind:"Name",value:"amount"}}},{kind:"Argument",name:{kind:"Name",value:"nonce"},value:{kind:"Variable",name:{kind:"Name",value:"nonce"}}},{kind:"Argument",name:{kind:"Name",value:"savePaymentMethod"},value:{kind:"Variable",name:{kind:"Name",value:"savePaymentMethod"}}},{kind:"Argument",name:{kind:"Name",value:"deviceData"},value:{kind:"Variable",name:{kind:"Name",value:"deviceData"}}},{kind:"Argument",name:{kind:"Name",value:"visitorId"},value:{kind:"Variable",name:{kind:"Name",value:"visitorId"}}}],directives:[]}]}}]}}],loc:{start:0,end:410,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Gn}}},St={name:"UserUpdatesPreference",components:{KvRadio:Ya},props:{trackingCategory:{type:String,required:!0},isCheckout:{type:Boolean,default:!1}},data(){return{selectedComms:""}},emits:["update:modelValue"],inject:["v$"]},zn={key:0,class:"input-error tw-text-danger tw-text-base tw-mb-2 tw-text-small"},Wn={key:1,class:"tw-border-brand-200 tw-border tw-bg-brand-100 tw-p-1 tw-rounded tw-text-small tw-mb-2"},Qn={class:"tw-text-small"},Jn=["href"],Zn=["href"];function Yn(t,e,a,o,n,i){var v,c,u;const r=h("kv-radio"),l=O("kv-track-event");return s(),d("div",null,[m("fieldset",{onInput:e[2]||(e[2]=p=>t.$emit("update:modelValue",p.target.value)),class:"tw-flex tw-flex-col tw-gap-2 tw-mt-1 tw-mb-2 tw-text-small"},[m("div",{class:B({"radio-error":(v=i.v$.selectedComms)==null?void 0:v.$error})},[F((s(),T(r,{value:"on",modelValue:n.selectedComms,"onUpdate:modelValue":e[0]||(e[0]=p=>n.selectedComms=p),name:"newsConsent"},{default:N(()=>e[3]||(e[3]=[w(" Send me updates from people I've funded, my impact, and other ways I can help. ")]),void 0),_:1,__:[3]},8,["modelValue"])),[[l,[a.trackingCategory,"click","marketing-updates","Send me updates from people I've funded, my impact, and other ways I can help."]]])],2),m("div",{class:B({"radio-error":(c=i.v$.selectedComms)==null?void 0:c.$error})},[F((s(),T(r,{value:"off",name:"newsConsent",modelValue:n.selectedComms,"onUpdate:modelValue":e[1]||(e[1]=p=>n.selectedComms=p)},{default:N(()=>e[4]||(e[4]=[w(" No, I don't want updates about my borrower(s) progress or other relevant loans. ")]),void 0),_:1,__:[4]},8,["modelValue"])),[[l,[a.trackingCategory,"click","marketing-updates","No, I don't want updates about my borrower(s) progress or other relevant loans."]]])],2)],32),(u=i.v$.selectedComms)!=null&&u.$error?(s(),d("p",zn," Choose your communication preferences. ")):k("",!0),n.selectedComms==="0"?(s(),d("p",Wn," Can we ask you to reconsider? This borrower and others like them will need your help to change their lives. You can unsubscribe at any time. ")):k("",!0),m("p",Qn,[w(" By completing your "+y(a.isCheckout?"loan":"account")+", you agree to Kiva’s ",1),m("a",{href:`https://${t.$appConfig.host}/legal/terms`,target:"_blank",class:"tw-underline",title:"Open Terms of Use in a new window"},"Terms of Use",8,Jn),e[5]||(e[5]=w(" and ")),m("a",{href:`https://${t.$appConfig.host}/legal/privacy`,target:"_blank",class:"tw-underline",title:"Open Privacy Policy in a new window"},"Privacy Policy",8,Zn),e[6]||(e[6]=w(". Preferences can be managed in settings. "))])])}const Xn=L(St,[["render",Yn],["__scopeId","data-v-fe4d8f1a"]]);St.__docgenInfo={displayName:"UserUpdatesPreference",exportName:"default",description:"",tags:{},props:[{name:"trackingCategory",type:{name:"string"},required:!0},{name:"isCheckout",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/UserUpdatesPreference.vue"]};const eo=t=>{var e;if(typeof document!==void 0)return decodeURIComponent(((e=document.cookie.match(`(^|;)\\s*${t}\\s*=\\s*([^;]+)`))==null?void 0:e.pop())||"")};V`query basketTotals($basketId: String) {
	shop (basketId: $basketId) {
		id
		basket {
			id
			totals {
				bonusAppliedTotal
				bonusAvailableTotal
				creditAmountNeeded
				creditAppliedTotal
				creditAvailableTotal
				donationTotal
				itemTotal
				freeTrialAppliedTotal
				freeTrialAvailableTotal
				loanReservationTotal
				kivaCardTotal
				kivaCreditAppliedTotal
				kivaCreditAvailableTotal
				kivaCreditRemaining
				kivaCreditToReapply
				redemptionCodeAppliedTotal
				redemptionCodeAvailableTotal
				universalCodeAppliedTotal
				universalCodeAvailableTotal
			}
		}
	}
}`;function to(t){return new Promise(e=>setTimeout(e,t))}async function ao(t,e,a,o){const n=Date.now()+o;let i=await t();for(;!e(i);){if(Date.now()>n)throw new Error("Polling timed out");await to(a),i=await t()}return i}function io(){return eo("uiv")}async function no({apollo:t,transactionSagaId:e}){return t.query({query:V`
			query checkoutStatus($transactionId: String!, $visitorId: String) {
				checkoutStatus(transactionId: $transactionId, visitorId: $visitorId) {
					basketId
					errorCode
					errorMessage
					receipt {
						checkoutId
					}
					requestedAt
					status
					transactionId
					updatedAt
				}
			}
		`,variables:{transactionId:e,visitorId:io()},fetchPolicy:"network-only"})}async function Lt({apollo:t,transactionSagaId:e,interval:a=1e3,timeout:o=6e4}){return ao(()=>no({apollo:t,transactionSagaId:e}),n=>{var i;const{status:r,errorCode:l,errorMessage:v}=(i=n==null?void 0:n.data)==null?void 0:i.checkoutStatus;return!!(r==="COMPLETED"||l||v)},a,o)}V`
	mutation AddGivingFund($fund: GivingFundInput!) {
		addGivingFund(fund: $fund) {
			id
		}
	}
`;V`
	mutation validatePreCheckout(
		$basketId: String,
		$email: String,
		$visitorId: String,
		$emailOptIn: Boolean,
		$inviter: InviterInput
	) {
	shop (basketId: $basketId) {
		id
		validatePreCheckout (email: $email, visitorId: $visitorId, emailOptIn: $emailOptIn, inviter: $inviter) {
			error
			success
			value
		}
	}
}`;V`
	mutation creditCheckout(
		$basketId: String,
		$visitorId: String
	) {
		shop (basketId: $basketId) {
			id
			transactionId: checkoutAsync (visitorId: $visitorId)
		}
	}
`;V`
	mutation depositCheckout(
		$basketId: String,
		$amount: Money!,
		$nonce: String!,
		$savePaymentMethod: Boolean,
		$deviceData: String,
		$visitorId: String
	) {
		shop (basketId: $basketId) {
			id
			transactionId: doNoncePaymentDepositAndCheckoutAsync(
				amount: $amount,
				nonce: $nonce,
				savePaymentMethod: $savePaymentMethod,
				deviceData: $deviceData,
				visitorId: $visitorId
			)
		}
	}
`;const Ke="opt_in_comms",Ft={name:"CheckoutDropInPaymentWrapper",components:{KvButton:G,BraintreeDropInInterface:D(()=>A(()=>import("./entry-BraintreeDropInInterface-DkrGCRTOL4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),KvCheckbox:be,KvTextInput:Ce,UserUpdatesPreference:Xn},provide(){return{v$:this.v$}},inject:["apollo","cookieStore"],mixins:[ee,qn],emits:["complete-transaction","updating-totals","refreshtotals","opt-in"],props:{amount:{type:String,default:""},isGuestCheckout:{type:Boolean,default:!1},promoGuestCheckoutEnabled:{type:Boolean,default:!1},useAsyncCheckout:{type:Boolean,default:!1},loansInBasket:{type:Number,default:0}},data(){return{email:null,termsAgreement:!1,emailUpdates:!1,enableCheckoutButton:!1,isClientReady:!1,paymentTypes:["paypal","card","applePay","googlePay"],enableCommsExperiment:!1,selectedComms:!1,enableRadioBtnExperiment:!1}},setup(){return{v$:ct()}},validations(){return{email:{required:ut,email:mt},termsAgreement:{required:t=>t===!0},selectedComms:{required:Ja(t=>t)}}},mounted(){this.isClientReady=typeof window<"u"},methods:{submit(){this.$kvTrackEvent("basket","click","braintree-checkout-button"),this.isGuestCheckout?(this.v$.$touch(),this.v$.$invalid||this.validateGuestBasketAndCheckout()):this.validateBasketAndCheckout()},validateGuestBasketAndCheckout(){this.$emit("updating-totals",!0);let t=this.validateGuestBasket,{emailUpdates:e}=this;this.enableRadioBtnExperiment&&(e=this.selectedComms==="on"),this.$emit("opt-in",e),this.email,this.promoGuestCheckoutEnabled&&(t=this.validateGuestPromoBasket,this.promoFundId,this.managedAccountId),t(this.email,e).then(a=>{if(a===!0)this.submitDropInPayment();else if(R(a,"[0].error")==="api.authenticationRequired"){const n=encodeURIComponent(`login|${JSON.stringify({msg:"re-auth-acc-exists"})}`);window.location=`/ui-login?force=true&doneUrl=/checkout&loginHint=${n}`}else this.$emit("updating-totals",!1),this.showCheckoutError(a),this.$emit("refreshtotals");return a}).catch(a=>{this.$emit("updating-totals",!1);const o=R(a,"errors[0].code"),n=R(a,"errors[0].message");me(i=>{i.setTag("bt_stage_dropin","btSubmitValidationCatch"),i.setTag("bt_basket_validation_error",n),j(o)})})},validateBasketAndCheckout(){this.$emit("updating-totals",!0),this.validateBasket().then(t=>(t===!0?this.submitDropInPayment():(this.$emit("updating-totals",!1),this.showCheckoutError(t),this.$emit("refreshtotals")),t)).catch(t=>{this.$emit("updating-totals",!1);const e=R(t,"errors[0].code"),a=R(t,"errors[0].message");me(o=>{o.setTag("bt_stage_dropin","btSubmitValidationCatch"),o.setTag("bt_basket_validation_error",a),j(e)})})},submitDropInPayment(){this.$refs.braintreeDropInInterface.btDropinInstance.requestPaymentMethod().then(t=>{const e=t==null?void 0:t.nonce,a=t==null?void 0:t.deviceData,o=t==null?void 0:t.type;e&&this.doBraintreeCheckout(e,a,o)}).catch(t=>{this.$emit("updating-totals",!1),console.error(t),me(e=>{e.setTag("bt_stage_dropin","btRequestPaymentMethodCatch"),e.setTag("bt_basket_validation_error",t),j(t)})})},doBraintreeCheckout(t,e,a){this.apollo.mutate({mutation:this.useAsyncCheckout?Hn:Kn,variables:{amount:b(this.amount).format("0.00"),nonce:t,deviceData:e,savePaymentMethod:!1,visitorId:this.cookieStore.get("uiv")||null}}).then(async o=>{var i,r,l,v;const n=this.useAsyncCheckout?(r=(i=o==null?void 0:o.data)==null?void 0:i.shop)==null?void 0:r.doNoncePaymentDepositAndCheckoutAsync:(v=(l=o==null?void 0:o.data)==null?void 0:l.shop)==null?void 0:v.doNoncePaymentDepositAndCheckout;if(this.useAsyncCheckout&&typeof n!="object")return await Lt({apollo:this.apollo,transactionSagaId:n}).then(c=>{var p,g,f,C,S,I,M,P;const u=((f=(g=(p=c==null?void 0:c.data)==null?void 0:p.checkoutStatus)==null?void 0:g.receipt)==null?void 0:f.checkoutId)??null;if(u)this.handleSuccessfulCheckout(u);else{let $=(c==null?void 0:c.errors)??null;((S=(C=c==null?void 0:c.data)==null?void 0:C.checkoutStatus)!=null&&S.errorCode||(M=(I=c==null?void 0:c.data)==null?void 0:I.checkoutStatus)!=null&&M.errorMessage)&&($=this.formatCheckoutStatusError((P=c==null?void 0:c.data)==null?void 0:P.checkoutStatus)),this.handleFailedCheckout($)}}).catch(c=>{var p,g,f,C,S;let u=(c==null?void 0:c.errors)??null;((g=(p=c==null?void 0:c.data)==null?void 0:p.checkoutStatus)!=null&&g.errorCode||(C=(f=c==null?void 0:c.data)==null?void 0:f.checkoutStatus)!=null&&C.errorMessage)&&(u=this.formatCheckoutStatusError((S=c==null?void 0:c.data)==null?void 0:S.checkoutStatus)),this.handleFailedCheckout(u)}),o;if(o.errors)return this.handleFailedCheckout(o),o;if(!this.useAsyncCheckout)return this.handleSuccessfulCheckout(n,a),o})},handleSuccessfulCheckout(t,e){t&&(this.$kvTrackEvent("basket",`${e} Braintree DropIn Payment`,"Success",t,t),this.$emit("complete-transaction",{transactionId:t,username:this.email}))},handleFailedCheckout(t){this.$emit("updating-totals",!1),this.processBraintreeDropInError("basket",t),this.$refs.braintreeDropInInterface.btDropinInstance.clearSelectedPaymentMethod(),this.$emit("refreshtotals")}},computed:{emailUpdatesCopy(){return this.enableCommsExperiment?"Send me updates from people I've funded, my impact, and other ways I can help.":"Receive email updates from Kiva (including borrower updates and promos). You can unsubscribe anytime."}},created(){if(this.isGuestCheckout&&this.loansInBasket){const{version:t}=this.apollo.readFragment({id:`Experiment:${Ke}`,fragment:Za})??{};rt(this.apollo,this.$kvTrackEvent,"basket",Ke,"EXP-MP-271-May2024"),t==="b"&&(this.enableCommsExperiment=!0),t==="c"&&(this.enableRadioBtnExperiment=!0,this.selectedComms="",this.termsAgreement=!0)}}},oo={class:"tw-flex tw-justify-center md:tw-justify-end"},so={class:"dropin-payment-holder",style:{padding:"0","max-width":"20rem"}},ro={key:1,id:"guest-checkout"},lo={key:0,class:"input-label tw-font-medium tw-block tw-my-2",for:"email"},mo={key:1,class:"input-label tw-font-medium tw-block tw-my-2",for:"email"},uo={key:2,class:"input-label tw-text-small tw-text-secondary tw-block tw-my-2",for:"email"},co={key:3},po={key:4,class:"input-error tw-text-danger tw-text-base tw-mb-2"},vo=["href"],ko=["href","title"],ho={key:0,class:"input-error tw-text-danger tw-text-base"},go={id:"dropin-button"};function fo(t,e,a,o,n,i){var p,g;const r=h("braintree-drop-in-interface"),l=h("kv-text-input"),v=h("user-updates-preference"),c=h("kv-checkbox"),u=h("kv-button");return s(),d("div",oo,[m("div",so,[n.isClientReady?(s(),T(r,{key:0,ref:"braintreeDropInInterface",amount:a.amount,flow:"checkout","payment-types":n.paymentTypes,"preselect-vaulted-payment-method":!a.isGuestCheckout,auth:a.isGuestCheckout?"token-key":"client-token",onTransactionsEnabled:e[0]||(e[0]=f=>n.enableCheckoutButton=f)},null,8,["amount","payment-types","preselect-vaulted-payment-method","auth"])):k("",!0),a.isGuestCheckout?(s(),d("div",ro,[a.promoGuestCheckoutEnabled?(s(),d("label",mo," What is your email? ")):(s(),d("label",lo," Where should we email your receipt? ")),a.promoGuestCheckoutEnabled?(s(),d("div",uo," Kiva will share your information with "+y(t.promoName?t.promoName:"your company")+" to let them know you’ve redeemed your credits ",1)):k("",!0),_(l,{type:"email",name:"email",modelValue:n.email,"onUpdate:modelValue":e[1]||(e[1]=f=>n.email=f),ref:"email","data-testid":"basket-guest-email-input",id:"email",class:"data-hj-suppress tw-mb-2 tw-w-full",onFocus:e[2]||(e[2]=f=>t.$kvTrackEvent("basket","click-email-receipt-field","Where should we email your receipt?"))},null,8,["modelValue"]),a.promoGuestCheckoutEnabled&&((p=o.v$.email)!=null&&p.$error)?(s(),d("p",co," Valid campaign email required ")):(g=o.v$.email)!=null&&g.$error?(s(),d("p",po," Valid email required. ")):k("",!0),n.enableRadioBtnExperiment?(s(),T(v,{key:5,"tracking-category":"basket","onUpdate:modelValue":e[3]||(e[3]=f=>n.selectedComms=f),"is-checkout":""})):(s(),d(x,{key:6},[_(c,{"data-testid":"basket-guest-terms-agreement",id:"termsAgreement",name:"termsAgreement",class:"checkbox tw-text-small tw-mb-2",modelValue:n.termsAgreement,"onUpdate:modelValue":[e[4]||(e[4]=f=>n.termsAgreement=f),e[5]||(e[5]=f=>t.$kvTrackEvent("basket","click","terms-of-use","I have read and agree to the Terms of Use and Privacy Policy",f?1:0))]},{default:N(()=>{var f;return[e[8]||(e[8]=w(" I have read and agree to the ")),m("a",{href:`https://${t.$appConfig.host}/legal/terms`,target:"_blank",title:"Open Terms of Use in a new window"},"Terms of Use",8,vo),e[9]||(e[9]=w(" and ")),m("a",{href:`https://${t.$appConfig.host}/legal/privacy`,target:"_blank",title:`Open Privacy ${n.enableCommsExperiment?"Notice":"Policy"} in a new window`},"Privacy "+y(n.enableCommsExperiment?"Notice":"Policy"),9,ko),e[10]||(e[10]=w(". Preferences can be managed in settings. ")),(f=o.v$.termsAgreement)!=null&&f.$error?(s(),d("p",ho," You must agree to the Kiva Terms of service & Privacy "+y(n.enableCommsExperiment?"Notice":"Policy")+". ",1)):k("",!0)]},void 0),_:1,__:[8,9,10]},8,["modelValue"]),_(c,{"data-testid":"basket-guest-email-updates",id:"emailUpdates",class:"checkbox tw-text-small tw-mb-2",name:"emailUpdates",modelValue:n.emailUpdates,"onUpdate:modelValue":[e[6]||(e[6]=f=>n.emailUpdates=f),e[7]||(e[7]=f=>t.$kvTrackEvent("basket","click","marketing-updates",i.emailUpdatesCopy,f?1:0))]},{default:N(()=>[w(y(i.emailUpdatesCopy),1)],void 0),_:1},8,["modelValue"])],64))])):k("",!0),m("div",go,[_(u,{value:"submit",id:"dropin-submit","data-testid":"basket-dropin-submit",class:"tw-mb-2",state:`${n.enableCheckoutButton?"":"disabled"}`,onClick:i.submit},{default:N(()=>e[11]||(e[11]=[w(" Complete order ")]),void 0),_:1,__:[11]},8,["state","onClick"])]),e[12]||(e[12]=m("p",{class:"dropin-wrapper-attribution-text"}," Thanks to PayPal, Kiva receives free payment processing for all loans. ",-1))])])}const yo=L(Ft,[["render",fo],["__scopeId","data-v-e343350c"]]);Ft.__docgenInfo={displayName:"CheckoutDropInPaymentWrapper",exportName:"default",description:"",tags:{},props:[{name:"amount",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"isGuestCheckout",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"promoGuestCheckoutEnabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"useAsyncCheckout",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"loansInBasket",type:{name:"number"},defaultValue:{func:!1,value:"0"}}],events:[{name:"complete-transaction",type:{names:["undefined"]}},{name:"updating-totals",type:{names:["undefined"]}},{name:"refreshtotals"},{name:"opt-in",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/CheckoutDropInPaymentWrapper.vue"]};const xt={name:"KivaCreditPayment",components:{KvButton:G},inject:["apollo","cookieStore"],mixins:[ee],emits:["complete-transaction","checkout-failure","refreshtotals","updating-totals"],props:{useAsyncCheckout:{type:Boolean,default:!1}},methods:{validateCreditBasket(){this.$kvTrackEvent("basket","Kiva Checkout","Button Click"),this.$emit("updating-totals",!0),this.validateBasket().then(t=>{t===!0?this.checkoutCreditBasket():(this.$emit("updating-totals",!1),this.showCheckoutError(t),this.$emit("refreshtotals"))}).catch(t=>{this.$emit("updating-totals",!1),this.showCheckoutError(t)})},checkoutCreditBasket(){this.checkoutBasket(!1,this.useAsyncCheckout).then(async t=>{if(this.useAsyncCheckout&&typeof t!="object")await Lt({apollo:this.apollo,transactionSagaId:t}).then(e=>{var o,n,i,r,l,v,c,u;const a=((i=(n=(o=e==null?void 0:e.data)==null?void 0:o.checkoutStatus)==null?void 0:n.receipt)==null?void 0:i.checkoutId)??null;if(!a){let p=(e==null?void 0:e.errors)??null;((l=(r=e==null?void 0:e.data)==null?void 0:r.checkoutStatus)!=null&&l.errorCode||(c=(v=e==null?void 0:e.data)==null?void 0:v.checkoutStatus)!=null&&c.errorMessage)&&(p=this.formatCheckoutStatusError((u=e==null?void 0:e.data)==null?void 0:u.checkoutStatus)),this.handleFailedCheckout(p)}this.handleSuccessfulCheckout(a)}).catch(e=>{var o,n,i,r,l;let a=(e==null?void 0:e.errors)??null;(n=(o=e==null?void 0:e.data)==null?void 0:o.checkoutStatus)!=null&&n.errorCode||(r=(i=e==null?void 0:e.data)==null?void 0:i.checkoutStatus)!=null&&r.errorMessage?a=this.formatCheckoutStatusError((l=e==null?void 0:e.data)==null?void 0:l.checkoutStatus):this.handleFailedCheckout(a)});else if(typeof t!="object")this.handleSuccessfulCheckout(t);else{const e=(t==null?void 0:t.errors)??[];this.handleFailedCheckout(e)}}).catch(t=>{this.$emit("updating-totals",!1),this.handleFailedCheckout(t)})},handleSuccessfulCheckout(t){this.$kvTrackEvent("basket","Kiva Checkout","Success",t),this.$emit("complete-transaction",t)},handleFailedCheckout(t){this.$emit("updating-totals",!1),this.showCheckoutError(t),this.$emit("checkout-failure",t)}}};function bo(t,e,a,o,n,i){const r=h("kv-button"),l=O("kv-track-event");return F((s(),T(r,{type:"submit",id:"kiva-credit-submit",class:"tw-mb-2",title:"Checkout using your Kiva credit",onClick:U(i.validateCreditBasket,["prevent"])},{default:N(()=>[ot(t.$slots,"default",{},()=>[e[0]||(e[0]=w("Complete order"))])],void 0),_:3},8,["onClick"])),[[l,["payment.continueBtn"]]])}const Co=L(xt,[["render",bo]]);xt.__docgenInfo={displayName:"KivaCreditPayment",exportName:"default",description:"",tags:{},props:[{name:"useAsyncCheckout",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"complete-transaction",type:{names:["undefined"]}},{name:"checkout-failure",type:{names:["undefined"]}},{name:"refreshtotals"},{name:"updating-totals",type:{names:["undefined"]}}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/KivaCreditPayment.vue"]};const At={name:"KivaCreditGuestPayment",components:{KvButton:G,KvCheckbox:be,KvTextInput:Ce},inject:["apollo","cookieStore"],mixins:[ee],emits:["complete-transaction","checkout-failure","refreshtotals","updating-totals"],props:{managedAccountId:{type:String,default:""},promoFundId:{type:String,default:""},isGuestCheckout:{type:Boolean,default:!1},promoGuestCheckoutEnabled:{type:Boolean,default:!1},promoName:{type:String,default:""}},data(){return{email:null,termsAgreement:!1,emailUpdates:!1}},setup(){return{v$:ct()}},validations(){return{email:{required:ut,email:mt},termsAgreement:{required:t=>t===!0}}},methods:{validateCreditBasket(){this.$kvTrackEvent("basket","Kiva Checkout","Button Click"),this.$emit("updating-totals",!0),this.validateGuestPromoBasket(this.email,this.emailUpdates,this.promoFundId,this.managedAccountId).then(t=>{t===!0?this.checkoutCreditBasket():(this.$emit("updating-totals",!1),this.showCheckoutError(t),this.$emit("refreshtotals"))}).catch(t=>{this.$emit("updating-totals",!1),console.error(t)})},checkoutCreditBasket(){this.checkoutBasket(this.promoGuestCheckoutEnabled).then(t=>{if(typeof t!="object")this.$kvTrackEvent("basket","Kiva Checkout","Success",t),this.$emit("complete-transaction",t);else{this.$emit("updating-totals",!1);const e=(t==null?void 0:t.errors)??[];this.showCheckoutError(e),this.$emit("checkout-failure",e)}}).catch(t=>{this.$emit("updating-totals",!1),console.error(t)})}}},_o={key:0,id:"guest-checkout"},wo={class:"input-label tw-text-small tw-text-secondary tw-block tw-my-2",for:"email"},To={key:0,class:"input-error tw-text-danger tw-text-base tw-mb-2"},No=["href"],Io=["href"],So={key:0,class:"input-error tw-text-danger tw-text-base"};function Lo(t,e,a,o,n,i){var u;const r=h("kv-text-input"),l=h("kv-checkbox"),v=h("kv-button"),c=O("kv-track-event");return s(),d("div",null,[a.isGuestCheckout?(s(),d("div",_o,[e[10]||(e[10]=m("label",{class:"input-label tw-font-medium tw-block tw-my-2",for:"email"}," What is your email? ",-1)),m("div",wo," Kiva will share your information with "+y(a.promoName?a.promoName:"your company")+" to let them know you’ve redeemed your credits ",1),_(r,{type:"email",name:"email",modelValue:n.email,"onUpdate:modelValue":e[0]||(e[0]=p=>n.email=p),ref:"email","data-testid":"basket-guest-email-input",id:"email",class:"data-hj-suppress tw-mb-2 tw-w-full",onFocus:e[1]||(e[1]=p=>t.$kvTrackEvent("basket","click-email-receipt-field","Where should we email your receipt?"))},null,8,["modelValue"]),(u=o.v$.email)!=null&&u.$error?(s(),d("p",To," Valid email required. ")):k("",!0),_(l,{"data-testid":"basket-guest-terms-agreement",id:"termsAgreement",name:"termsAgreement",class:"checkbox tw-text-small tw-mb-2",modelValue:n.termsAgreement,"onUpdate:modelValue":[e[2]||(e[2]=p=>n.termsAgreement=p),e[3]||(e[3]=p=>t.$kvTrackEvent("basket","click-terms-of-use","I have read and agree to the Terms of Use and Privacy Policy.",p?1:0))]},{default:N(()=>{var p;return[e[6]||(e[6]=w(" I have read and agree to the ")),m("a",{href:`https://${t.$appConfig.host}/legal/terms`,target:"_blank",title:"Open Terms of Use in a new window"},"Terms of Use",8,No),e[7]||(e[7]=w(" and ")),m("a",{href:`https://${t.$appConfig.host}/legal/privacy`,target:"_blank",title:"Open Privacy Policy in a new window"},"Privacy Policy",8,Io),e[8]||(e[8]=w(". Preferences can be managed in settings. ")),(p=o.v$.termsAgreement)!=null&&p.$error?(s(),d("p",So," You must agree to the Kiva Terms of service & Privacy policy. ")):k("",!0)]},void 0),_:1,__:[6,7,8]},8,["modelValue"]),_(l,{"data-testid":"basket-guest-email-updates",id:"emailUpdates",class:"checkbox tw-text-small tw-mb-2",name:"emailUpdates",modelValue:n.emailUpdates,"onUpdate:modelValue":[e[4]||(e[4]=p=>n.emailUpdates=p),e[5]||(e[5]=p=>t.$kvTrackEvent("basket","click-marketing-updates","Receive email updates from Kiva (including borrower updates and promos). You can unsubscribe anytime.",p?1:0))]},{default:N(()=>e[9]||(e[9]=[w(" Receive email updates from Kiva (including borrower updates and promos). You can unsubscribe anytime. ")]),void 0),_:1,__:[9]},8,["modelValue"])])):k("",!0),F((s(),T(v,{type:"submit",id:"kiva-credit-submit",class:"tw-mb-2",title:"Checkout using your Kiva credit",onClick:U(i.validateCreditBasket,["prevent"])},{default:N(()=>[ot(t.$slots,"default",{},()=>[e[11]||(e[11]=w("Complete order"))])],void 0),_:3},8,["onClick"])),[[c,["payment.continueBtn"]]])])}const Fo=L(At,[["render",Lo]]);At.__docgenInfo={displayName:"KivaCreditGuestPayment",exportName:"default",description:"",tags:{},props:[{name:"managedAccountId",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"promoFundId",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"isGuestCheckout",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"promoGuestCheckoutEnabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"promoName",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"complete-transaction",type:{names:["undefined"]}},{name:"checkout-failure",type:{names:["undefined"]}},{name:"refreshtotals"},{name:"updating-totals",type:{names:["undefined"]}}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/KivaCreditGuestPayment.vue"]};const Dt={name:"CheckoutItemImg",props:{disableLink:{type:Boolean,default:!1},loanId:{type:Number,default:null},name:{type:String,default:""},imageUrl:{type:String,default:""}}},xo=["src","alt"];function Ao(t,e,a,o,n,i){const r=h("router-link"),l=O("kv-track-event");return F((s(),T(r,{is:a.disableLink?"span":"router-link",to:`/lend/${a.loanId}`},{default:N(()=>[m("img",{class:"loan-img tw-w-12 lg:tw-w-13 tw-h-12 lg:tw-h-13 tw-rounded",src:a.imageUrl,alt:"photo of "+a.name},null,8,xo)],void 0),_:1},8,["is","to"])),[[l,["basket","click-Read more","Photo",a.loanId,a.loanId]]])}const Do=L(Dt,[["render",Ao]]);Dt.__docgenInfo={displayName:"CheckoutItemImg",exportName:"default",description:"",tags:{},props:[{name:"disableLink",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"loanId",type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"name",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"imageUrl",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/CheckoutItemImg.vue"]};const Vt={name:"LoanMatcher",props:{matchingText:{type:String,default:""}}},Vo={class:"tw-text-small tw-text-secondary matching-text"};function Po(t,e,a,o,n,i){return s(),d("p",Vo," Matched by "+y(a.matchingText),1)}const Eo=L(Vt,[["render",Po]]);Vt.__docgenInfo={displayName:"LoanMatcher",exportName:"default",description:"",tags:{},props:[{name:"matchingText",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/LoanMatcher.vue"]};const Pt={name:"LoanPromoCredits",props:{appliedPromoCredits:{type:Array,default:()=>[]}},computed:{formattedPromoCredits(){return this.appliedPromoCredits.map(t=>{var e;return{amount:(t==null?void 0:t.amount)??0,displayName:((e=t==null?void 0:t.promoFund)==null?void 0:e.displayName)??null}})}}},$o={class:"promo-tags tw-clear-both tw-mt-0.5 tw-mx-0 tw-mb-0.5"},Mo={key:0,class:"tw-inline-block tw-rounded-xs -tw-ml-1 tw-mb-1 tw-pt-0.5 tw-px-1 tw-pb-0 tw-text-brand-1000 tw-bg-secondary"},Ro={key:1,class:"tw-py-0.5 tw-px-0 tw-block"};function Bo(t,e,a,o,n,i){return s(),d("div",$o,[(s(!0),d(x,null,K(i.formattedPromoCredits,(r,l)=>(s(),d("div",{class:"tw-text-small tw-text-secondary",key:l,"data-testid":"basket-loan-promo-credit"},[r.amount!==0?(s(),d("span",Mo,[m("strong",null,y(r.amount)+" credit applied",1)])):k("",!0),r.displayName?(s(),d("span",Ro,[e[0]||(e[0]=w(" Sponsored by: ")),e[1]||(e[1]=m("br",null,null,-1)),m("strong",null,y(r.displayName),1)])):k("",!0)]))),128))])}const Oo=L(Pt,[["render",Bo]]);Pt.__docgenInfo={displayName:"LoanPromoCredits",exportName:"default",description:"",tags:{},props:[{name:"appliedPromoCredits",type:{name:"array"},defaultValue:{func:!1,value:"[]"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/LoanPromoCredits.vue"]};const Et={name:"LoanReservation",components:{KvLightbox:le},data(){return{defaultLbVisible:!1,differenceInWords:"",reservationMessageId:null,loanReservationMsg1:!1,loanReservationMsg2:!1,loanReservationMsg3:!1,loanReservationMsg4:!1,calculatingMessage:!0}},props:{expiryTime:{type:String,default:""},isExpiringSoon:{type:Boolean,default:!1}},computed:{reservedDate(){return new Date(this.expiryTime)}},methods:{triggerDefaultLightbox(){this.defaultLbVisible=!this.defaultLbVisible},lightboxClosed(){this.defaultLbVisible=!1},reservationMessage(){if(this.expiryTime!==null){const t=ti(this.reservedDate.getTime(),Date.now()),e=hi(this.reservedDate.getTime(),Date.now())%60,a=9,o=`Reservation expires in ${t}m ${e}s`;this.reservedDate.getTime()-Date.now()<=0||this.isExpiringSoon?(clearInterval(this.reservationMessageId),this.loanReservationMsg1=!0,this.loanReservationMsg2=!1,this.loanReservationMsg3=!1,this.loanReservationMsg4=!1):t>a?(this.differenceInWords=o,this.loanReservationMsg1=!1,this.loanReservationMsg2=!0):t>1&&t<=a?(this.differenceInWords=o,this.loanReservationMsg2=!1,this.loanReservationMsg3=!0):t<=1&&(this.differenceInWords=`Reservation expires in ${e}s`,this.loanReservationMsg3=!1,this.loanReservationMsg4=!0),this.calculatingMessage=!1}},activateReservationTimer(){clearInterval(this.reservationMessageId),this.reservationMessageId=setInterval(()=>{this.reservationMessage()},1e3)}},created(){this.reservationMessage()},mounted(){this.activateReservationTimer()},beforeUnmount(){this.reservationMessageId&&clearInterval(this.reservationMessageId)}},jo={class:"reservation-info tw-w-full"},qo={key:0,class:"tw-text-small tw-text-secondary"},Uo={key:0,class:"loan-message tw-my-1"},Ko={key:1,class:"loan-message tw-my-1"};function Go(t,e,a,o,n,i){const r=h("kv-lightbox");return s(),d("div",jo,[a.expiryTime?(s(),d("div",qo,[n.calculatingMessage?(s(),d("p",Uo,e[1]||(e[1]=[m("em",null,"Calculating loan reservation...",-1)]))):k("",!0),n.loanReservationMsg1?(s(),d("p",Ko,[e[2]||(e[2]=w(" Loan not reserved. ")),m("button",{class:"tw-text-link tw-font-medium",onClick:e[0]||(e[0]=(...l)=>i.triggerDefaultLightbox&&i.triggerDefaultLightbox(...l)),"data-testid":"basket-loan-reservation-why"}," Why? ")])):k("",!0),n.loanReservationMsg2||n.loanReservationMsg3||n.loanReservationMsg4?(s(),d("p",{key:2,class:B(["loan-message tw-my-1",{"tw-font-medium tw-text-danger":n.loanReservationMsg3||n.loanReservationMsg4}])},y(n.differenceInWords),3)):k("",!0)])):k("",!0),_(r,{class:"loanNotReservedLightbox","data-testid":"basket-loan-why-lightbox",visible:n.defaultLbVisible,onLightboxClosed:i.lightboxClosed,title:"What does it mean that my loan is not reserved?"},{default:N(()=>e[3]||(e[3]=[m("p",null," Loans will not be reserved if they've been in your basket for more than 45 minutes or have less than 6 hours left to fundraise. This means there's a chance this loan may be funded by other lenders even though it's in your basket. To make this loan, please proceed through the checkout process. ",-1)]),void 0),_:1,__:[3]},8,["visible","onLightboxClosed"])])}const Ho=L(Et,[["render",Go]]);Et.__docgenInfo={displayName:"LoanReservation",exportName:"default",description:"",tags:{},props:[{name:"expiryTime",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"isExpiringSoon",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/LoanReservation.vue"]};const zo=`mutation updateKivaCardReservation($idsInGroup: [Int], $individualPrice: Money!, $basketId: String) {
	shop (basketId: $basketId) {
		id
		updateKivaCard (kivaCard: {
			idsInGroup: $idsInGroup
			individualPrice: $individualPrice
		})
	}
}
`,$t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateKivaCardReservation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"idsInGroup"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"individualPrice"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Money"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updateKivaCard"},arguments:[{kind:"Argument",name:{kind:"Name",value:"kivaCard"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"idsInGroup"},value:{kind:"Variable",name:{kind:"Name",value:"idsInGroup"}}},{kind:"ObjectField",name:{kind:"Name",value:"individualPrice"},value:{kind:"Variable",name:{kind:"Name",value:"individualPrice"}}}]}}],directives:[]}]}}]}}],loc:{start:0,end:279,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:zo}}},Mt={name:"RemoveBasketItem",components:{KvMaterialIcon:de},inject:["apollo"],emits:["updating-totals","refreshtotals"],props:{loanId:{type:Number,default:null},type:{type:String,default:"loan"},idsInGroup:{type:Array,default:()=>[]}},data(){return{mdiClose:_e}},methods:{completeRemoveBasketItem(){this.$closeTipMsg(),this.trackItemRemoved(),this.$emit("refreshtotals","removeLoan"),this.$emit("updating-totals",!1)},removeBasketItem(){this.$emit("updating-totals",!0);const t=0;this.type==="loan"?this.apollo.mutate({mutation:pt,variables:{loanId:this.loanId,price:t}}).then(e=>{var a;if((a=e.errors)!=null&&a.length){let o=!1;e.errors.forEach(({message:n,code:i})=>{this.$showTipMsg(n,"error"),i==="not_all_shared_added"&&(o=!0)}),typeof window<"u"&&o?window.setTimeout(window.location.reload(),8e3):(this.selectedOption=this.cachedSelection,this.$emit("updating-totals",!1))}else this.completeRemoveBasketItem()}).catch(e=>{console.error(e),this.$emit("updating-totals",!1)}):this.type==="kivaCard"&&this.apollo.mutate({mutation:$t,variables:{idsInGroup:this.idsInGroup,individualPrice:t}}).then(e=>{var a;(a=e.errors)!=null&&a.length?(e.errors.forEach(({message:o})=>{this.$showTipMsg(o,"error")}),this.$emit("updating-totals",!1)):this.completeRemoveBasketItem()}).catch(e=>{console.error(e),this.$emit("updating-totals",!1)})},trackItemRemoved(){const t="basket";let e="Update Loan Amount",a="Loan Removed";this.type==="kivaCard"&&(e="Update Kiva Card Amount",a="Kiva Card Removed"),this.$kvTrackEvent(t,e,a,0,0)}}};function Wo(t,e,a,o,n,i){const r=h("kv-material-icon");return s(),d("button",{class:"remove-wrapper","data-testid":"removeBasketItem",onClick:e[0]||(e[0]=l=>i.removeBasketItem())},[_(r,{class:"tw-w-2 tw-h-2",icon:n.mdiClose,title:"Remove from cart"},null,8,["icon"]),e[1]||(e[1]=m("span",{class:"tw-sr-only"},"Close",-1))])}const Te=L(Mt,[["render",Wo]]);Mt.__docgenInfo={displayName:"RemoveBasketItem",exportName:"default",description:"",tags:{},props:[{name:"loanId",type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"type",type:{name:"string"},defaultValue:{func:!1,value:"'loan'"}},{name:"idsInGroup",type:{name:"array"},defaultValue:{func:!1,value:"[]"}}],events:[{name:"updating-totals",type:{names:["undefined"]}},{name:"refreshtotals",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/RemoveBasketItem.vue"]};const Rt={name:"LoanPrice",components:{KvSelect:kt,RemoveBasketItem:Te},inject:["apollo"],emits:["refreshtotals","updating-totals"],props:{price:{type:String,default:""},loanAmount:{type:String,default:""},fundedAmount:{type:String,default:""},reservedAmount:{type:String,default:""},minAmount:{type:String,default:""},loanId:{type:Number,default:null},isExpiringSoon:{type:Boolean,default:!1},type:{type:String,default:"loan"},idsInGroup:{type:Array,default:()=>[]},enableFiveDollarsNotes:{type:Boolean,default:!1},isLoggedIn:{type:Boolean,default:!1}},data(){return{selectedOption:b(this.price).format("0,0"),cachedSelection:b(this.price).format("0,0"),additionalSelctionLimit:150,overallSelectLimit:500}},computed:{prices(){if(this.type==="loan"){let t=parseFloat(this.loanAmount)-parseFloat(this.fundedAmount);this.isExpiringSoon||(t-=parseFloat(this.reservedAmount)-parseFloat(this.price)),t=Math.max(t,parseFloat(this.price));const e=parseFloat(this.minAmount||25),a=ni(t,e,this.enableFiveDollarsNotes,this.isLoggedIn);return a.includes(b(this.price).format("0,0"))||a.push(b(this.price).format("0,0")),a}return this.type==="kivaCard"?["25","30","50","75","100","150","200","250","300","400","500","750","1,000","2,000"]:["0"]}},methods:{updateLoanReservation(){if(this.type==="loan"){if(this.selectedOption!==this.price){this.$emit("updating-totals",!0);const t=b(this.selectedOption).format("0.00");this.apollo.mutate({mutation:pt,variables:{loanId:this.loanId,price:t}}).then(e=>{if(e.errors){let a=!1;Q(e.errors,({message:o,code:n})=>{this.$showTipMsg(o,"error"),n==="not_all_shared_added"&&(a=!0)}),typeof window<"u"&&a?window.setTimeout(window.location.reload(),8e3):(this.selectedOption=this.cachedSelection,this.$emit("updating-totals",!1))}else this.$closeTipMsg(),this.$kvTrackEvent("basket","Update Loan Amount","Update Success",b(t).value(),b(t).value()),this.$emit("refreshtotals"),this.$emit("updating-totals",!1),this.cachedSelection=this.selectedOption}).catch(e=>{console.error(e),this.$emit("updating-totals",!1)})}}else if(this.type==="kivaCard"&&this.selectedOption!==this.price){this.$emit("updating-totals",!0);const t=b(this.selectedOption).format("0.00");this.apollo.mutate({mutation:$t,variables:{idsInGroup:this.idsInGroup,individualPrice:t}}).then(e=>{e.errors?(Q(e.errors,({message:a})=>{this.$showTipMsg(a,"error")}),this.selectedOption=this.cachedSelection,this.$emit("updating-totals",!1)):(this.$kvTrackEvent("basket","Update Kiva Card Amount","Update Success",b(t).value()),this.$emit("refreshtotals"),this.$emit("updating-totals",!1),this.cachedSelection=this.selectedOption)}).catch(e=>{console.error(e),this.$emit("updating-totals",!1)})}}}},Qo={class:"loan-price-wrapper tw-flex"},Jo={key:0,class:"loan-price-select tw-flex-grow"},Zo=["value"],Yo={key:1,class:"tw-text-h3 tw-mb-0"};function Xo(t,e,a,o,n,i){const r=h("kv-select"),l=h("remove-basket-item");return s(),d("div",Qo,[a.price>24||a.enableFiveDollarsNotes?(s(),d("div",Jo,[e[4]||(e[4]=m("label",{for:"loan-price",class:"tw-sr-only"},"Loan Price",-1)),_(r,{modelValue:n.selectedOption,"onUpdate:modelValue":[e[0]||(e[0]=v=>n.selectedOption=v),e[1]||(e[1]=v=>i.updateLoanReservation())],class:"loan-price tw-w-full",style:{"max-width":"18rem"},id:"loan-price"},{default:N(()=>[(s(!0),d(x,null,K(i.prices,v=>(s(),d("option",{key:v,value:v}," $"+y(v),9,Zo))),128))],void 0),_:1},8,["modelValue"])])):(s(),d("p",Yo," $"+y(a.price),1)),_(l,{class:"tw-hidden tw-flex-none tw-ml-2 tw-py-0.5 md:tw-py-1 md:tw-flex tw-items-center","loan-id":a.loanId,"ids-in-group":a.idsInGroup,type:a.type,onRefreshtotals:e[2]||(e[2]=v=>t.$emit("refreshtotals",v)),onUpdatingTotals:e[3]||(e[3]=v=>t.$emit("updating-totals",v))},null,8,["loan-id","ids-in-group","type"])])}const Bt=L(Rt,[["render",Xo]]);Rt.__docgenInfo={displayName:"LoanPrice",exportName:"default",description:"",tags:{},props:[{name:"price",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"loanAmount",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"fundedAmount",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"reservedAmount",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"minAmount",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"loanId",type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"isExpiringSoon",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"type",type:{name:"string"},defaultValue:{func:!1,value:"'loan'"}},{name:"idsInGroup",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"enableFiveDollarsNotes",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isLoggedIn",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"refreshtotals"},{name:"updating-totals",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/LoanPrice.vue"]};const Ot={name:"TeamAttribution",emits:["refreshtotals","updating-totals"],props:{teams:{type:Array,default:()=>[]},teamId:{type:Number,default:0},loanId:{type:Number,default:null}},components:{KvSelect:kt},inject:["apollo"],data(){return{selectedId:this.teamId||0,cachedId:null}},computed:{sortTeams(){return ba(this.teams,"name")}},watch:{teamId:{handler(t,e){t!==e&&(this.selectedId=t,this.updateLoanReservation())},immediate:!0}},mounted(){this.selectedId=this.teamId||0},methods:{updateLoanReservation(){this.$emit("updating-totals",!0);const t=b(this.selectedId).value();this.apollo.mutate({mutation:yt,variables:{teamId:t,loanId:this.loanId}}).then(e=>{e.errors?(Q(e.errors,({message:a})=>{this.$showTipMsg(a,"error")}),this.$emit("updating-totals",!1),this.selectedId=this.cachedId):(this.$kvTrackEvent("basket","Update Team Loan Attribution",this.selectedId===0?"Team Attribution Removed":"Team Attribution Removal Success",b(this.selectedId).value()),this.$emit("refreshtotals","team-update"),this.cachedId=this.selectedId)}).catch(e=>{console.error(e),this.$emit("updating-totals",!1)})}}},es={class:"team-select-wrapper tw-whitespace-nowrap"},ts={class:"team-select"},as=["value"];function is(t,e,a,o,n,i){const r=h("kv-select");return s(),d("div",es,[m("div",ts,[e[3]||(e[3]=m("label",{for:"team_select",class:"tw-sr-only"},"Attribute to team",-1)),_(r,{id:"team_select","data-testid":"basket-loan-team-selector",modelValue:n.selectedId,"onUpdate:modelValue":[e[0]||(e[0]=l=>n.selectedId=l),e[1]||(e[1]=l=>i.updateLoanReservation())],class:"team-select-dd data-hj-suppress tw-float-left",style:{"max-width":"rem-calc(250)"}},{default:N(()=>[e[2]||(e[2]=m("option",{value:"0"}," None ",-1)),(s(!0),d(x,null,K(i.sortTeams,l=>(s(),d("option",{key:l.id,value:l.id},y(l.name),9,as))),128))],void 0),_:1,__:[2]},8,["modelValue"])])])}const ns=L(Ot,[["render",is]]);Ot.__docgenInfo={displayName:"TeamAttribution",exportName:"default",description:"",tags:{},props:[{name:"teams",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"teamId",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"loanId",type:{name:"number"},defaultValue:{func:!1,value:"null"}}],events:[{name:"refreshtotals",type:{names:["undefined"]}},{name:"updating-totals",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/TeamAttribution.vue"]};const os={width:"18",height:"21",viewBox:"0 0 18 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ss(t,e){return s(),d("svg",os,e[0]||(e[0]=[m("path",{d:"M9.0001 19L5.6251 20.125C5.50843 20.1583 5.4001 20.1833 5.3001 20.2C5.2001 20.2167 5.1001 20.225 5.0001 20.225C4.46676 20.225 4.0001 20.0375 3.6001 19.6625C3.2001 19.2875 3.0001 18.8083 3.0001 18.225V12.775L0.400098 8.55C0.300098 8.38333 0.225098 8.2125 0.175098 8.0375C0.125098 7.8625 0.100098 7.68333 0.100098 7.5C0.100098 7.31667 0.125098 7.1375 0.175098 6.9625C0.225098 6.7875 0.300098 6.61667 0.400098 6.45L3.8001 0.95C3.98343 0.65 4.2251 0.416667 4.5251 0.25C4.8251 0.0833333 5.1501 0 5.5001 0H12.5001C12.8501 0 13.1751 0.0833333 13.4751 0.25C13.7751 0.416667 14.0168 0.65 14.2001 0.95L17.6001 6.45C17.7001 6.61667 17.7751 6.7875 17.8251 6.9625C17.8751 7.1375 17.9001 7.31667 17.9001 7.5C17.9001 7.68333 17.8751 7.8625 17.8251 8.0375C17.7751 8.2125 17.7001 8.38333 17.6001 8.55L15.0001 12.775V18.225C15.0001 18.8083 14.8001 19.2875 14.4001 19.6625C14.0001 20.0375 13.5334 20.225 13.0001 20.225C12.9001 20.225 12.8001 20.2167 12.7001 20.2C12.6001 20.1833 12.4918 20.1583 12.3751 20.125L9.0001 19ZM5.5001 13H12.5001L15.9001 7.5L12.5001 2H5.5001L2.1001 7.5L5.5001 13ZM7.9501 8.75L11.4751 5.2C11.6584 5 11.8876 4.90417 12.1626 4.9125C12.4376 4.92083 12.6751 5.01667 12.8751 5.2C13.0751 5.4 13.1793 5.6375 13.1876 5.9125C13.1959 6.1875 13.1001 6.425 12.9001 6.625L8.6501 10.875C8.4501 11.075 8.21677 11.175 7.9501 11.175C7.68343 11.175 7.4501 11.075 7.2501 10.875L5.1251 8.75C4.9251 8.55 4.8251 8.3125 4.8251 8.0375C4.8251 7.7625 4.9251 7.525 5.1251 7.325C5.3251 7.125 5.5626 7.025 5.8376 7.025C6.1126 7.025 6.3501 7.125 6.5501 7.325L7.9501 8.75Z",fill:"#757575"},null,-1)]))}const rs={render:ss},ls={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ds(t,e){return s(),d("svg",ls,e[0]||(e[0]=[pa('<path d="M36.2676 17.5025C34.6519 30.5945 24.9878 35.8229 20.1847 38.0889C20.1496 38.1055 20.1099 38.1043 20.075 38.0873C8.60201 32.516 4.24979 22.9018 3.62911 17.5025C3.34064 14.6558 3.18678 8.5719 3.14406 5.7867C3.14315 5.72754 3.1847 5.67723 3.24194 5.66227C11.6312 3.46948 14.2758 3.52186 20.0937 1.86776C20.1175 1.86099 20.1437 1.86113 20.1673 1.86833C26.6496 3.83905 31.8224 4.23356 36.8613 5.66108C36.9176 5.67702 36.9559 5.72959 36.9546 5.78805C36.8227 11.47 36.4423 15.9605 36.2676 17.5025Z" fill="#2AA967" stroke="#223829" stroke-width="1.8"></path><path d="M20.4351 14.843L21.9756 18.0745L24.854 15.6822L24.7902 19.1942L28.5088 18.0548L26.8519 21.24L30.7676 21.5504L27.8039 23.8581L31.2399 25.5648L27.4819 26.5959L29.8438 29.4037L25.9414 28.9799L26.821 32.4033L23.4488 30.598L22.6939 34.0451L20.4351 31.1704L18.1763 34.0451L17.4214 30.598L14.0492 32.4033L14.9288 28.9799L11.0263 29.4037L13.3883 26.5959L9.63032 25.5648L13.0662 23.8581L10.1025 21.5504L14.0183 21.24L12.3613 18.0548L16.0799 19.1942L16.0162 15.6822L18.8946 18.0745L20.4351 14.843Z" fill="#EDF4F1"></path><g clip-path="url(#clip0_5027_1388)"><g clip-path="url(#clip1_5027_1388)"><path d="M19.2444 20.6905L19.8597 21.0523C21.075 19.9275 20.1316 26.1623 19.8116 27.8909C19.5792 29.5078 14.7217 33.608 13.6854 34.193C12.7214 33.8716 11.8214 32.5859 10.9214 31.943L12.5429 30.7145L14.4237 28.7341C14.7695 28.5282 14.9239 27.9729 14.4345 27.1922L14.2273 26.2352C14.3719 25.417 14.3935 23.7737 14.7459 23.7067C15.0983 23.6397 15.4988 23.962 15.5714 24.1195L15.6854 24.8573L15.9712 23.9288C16.1145 23.2631 16.2966 21.1451 16.508 20.4695C16.7193 19.794 17.0456 19.5155 17.3426 19.7641C17.4599 19.4449 18.217 19.5299 18.7862 19.9414L18.7126 20.4533L19.2444 20.6905Z" fill="#D8A15A"></path><path d="M10.1846 31.5C10.1846 31.5 14.2722 29.2857 14.2722 27.8458C13.9934 27.0662 14.0253 27.4322 13.9649 26.5651C13.9045 25.6981 14.5046 24.9692 14.5263 24.1642C14.548 23.3591 15.549 23.1576 15.5722 24.1642" stroke="#22382A" stroke-width="0.683036" stroke-linecap="square" stroke-linejoin="round"></path><path d="M17.2757 21.0599C17.3407 20.4353 16.9021 20.1772 16.58 20.1575C16.2253 20.1363 16.1913 20.7398 16.1913 20.7398L15.9326 23.2395C15.9326 23.2395 15.6948 23.9864 15.4656 24.838C15.3559 25.4 15.2535 25.6135 15.2535 25.6135C15.2535 25.6135 15.1848 25.7612 15.1467 26.1471" stroke="#22382A" stroke-width="0.683036" stroke-linecap="square" stroke-linejoin="round"></path><path d="M16.4608 24.5279L16.434 24.8684L17.1149 24.922L17.1417 24.5815L16.4608 24.5279ZM16.8957 23.792L17.2328 23.8471L16.8957 23.792ZM17.0506 22.8022L17.3888 22.8504L17.3897 22.8432L17.0506 22.8022ZM17.3052 20.6933L17.6443 20.7342L17.6449 20.7282L17.3052 20.6933ZM17.7496 19.8093L17.7693 19.4684L17.7688 19.4683L17.7496 19.8093ZM18.0616 21.0641C18.0616 21.2527 18.2145 21.4056 18.4032 21.4056C18.5918 21.4056 18.7447 21.2527 18.7447 21.0641H18.0616ZM16.8013 24.5547C17.1417 24.5815 17.1417 24.5815 17.1417 24.5816C17.1417 24.5816 17.1417 24.5816 17.1417 24.5816C17.1417 24.5816 17.1417 24.5816 17.1417 24.5816C17.1417 24.5816 17.1417 24.5816 17.1417 24.5815C17.1417 24.5814 17.1418 24.5813 17.1418 24.581C17.1418 24.5805 17.1419 24.5796 17.142 24.5785C17.1422 24.5761 17.1425 24.5724 17.1429 24.5675C17.1437 24.5577 17.145 24.543 17.1468 24.5239C17.1503 24.4857 17.1557 24.4303 17.1631 24.3624C17.178 24.2264 17.2009 24.042 17.2328 23.8471L16.5587 23.7368C16.5243 23.9471 16.4999 24.1441 16.4841 24.2881C16.4762 24.3603 16.4705 24.4196 16.4666 24.4612C16.4647 24.4819 16.4633 24.4983 16.4623 24.5096C16.4618 24.5153 16.4615 24.5197 16.4612 24.5228C16.4611 24.5243 16.461 24.5255 16.4609 24.5264C16.4609 24.5268 16.4609 24.5272 16.4608 24.5274C16.4608 24.5275 16.4608 24.5277 16.4608 24.5277C16.4608 24.5278 16.4608 24.5278 16.4608 24.5279C16.4608 24.5279 16.4608 24.5279 16.4608 24.5279C16.4608 24.5279 16.4608 24.5279 16.8013 24.5547ZM17.2328 23.8471C17.2864 23.5196 17.3253 23.2709 17.3508 23.1039C17.3636 23.0204 17.373 22.9573 17.3793 22.915C17.3824 22.8938 17.3848 22.8778 17.3863 22.867C17.3871 22.8616 17.3877 22.8575 17.3881 22.8548C17.3883 22.8534 17.3884 22.8523 17.3885 22.8516C17.3886 22.8512 17.3886 22.851 17.3887 22.8508C17.3887 22.8507 17.3887 22.8506 17.3887 22.8505C17.3887 22.8505 17.3887 22.8505 17.3887 22.8504C17.3887 22.8504 17.3887 22.8504 17.3887 22.8504C17.3887 22.8504 17.3887 22.8504 17.0506 22.8022C16.7125 22.7541 16.7125 22.7541 16.7125 22.7541C16.7125 22.7541 16.7125 22.754 16.7125 22.754C16.7125 22.7541 16.7125 22.7541 16.7125 22.7541C16.7125 22.7541 16.7125 22.7541 16.7125 22.7542C16.7125 22.7543 16.7124 22.7545 16.7124 22.7548C16.7123 22.7554 16.7122 22.7563 16.712 22.7576C16.7116 22.7601 16.7111 22.7639 16.7104 22.769C16.7089 22.7792 16.7066 22.7946 16.7036 22.8152C16.6975 22.8564 16.6882 22.9184 16.6757 23.0007C16.6505 23.1654 16.6119 23.4116 16.5587 23.7368L17.2328 23.8471ZM17.3897 22.8432L17.6442 20.7342L16.9661 20.6524L16.7115 22.7613L17.3897 22.8432ZM17.3052 20.6933C17.6449 20.7282 17.6449 20.7283 17.6449 20.7284C17.6449 20.7284 17.6449 20.7284 17.6449 20.7285C17.6449 20.7285 17.6448 20.7286 17.6448 20.7286C17.6448 20.7287 17.6448 20.7287 17.6448 20.7286C17.6449 20.7285 17.6449 20.7283 17.6449 20.7278C17.645 20.7268 17.6452 20.725 17.6455 20.7225C17.6461 20.7174 17.6471 20.7094 17.6485 20.6988C17.6512 20.6776 17.6556 20.6466 17.662 20.6091C17.6748 20.5329 17.6946 20.4356 17.7226 20.3422C17.7522 20.2438 17.7839 20.174 17.8104 20.1367C17.8383 20.0974 17.8128 20.1549 17.7305 20.1503L17.7688 19.4683C17.5107 19.4538 17.3417 19.6169 17.2533 19.7415C17.1635 19.8681 17.1061 20.0206 17.0685 20.1456C17.0294 20.2757 17.004 20.4031 16.9884 20.4957C16.9805 20.5427 16.9749 20.5821 16.9712 20.6102C16.9694 20.6243 16.968 20.6357 16.967 20.6439C16.9666 20.6479 16.9662 20.6512 16.9659 20.6537C16.9658 20.6549 16.9657 20.6559 16.9656 20.6567C16.9656 20.6571 16.9655 20.6574 16.9655 20.6577C16.9655 20.6578 16.9655 20.658 16.9655 20.6581C16.9655 20.6581 16.9654 20.6582 16.9654 20.6582C16.9654 20.6583 16.9654 20.6584 17.3052 20.6933ZM17.7299 20.1503C17.8501 20.1572 17.9059 20.1844 17.9317 20.2029C17.9553 20.2197 17.9801 20.2476 18.0027 20.3099C18.0584 20.4633 18.0616 20.6955 18.0616 21.0641H18.7447C18.7447 20.7461 18.7511 20.3699 18.6448 20.0771C18.5865 19.9163 18.4892 19.7616 18.3284 19.6469C18.1699 19.5337 17.979 19.4805 17.7693 19.4684L17.7299 20.1503Z" fill="#22382A"></path><path d="M17.9624 24.475C17.9624 24.475 18.0121 24.2433 18.0905 23.792C18.2035 23.1406 18.2013 22.8927 18.2013 22.8927L18.4274 21.0373C18.4274 21.0373 18.559 20.3958 18.9106 20.3803C19.5083 20.3549 19.6418 20.7713 19.6913 21.2732" stroke="#22382A" stroke-width="0.683036" stroke-linecap="square" stroke-linejoin="round"></path><path d="M19.0729 25.0086C19.1796 24.4323 19.2936 23.6414 19.2936 23.6414L19.4856 21.8945C19.4856 21.8945 19.5182 21.4574 19.862 21.3841C20.4474 21.2586 20.627 22.1539 20.6193 22.8405C20.6193 22.8405 20.3918 24.5173 20.3345 25.211C20.2772 25.9047 19.9443 28.2178 18.3708 29.9069C16.5115 31.5829 13.6851 34.1929 13.6851 34.1929" stroke="#22382A" stroke-width="0.683036" stroke-linecap="square" stroke-linejoin="round"></path><path d="M22.0093 20.5003H21.6667C21.2984 21.8094 20.6852 25.9186 20.7567 27.6357C20.7567 29.2325 25.1554 32.9683 26.1075 33.6785C27.3928 34.2687 29.0639 32.1003 28.9211 31.3643L26.2503 29.0382C25.9341 28.7909 26.0233 27.8916 26.1075 27.4729L26.9644 24.9827C27.0596 24.7455 26.9935 24.2427 26.6508 24.1289C26.308 24.0151 25.8612 24.2712 25.7659 24.4135L25.3375 24.9827L25.2226 23.7732C25.175 23.1091 25.1107 21.724 24.9965 21.041C24.8822 20.358 24.4842 20.1445 24.1515 20.3437C24.0801 20.0186 23.7802 19.6046 23.1518 19.9236V20.4291L22.7233 20.1445L22.0093 20.5003Z" fill="#AF741C"></path><path d="M20.1411 26.6948C20.1411 26.6948 20.1314 28.8758 20.9911 29.7662C21.926 30.7345 25.1575 33.9449 25.5785 34.1285" stroke="#22382A" stroke-width="0.683036" stroke-linecap="square" stroke-linejoin="round"></path><path d="M23.8426 27.2245C23.8426 27.2245 22.587 27.3427 22.4766 28.5906" stroke="#22382A" stroke-width="0.683036" stroke-linecap="square" stroke-linejoin="round"></path><path d="M28.9848 31.2356C28.9848 31.2356 25.0255 29.2418 25.4509 27.6307C25.8764 26.0195 26.5607 24.5046 26.3715 24.2799C26.1217 23.9825 25.4237 24.2087 25.1012 24.8607C24.7787 25.5127 24.3547 26.3308 24.3547 26.3308" stroke="#22382A" stroke-width="0.683036" stroke-linecap="square" stroke-linejoin="round"></path><path d="M23.1941 24.891L23.1597 23.5747C23.1597 23.5747 23.2154 22.3143 23.3156 21.8207C23.3156 20.8601 24.2833 20.4704 24.4148 21.337C24.5165 22.0088 24.4915 23.657 24.4915 23.657C24.4915 23.657 24.4023 24.6497 24.6965 25.3463" stroke="#22382A" stroke-width="0.683036" stroke-linecap="square" stroke-linejoin="round"></path><path d="M23.2942 21.3084C23.2942 20.9716 23.529 20.1131 22.8247 19.985C22.2219 20.1033 22.2902 20.5378 22.1693 21.0799C22.0485 21.622 21.9888 23.2313 21.9888 23.2313L21.9644 24.6633" stroke="#22382A" stroke-width="0.683036" stroke-linecap="square" stroke-linejoin="round"></path><path d="M22.1849 20.6467C21.9501 19.8996 21.1267 19.9819 21.0213 21.1164C20.9709 21.6576 20.7175 22.6608 20.7175 22.6608L20.4827 24.1976" stroke="#22382A" stroke-width="0.683036" stroke-linecap="round" stroke-linejoin="round"></path></g></g><path d="M36.2676 17.5025C34.6519 30.5945 24.9878 35.8229 20.1847 38.0889C20.1496 38.1055 20.1099 38.1043 20.075 38.0873C8.60201 32.516 4.24979 22.9018 3.62911 17.5025C3.34064 14.6558 3.18678 8.5719 3.14406 5.7867C3.14315 5.72754 3.1847 5.67723 3.24194 5.66227C11.6312 3.46948 14.2758 3.52186 20.0937 1.86776C20.1175 1.86099 20.1437 1.86113 20.1673 1.86833C26.6496 3.83905 31.8224 4.23356 36.8613 5.66108C36.9176 5.67702 36.9559 5.72959 36.9546 5.78805C36.8227 11.47 36.4423 15.9605 36.2676 17.5025Z" stroke="#223829" stroke-width="1.8"></path><path d="M6.79042 16.0619L5.19586 10.1835L8.41478 9.04901L8.80357 10.3866L6.69262 11.0002L7.01277 12.1016L8.67078 11.4821L9.12761 13.0537L7.40388 13.4471L7.66595 14.3487L9.7769 13.7351L10.1393 15.0884L6.79042 16.0619Z" fill="#223829"></path><path d="M33.1027 9.8062L32.0862 9.4574L31.8117 12.9574L30.8766 15.6826L32.0234 16.076L32.9335 13.4235L34.9377 10.4359L33.9476 10.0961L32.9832 11.4446L33.1027 9.8062Z" fill="#223829"></path><path d="M31.5926 9.28625L29.0298 8.66132L28.7615 9.76164L29.5303 9.94911L28.3106 14.9507L29.3876 15.2134L30.6054 10.2193L31.3224 10.3942L31.5926 9.28625Z" fill="#223829"></path><path d="M25.0681 14.2538L25.2222 13.5225L25.2812 13.2428L25.7358 13.3386L26.5961 9.25753L26.1529 9.10768L26.3635 8.10815L28.3301 8.52271L28.1081 9.57626L27.6642 9.48268L26.8129 13.5208L27.2568 13.6143L27.0346 14.6684L25.0681 14.2538Z" fill="#223829"></path><path d="M21.9959 13.755L22.7004 7.51385L23.9144 7.65089L23.333 12.8016L24.6155 12.9464L24.4924 14.0368L21.9959 13.755Z" fill="#223829"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.76968 9.75852C9.7795 9.33501 10.0587 8.43293 11.0967 8.21273C11.4896 8.16165 12.3586 8.28064 12.6916 9.16517L13.3833 12.5717C13.4001 12.8411 13.4374 13.534 13.1612 13.778L13.4627 14.1883L12.4407 14.3958L12.2881 14.227C12.0562 14.3448 11.6086 14.4766 11.1991 14.3771C10.7553 14.2694 10.5628 13.7844 10.4467 13.3427C10.2034 12.4173 9.88389 10.9975 9.76968 9.75852ZM12.2101 12.6282C12.223 12.5003 11.9505 11.2616 11.7473 10.4868C11.6538 10.1303 11.3149 9.65354 11.1019 9.95424C11.0714 9.99724 11.0441 10.0534 11.0214 10.1254C10.9979 10.356 11.0453 11.25 11.4448 12.8015C11.4789 12.9341 11.6085 13.0328 11.8558 12.9826C12.1813 12.9165 12.1977 12.7526 12.2099 12.6309L12.2101 12.6282Z" fill="#223829"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M18.3181 7.56132L17.7253 13.6391L18.9892 13.6541L19.0664 12.2152L20.0459 12.2268L20.2103 13.6685L21.459 13.6833L20.2822 7.58453L19.5614 7.40908C19.3974 7.36915 19.2265 7.36678 19.0614 7.40212L18.3181 7.56132ZM19.204 11.1352L19.769 11.1456C19.832 11.1467 19.8808 11.0888 19.8687 11.0273L19.4843 9.07589C19.4626 8.96598 19.3018 8.97766 19.2914 9.08991L19.1108 11.0309C19.1057 11.0866 19.1482 11.1342 19.204 11.1352Z" fill="#223829"></path><path d="M14.8244 7.66792L13.5503 7.79126L14.1939 12.9684C14.4472 13.8769 15.2533 13.9365 15.7466 13.8887C17.0518 13.7624 17.0907 12.7573 17.084 12.6886L16.8011 7.47657L15.5813 7.59465L15.9684 12.3578C15.9106 12.7416 15.3095 12.6795 15.2848 12.424L14.8244 7.66792Z" fill="#223829"></path><defs><clipPath id="clip0_5027_1388"><rect width="21.8571" height="21.8571" fill="white" transform="translate(9.1853 13.4287)"></rect></clipPath><clipPath id="clip1_5027_1388"><rect width="21.8571" height="21.8571" fill="white" transform="translate(9.1853 13.4287)"></rect></clipPath></defs>',13)]))}const ms={render:ds},jt={name:"BasketItem",components:{CheckoutItemImg:Do,LoanMatcher:Eo,LoanPromoCredits:Oo,LoanReservation:Ho,LoanPrice:Bt,RemoveBasketItem:Te,TeamAttribution:ns,KvCartPill:ja,IconChoice:rs,EquityBadge:ms},inject:["apollo","cookieStore"],emits:["refreshtotals","updating-totals","jump-to-loans","validateprecheckout","removed-loan"],props:{disableRedirects:{type:Boolean,default:!1},loan:{type:Object,default:()=>{}},teams:{type:Array,default:()=>[]},enableFiveDollarsNotes:{type:Boolean,default:!1},isLoggedIn:{type:Boolean,default:!1},contributesInAchievement:{type:Boolean,default:!1},isFirstLoan:{type:Boolean,default:!1},isMyKivaEnabled:{type:Boolean,default:!1}},data(){return{activateTimer:!0,loanVisible:!0,appendedTeams:[],forceTeamId:null}},computed:{isCorporateCampaign(){return ye(this.$route)},creditsUsed(){var t;return((t=this.loan)==null?void 0:t.creditsUsed)??[]},appliedPromoCredits(){if(this.creditsUsed.length){const t=this.creditsUsed.filter(e=>e.creditType!=="kiva_credit");return t.length?t:[]}return[]},leftoverCreditAllocationLoanId(){return this.cookieStore.get("lcaid")},combinedTeams(){return[...this.teams,...this.appendedTeams]},loanTeamAttributionId(){return this.forceTeamId?this.forceTeamId:this.loan.team?this.loan.team.id:0},showPill(){return this.isMyKivaEnabled&&(this.contributesInAchievement||this.isFirstLoan)}},watch:{teams:{handler(){this.forceTeamId=Ua(this.cookieStore,this.loan.id,this.combinedTeams,this.appendedTeams)},immediate:!0}},methods:{onLoanUpdate(t){this.$emit("refreshtotals",t),t==="removeLoan"&&(this.$emit("removed-loan",this.loan.id),this.loanVisible=!1,qa(this.cookieStore,[this.loan.id]))}},updated(){typeof this.loan.price<"u"&&this.loan.price==="0.00"&&this.$emit("validateprecheckout")}},us={class:"basket-item-wrapper tw-flex tw-flex-col md:tw-flex-row tw-pb-5"},cs={class:"tw-hidden md:tw-block tw-flex-none md:tw-mr-3 lg:tw-mr-4.5"},ps={class:"tw-flex-auto borrower-info-wrapper"},vs={class:"borrower-info","data-testid":"basket-loan-info"},ks={class:"tw-flex tw-mb-1"},hs={class:"tw-text-h3 tw-flex-grow","data-testid":"basket-loan-name"},gs={key:0,class:"tw-w-full md:tw-w-auto md:tw-ml-3 lg:tw-ml-6 tw-mt-1.5 md:tw-mt-0"},fs={class:"tw-bg-brand-50 tw-rounded tw-p-2"},ys={class:"tw-text-action tw-block"},bs={class:"tw-text-primary tw-block"},Cs={key:1,class:"tw-flex-none tw-w-full md:tw-w-auto md:tw-ml-3 lg:tw-ml-4.5 tw-mt-1.5 md:tw-mt-0 loan-res-price-wrapper"};function _s(t,e,a,o,n,i){const r=h("checkout-item-img"),l=h("remove-basket-item"),v=h("EquityBadge"),c=h("IconChoice"),u=h("KvCartPill"),p=h("loan-matcher"),g=h("loan-reservation"),f=h("team-attribution"),C=h("loan-promo-credits"),S=h("loan-price");return F((s(),d("div",us,[m("div",cs,[_(r,{"data-testid":"basket-loan-image","disable-link":a.disableRedirects,"loan-id":a.loan.id,name:a.loan.loan.name,"image-url":a.loan.loan.image.url},null,8,["disable-link","loan-id","name","image-url"])]),m("div",ps,[m("div",vs,[m("div",ks,[m("h2",hs,y(a.loan.loan.name)+" in "+y(a.loan.loan.geocode.country.name),1),_(l,{class:"md:tw-hidden tw-flex-none tw-ml-1 tw-mt-0.5 tw-h-1.5","loan-id":a.loan.id,type:"loan",onRefreshtotals:e[0]||(e[0]=I=>i.onLoanUpdate(I)),onUpdatingTotals:e[1]||(e[1]=I=>t.$emit("updating-totals",I))},null,8,["loan-id"])]),i.showPill?(s(),T(u,{key:0,"show-bg":"",style:{height:"32px"}},{icon:N(()=>[a.isFirstLoan?(s(),T(v,{key:0,class:"tw-h-3 tw-w-4 tw--mx-0.5"})):(s(),T(c,{key:1}))]),_:1})):k("",!0),a.loan.loan.matchingText?(s(),T(p,{key:1,class:"tw-mb-1","data-testid":"basket-loan-matching-text","matching-text":a.loan.loan.matchingText},null,8,["matching-text"])):k("",!0),_(g,{class:"tw-mb-1","data-testid":"basket-loan-reservation-text","is-expiring-soon":a.loan.loan.loanFundraisingInfo.isExpiringSoon,"is-funded":a.loan.isFunded,"expiry-time":a.loan.expiryTime},null,8,["is-expiring-soon","is-funded","expiry-time"]),i.combinedTeams.length?(s(),T(f,{key:2,class:"tw-mb-1 tw-mt-0.5",teams:i.combinedTeams,"loan-id":a.loan.id,"team-id":i.loanTeamAttributionId},null,8,["teams","loan-id","team-id"])):k("",!0),_(C,{"applied-promo-credits":i.appliedPromoCredits},null,8,["applied-promo-credits"])])]),i.leftoverCreditAllocationLoanId===String(a.loan.id)&&i.isCorporateCampaign?(s(),d("div",gs,[m("div",fs,[m("span",ys," The remaining $"+y(a.loan.price)+" will be lent to this borrower. ",1),m("span",bs,[m("u",{class:"tw-cursor-pointer",onClick:e[2]||(e[2]=I=>t.$emit("jump-to-loans"))}," Choose another borrower ")])])])):(s(),d("div",Cs,[_(S,{"data-testid":"basket-loan-price-selector",price:a.loan.price,"loan-id":a.loan.id,type:"loan","loan-amount":a.loan.loan.loanAmount,"min-amount":a.loan.loan.minNoteSize,"funded-amount":a.loan.loan.loanFundraisingInfo.fundedAmount,"reserved-amount":a.loan.loan.loanFundraisingInfo.reservedAmount,"is-expiring-soon":a.loan.loan.loanFundraisingInfo.isExpiringSoon,"enable-five-dollars-notes":a.enableFiveDollarsNotes,"is-logged-in":a.isLoggedIn,onRefreshtotals:e[3]||(e[3]=I=>i.onLoanUpdate(I)),onUpdatingTotals:e[4]||(e[4]=I=>t.$emit("updating-totals",I))},null,8,["price","loan-id","loan-amount","min-amount","funded-amount","reserved-amount","is-expiring-soon","enable-five-dollars-notes","is-logged-in"])]))],512)),[[W,n.loanVisible]])}const ws=L(jt,[["render",_s]]);jt.__docgenInfo={displayName:"BasketItem",exportName:"default",description:"",tags:{},props:[{name:"disableRedirects",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"loan",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}},{name:"teams",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"enableFiveDollarsNotes",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isLoggedIn",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"contributesInAchievement",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isFirstLoan",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isMyKivaEnabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"updating-totals"},{name:"jump-to-loans"},{name:"refreshtotals",type:{names:["undefined"]}},{name:"validateprecheckout"},{name:"removed-loan",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/BasketItem.vue"]};const Ts={definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"shopTotals"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ShopTotals"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bonusAppliedTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bonusAvailableTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creditAmountNeeded"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creditAppliedTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creditAvailableTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"donationTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"freeTrialAppliedTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"freeTrialAvailableTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kivaCardTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kivaCreditAvailableTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kivaCreditAppliedTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kivaCreditRemaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kivaCreditToReapply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"loanReservationTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"redemptionCodeAppliedTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"redemptionCodeAvailableTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"universalCodeAppliedTotal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"universalCodeAvailableTotal"},arguments:[],directives:[]}]}}]},Ns=`#import '../../fragments/shopTotals.graphql'

query initializeCheckout($basketId: String) {
	hasEverLoggedIn @client
	my {
		id
		userAccount {
			id
			balance
			promoBalance
			donateRepayments
		}
		lender {
			id
			loanCount
			teams(limit: 100){
				values {
					name
					id
				}
			}
		}
		loans {
			totalCount
		}
		depositIncentiveAmountToLend
	}
	general {
		guestCheckoutEnabled: featureSetting(key: "guest_checkout.enabled") {
			key
			value
			description
		}
		new_atb_experience_enable: uiConfigSetting(key: "new_atb_experience_enable") {
			key
			value
		}
		my_kiva_all_users: uiConfigSetting(key: "my_kiva_all_users_enable") {
			key
			value
		}
	}
	shop (basketId: $basketId) {
		id
		basket {
			id
			hasFreeCredits
			credits {
				totalCount
				values {
					amount
					applied
					available
					creditType
					id
				}
			}
			items {
				totalCount
				values {
					creditsUsed {
						amount
						applied
						available
						creditType
						id
						promoFund {
							id
							displayName
							displayDescription
						}
					}
					id
					price
					basketItemType
					... on LoanReservation {
						expiryTime
						isEndingSoon
						donateRepayments
						loan {
							id
							name
							use
							status
							matchingText
							loanAmount
							minNoteSize
							plannedExpirationDate
							sector {
								id
								name
							}
							activity {
								id
								name
							}
							geocode {
								country {
									id
									name
									isoCode
								}
							}
							loanFundraisingInfo {
								id
								isExpiringSoon
								fundedAmount
								reservedAmount
							}
							image {
								id
								url: url (presetSize: loan_thumbnail)
								url_2x: url (presetSize: loan_thumbnail_retina)
							}
							... on LoanDirect {
								sponsor_name: trusteeName
							}
							... on LoanPartner {
								sponsor_name: partnerName
							}
							gender
						}
						team {
							id
							name
						}
					}
					... on Donation {
						isTip
						isUserEdited
						metadata {
							campaignId
						}
					}
					... on KivaCard {
						id
						price
						idsInGroup
						quantity
						individualPrice
						kivaCardObject {
							deliveryType
							recipient {
								name
								email
								scheduledDeliveryDate
							}
							mailingInfo {
								firstName
								lastName
								address
								city
								state
								zip
							}
						}
					}
				}
			}
			totals {
				...shopTotals
			}
		}
		basketVerificationState
		lendingRewardOffered
	}
}
`,se={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"initializeCheckout"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasEverLoggedIn"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"my"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userAccount"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"promoBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"donateRepayments"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"lender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"loanCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"teams"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"loans"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"depositIncentiveAmountToLend"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"general"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"guestCheckoutEnabled"},name:{kind:"Name",value:"featureSetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"guest_checkout.enabled",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"new_atb_experience_enable"},name:{kind:"Name",value:"uiConfigSetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"new_atb_experience_enable",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"my_kiva_all_users"},name:{kind:"Name",value:"uiConfigSetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"my_kiva_all_users_enable",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"basket"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasFreeCredits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"credits"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"applied"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"available"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creditType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creditsUsed"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"applied"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"available"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creditType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"promoFund"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayDescription"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"basketItemType"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LoanReservation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"expiryTime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEndingSoon"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"donateRepayments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"loan"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"use"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"matchingText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"loanAmount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minNoteSize"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plannedExpirationDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sector"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"geocode"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"country"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isoCode"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"loanFundraisingInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isExpiringSoon"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fundedAmount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reservedAmount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"url"},name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"presetSize"},value:{kind:"EnumValue",value:"loan_thumbnail"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"url_2x"},name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"presetSize"},value:{kind:"EnumValue",value:"loan_thumbnail_retina"}}],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LoanDirect"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"sponsor_name"},name:{kind:"Name",value:"trusteeName"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LoanPartner"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"sponsor_name"},name:{kind:"Name",value:"partnerName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"gender"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"team"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Donation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isTip"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isUserEdited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"campaignId"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KivaCard"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idsInGroup"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"quantity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"individualPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kivaCardObject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deliveryType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recipient"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scheduledDeliveryDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"mailingInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"address"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"city"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"zip"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"totals"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"shopTotals"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"basketVerificationState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lendingRewardOffered"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:2620,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Ns}}},Is=t=>{const e={};return t.filter(function(a){if(a.kind!=="FragmentDefinition")return!0;const o=a.name.value;return e[o]?!1:(e[o]=!0,!0)})};se.definitions=Is(se.definitions.concat(Ts.definitions));const Ss=(t,e)=>{const a=(u,p)=>{if(u.kind==="FragmentSpread")p.add(u.name.value);else if(u.kind==="VariableDefinition"){const g=u.type;g.kind==="NamedType"&&p.add(g.name.value)}return u&&"selectionSet"in u&&u.selectionSet&&u.selectionSet.selections.forEach(g=>{a(g,p)}),u&&"variableDefinitions"in u&&u.variableDefinitions&&u.variableDefinitions.forEach(g=>{a(g,p)}),u&&"definitions"in u&&u.definitions&&u.definitions.forEach(g=>{a(g,p)}),p},o=u=>{const p={};return u.definitions.forEach(function(g){"name"in g&&g.name&&(p[g.name.value]=a(g,new Set))}),p},n=(u,p)=>{for(let g=0;g<u.definitions.length;g++){const f=u.definitions[g];if(f&&"name"in f&&f.name&&f.name.value==p)return f}},i=o(t),r=Object.assign({},t,{definitions:[n(t,e)]}),l=i[e]||new Set,v=new Set;let c=new Set;for(l.forEach(u=>{c.add(u)});c.size>0;){const u=c;c=new Set,u.forEach(p=>{v.has(p)||(v.add(p),(i[p]||new Set).forEach(f=>{c.add(f)}))})}return v.forEach(u=>{const p=n(t,u);p&&r.definitions.push(p)}),r};Ss(se,"initializeCheckout");const Ls=`mutation updateLoanReservationDonateRepayments($loanId: Int!, $donateRepayments: Boolean, $basketId: String) {
	shop (basketId: $basketId) {
		id
		updateLoanReservationDonateRepayments (loanReservation: {
			id: $loanId
			donateRepayments: $donateRepayments
		})
		{
			id
			donateRepayments
		}
	}
}
`,Fs={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateLoanReservationDonateRepayments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"loanId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"donateRepayments"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updateLoanReservationDonateRepayments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"loanReservation"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"loanId"}}},{kind:"ObjectField",name:{kind:"Name",value:"donateRepayments"},value:{kind:"Variable",name:{kind:"Name",value:"donateRepayments"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"donateRepayments"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:342,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Ls}}},qt={name:"DonateRepaymentsToggle",components:{KvCheckbox:be,KvLightbox:le},inject:["apollo"],emits:["updating-totals","refreshtotals"],data(){return{donateRepayments:!1,myDonateRepayments:!1,totals:{},loans:[],isLightboxVisible:!1}},created(){this.apollo.watchQuery({query:se}).subscribe({next:({data:t})=>{this.myDonateRepayments=R(t,"my.userAccount.donateRepayments"),this.totals=R(t,"shop.basket.totals")||{},this.loans=wa(R(t,"shop.basket.items.values"),{__typename:"LoanReservation"}),Q(this.loans,e=>{e.donateRepayments&&(this.donateRepayments=!0)})}})},computed:{showToggle(){return!(b(this.totals.donationTotal).value()>0||b(this.totals.redemptionCodeAppliedTotal).value()>0||b(this.totals.bonusAppliedTotal).value()>0||this.myDonateRepayments||b(this.totals.loanReservationTotal).value()===0)}},methods:{toggleCheckbox(){this.donateRepayments=!this.donateRepayments,this.toggleDonateRepayments()},toggleDonateRepayments(){this.donateRepayments?this.setDonateRepayments(!0):this.setDonateRepayments(!1)},setDonateRepayments(t){this.$emit("updating-totals",!0);const e=[];Q(this.loans,a=>{this.mutateDonateRepayments(a,t).then(o=>{o.errors&&e.push(o.errors)})}),e.length>0&&(Q(e,({message:a})=>{this.$showTipMsg(a,"error")}),this.$emit("updating-totals",!1)),this.$emit("refreshtotals","donate-repayments"),this.$kvTrackEvent("basket","Donate Repayments",t?"Applied":"Removed")},mutateDonateRepayments(t,e){return this.apollo.mutate({mutation:Fs,variables:{loanId:t.id,donateRepayments:e}}).then(a=>a).catch(a=>(console.error(a),a))},openLightbox(){this.isLightboxVisible=!0},closeLightbox(){this.isLightboxVisible=!1}}},xs={key:0,class:"tw-mt-2 tw-flex donate-repayments-toggle"},As={key:1,class:"tw-flex tw-mt-2"};function Ds(t,e,a,o,n,i){const r=h("kv-checkbox"),l=h("kv-lightbox"),v=O("kv-track-event");return s(),d("div",null,[i.showToggle?(s(),d("div",xs,[n.myDonateRepayments?k("",!0):(s(),d("button",{key:0,class:"tw-flex-1 tw-pt-0.5 md:tw-pt-0 tw-text-base tw-font-medium tw-text-left md:tw-text-right tw-mr-2 tw-cursor-pointer",onClick:e[0]||(e[0]=(...c)=>i.toggleCheckbox&&i.toggleCheckbox(...c)),"data-testid":"basket-donation-repayments-button","aria-hidden":"true"}," Donate loan repayments instead? ")),n.myDonateRepayments?k("",!0):(s(),T(r,{key:1,class:"tw-relative tw-cursor-pointer md:tw-text-right kv-checkbox tw-pt-0 donate-repayments-label",id:"donate-repayments","data-testid":"donate-repayments",modelValue:n.donateRepayments,"onUpdate:modelValue":[e[1]||(e[1]=c=>n.donateRepayments=c),i.setDonateRepayments]},{default:N(()=>e[3]||(e[3]=[m("span",{id:"donate-repayments-tooltip","data-testid":"donate-repayments-tooltip",class:"tw-text-small tw-font-medium tw-sr-only"}," Donate loan repayments instead? ",-1)]),void 0),_:1,__:[3]},8,["modelValue","onUpdate:modelValue"])),_(l,{visible:n.isLightboxVisible,title:"Donate your loan repayments",onLightboxClosed:i.closeLightbox},{default:N(()=>e[4]||(e[4]=[w(" When you check this box, repayments go back to Kiva in the form of donations, helping us cover operating costs and reach even more borrowers worldwide. Repayments from selected loans will not be added back to your account as Kiva credit. ")]),void 0),_:1,__:[4]},8,["visible","onLightboxClosed"])])):k("",!0),i.showToggle?(s(),d("div",As,[F((s(),d("button",{class:"tw-text-link tw-text-left md:tw-text-right tw-w-full",onClick:e[2]||(e[2]=c=>{n.isLightboxVisible=!0}),"data-testid":"basket-donation-repayments-lightbox"},e[5]||(e[5]=[w(" Learn more ")]))),[[v,["basket","Donation Info Lightbox","Open Lightbox"]]])])):k("",!0)])}const Vs=L(qt,[["render",Ds],["__scopeId","data-v-e6f132a8"]]);qt.__docgenInfo={displayName:"DonateRepaymentsToggle",exportName:"default",description:"",tags:{},events:[{name:"updating-totals",type:{names:["undefined"]}},{name:"refreshtotals",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/DonateRepaymentsToggle.vue"]};const Ut={name:"DonationItem",components:{KvMaterialIcon:de,KvButton:G,KvLightbox:le,KvTextInput:Ce,DonateRepayments:Vs,DonationNudgeLightbox:ri,HowKivaUsesDonation:si},inject:["apollo","cookieStore"],emits:["refreshtotals","updating-totals"],props:{donation:{type:Object,default:()=>{}},loanCount:{type:Number,default:0},kivaCardsCount:{type:Number,default:0},loanReservationTotal:{type:Number,default:0},orderTotalVariant:{type:Boolean,default:!1}},data(){return{defaultLbVisible:!1,amount:b(this.donation.price).format("$0,0.00"),cachedAmount:b(this.donation.price).format("$0,0.00"),editDonation:!1,nudgeLightboxVisible:!1,loanHistoryCount:null,donationDetailsLink:"Learn how Kiva uses your donation",mdiPencil:vt,mdiArrowRight:ii,mdiClose:_e,leafHeartUrl:Ka}},created(){const t=this.donation.isUserEdited?"user-set":"kiva-set";this.$kvTrackEvent("basket","show","tip-donation-amount",t,this.donation.price*100),this.$kvTrackEvent("basket","show","loans",null,this.loanCount)},watch:{serverAmount(){this.amount=b(this.donation.price).format("0,0.00")}},computed:{isCampaignDonation(){var t,e;return!!((e=(t=this.donation)==null?void 0:t.metadata)!=null&&e.campaignId)},donationTitle(){return"Donation to Kiva"},hasLoans(){return this.loanCount>0},hasKivaCards(){return this.kivaCardsCount>0},serverAmount(){return b(this.donation.price).format("$0,0.00")},formattedAmount(){return b(this.amount).format("$0,0.00")},basketDonationHeader(){return this.isCampaignDonation?"Donate to a giving fund":this.hasLoans?`Help cover the cost of your loan${this.loanCount>1?"s":""}`:"Donate to Kiva"},basketDonationTagline(){return this.isCampaignDonation?"Your donation will be lent out to a critical impact area.":this.hasKivaCards&&!this.hasLoans?"100% of your Kiva Card money goes to the people you support — we never take a fee. As a nonprofit, we rely on donations to advance our mission.":`100% of ${this.hasLoans?"your loan supports":"loans support"} borrowers — we never take a fee. As a nonprofit, we rely on donations to advance our mission of expanding financial access.`}},methods:{updateDonationTo(t){t!==void 0&&(this.amount=b(t).format("0.00"),this.updateDonation())},removeGivingFundDonation(){this.amount=b(0).format("0.00"),this.updateDonation(!0)},enterEditDonation(){this.hasLoans?this.openNudgeLightbox():this.editDonation=!0},triggerDefaultLightbox(){this.defaultLbVisible=!this.defaultLbVisible},lightboxClosed(){this.defaultLbVisible=!1},updateDonation(t=!1){this.editDonation=!1,this.$emit("updating-totals",!0),this.apollo.mutate({mutation:oi,variables:{price:b(this.amount).format("0.00"),isTip:this.donation.isTip,clearMetadata:t}}).then(e=>{e.errors?(e.errors.forEach(({message:a})=>{this.$showTipMsg(a,"error")}),this.amount=this.cachedAmount,this.$emit("updating-totals",!1)):(this.$emit("refreshtotals"),this.$kvTrackEvent("basket","Update Donation","Update Success",b(this.amount).value()*100,b(this.amount).value()*100),this.amount=b(this.amount).format("$0,0.00"),this.cachedAmount=b(this.amount).format("$0,0.00"))}).catch(e=>{console.error(e),this.$emit("updating-totals",!1)})},validateInput(){const t=document.getElementById("donation").value,e=b(t).format("$0,0.00");document.getElementById("donation").value=e},closeNudgeLightbox(){this.nudgeLightboxVisible=!1},openNudgeLightbox(){this.$kvTrackEvent("basket","click-open nudge"),this.nudgeLightboxVisible=!0,this.$nextTick(()=>{this.$refs.nudgeLightbox.expandNudgeLightbox()})}}},Ps={class:"basket-donation-item"},Es={class:"tw-flex tw-flex-col md:tw-flex-row tw-pb-5"},$s={class:"tw-hidden md:tw-block tw-flex-none md:tw-mr-3 lg:tw-mr-4.5"},Ms=["src"],Rs={class:"tw-flex-auto"},Bs={class:"tw-mb-0.5"},Os={class:"tw-flex tw-items-center tw-justify-between"},js={class:"tw-w-full tw-flex"},qs={class:"tw-flex-1 md:tw-flex-grow tw-text-h3","data-testid":"basket-donation-title"},Us={class:"md:tw-hidden"},Ks={class:"md:tw-hidden"},Gs={class:"tw-block md:tw-hidden tw-flex-none md:tw-mr-3 lg:tw-mr-4.5"},Hs=["src"],zs={class:"donation-tagline tw-my-1 tw-max-w-2xl","data-testid":"basket-donation-tagline"},Ws={class:"tw-text-base"},Qs={key:0,href:"/lp/giving-fund#social-funds-rtc-12",class:"tw-text-base tw-text-link",target:"_blank",rel:"noopener"},Js={class:"tw-flex-none tw-w-full md:tw-w-auto md:tw-ml-3 lg:tw-ml-4.5 tw-mt-1.5 md:tw-mt-0"},Zs={class:"tw-hidden md:tw-block tw-text-right"},Ys={class:"tw-hidden md:tw-block tw-text-right"},Xs={class:"small-12 columns donation-amount-input-wrapper"};function er(t,e,a,o,n,i){const r=h("kv-material-icon"),l=h("kv-text-input"),v=h("kv-button"),c=h("donate-repayments"),u=h("donation-nudge-lightbox"),p=h("how-kiva-uses-donation"),g=h("kv-lightbox"),f=O("kv-track-event");return s(),d("div",Ps,[m("div",Es,[m("div",$s,[m("img",{class:"tw-bg-brand-100 tw-border tw-border-gray-300 tw-w-12 tw-h-12 tw-p-1 tw-rounded",src:n.leafHeartUrl,alt:"donation line item image","data-testid":"basket-donation-image"},null,8,Ms)]),m("div",Rs,[m("div",Bs,[m("div",Os,[m("div",null,[m("div",js,[m("h2",qs,y(i.basketDonationHeader),1)]),F(m("div",Us,[F((s(),d("button",{class:"donation-amount","data-testid":"basket-donation-edit-button-mobile-amount",onClick:e[0]||(e[0]=(...C)=>i.enterEditDonation&&i.enterEditDonation(...C)),title:"Edit Donation"},[w(y(i.formattedAmount)+" ",1),_(r,{role:"img","aria-label":"Edit Donation",title:"Edit Donation",class:"edit-donation tw-text-action tw-w-3.5 tw-h-3.5 tw-py-0.5 tw-hidden md:tw-inline-block",name:"pencil",icon:n.mdiPencil},null,8,["icon"])])),[[f,["basket","Edit Donation"]]]),F((s(),d("button",{class:"donation-amount md:tw-hidden tw-flex-none tw-align-middle","data-testid":"basket-donation-edit-button-mobile-pencil",onClick:e[1]||(e[1]=(...C)=>i.enterEditDonation&&i.enterEditDonation(...C)),title:"Edit Donation"},[_(r,{role:"img","aria-label":"Edit Donation",title:"Edit Donation",class:"edit-donation tw-text-action tw-w-3.5 tw-h-3.5 tw-py-0.5 md:tw-hidden",name:"pencil",icon:n.mdiPencil},null,8,["icon"])])),[[f,["basket","Edit Donation"]]])],512),[[W,!n.editDonation&&!i.isCampaignDonation]]),F(m("div",Ks,[w(y(i.formattedAmount)+" ",1),F((s(),d("button",{class:"tw-flex-none tw-align-middle",onClick:e[2]||(e[2]=(...C)=>i.removeGivingFundDonation&&i.removeGivingFundDonation(...C)),title:"Remove giving fund donation"},[_(r,{role:"img","aria-label":"Remove giving fund donation",title:"Remove giving fund donation",class:"tw-w-2 tw-h-2 tw-ml-1 tw-mt-0.5",name:"close",icon:n.mdiClose},null,8,["icon"])])),[[f,["basket","click","remove-giving-fund-donation"]]])],512),[[W,i.isCampaignDonation]])]),m("div",Gs,[m("img",{class:"tw-w-7 tw-h-7 tw-rounded",src:n.leafHeartUrl,alt:"donation line item image","data-testid":"basket-donation-image"},null,8,Hs)])]),m("div",null,[m("div",zs,[m("p",Ws,y(i.basketDonationTagline),1)]),i.isCampaignDonation?F((s(),d("a",Qs,e[12]||(e[12]=[w(" Learn more about giving funds ")]))),[[f,["basket","click","giving-fund-info-link"]]]):F((s(),d("button",{key:1,class:"tw-flex tw-items-center tw-text-base tw-text-link","data-testid":"basket-donation-info-lightbox",onClick:e[3]||(e[3]=(...C)=>i.triggerDefaultLightbox&&i.triggerDefaultLightbox(...C))},[w(y(n.donationDetailsLink)+" ",1),_(r,{class:"tw-ml-0.5 tw-w-2 tw-h-2",icon:n.mdiArrowRight},null,8,["icon"])])),[[f,["basket","Donation Info Lightbox","Open Lightbox"]]])])])]),m("div",Js,[F(m("div",Zs,[w(y(i.formattedAmount)+" ",1),F((s(),d("button",{class:"tw-flex-none tw-align-middle",onClick:e[4]||(e[4]=(...C)=>i.removeGivingFundDonation&&i.removeGivingFundDonation(...C)),title:"Remove giving fund donation"},[_(r,{role:"img","aria-label":"Remove giving fund donation",title:"Remove giving fund donation",class:"tw-w-2 tw-h-2 tw-ml-1 tw-mt-0.5",name:"close",icon:n.mdiClose},null,8,["icon"])])),[[f,["basket","click","remove-giving-fund-donation"]]])],512),[[W,i.isCampaignDonation]]),F(m("div",Ys,[F((s(),d("button",{class:"donation-amount","data-testid":"basket-donation-edit-button-combined",onClick:e[5]||(e[5]=(...C)=>i.enterEditDonation&&i.enterEditDonation(...C)),title:"Edit Donation"},[w(y(i.formattedAmount)+" ",1),_(r,{role:"img","aria-label":"Edit Donation",title:"Edit Donation",class:"edit-donation tw-text-action tw-w-3.5 tw-h-3.5 tw-py-0.5 tw-align-bottom",name:"pencil",icon:n.mdiPencil},null,8,["icon"])])),[[f,["basket","Edit Donation"]]])],512),[[W,!n.editDonation&&!i.isCampaignDonation]]),F(m("div",Xs,[_(l,{class:"donation-amount-input","data-testid":"basket-donation-edit-input",name:"donation",id:"donation",modelValue:n.amount,"onUpdate:modelValue":e[6]||(e[6]=C=>n.amount=C),onBlur:i.validateInput,onKeyup:e[7]||(e[7]=va(U(C=>i.updateDonation(),["prevent"]),["enter"]))},null,8,["modelValue","onBlur"]),_(v,{variant:"secondary",class:"update-donation-inline-button","data-testid":"basket-donation-edit-submit",onClick:e[8]||(e[8]=C=>i.updateDonation())},{default:N(()=>e[13]||(e[13]=[w(" Update ")]),void 0),_:1,__:[13]}),m("button",{class:"show-for-medium remove-wrapper",onClick:e[9]||(e[9]=C=>t.updateLoanAmount("remove")),"data-testid":"basket-donation-remove"},[_(r,{class:"remove-x tw-text-tertiary",name:"small-x","from-sprite":!0,title:"Remove donation"})])],512),[[W,n.editDonation&&!i.isCampaignDonation]]),i.hasLoans?(s(),T(c,{key:0,onUpdatingTotals:e[10]||(e[10]=C=>t.$emit("updating-totals",C)),onRefreshtotals:e[11]||(e[11]=C=>t.$emit("refreshtotals"))})):k("",!0)])]),_(u,{ref:"nudgeLightbox","loan-count":a.loanCount,"loan-reservation-total":a.loanReservationTotal,visible:n.nudgeLightboxVisible,"close-nudge-lightbox":i.closeNudgeLightbox,"update-donation-to":i.updateDonationTo,"current-donation-amount":n.amount},null,8,["loan-count","loan-reservation-total","visible","close-nudge-lightbox","update-donation-to","current-donation-amount"]),_(g,{title:"Loans change lives.Your donations make them possible.",visible:n.defaultLbVisible,onLightboxClosed:i.lightboxClosed,"data-testid":"basket-donation-how-kiva-uses-lightbox"},{header:N(()=>e[14]||(e[14]=[m("h2",null," Loans change lives. Your donations make them possible. ",-1)])),default:N(()=>[_(p)],void 0),_:1},8,["visible","onLightboxClosed"])])}const Kt=L(Ut,[["render",er],["__scopeId","data-v-cc8e32ef"]]);Ut.__docgenInfo={displayName:"DonationItem",exportName:"default",description:"",tags:{},props:[{name:"donation",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}},{name:"loanCount",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"kivaCardsCount",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"loanReservationTotal",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"orderTotalVariant",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"updating-totals",type:{names:["undefined"]}},{name:"refreshtotals"}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/DonationItem.vue"]};const tr=""+new URL("kiva_card_preview-JtbbMcpE.png",import.meta.url).href,Gt={name:"KivaCardItem",components:{KvMaterialIcon:de,LoanPrice:Bt,RemoveBasketItem:Te},emits:["refreshtotals","updating-totals"],props:{kivaCard:{type:Object,default:()=>{}}},data(){return{cardType:this.kivaCard.kivaCardObject.deliveryType,recipientName:this.kivaCard.kivaCardObject.recipient.name,recipientEmail:this.kivaCard.kivaCardObject.recipient.email,mailingFirstName:this.kivaCard.kivaCardObject.mailingInfo.firstName,mailingLastName:this.kivaCard.kivaCardObject.mailingInfo.lastName,mailingStreet:this.kivaCard.kivaCardObject.mailingInfo.address,mailingCity:this.kivaCard.kivaCardObject.mailingInfo.city,mailingState:this.kivaCard.kivaCardObject.mailingInfo.state,mailingZip:this.kivaCard.kivaCardObject.mailingInfo.zip,mdiPencil:vt,quantity:this.kivaCard.quantity,idsInGroup:this.kivaCard.idsInGroup,kivaCardPreview:tr}},computed:{deliveryDate(){return li(di(this.kivaCard.kivaCardObject.recipient.scheduledDeliveryDate),"MM/dd/yyyy")},formedEditUrl(){const t=new URLSearchParams;return this.idsInGroup.forEach((e,a)=>{t.append(`gift_ids[${a}]`,e)}),`/gifts/kiva-cards?${t.toString()}`}},methods:{onLoanUpdate(t){this.$emit("refreshtotals",t),t==="removeLoan"&&(this.loanVisible=!1)}}},ar={class:"basket-item-wrapper tw-flex tw-flex-col md:tw-flex-row tw-pb-5"},ir={class:"tw-hidden md:tw-block tw-flex-none md:tw-mr-3 lg:tw-mr-4.5"},nr={class:"kiva-card-icon","data-testid":"basket-kiva-card-image-container"},or=["src"],sr={class:"tw-flex-auto kiva-card-info-wrapper"},rr={class:"kiva-card-info"},lr={class:"tw-flex tw-mb-0.5"},dr={key:0,class:"tw-text-h3","data-testid":"basket-kiva-card-title"},mr={key:0},ur={key:1,class:"tw-text-h3","data-testid":"basket-kiva-card-title"},cr={key:0},pr={key:2,class:"tw-text-h3","data-testid":"basket-kiva-card-title"},vr=["href"],kr={class:"tw-text-secondary"},hr={key:0},gr={class:"tw-text-small tw-mb-1","data-testid":"basket-kiva-card-info-1"},fr={key:1},yr={class:"tw-text-small tw-mb-1 data-hj-suppress","data-testid":"basket-kiva-card-info-1"},br={key:2},Cr={class:"tw-text-small tw-mb-1","data-testid":"basket-kiva-card-info-1"},_r={class:"data-hj-suppress"},wr={class:"tw-flex-none tw-w-full md:tw-w-auto md:tw-ml-3 lg:tw-ml-4.5 tw-mt-1.5 md:tw-mt-0 price-wrapper"};function Tr(t,e,a,o,n,i){const r=h("kv-material-icon"),l=h("remove-basket-item"),v=h("loan-price"),c=O("kv-track-event");return s(),d("div",ar,[m("div",ir,[m("div",nr,[m("img",{alt:"Kiva Card",class:"card-preview tw-w-12 lg:tw-w-13 tw-h-12 lg:tw-h-13 tw-rounded",src:n.kivaCardPreview},null,8,or)])]),m("div",sr,[m("div",rr,[m("div",lr,[n.cardType=="print"?(s(),d("h2",dr,[e[4]||(e[4]=w(" Print-it-yourself Kiva Card ")),n.quantity>1?(s(),d("span",mr,"("+y(n.quantity)+")",1)):k("",!0)])):k("",!0),n.cardType=="postal"?(s(),d("h2",ur,[e[5]||(e[5]=w(" Postal delivery Kiva Card ")),n.quantity>1?(s(),d("span",cr,"("+y(n.quantity)+")",1)):k("",!0)])):k("",!0),n.cardType==="email"||n.cardType==="lender"?(s(),d("h2",pr," Email delivery Kiva Card ")):k("",!0),F((s(),d("a",{class:"tw-flex-none tw-mr-auto tw-ml-1","data-testid":"basket-kiva-card-edit-button",style:{"margin-top":"0.25rem"},href:i.formedEditUrl},[_(r,{class:"tw-w-2 tw-h-2",icon:n.mdiPencil},null,8,["icon"])],8,vr)),[[c,["basket","Edit Kiva Card",n.cardType]]]),_(l,{class:"md:tw-hidden tw-flex-none tw-ml-1 tw-mt-0.5 tw-h-1.5","ids-in-group":a.kivaCard.idsInGroup,type:"kivaCard",onRefreshtotals:e[0]||(e[0]=u=>i.onLoanUpdate(u)),onUpdatingTotals:e[1]||(e[1]=u=>t.$emit("updating-totals",u))},null,8,["ids-in-group"])]),m("div",kr,[n.cardType=="print"?(s(),d("div",hr,[m("p",gr," Available after checkout for "+y(n.recipientName),1)])):k("",!0),n.cardType=="postal"?(s(),d("div",fr,[m("p",yr,y(n.mailingFirstName)+" "+y(n.mailingLastName)+" "+y(n.mailingStreet)+" "+y(n.mailingCity)+", "+y(n.mailingState)+" "+y(n.mailingZip),1)])):k("",!0),n.cardType==="email"||n.cardType==="lender"?(s(),d("div",br,[m("p",Cr,[n.cardType==="email"?(s(),d(x,{key:0},[w(" Scheduled to be sent "+y(i.deliveryDate)+" for "+y(n.recipientName)+" at ",1),m("span",_r,y(n.recipientEmail),1)],64)):(s(),d(x,{key:1},[w(" Scheduled to be sent "+y(i.deliveryDate)+" for "+y(n.recipientName),1)],64))])])):k("",!0)])])]),m("div",wr,[_(v,{"data-testid":"basket-kiva-card-price-selector","ids-in-group":a.kivaCard.idsInGroup,price:a.kivaCard.individualPrice,type:"kivaCard",onRefreshtotals:e[2]||(e[2]=u=>i.onLoanUpdate(u)),onUpdatingTotals:e[3]||(e[3]=u=>t.$emit("updating-totals",u))},null,8,["ids-in-group","price"])])])}const Nr=L(Gt,[["render",Tr]]);Gt.__docgenInfo={displayName:"KivaCardItem",exportName:"default",description:"",tags:{},props:[{name:"kivaCard",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}}],events:[{name:"updating-totals"},{name:"refreshtotals",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/KivaCardItem.vue"]};const Ht={name:"BasketItemsList",emits:["refreshtotals","updating-totals","jump-to-loans","validateprecheckout","removed-loan"],props:{disableRedirects:{type:Boolean,default:!1},loans:{type:Array,default:()=>[]},donations:{type:Array,default:()=>[{__typename:"Donation",id:0,isTip:!1,isUserEdited:!1,price:"0.00",metadata:null}]},kivaCards:{type:Array,default:()=>[]},teams:{type:Array,default:()=>[]},loanReservationTotal:{type:Number,default:0},enableFiveDollarsNotes:{type:Boolean,default:!1},isLoggedIn:{type:Boolean,default:!1},showIncentiveUpsell:{type:Boolean,default:!1},incentiveGoal:{type:Number,default:0},possibleAchievementProgress:{type:Array,default:()=>[]},isMyKivaEnabled:{type:Boolean,default:!1},lenderTotalLoans:{type:Number,default:0},hasEverLoggedIn:{type:Boolean,default:!1}},components:{BasketItem:ws,DonationItem:Kt,KivaCardItem:Nr,DepositIncentiveUpsell:mi},watch:{loans(t){const e=t.some(a=>{var o;return((o=a==null?void 0:a.loan)==null?void 0:o.__typename)==="LoanDirect"});Ta(e)}},methods:{isLoanContributingInAchievements(t){return this.possibleAchievementProgress.filter(a=>{var o;return(o=a==null?void 0:a.contributingLoanIds)==null?void 0:o.includes(t.toString())}).some(a=>!(a!=null&&a.preCheckoutTier)||(a==null?void 0:a.postCheckoutTier)!==(a==null?void 0:a.preCheckoutTier))},isFirstLoan(t){return t!==0||this.lenderTotalLoans!==0?!1:this.isLoggedIn||!this.isLoggedIn&&!this.hasEverLoggedIn}}},Ir={class:"basket-items-list","data-testid":"basket-items-list"};function Sr(t,e,a,o,n,i){const r=h("basket-item"),l=h("deposit-incentive-upsell"),v=h("kiva-card-item"),c=h("donation-item");return s(),d("div",Ir,[m("ul",null,[(s(!0),d(x,null,K(a.loans,(u,p)=>(s(),d("li",{key:u.id},[_(r,{"data-testid":`basket-loan-${p}`,"disable-redirects":a.disableRedirects,loan:u,teams:a.teams,"enable-five-dollars-notes":a.enableFiveDollarsNotes,"is-logged-in":a.isLoggedIn,"contributes-in-achievement":i.isLoanContributingInAchievements(u.id),"is-first-loan":i.isFirstLoan(p),"is-my-kiva-enabled":a.isMyKivaEnabled,onValidateprecheckout:e[0]||(e[0]=g=>t.$emit("validateprecheckout")),onRefreshtotals:e[1]||(e[1]=g=>t.$emit("refreshtotals",g)),onUpdatingTotals:e[2]||(e[2]=g=>t.$emit("updating-totals",g)),onJumpToLoans:e[3]||(e[3]=g=>t.$emit("jump-to-loans")),onRemovedLoan:e[4]||(e[4]=g=>t.$emit("removed-loan",g))},null,8,["data-testid","disable-redirects","loan","teams","enable-five-dollars-notes","is-logged-in","contributes-in-achievement","is-first-loan","is-my-kiva-enabled"])]))),128)),a.showIncentiveUpsell?(s(),T(l,{key:0,class:"tw-mb-4","data-testid":"basket-deposit-incentive-upsell",goal:a.incentiveGoal,progress:a.loanReservationTotal,"exclude-loan-ids":a.loans.map(u=>u.id),onAddingLoan:e[5]||(e[5]=u=>t.$emit("updating-totals",!0)),onDoneAdding:e[6]||(e[6]=u=>t.$emit("refreshtotals"))},null,8,["goal","progress","exclude-loan-ids"])):k("",!0),(s(!0),d(x,null,K(a.kivaCards,(u,p)=>(s(),d("li",{key:u.id},[_(v,{"data-testid":`basket-kiva-card-${p}`,"kiva-card":u,onRefreshtotals:e[7]||(e[7]=g=>t.$emit("refreshtotals",g)),onUpdatingTotals:e[8]||(e[8]=g=>t.$emit("updating-totals",g))},null,8,["data-testid","kiva-card"])]))),128)),(s(!0),d(x,null,K(a.donations,(u,p)=>(s(),d("li",{key:u.id},[_(c,{"data-testid":`basket-donation-${p}`,donation:u,"loan-count":a.loans.length,"kiva-cards-count":a.kivaCards.length,"loan-reservation-total":a.loanReservationTotal,onRefreshtotals:e[9]||(e[9]=g=>t.$emit("refreshtotals")),onUpdatingTotals:e[10]||(e[10]=g=>t.$emit("updating-totals",g))},null,8,["data-testid","donation","loan-count","kiva-cards-count","loan-reservation-total"])]))),128))])])}const Lr=L(Ht,[["render",Sr]]);Ht.__docgenInfo={displayName:"BasketItemsList",exportName:"default",description:"",tags:{},props:[{name:"disableRedirects",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"loans",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"donations",type:{name:"array"},defaultValue:{func:!1,value:`[
    {
        __typename: 'Donation',
        id: 0,
        isTip: false,
        isUserEdited: false,
        price: '0.00',
        metadata: null
    }
]`}},{name:"kivaCards",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"teams",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"loanReservationTotal",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"enableFiveDollarsNotes",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isLoggedIn",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showIncentiveUpsell",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"incentiveGoal",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"possibleAchievementProgress",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"isMyKivaEnabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"lenderTotalLoans",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"hasEverLoggedIn",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"validateprecheckout"},{name:"refreshtotals"},{name:"updating-totals"},{name:"jump-to-loans"},{name:"removed-loan"}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/BasketItemsList.vue"]};const Fr=`mutation addCreditByType($creditType: CreditTypeEnum!, $redemptionCode: String, $basketId: String) {
	shop (basketId: $basketId) {
		id
		addCreditByType	(creditType: $creditType, redemptionCode: $redemptionCode)
	}
}
`,xr={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addCreditByType"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"creditType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreditTypeEnum"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"redemptionCode"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addCreditByType"},arguments:[{kind:"Argument",name:{kind:"Name",value:"creditType"},value:{kind:"Variable",name:{kind:"Name",value:"creditType"}}},{kind:"Argument",name:{kind:"Name",value:"redemptionCode"},value:{kind:"Variable",name:{kind:"Name",value:"redemptionCode"}}}],directives:[]}]}}]}}],loc:{start:0,end:256,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Fr}}},zt={name:"VerifyRemovePromoCredit",inject:["apollo"],components:{KvButton:G,KvLightbox:le},emits:["credit-removed","promo-opt-out-lightbox-closed","updating-totals"],props:{activeCreditType:{type:String,default:""},appliedPromoTotal:{type:String,default:""},promoFundDisplayName:{type:String,default:""},visible:{type:Boolean,default:!1}},methods:{removePromoCredit(){this.activeCreditType&&this.removeCredit(this.activeCreditType),this.closeLightbox()},removeCredit(t){this.setUpdating(!0),It(this.apollo,t).then(()=>{this.$kvTrackEvent("basket","Kiva Credit","Remove Credit Success"),this.$emit("credit-removed")}).catch(e=>{E(e,"error")}).finally(()=>{this.setUpdating(!1)})},setUpdating(t){this.$emit("updating-totals",t)},closeLightbox(){this.$emit("promo-opt-out-lightbox-closed")}}},Ar={class:"content",style:{"max-width":"30rem"}},Dr={class:"tw-mb-4"};function Vr(t,e,a,o,n,i){const r=h("kv-button"),l=h("kv-lightbox"),v=O("kv-track-event");return s(),T(l,{onLightboxClosed:i.closeLightbox,visible:a.visible,title:"You are leaving the promotion",style:{"z-index":"1199 !important"}},{controls:N(()=>[F((s(),T(r,{variant:"secondary",onClick:i.closeLightbox,"data-testid":"remove-promo-cancel-opt-out"},{default:N(()=>e[2]||(e[2]=[w(" Cancel ")]),void 0,!0),_:1,__:[2]},8,["onClick"])),[[v,["promoCampaign","Cancel Promo Opt-out Button"]]]),F((s(),T(r,{onClick:i.removePromoCredit,"data-testid":"remove-promo-credit-confirmation"},{default:N(()=>e[3]||(e[3]=[w(" Remove Credit ")]),void 0,!0),_:1,__:[3]},8,["onClick"])),[[v,["promoCampaign","Promo Opt-out Button"]]])]),default:N(()=>[m("div",Ar,[m("p",Dr,[e[0]||(e[0]=m("strong",null,"WARNING:",-1)),w(" If you proceed, your "+y(a.appliedPromoTotal)+" credit from the "+y(a.promoFundDisplayName)+" promotion will be removed, and you will have to lend using your own money. ",1)]),e[1]||(e[1]=m("p",null,'Click "Cancel" to use your free loan, or click "Remove Credit" to pay using your own money.',-1))])],void 0),_:1},8,["onLightboxClosed","visible"])}const Wt=L(zt,[["render",Vr]]);zt.__docgenInfo={displayName:"VerifyRemovePromoCredit",exportName:"default",description:"",tags:{},props:[{name:"activeCreditType",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"appliedPromoTotal",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"promoFundDisplayName",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"visible",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"credit-removed"},{name:"promo-opt-out-lightbox-closed"},{name:"updating-totals",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/VerifyRemovePromoCredit.vue"]};const Qt={name:"OrderTotals",components:{KvTooltip:ui,VerifyRemovePromoCredit:Wt,DonationItem:Kt,KvMaterialIcon:de},inject:["apollo","cookieStore"],emits:["refreshtotals","updating-totals","credit-removed"],props:{totals:{type:Object,default:()=>{}},promoFund:{type:Object,default:()=>{}},openLightbox:{type:Function,default:()=>{}}},data(){return{mdiClose:_e,promoOptOutLightboxVisible:!1,donateItemExperimentVersion:"a"}},computed:{showRemoveKivaCredit(){return parseFloat(this.totals.kivaCreditAppliedTotal)>0},showApplyKivaCredit(){return parseFloat(this.totals.kivaCreditToReapply)>0},showKivaCredit(){return this.showRemoveKivaCredit||this.showApplyKivaCredit},kivaCredit(){let t=b(this.totals.kivaCreditAppliedTotal).format("$0,0.00");return this.showApplyKivaCredit&&(t=b(this.totals.kivaCreditToReapply).format("$0,0.00")),t},itemTotal(){return b(this.totals.itemTotal).format("$0,0.00")},creditAmountNeeded(){return b(this.totals.creditAmountNeeded).format("$0,0.00")},creditAppliedTotal(){return b(this.totals.creditAppliedTotal).format("$0,0.00")},creditAvailableTotal(){return b(this.totals.creditAvailableTotal).format("$0,0.00")},promoFundDisplayName(){return this.promoFund&&this.promoFund.displayName?this.promoFund.displayName:""},promoFundDisplayDescription(){return this.promoFund&&this.promoFund.displayDescription?this.promoFund.displayDescription:""},hasRedemptionCode(){var t;return((t=this.totals)==null?void 0:t.redemptionCodeAppliedTotal)!=="0.00"},redemptionCodeAppliedTotal(){return b(this.totals.redemptionCodeAppliedTotal).format("$0,0.00")},redemptionCodeAvailableTotal(){return b(this.totals.redemptionCodeAvailableTotal).format("$0,0.00")},hasUPCCode(){var t;return((t=this.totals)==null?void 0:t.universalCodeAppliedTotal)!=="0.00"},universalCodeAppliedTotal(){return b(this.totals.universalCodeAppliedTotal).format("$0,0.00")},universalCodeAvailableTotal(){return b(this.totals.universalCodeAvailableTotal).format("$0,0.00")},hasBonusCredit(){var t;return((t=this.totals)==null?void 0:t.bonusAppliedTotal)!=="0.00"},bonusAppliedTotal(){return b(this.totals.bonusAppliedTotal).format("$0,0.00")},bonusAvailableTotal(){return b(this.totals.bonusAvailableTotal).format("$0,0.00")},showPromoCreditTotal(){return!!(this.hasRedemptionCode||this.hasUPCCode||this.hasBonusCredit)},appliedPromoTotal(){return this.hasRedemptionCode?this.redemptionCodeAppliedTotal:this.hasUPCCode?this.universalCodeAppliedTotal:this.hasBonusCredit?this.bonusAppliedTotal:null},availablePromoTotal(){return this.hasRedemptionCode?this.redemptionCodeAvailableTotal:this.hasUPCCode?this.universalCodeAvailableTotal:this.hasBonusCredit?this.bonusAvailableTotal:null},activeCreditType(){return this.hasRedemptionCode?"redemption_code":this.hasUPCCode?"universal_code":this.hasBonusCredit?"bonus_credit":null},showRemoveActivePromoCredit(){return this.appliedPromoTotal?parseFloat(this.appliedPromoTotal.replace("$",""))>0:!1},showApplyActivePromoCredit(){return this.appliedPromoTotal&&this.availablePromoTotal?parseFloat(this.appliedPromoTotal.replace("$",""))===0&&parseFloat(this.availablePromoTotal.replace("$",""))>0:!1},donationObject(){return{__typename:"Donation",id:0,isTip:!1,isUserEdited:!1,price:b(this.totals.donationTotal)}},isCorporateCampaign(){return ye(this.$route)}},methods:{addCredit(t){this.setUpdating(!0),this.apollo.mutate({mutation:xr,variables:{creditType:t}}).then(()=>this.apollo.mutate({mutation:ft})).then(()=>{this.setUpdating(!1),this.$kvTrackEvent("basket","Kiva Credit","Apply Credit Success"),this.$emit("refreshtotals")}).catch(e=>{console.error(e),this.setUpdating(!1)})},applyPromoCredit(){this.activeCreditType&&this.addCredit(this.activeCreditType)},removeCredit(t){this.setUpdating(!0),It(this.apollo,t).then(()=>{this.$kvTrackEvent("basket","Kiva Credit","Remove Credit Success"),this.$emit("refreshtotals")}).catch(e=>{E(e,"error")}).finally(()=>{this.setUpdating(!1)})},setUpdating(t){this.$emit("updating-totals",t)},handleCreditRemoved(){this.promoOptOutLightboxVisible=!1,this.$emit("refreshtotals"),this.$emit("credit-removed"),this.$router.push(this.$route.path)},trackBasketInfoEvents(){const t=this.showApplyKivaCredit?"not-applied":"applied",e=100*(this.showApplyKivaCredit?this.totals.creditAvailableTotal:this.totals.kivaCreditAppliedTotal);this.$kvTrackEvent("basket","show","kiva-credit",t,e),this.$kvTrackEvent("basket","show","basket-size",null,this.totals.itemTotal*100)}},apollo:{preFetch(t,e){return e.query({query:V`
						query generalExpQuery {
							general {
								basket_donate_modules: uiExperimentSetting(key: "basket_donate_modules") {
									key
									value
								}
							}
						}`}).then(()=>e.query({query:Ia,variables:{id:"basket_donate_modules"}})).catch(a=>{E(a,"error")})}},created(){const t=Na(this.apollo,"basket_donate_modules");if(t!=null&&t.enabled){const{version:e}=rt(this.apollo,this.$kvTrackEvent,"Basket","basket_donate_modules","EXP-ACK-440-Oct2022");e&&(this.donateItemExperimentVersion=e)}this.trackBasketInfoEvents()}},Pr={class:"tw-mb-1"},Er={key:0,class:"tw-flex tw-flex-row tw-w-full tw-mb-2","data-testid":"basket-order-total"},$r={key:0,class:"tw-w-auto tw-text-right tw-flex-1"},Mr={key:1,class:"tw-float-right md:tw-float-none tw-text-right tw-pl-2"},Rr={key:2,class:"tw-w-auto tw-text-left md:tw-text-right tw-flex-1 tw-text-h3"},Br={key:3,class:"tw-float-right md:tw-float-none tw-text-right tw-pl-2 tw-text-h3"},Or={class:"tw-w-auto tw-text-left md:tw-text-right tw-flex-1"},jr={class:"tw-flex-none tw-w-auto tw-flex tw-items-center"},qr={"data-testid":"applied-kiva-credit-amount",class:"tw-pl-2 tw-text-right tw-whitespace-nowrap"},Ur={class:"tw-flex-none tw-w-auto tw-flex"},Kr={"data-testid":"removed-kiva-credit-amount",class:"tw-pl-2 tw-text-right tw-whitespace-nowrap"},Gr={key:3},Hr={class:"tw-mb-2 tw-text-left md:tw-text-right tw-flex tw-justify-end tw-items-center","data-testid":"basket-promo-total"},zr={key:0,class:"tw-w-full tw-text-h3"},Wr={key:1,class:"tw-text-brand",id:"promo_name","data-testid":"basket-promo-name"},Qr={class:"tw-flex tw-items-center"},Jr={key:0,"data-testid":"promo-amount",class:"tw-pl-2 tw-text-right tw-whitespace-nowrap tw-text-h3"},Zr={key:1,"data-testid":"promo-amount",class:"tw-pl-2 tw-text-right tw-whitespace-nowrap"},Yr={key:2,class:"upc-disclaimer","data-testid":"basket-upc-promo-disclaimer"},Xr={class:"tw-text-small"},el={class:"tw-text-h3 tw-mb-1 tw-text-right","data-testid":"total-due"},tl={class:"tw-flex tw-w-full tw-justify-end tw-items-center"},al={key:0,class:"tw-w-auto tw-text-left md:tw-text-right tw-flex-1"},il={key:1,class:"tw-w-auto tw-text-right tw-flex-1"},nl={class:"tw-pl-2","data-testid":"basket-total-due-amount"};function ol(t,e,a,o,n,i){const r=h("donation-item"),l=h("kv-material-icon"),v=h("kv-tooltip"),c=h("verify-remove-promo-credit");return s(),d("div",Pr,[i.showPromoCreditTotal?(s(),d("div",Er,[i.isCorporateCampaign?(s(),d("div",$r," Total: ")):k("",!0),i.isCorporateCampaign?(s(),d("span",Mr,y(i.itemTotal),1)):k("",!0),i.isCorporateCampaign?k("",!0):(s(),d("div",Rr," Order Total: ")),i.isCorporateCampaign?k("",!0):(s(),d("span",Br,y(i.itemTotal),1)),e[8]||(e[8]=m("span",{class:"tw-w-4.5"},null,-1))])):k("",!0),n.donateItemExperimentVersion==="e"&&Number(a.totals.loanReservationTotal)>0?(s(),T(r,{key:1,"data-testid":"basket-donation",donation:i.donationObject,"order-total-variant":n.donateItemExperimentVersion==="e","loan-count":Number(a.totals.loanReservationTotal)>0?1:0,"loan-reservation-total":Number(a.totals.loanReservationTotal),onRefreshtotals:e[0]||(e[0]=u=>t.$emit("refreshtotals")),onUpdatingTotals:e[1]||(e[1]=u=>t.$emit("updating-totals",u))},null,8,["donation","order-total-variant","loan-count","loan-reservation-total"])):k("",!0),i.showKivaCredit?(s(),d("div",{key:2,class:B(`tw-flex tw-flex-row tw-w-full tw-mb-2${i.isCorporateCampaign?"":" tw-text-h3"}`),"data-testid":"basket-kiva-credit"},[i.showRemoveKivaCredit?(s(),d(x,{key:0},[m("div",Or,y(i.isCorporateCampaign?"Remaining Kiva credit:":"Kiva Credit:"),1),m("div",jr,[m("span",qr,y(i.isCorporateCampaign?"":"- ")+y(i.kivaCredit),1),i.showRemoveKivaCredit?(s(),d("button",{key:0,onClick:e[2]||(e[2]=u=>i.removeCredit("kiva_credit")),"data-testid":"basket-remove-kiva-credit",class:"tw-h-2.5 tw-flex"},[_(l,{class:"tw-text-secondary tw-ml-2 tw-w-2.5",icon:n.mdiClose},null,8,["icon"])])):k("",!0)])],64)):k("",!0),i.showApplyKivaCredit?(s(),d(x,{key:1},[e[9]||(e[9]=m("div",{class:"tw-w-auto tw-text-left md:tw-text-right tw-flex-1"},[m("del",null,"Kiva Credit:")],-1)),m("div",Ur,[m("span",Kr,[m("del",null,"- "+y(i.kivaCredit),1)]),m("button",{class:"tw-text-small tw-ml-2",onClick:e[3]||(e[3]=u=>i.addCredit("kiva_credit")),"data-testid":"basket-apply-kiva-credit"}," Apply ")])],64)):k("",!0)],2)):k("",!0),i.showPromoCreditTotal?(s(),d("div",Gr,[m("div",Hr,[i.isCorporateCampaign?k("",!0):(s(),d("span",zr,[i.availablePromoTotal?(s(),d(x,{key:0},[w(y(i.availablePromoTotal),1)],64)):k("",!0),i.promoFundDisplayName?(s(),d("span",Wr,y(i.promoFundDisplayName),1)):k("",!0),e[10]||(e[10]=w(" promotion: "))])),m("div",Qr,[i.isCorporateCampaign?(s(),d("span",Zr,y(i.promoFundDisplayName)+" pays "+y(i.appliedPromoTotal),1)):(s(),d("span",Jr,"- "+y(i.appliedPromoTotal),1)),i.showRemoveActivePromoCredit?(s(),d("button",{key:2,onClick:e[4]||(e[4]=u=>n.promoOptOutLightboxVisible=!0),"data-testid":"basket-remove-active-promo",class:"tw-h-2.5 tw-flex"},[_(l,{class:"tw-text-secondary tw-ml-2 tw-w-2.5",icon:n.mdiClose},null,8,["icon"])])):k("",!0)]),i.showApplyActivePromoCredit?(s(),d("button",{key:1,class:"tw-text-small tw-ml-2",onClick:e[5]||(e[5]=(...u)=>i.applyPromoCredit&&i.applyPromoCredit(...u)),"data-testid":"basket-apply-active-promo"}," Apply ")):k("",!0),i.hasUPCCode&&!i.isCorporateCampaign?(s(),d("div",Yr,[m("p",Xr," Remember to use all your "+y(i.promoFundDisplayName)+" credits in one transaction. You cannot use the remaining credits later. ",1)])):k("",!0)]),i.promoFundDisplayDescription&&!i.isCorporateCampaign?(s(),T(v,{key:0,class:"tooltip","data-testid":"promo-tool-tip",controller:"promo_name",theme:"mint"},{default:N(()=>[w(y(i.promoFundDisplayDescription),1)],void 0),_:1})):k("",!0)])):k("",!0),m("div",el,[m("div",tl,[i.isCorporateCampaign?k("",!0):(s(),d("div",al,[i.showPromoCreditTotal?(s(),d(x,{key:1},[w(" Total Due: ")],64)):(s(),d(x,{key:0},[w(" Total: ")],64))])),i.isCorporateCampaign?(s(),d("div",il," You'll pay: ")):k("",!0),m("div",nl,y(i.creditAmountNeeded),1),e[11]||(e[11]=m("span",{class:"tw-w-4.5"},null,-1))]),_(c,{"data-testid":"basket-remove-promo-verification",visible:n.promoOptOutLightboxVisible,"applied-promo-total":i.appliedPromoTotal,"promo-fund-display-name":i.promoFundDisplayName,"active-credit-type":i.activeCreditType,onCreditRemoved:i.handleCreditRemoved,onUpdatingTotals:e[6]||(e[6]=u=>i.setUpdating(u)),onPromoOptOutLightboxClosed:e[7]||(e[7]=u=>n.promoOptOutLightboxVisible=!1)},null,8,["visible","applied-promo-total","promo-fund-display-name","active-credit-type","onCreditRemoved"])])])}const sl=L(Qt,[["render",ol],["__scopeId","data-v-715c65b0"]]);Qt.__docgenInfo={displayName:"OrderTotals",exportName:"default",description:"",tags:{},props:[{name:"totals",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}},{name:"promoFund",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}},{name:"openLightbox",type:{name:"func"},defaultValue:{func:!0,value:"() => {}"}}],events:[{name:"refreshtotals"},{name:"updating-totals",type:{names:["undefined"]}},{name:"credit-removed"}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/OrderTotals.vue"]};const Jt={name:"InContextCheckout",inject:["apollo","cookieStore"],components:{BasketItemsList:Lr,CheckoutDropInPaymentWrapper:yo,KvButton:G,KivaCreditPayment:Co,KivaCreditGuestPayment:Fo,KvLoadingOverlay:we,OrderTotals:sl,KvIcon:dt,KvGrid:ci},mixins:[ee],emits:["complete-transaction","checkout-failure","refreshtotals","updating-totals","jump-to-loans","credit-removed","transaction-complete"],props:{isLoggedIn:{type:Boolean,default:!1},totals:{type:Object,default:()=>{}},loans:{type:Array,default:()=>[]},disableRedirects:{type:Boolean,default:!1},donations:{type:Array,default:()=>[]},kivaCards:{type:Array,default:()=>[]},showDonation:{type:Boolean,default:!0},teams:{type:Array,default:()=>[]},autoRedirectToThanks:{type:Boolean,default:!0},promoFund:{type:Object,default:()=>{}},promoName:{type:String,default:()=>{}},lcaLoanPrice:{type:Number,default:0},customCheckoutButtonText:{type:String,default:"Continue"},promoFundId:{type:String,default:""},managedAccountId:{type:String,default:""},promoGuestCheckoutEnabled:{type:Boolean,default:!1}},data(){return{updatingTotals:!1,continueAsGuest:!1,continueAsExistingUser:!1}},computed:{creditNeeded(){var t;return((t=this.totals)==null?void 0:t.creditAmountNeeded)??"0"},derivedPromoFund(){var e;return this.promoFund!==null&&Object.keys(this.promoFund).length?this.promoFund:((e=this.loans)==null?void 0:e.filter(a=>{const o=a.creditsUsed.length>0;let n=!1;return o&&(n=a.creditsUsed.filter(i=>i.promoFund!==null).length>0),n}).map(a=>{var o;return(o=a.creditsUsed[0])==null?void 0:o.promoFund}))[0]||null},registerOrLoginHref(){return`/ui-login?autoPage=true&force=true&doneUrl=${encodeURIComponent(this.$route.fullPath)}`},showKivaCreditButton(){return parseFloat(this.creditNeeded)===0},isCorporateCampaign(){return ye(this.$route)},showLcaLoanMessage(){var t;return this.isCorporateCampaignPage&&this.cookieStore.get("lcaid")&&((t=this.promoFund)==null?void 0:t.promoPrice)&&this.lcaLoanPrice>0}},methods:{completeTransaction(t){const e=On(b(t).value(),this.loans,this.kivaCards,this.donations,this.totals);jn(this.apollo).then(({data:o})=>{var i,r;const n=(r=(i=o==null?void 0:o.my)==null?void 0:i.userAccount)==null?void 0:r.isFirstTimeDepositor;e.isFTD=n,this.$kvTrackTransaction(e),this.autoRedirectToThanks&&window.setTimeout(()=>{this.redirectToThanks(t)},800)}),this.$emit("transaction-complete",e)},handleCheckoutFailure(t){this.$emit("checkout-failure",t)},setUpdatingTotals(t){this.updatingTotals=t}}},rl={class:"in-context-checkout",id:"inContextCheckout"},ll={key:0,class:"tw-pb-4"},dl={class:"tw-bg-brand-50 tw-rounded tw-p-2 row align-center"},ml={key:0},ul={key:1},cl={class:"in-context-payment-controls"},pl={class:"tw-col-start-4 tw-col-end-7 tw-text-right"};function vl(t,e,a,o,n,i){const r=h("kv-icon"),l=h("basket-items-list"),v=h("order-totals"),c=h("kv-button"),u=h("kv-grid"),p=h("kiva-credit-payment"),g=h("kiva-credit-guest-payment"),f=h("checkout-drop-in-payment-wrapper"),C=h("kv-loading-overlay"),S=O("kv-track-event");return s(),d("div",rl,[i.isCorporateCampaign&&i.showLcaLoanMessage?(s(),d("div",ll,[m("div",dl,[_(r,{class:"tw-w-4",name:"piggy-bank"}),a.promoFund.displayName?(s(),d("span",ml,y(a.promoName)+" has given you "+y(t.$filters.numeral(a.promoFund.promoPrice,"$0,0[.]00"))+" in credit. ",1)):(s(),d("span",ul," You have been given "+y(t.$filters.numeral(a.promoFund.promoPrice,"$0,0[.]00"))+" in credit. ",1)),m("span",null,"   We've suggested a borrower to lend your remaining $"+y(a.lcaLoanPrice)+" credit to. ",1)])])):k("",!0),_(l,{class:B(["in-context-checkout__basket-items",{"in-context-checkout__basket-items--hide-donation":!a.showDonation}]),"disable-redirects":a.disableRedirects,loans:a.loans,donations:a.donations,"kiva-cards":a.kivaCards,"loan-reservation-total":parseInt(a.totals.loanReservationTotal),teams:a.teams,onRefreshtotals:e[0]||(e[0]=I=>t.$emit("refreshtotals")),onUpdatingTotals:i.setUpdatingTotals,onJumpToLoans:e[1]||(e[1]=I=>t.$emit("jump-to-loans"))},null,8,["class","disable-redirects","loans","donations","kiva-cards","loan-reservation-total","teams","onUpdatingTotals"]),e[11]||(e[11]=m("hr",null,null,-1)),_(v,{class:"in-context-checkout__order-totals",totals:a.totals,"promo-fund":i.derivedPromoFund,onCreditRemoved:e[2]||(e[2]=I=>t.$emit("credit-removed")),onRefreshtotals:e[3]||(e[3]=I=>t.$emit("refreshtotals")),onUpdatingTotals:i.setUpdatingTotals},null,8,["totals","promo-fund","onUpdatingTotals"]),!a.isLoggedIn&&!a.promoGuestCheckoutEnabled?(s(),d("div",{key:1,class:B(["in-context-login",{"tw-text-right":!i.isCorporateCampaign}])},[a.isLoggedIn?k("",!0):F((s(),T(c,{key:0,class:"smaller checkout-button",id:"Continue-to-legacy-button",href:i.registerOrLoginHref},{default:N(()=>[w(y(a.customCheckoutButtonText),1)],void 0),_:1},8,["href"])),[[S,["basket","Redirect Continue Button","exit to legacy"]]])],2)):k("",!0),m("div",cl,[!a.isLoggedIn&&a.promoGuestCheckoutEnabled&&!n.continueAsGuest?(s(),T(u,{key:0,class:"tw-grid-cols-6"},{default:N(()=>[m("div",pl,[a.promoGuestCheckoutEnabled?(s(),T(c,{key:0,class:"smaller checkout-button tw-mb-1",onClick:e[4]||(e[4]=I=>n.continueAsGuest=!0)},{default:N(()=>e[8]||(e[8]=[w(" Continue as a guest ")]),void 0,!0),_:1,__:[8]})):k("",!0),a.promoGuestCheckoutEnabled?(s(),T(c,{key:1,class:"smaller checkout-button tw-mb-1",variant:"secondary",href:i.registerOrLoginHref},{default:N(()=>e[9]||(e[9]=[w(" Continue as an existing user ")]),void 0,!0),_:1,__:[9]},8,["href"])):k("",!0)]),e[10]||(e[10]=m("div",{class:"tw-col-start-4 tw-col-end-7"},[m("p",{class:"tw-grid-row"}," For existing users, we recommend you log in with your work email address. ")],-1))],void 0),_:1,__:[10]})):k("",!0),i.showKivaCreditButton&&!a.promoGuestCheckoutEnabled&&a.isLoggedIn?(s(),T(p,{key:1,onCompleteTransaction:i.completeTransaction,class:"checkout-button",id:"kiva-credit-payment-button",onRefreshtotals:e[5]||(e[5]=I=>t.$emit("refreshtotals")),onUpdatingTotals:i.setUpdatingTotals,onCheckoutFailure:i.handleCheckoutFailure},null,8,["onCompleteTransaction","onUpdatingTotals","onCheckoutFailure"])):k("",!0),i.showKivaCreditButton&&a.promoGuestCheckoutEnabled&&n.continueAsGuest?(s(),T(g,{key:2,"is-guest-checkout":!0,onCompleteTransaction:i.completeTransaction,class:"checkout-button",id:"kiva-credit-payment-button","promo-fund-id":String(a.promoFundId),"managed-account-id":a.managedAccountId,"promo-guest-checkout-enabled":a.promoGuestCheckoutEnabled,"promo-name":a.promoName,onRefreshtotals:e[6]||(e[6]=I=>t.$emit("refreshtotals")),onUpdatingTotals:i.setUpdatingTotals,onCheckoutFailure:i.handleCheckoutFailure},null,8,["onCompleteTransaction","promo-fund-id","managed-account-id","promo-guest-checkout-enabled","promo-name","onUpdatingTotals","onCheckoutFailure"])):k("",!0),!i.showKivaCreditButton&&(n.continueAsGuest||a.isLoggedIn)?(s(),T(f,{key:3,amount:i.creditNeeded,onRefreshtotals:e[7]||(e[7]=I=>t.$emit("refreshtotals")),"is-guest-checkout":a.promoGuestCheckoutEnabled,"promo-fund-id":String(a.promoFundId),"managed-account-id":a.managedAccountId,"promo-guest-checkout-enabled":a.promoGuestCheckoutEnabled,"promo-name":a.promoName,onUpdatingTotals:i.setUpdatingTotals,onCompleteTransaction:i.completeTransaction},null,8,["amount","is-guest-checkout","promo-fund-id","managed-account-id","promo-guest-checkout-enabled","promo-name","onUpdatingTotals","onCompleteTransaction"])):k("",!0)]),n.updatingTotals?(s(),T(C,{key:2,id:"updating-overlay",class:"updating-totals-overlay"})):k("",!0)])}const kl=L(Jt,[["render",vl],["__scopeId","data-v-98698f99"]]);Jt.__docgenInfo={displayName:"InContextCheckout",exportName:"default",description:"",tags:{},props:[{name:"isLoggedIn",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"totals",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}},{name:"loans",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"disableRedirects",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"donations",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"kivaCards",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"showDonation",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"teams",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"autoRedirectToThanks",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"promoFund",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}},{name:"promoName",type:{name:"string"},defaultValue:{func:!0,value:"() => {}"}},{name:"lcaLoanPrice",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"customCheckoutButtonText",type:{name:"string"},defaultValue:{func:!1,value:"'Continue'"}},{name:"promoFundId",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"managedAccountId",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"promoGuestCheckoutEnabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"refreshtotals"},{name:"jump-to-loans"},{name:"credit-removed"},{name:"complete-transaction"},{name:"checkout-failure",type:{names:["undefined"]}},{name:"updating-totals"},{name:"transaction-complete",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Checkout/InContext/InContextCheckout.vue"]};async function Zt(t,e){if(!t)return;const a=Array.isArray(t)?t:Object.values(t);return Promise.all(a.map(async o=>{let n=o;if(typeof o=="function"&&(n=await o()),o.__asyncLoader&&(n=await o.__asyncLoader()),n.default&&(n=n.default),!e.has(n))return e.add(n),Zt(n.components,e)}))}async function hl(t){const e=new Set;return await Zt(t,e),Array.from(e)}const gl=["api.authenticationRequired"];function fl(t={},e=[],a={}){const o=xe(e,i=>{const r=i.extensions||{};return{...i,code:i.code||r.code}}),n=Sa(o,"code");return Promise.all(xe(n,(i,r)=>{const l=t[r];if(!l)return gl.indexOf(r)!==-1||E(`Warning: No error handler for error code '${r}': ${i[0].message}`,"warn"),Promise.resolve();const v=l({graphQLErrors:i,...a});if(!(v instanceof Promise))throw new TypeError("Error handler functions must return a Promise");return v}))}function yl(t,e,a){if(typeof t.shouldPreFetch=="function"&&!t.shouldPreFetch(t,a))return Promise.resolve();if(typeof t.preFetch=="function"){const o=t.preFetch(t,e,a);if(!(o instanceof Promise))throw new TypeError("Pre-fetch functions must return a Promise");return o}return new Promise((o,n)=>{const{cookieStore:i}=a,r=t.preFetchVariables?t.preFetchVariables({client:e,...a}):{};e.query({query:t.query,variables:i?{basketId:i.get("kvbskt"),...r}:r,fetchPolicy:"network-only"}).then(l=>{l.errors?fl(t.errorHandlers,l.errors,a).then(o).catch(n):o(l)}).catch(n)})}async function bl(t,e,{...a}){const n=(await hl(t)).flatMap(i=>i.apollo??[]).filter(i=>(i==null?void 0:i.preFetch)&&(i==null?void 0:i.shouldPreFetch)!==!1);return Promise.all(n.map(i=>yl(i,e,a)))}const Yt=D(()=>A(()=>Promise.resolve().then(()=>jl),void 0,import.meta.url)),Cl=D(()=>A(()=>import("./entry-CampaignLogoGroup-D5aVYDQ4uA.js"),__vite__mapDeps([13,14,8,15,3,6,16,17,9]),import.meta.url)),_l=D(()=>A(()=>import("./entry-CampaignPartner-Yn71Z-PbOP.js"),__vite__mapDeps([18,19,20,21,15,3,6,8,16,22,23,9,24]),import.meta.url)),wl=D(()=>A(()=>import("./entry-CampaignThanks-CJWTw8NLuo.js"),__vite__mapDeps([25,26,27,28,8,9,29,30,15,3,6,16,7,10,31,32,1,33,34,35,36,37,38,39,40,41,42,43,44,45,46,4,5,47,48,49,50,51,52,14,13,17,53,54,55,56,57,2,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,23,24,19,20,21,22,75]),import.meta.url)),Xt=D(()=>A(()=>import("./entry-CampaignLoanWrapper-CLIORXccBT.js"),__vite__mapDeps([76,8,15,3,6,16,37,38,77,78,9,79,52,1,14,34,29,13,17,53,5,54,30,55,56,57,2,4,40,58,59,60,61,62,63,64,35,46,47,65,66,67,68,69,70,71,72,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,43,41,96,97,98,99,100,101,102,103,104,11,105,106,107,108,109,110,7,10,111,112,113,20,21,114,115,116,32,117,118,119,120,73,74,121,122,123,124,125,49,126,127,128,129,130,39,42,131,132,33,36,133,134,135,136,137,138,19,22,139,140]),import.meta.url)),ea=D(()=>A(()=>import("./entry-CardRow-C6_JZ_MH5V.js"),__vite__mapDeps([141,142,143,1,15,3,6,8,16,9,144,19,20,21,22,145,35,17,146,77,62]),import.meta.url)),ta=D(()=>A(()=>import("./entry-CenteredRichText-DkPm-pzPRH.js"),__vite__mapDeps([147,142,143,1,15,3,6,8,16,9,19,20,21,22,145,77,62]),import.meta.url)),aa=D(()=>A(()=>import("./entry-DynamicHeroClassic-_XtA2DarTR.js"),__vite__mapDeps([148,1,8,142,143,15,3,6,16,9,145,149,37,38,114,20,21,19,22,17,77,62,150]),import.meta.url)),ia=D(()=>A(()=>import("./entry-HeroWithCarousel-CZMv7DNRzQ.js"),__vite__mapDeps([151,142,143,1,15,3,6,8,16,9,19,20,21,22,145,149,37,38,114,144,35,17,146,111,29,64,30,77,62]),import.meta.url)),na=D(()=>A(()=>import("./entry-LoansByCategoryCarousel-CtA8tcV--b.js"),__vite__mapDeps([152,142,6,3,153,91,29,92,2,4,5,93,94,95,40,43,41,96,97,8,55,15,16,9,98,99,69,56,100,78,101,60,102,103,104,11,105,106,81,82,47,65,54,37,38,107,71,30,108,109,110,7,10,111,64,143,1,62]),import.meta.url)),oa=D(()=>A(()=>import("./entry-FrequentlyAskedQuestions-BM2QY5l494.js"),__vite__mapDeps([154,142,143,1,15,3,6,8,16,9,155,156,29,21,28,30,19,20,22,77,62]),import.meta.url)),sa=D(()=>A(()=>import("./entry-RichTextItemsCentered-bxu7cUylr5.js"),__vite__mapDeps([157,143,1,15,3,6,8,16,9,19,20,21,22,145,142,77,62]),import.meta.url)),ra=D(()=>A(()=>import("./entry-MediaItemsCentered-7K0nzkyUoL.js"),__vite__mapDeps([158,143,1,15,3,6,8,16,9,142,17,77,62]),import.meta.url)),la=D(()=>A(()=>import("./entry-StoryCardCarousel-CljVQYQQDb.js"),__vite__mapDeps([159,142,143,1,15,3,6,8,16,9,144,19,20,21,22,145,35,17,146,111,29,64,30,160]),import.meta.url)),Ge=V`query pageContent($basketId: String!, $contentKey: String) {
	contentful {
		entries(contentType: "page", contentKey: $contentKey)
	}
	shop(basketId: $basketId) {
		id
		basket {
			id
			hasFreeCredits
			items {
				totalCount
				values {
					id
					basketItemType
				}
			}
			credits {
				values {
					id
					applied
					available
					creditType
					promoFund {
						id
					}
				}
			}
		}
		lendingRewardOffered
	}
	my {
		id
		userAccount {
			id
		}
	}
}`,He=V`query basketItemsQuery(
	$basketId: String!,
) {
	shop(basketId: $basketId) {
		id
		lendingRewardOffered
		nonTrivialItemCount
		basket {
			id
			hasFreeCredits
			items {
				totalCount
				values {
					basketItemType
					creditsUsed {
						amount
						applied
						available
						creditType
						id
						promoFund {
							id
							displayName
							displayDescription
						}
					}
					id
					price
					... on LoanReservation {
						expiryTime
						isEndingSoon
						donateRepayments
						loan {
							id
							name
							use
							status
							matchingText
							loanAmount
							plannedExpirationDate
							sector {
								id
								name
							}
							activity {
								id
								name
							}
							geocode {
								country {
									id
									name
									isoCode
								}
							}
							loanFundraisingInfo {
								id
								isExpiringSoon
								fundedAmount
								reservedAmount
							}
							image {
								id
								url: url (presetSize: loan_thumbnail)
								url_2x: url (presetSize: loan_thumbnail_retina)
							}
							... on LoanDirect {
								sponsor_name: trusteeName
							}
							... on LoanPartner {
								sponsor_name: partnerName
							}
						}
						team {
							id
							name
						}
					}
					... on Donation {
						isTip
						isUserEdited
					}
					... on KivaCard {
						id
						price
						idsInGroup
						quantity
						individualPrice
						kivaCardObject {
							deliveryType
							recipient {
								name
								email
								scheduledDeliveryDate
							}
							mailingInfo {
								firstName
								lastName
								address
								city
								state
								zip
							}
						}
					}
				}
			}
			credits {
				values {
					id
					applied
					available
					creditType
					promoFund {
						id
						displayName
						displayDescription
					}
				}
			}
			totals {
				bonusAppliedTotal
				bonusAvailableTotal
				creditAmountNeeded
				creditAppliedTotal
				creditAvailableTotal
				donationTotal
				itemTotal
				freeTrialAppliedTotal
				freeTrialAvailableTotal
				kivaCardTotal
				kivaCreditAvailableTotal
				kivaCreditAppliedTotal
				kivaCreditRemaining
				kivaCreditToReapply
				loanReservationTotal
				redemptionCodeAppliedTotal
				redemptionCodeAvailableTotal
				universalCodeAppliedTotal
				universalCodeAvailableTotal
			}
		}
	}
}`,Tl=V`query myTeamsQuery {
	my {
		id
		lender {
			id
			teams(limit: 100) {
				values {
					id
					name
				}
			}
		}
	}
}`,Nl=t=>{switch(t){case"mlCampaignHero":return Yt;case"mlLoanDisplay":return Xt;case"frequentlyAskedQuestions":return oa;case"cardRow":return ea;case"centeredRichText":return ta;case"dynamicHeroClassic":return aa;case"heroWithCarousel":return ia;case"loansByCategoryCarousel":return na;case"richTextItemsCentered":return sa;case"mediaItemsCentered":return ra;case"storyCardCarousel":return la;default:return null}},ze=t=>{var a,o;return(((o=(a=t==null?void 0:t.page)==null?void 0:a.pageLayout)==null?void 0:o.contentGroups)??[]).map(n=>({component:Nl(n.type),content:n})).filter(n=>typeof n.component=="object"&&n.component!==null)},We=t=>{var a,o,n;const e=((n=(o=(a=t==null?void 0:t.contentful)==null?void 0:a.entries)==null?void 0:o.items)==null?void 0:n[0])??null;return e?fa(e):{error:"Contentful entry not found"}},da={name:"CCLandingPage",inject:["apollo","cookieStore","kvAuth0"],components:{CampaignHero:Yt,CampaignHowKivaWorks:nn,CampaignJoinTeamForm:wn,CampaignLogoGroup:Cl,CampaignPartner:_l,CampaignStatus:Tt,CampaignThanks:wl,CampaignVerificationForm:En,DynamicHeroClassic:aa,FrequentlyAskedQuestions:oa,HeroWithCarousel:ia,InContextCheckout:kl,KvLightbox:fe,KvLoadingOverlay:we,LoanCardController:Ga,MediaItemsCentered:ra,WwwPageCorporate:De,VerifyRemovePromoCredit:Wt,CardRow:ea,CenteredRichText:ta,RichTextItemsCentered:sa,LoansByCategoryCarousel:na,CampaignLoanWrapper:Xt,StoryCardCarousel:la},mixins:[ee],props:{dynamicRoute:{type:String,default:""},formComplete:{type:String,default:""},lendingReward:{type:String,default:""},promoCode:{type:String,default:""},upc:{type:String,default:""}},data(){return{isClientReady:!1,rawPageData:null,pageData:null,hasFreeCredits:null,lendingRewardOffered:null,preventLightboxClose:!1,promoApplied:null,promoErrorMessage:null,promoData:null,filters:null,lastActiveLogin:0,myId:null,myTeams:[],activeLoginDuration:3600,currentTime:Date.now(),currentTimeInterval:null,loadingPromotion:!1,loans:[],basketTotals:{},basketLoans:[],initialBasketCredits:[],basketCredits:[],donations:[],kivaCards:[],totalCount:0,itemsInBasket:[],isVisitor:!0,offset:0,pageQuery:{page:"1"},showLoans:!1,checkoutVisible:!1,showVerification:!1,showTeamForm:!1,showThanks:!1,sortBy:"popularity",teamJoinStatus:null,transactionId:null,activeLoanDisplay:"rows",showLoanRows:!0,loanDetailsVisible:!1,detailedLoan:null,useMatcherAccountIds:!0,initialFilters:{},verificationSumbitted:!1,loadingPage:!1,showLoanDisplayToggle:!0,showVerifyRemovePromoCredit:!1,contentGroups:[],pageFrame:De,availableLoans:[],leftoverCreditAllocationLoanId:null,scrollToLoans:!1,basketUpdating:!1,basketBalancing:!1,lcaLoanPrice:0}},head(){return{title:`${this.pageTitle}`,meta:[{vmid:"description",name:"description",content:this.pageDescription}]}},apollo:{async preFetch(t,e,a){var o,n,i;return e.query({query:Ge,variables:{contentType:"page",contentKey:(i=(n=(o=a==null?void 0:a.route)==null?void 0:o.params)==null?void 0:n.dynamicRoute)==null?void 0:i.trim()}}).then(async({data:r})=>{const l=We(r);if(l.error)return Promise.reject({path:"/error",query:{error:l==null?void 0:l.error,error_description:"We could not find that page, please check the url and try again."}});const v=await ze(l);return Promise.all([...v.map(c=>c.component)])}).then(async r=>{const l=r.map(v=>v);return bl(l,e,a)})},preFetchVariables({route:t}){var e;return{contentType:"page",contentKey:(e=t==null?void 0:t.params)==null?void 0:e.dynamicRoute}},variables(){return{contentType:"page",contentKey:this.$route.params.dynamicRoute}}},created(){var n,i,r,l,v,c,u,p,g,f,C,S,I,M,P;let t={};t=this.apollo.readQuery({query:Ge,variables:{contentType:"page",contentKey:(n=this.$route.params.dynamicRoute)==null?void 0:n.trim(),basketId:this.cookieStore.get("kvbskt")}}),this.rawPageData=t;const e=((l=(r=(i=t==null?void 0:t.contentful)==null?void 0:i.entries)==null?void 0:r.items)==null?void 0:l[0])??null;this.pageData=e?ga(e):null,this.lendingRewardOffered=((v=t==null?void 0:t.shop)==null?void 0:v.lendingRewardOffered)??!1,this.hasFreeCredits=((u=(c=t==null?void 0:t.shop)==null?void 0:c.basket)==null?void 0:u.hasFreeCredits)??!1,this.initialBasketCredits=((f=(g=(p=t==null?void 0:t.shop)==null?void 0:p.basket)==null?void 0:g.credits)==null?void 0:f.values)??[];const a=((I=(S=(C=t==null?void 0:t.shop)==null?void 0:C.basket)==null?void 0:S.items)==null?void 0:I.values)??[];this.itemsInBasket=a.length?a.map($=>$.id):[],this.isVisitor=!((P=(M=t==null?void 0:t.my)==null?void 0:M.userAccount)!=null&&P.id);const o=We(t);this.contentGroups=ze(o),this.pageQuery=this.$route.query,this.loadingPromotion=!0,this.loadingPage=a.some($=>$.__typename==="LoanReservation"),Pa.on("jumpToLoans",()=>{this.jumpToLoans()})},async mounted(){var t;this.isClientReady=typeof window<"u",await this.verifyOrApplyPromotion(),this.contentfulLoanDisplaySetting!==null&&(this.contentfulLoanDisplaySetting.default==="grid"&&this.handleLoanDisplayType(!1),this.contentfulLoanDisplaySetting.hideToggle&&(this.showLoanDisplayToggle=!1)),La().then(()=>{this.currentTimeInterval=setInterval(()=>{this.currentTime=Date.now()},1e3)}),this.setAuthStatus(((t=this.kvAuth0)==null?void 0:t.user)??{})},beforeUnmount(){clearInterval(this.currentTimeInterval)},watch:{initialFilters(t){return typeof t=="object"&&Object.keys(t).length>0&&(this.filters=t),!1},checkoutVisible(t){t&&this.$kvTrackEvent("ManagedLendingCampaign","modal-show-in-context-checkout",this.isVisitor?"checkout-requires-login":"checkout-ready")},basketBalancing(){this.setCheckoutLoadingState()},basketUpdating(){this.setCheckoutLoadingState()}},computed:{campaignLoanWrapperProps(){return{filters:this.filters,initialFilters:this.initialFilters,excludedTags:this.excludedTags,initialSortBy:this.initialSortBy,activeLoanDisplay:this.activeLoanDisplay,showLoanDisplayToggle:this.showLoanDisplayToggle,totalCount:this.totalCount,handleUpdatedFilters:this.handleUpdatedFilters,handleUpdatedSortBy:this.handleUpdatedSortBy,handleLoanDisplayType:this.handleLoanDisplayType,handleResetLoanFilters:this.handleResetLoanFilters,showLoanRows:this.showLoanRows,isVisitor:this.isVisitor,itemsInBasket:this.itemsInBasket,promoOnlyQuery:this.promoOnlyQuery,showLoans:this.showLoans,sortBy:this.sortBy,handleAddToBasket:this.handleAddToBasket,setTotalCount:this.setTotalCount,showLoanDetails:this.showLoanDetails,checkoutVisible:this.checkoutVisible,showThanks:this.showThanks,handleUpdateAvailableLoans:this.handleUpdateAvailableLoans,promoAmount:b(this.promoAmount).format("0.00"),upcCreditRemaining:b(this.upcCreditRemaining).format("0.00"),remainingCredit:this.remainingCredit,basketLoans:this.basketLoans,promoName:this.campaignPartnerName,removeLoanFromBasket:this.removeLoanFromBasket,showBasket:this.showBasket,isMatchingCampaign:this.isMatchingCampaign}},pageSettingData(){var o,n;const a=(((n=(o=this.pageData)==null?void 0:o.page)==null?void 0:n.settings)??[]).map(i=>i.dataObject||{}).reduce((i,r)=>({...i,...r}),{});return a.enableBlankTargetLinks===void 0&&(a.enableBlankTargetLinks=!0),a},pageTitle(){var a,o,n,i,r;const t=(n=(o=(a=this.pageData)==null?void 0:a.page)==null?void 0:o.pageLayout)==null?void 0:n.pageTitle,e=((r=(i=this.pageData)==null?void 0:i.page)==null?void 0:r.pageTitle)??"Loans that change lives";return t||e},pageDescription(){var a,o,n,i,r;const t=(n=(o=(a=this.pageData)==null?void 0:a.page)==null?void 0:o.pageLayout)==null?void 0:n.pageDescription,e=((r=(i=this.pageData)==null?void 0:i.page)==null?void 0:r.pageDescription)??void 0;return t||e},heroAreaContent(){var t,e,a,o,n,i;return((a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.dynamicHeroClassic)||((i=(n=(o=this.pageData)==null?void 0:o.page)==null?void 0:n.contentGroups)==null?void 0:i.mlCampaignHero)},hasCampaignHero(){var t,e,a;return typeof((a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.mlCampaignHero)<"u"},hasCenteredRichText(){var t,e,a;return typeof((a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.centeredRichText)<"u"},centeredRichTextContent(){var t,e,a;return(a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.centeredRichText},hasRichTextItemsCentered(){var t,e,a;return typeof((a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.richTextItemsCentered)<"u"},richTextItemsCenteredContent(){var t,e,a;return(a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.richTextItemsCentered},hasKivaClassicHowKivaWorks(){return this.hasRichTextItemsCentered&&this.hasCenteredRichText},hasOldCampaignHowKivaWorks(){return!this.hasRichTextItemsCentered||!this.hasCenteredRichText},hasDynamicHeroClassic(){var t,e,a;return typeof((a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.dynamicHeroClassic)<"u"},partnerAreaContent(){var t,e,a;return(a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.mlCampaignPartnerCopy},partnerThanksContent(){var t,e,a;return(a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.mlCampaignThanks},promoAmount(){var t;return this.prioritizedTargetCampaignCredit?((t=this.prioritizedTargetCampaignCredit)==null?void 0:t.available)??"0":"0"},prioritizedBasketCredits(){const t=this.basketCredits.length?this.basketCredits:this.initialBasketCredits;if(!t.length)return t;const e=["universal_code","redemption_code","bonus_credit","kiva_credit"],a=t.map(o=>o);return a.sort(ha(e,"creditType")),a},prioritizedTargetCampaignCredit(){var t;if((t=this.pageSettingData)!=null&&t.promoFundId){const e=this.basketCredits.filter(a=>{var o,n;return((o=a.promoFund)==null?void 0:o.id)===((n=this.pageSettingData)==null?void 0:n.promoFundId)});return e.length?e[0]:null}return this.prioritizedBasketCredits.length?this.prioritizedBasketCredits[0]:null},initialSortBy(){var t,e,a;return((a=(e=(t=this.promoData)==null?void 0:t.managedAccount)==null?void 0:e.loanSearchCriteria)==null?void 0:a.sortBy)??"popularity"},excludedTags(){var t;return((t=this.pageSettingData)==null?void 0:t.excludedTags)??[]},isMatchingCampaign(){var t;return((t=this.pageSettingData)==null?void 0:t.matcherAccountId)!==void 0},contentfulLoanDisplaySetting(){var t;return((t=this.pageSettingData)==null?void 0:t.loanDisplay)??null},contentfulPageId(){var t,e;return((e=(t=this.promoData)==null?void 0:t.managedAccount)==null?void 0:e.pageid)??null},campaignPartnerName(){var e,a,o,n,i;if(this.isMatchingCampaign)return((e=this.pageSettingData)==null?void 0:e.matchingAccountName)??null;const t=((o=(a=this.promoData)==null?void 0:a.promoFund)==null?void 0:o.displayName)??null;return((i=(n=this.prioritizedTargetCampaignCredit)==null?void 0:n.promoFund)==null?void 0:i.displayName)??t},verificationRequired(){var t,e,a,o;return!!((e=(t=this.promoData)==null?void 0:t.managedAccount)!=null&&e.isEmployee&&((o=(a=this.promoData)==null?void 0:a.managedAccount)!=null&&o.formId)&&!this.promoGuestCheckoutEnabled)},usesDynamicContentfulRendering(){var t;return(t=this.pageSettingData)==null?void 0:t.dynamicRendering},promoGuestCheckoutEnabled(){var t;return((t=this.pageSettingData)==null?void 0:t.guestCheckoutEnabled)??!1},isEmployee(){var t,e;return((e=(t=this.promoData)==null?void 0:t.managedAccount)==null?void 0:e.isEmployee)??!1},externalFormId(){var t,e;return((e=(t=this.promoData)==null?void 0:t.managedAccount)==null?void 0:e.formId)??null},managedAccountId(){var t,e;return((e=(t=this.promoData)==null?void 0:t.managedAccount)==null?void 0:e.id)??null},promoFund(){var t;return((t=this.promoData)==null?void 0:t.promoFund)??null},promoFundId(){var t,e;return((e=(t=this.promoData)==null?void 0:t.promoFund)==null?void 0:e.id)??null},promoOnlyQuery(){return null},teamId(){var t,e;return((e=(t=this.promoData)==null?void 0:t.promoGroup)==null?void 0:e.teamId)??null},corporateLogoUrl(){var t,e,a,o,n,i,r;return(r=(i=(n=(o=(a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.mlCampaignLogo)==null?void 0:o.media)==null?void 0:n[0])==null?void 0:i.file)==null?void 0:r.url},logoHeight(){var t,e,a,o,n,i,r;return String((r=(i=(n=(o=(a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.mlCampaignLogo)==null?void 0:o.contents)==null?void 0:n[0])==null?void 0:i.dataObject)==null?void 0:r.logoHeight)},logoClasses(){var t,e,a,o,n,i,r;return(r=(i=(n=(o=(a=(e=(t=this.pageData)==null?void 0:t.page)==null?void 0:e.contentGroups)==null?void 0:a.mlCampaignLogo)==null?void 0:o.contents)==null?void 0:n[0])==null?void 0:i.dataObject)==null?void 0:r.logoClasses},hideStatusBar(){var t;return((t=this.pageSettingData)==null?void 0:t.hideStatusBar)??!1},statusMessageOverride(){var t;return((t=this.pageSettingData)==null?void 0:t.statusMessageOverride)??null},hasRedemptionCode(){var t;return((t=this.basketTotals)==null?void 0:t.redemptionCodeAppliedTotal)!=="0.00"},hasUPCCode(){var t;return((t=this.basketTotals)==null?void 0:t.universalCodeAppliedTotal)!=="0.00"},upcCreditRemaining(){return this.basketTotals.universalCodeAvailableTotal-this.basketTotals.itemTotal},hasBonusCredit(){var t;return((t=this.basketTotals)==null?void 0:t.bonusAppliedTotal)!=="0.00"},activeCreditType(){return this.hasRedemptionCode?"redemption_code":this.hasUPCCode?"universal_code":this.hasBonusCredit?"bonus_credit":this.lendingRewardOffered?"lending_reward":null},remainingCredit(){var e,a,o,n,i,r,l,v,c,u,p,g;let t=0;if(((e=this.basketTotals)==null?void 0:e.redemptionCodeAvailableTotal)!=="0.00"){const f=b(((a=this.basketTotals)==null?void 0:a.redemptionCodeAvailableTotal)??0),C=b(((o=this.basketTotals)==null?void 0:o.redemptionCodeAppliedTotal)??0);t=f.difference(C.value())}else if(((n=this.basketTotals)==null?void 0:n.universalCodeAvailableTotal)!=="0.00"){const f=b(((i=this.basketTotals)==null?void 0:i.universalCodeAvailableTotal)??0),C=b(((r=this.basketTotals)==null?void 0:r.universalCodeAppliedTotal)??0);t=f.difference(C.value())}else if(((l=this.basketTotals)==null?void 0:l.bonusAvailableTotal)!=="0.00"){const f=b(((v=this.basketTotals)==null?void 0:v.bonusAvailableTotal)??0),C=b(((c=this.basketTotals)==null?void 0:c.bonusAppliedTotal)??0);t=f.difference(C.value())}else if(((u=this.basketTotals)==null?void 0:u.creditAvailableTotal)!=="0.00"){const f=b(((p=this.basketTotals)==null?void 0:p.creditAvailableTotal)??0),C=b(((g=this.basketTotals)==null?void 0:g.creditAppliedTotal)??0);t=f.difference(C.value())}return t}},methods:{async verifyOrApplyPromotion(){const t=["upc","promoCode","lendingReward"];Object.keys(this.$route.query).filter(a=>t.includes(a)).length?await this.applyPromotion():this.hasFreeCredits||this.lendingRewardOffered||this.isMatchingCampaign?await this.getPromoInformationFromBasket():(this.promoApplied=!1,this.loadingPromotion=!1,await this.getPromoInformationFromBasket())},async applyPromotion(){await _i(this.$route.query,this.apollo).then(e=>{e.errors&&(this.promoErrorMessage=e.errors[0].message,this.promoApplied=!1),this.getPromoInformationFromBasket()}).catch(e=>{E(e,"error"),this.promoErrorMessage=e,this.loadingPromotion=!1,this.promoApplied=!1})},async getPromoInformationFromBasket(){await this.apollo.query({fetchPolicy:"no-cache",query:He,variables:{basketId:this.cookieStore.get("kvbskt")}}).then(({data:e})=>{var n,i,r,l,v,c,u,p,g,f,C,S;if(typeof e.shop>"u")return console.error("missing shop basket"),!1;const a=((r=(i=(n=e.shop)==null?void 0:n.basket)==null?void 0:i.items)==null?void 0:r.values)??[];this.itemsInBasket=a.length?a.map(I=>I.id):[],this.lendingRewardOffered=((l=e.shop)==null?void 0:l.lendingRewardOffered)??!1,this.basketCredits=((u=(c=(v=e.shop)==null?void 0:v.basket)==null?void 0:c.credits)==null?void 0:u.values)||[],this.hasFreeCredits=((g=(p=e.shop)==null?void 0:p.basket)==null?void 0:g.hasFreeCredits)??!1;const o=((f=this.pageSettingData)==null?void 0:f.promoFundId)??((S=(C=this.prioritizedTargetCampaignCredit)==null?void 0:C.promoFund)==null?void 0:S.id)??null;return wi(o,this.apollo)}).then(e=>{var o,n,i,r,l,v,c,u,p,g,f,C,S,I,M,P,$,te,ae,ie,J,q,Ne,Ie,Se,Le,Fe;const a=((r=(i=(n=(o=e.data)==null?void 0:o.shop)==null?void 0:n.promoCampaign)==null?void 0:i.managedAccount)==null?void 0:r.managementType)==="lending_reward";this.verifyPromoMatchesPageId((u=(c=(v=(l=e.data)==null?void 0:l.shop)==null?void 0:v.promoCampaign)==null?void 0:c.managedAccount)==null?void 0:u.pageId)?(this.promoData=(g=(p=e.data)==null?void 0:p.shop)==null?void 0:g.promoCampaign,((C=(f=this.prioritizedTargetCampaignCredit)==null?void 0:f.promoFund)==null?void 0:C.id)===((P=(M=(I=(S=e.data)==null?void 0:S.shop)==null?void 0:I.promoCampaign)==null?void 0:M.promoFund)==null?void 0:P.id)&&(this.promoApplied=!0,this.promoErrorMessage=null),a&&((ie=(ae=(te=($=e.data)==null?void 0:$.shop)==null?void 0:te.promoCampaign)==null?void 0:ae.promoFund)!=null&&ie.id)&&(this.promoApplied=!0,this.promoErrorMessage=null),this.promoApplied=!0):((q=(J=this.prioritizedTargetCampaignCredit)==null?void 0:J.promoFund)==null?void 0:q.id)===((Le=(Se=(Ie=(Ne=e.data)==null?void 0:Ne.shop)==null?void 0:Ie.promoCampaign)==null?void 0:Se.promoFund)==null?void 0:Le.id)?(this.promoApplied=!0,this.promoErrorMessage=null):this.isMatchingCampaign?this.promoApplied=!0:this.promoApplied=!1,this.loadingPromotion=!1,this.setInitialFilters(),this.showLoans=!0,this.setAuthStatus((Fe=this.kvAuth0)==null?void 0:Fe.user),this.updateBasketState()})},setInitialFilters(){var n,i,r,l;let t=Li();const e=((r=(i=(n=this.promoData)==null?void 0:n.managedAccount)==null?void 0:i.loanSearchCriteria)==null?void 0:r.filters)??null;!this.loadingPromotion&&e&&(t=e);const a=$e(t);let o=((l=this.pageSettingData)==null?void 0:l.matcherAccountId)??null;o&&typeof o=="number"&&(o=[o]),this.useMatcherAccountIds&&o&&o.length&&(a.matcherAccountId=o),a.status="fundraising",this.initialFilters=a},handleAddToBasket(t){t.eventSource==="checkoutBtnClick"?this.loanDetailsVisible=!1:this.initializeBasketRefresh()},handleCreditRemoved(){this.showVerification=!1,this.$router.push(this.$route.path),this.promoApplied=!1,this.refreshTotals(),this.verificationComplete()},refreshTotals(){this.initializeBasketRefresh()},setCheckoutLoadingState(){var e;const t=this.basketBalancing||this.basketUpdating;(e=this.$refs.inContextCheckoutRef)==null||e.setUpdatingTotals(t)},initializeBasketRefresh(){this.updateBasketState()},updateBasketState(){this.$refs.inContextCheckoutRef&&(this.basketUpdating=!0);const t=decodeURIComponent(this.cookieStore.get("kvbskt"));this.apollo.query({query:He,variables:{basketId:t},fetchPolicy:"no-cache"}).then(({data:a})=>{var n,i,r,l,v,c,u,p,g;this.validatePromoBasketState(a);const o=((r=(i=(n=a.shop)==null?void 0:n.basket)==null?void 0:i.items)==null?void 0:r.values)??[];this.itemsInBasket=o.length?o.map(f=>f.id):[],this.basketCredits=((c=(v=(l=a.shop)==null?void 0:l.basket)==null?void 0:v.credits)==null?void 0:c.values)??[],this.hasFreeCredits=((p=(u=a.shop)==null?void 0:u.basket)==null?void 0:p.hasFreeCredits)??!1,this.lendingRewardOffered=((g=a.shop)==null?void 0:g.lendingRewardOffered)??!1})},validatePromoBasketState(t){var c,u,p,g,f;this.basketTotals=((u=(c=t.shop)==null?void 0:c.basket)==null?void 0:u.totals)??{};const{creditAmountNeeded:e,creditAvailableTotal:a,creditAppliedTotal:o,donationTotal:n,itemTotal:i,loanReservationTotal:r}=this.basketTotals;let l="";b(n).value()>0&&(l="There is a donation present on the basket."),b(e).value()>0&&(l="Additional credit or funds are needed to complete the transaction"),b(o).value()!==b(r).value()&&(l="Promo Credit applied does not match loan reservation total"),b(i).value()!==b(r).value()&&(l="Item total does not match loan reservation total"),b(a).value()!==b(r).value()&&(l="Credit available total does not match loan reservation total.");const v=((f=(g=(p=t.shop)==null?void 0:p.basket)==null?void 0:g.items)==null?void 0:f.values)??[];this.basketLoans=v.filter(C=>C.__typename==="LoanReservation"),this.basketLoans.forEach(C=>{if(C.id===this.leftoverCreditAllocationLoanId){const S=this.cookieStore.get("lcaid");this.leftoverCreditAllocationLoanId!==S&&this.cookieStore.set("lcaid",this.leftoverCreditAllocationLoanId)}}),this.donations=v.filter(C=>C.__typename==="Donation"),this.kivaCards=v.filter(C=>C.__typename==="KivaCard"),l&&this.basketLoans.length&&console.log(l),this.validateBasket().then(C=>{var S;C!==!0&&console.error(C),this.setAuthStatus(((S=this.kvAuth0)==null?void 0:S.user)??{}),this.basketBalancing=!0,this.basketUpdating=!1,this.balanceLeftoverCredits()}).catch(C=>{console.error(C)}).finally(()=>{this.loadingPage=!1,this.$route.hash==="#show-basket"&&this.showBasket()})},showBasket(){this.$router.push(this.adjustRouteHash("#show-basket")).catch(()=>{}),!this.isVisitor&&this.verificationRequired&&this.externalFormId&&!this.verificationSumbitted&&this.basketLoans.length?(this.showVerification=!0,this.checkoutVisible=!1,this.$kvTrackEvent("ManagedLendingCampaign","modal-campaign-verification-initialized")):this.basketLoans.length&&!this.isVisitor&&this.teamId&&!this.teamJoinStatus?(this.showTeamForm=!0,this.checkoutVisible=!1,this.$kvTrackEvent("ManagedLendingCampaign","modal-team-join-initialized")):this.checkoutVisible=!0},amountLeftOnLoan(t){const e=(t==null?void 0:t.loanFundraisingInfo)??{fundedAmount:0,reservedAmount:0},{fundedAmount:a,reservedAmount:o}=e;return b(t.loanAmount).subtract(a).subtract(o).value()},allocateLeftoverCredits(t){const e=t;let a=e.loanIdx?e.loanIdx:0;for(;(this.itemsInBasket.indexOf(this.availableLoans.values[a].id)>-1||e.lendAmount>this.amountLeftOnLoan(this.availableLoans.values[a]))&&(a+=1,a!==this.availableLoans.length-1););const o=this.availableLoans.values[a].id;Ae({amount:e.lendAmount,apollo:this.apollo,loanId:o}).then(()=>{this.handleAddToBasket({loanId:o,success:!0}),this.leftoverCreditAllocationLoanId=o,this.basketBalancing=!1}).catch(n=>{E(`Failed to add loan with id ${o} to basket`,"error");let i="There was a problem adding the loan to your basket";switch(n[0].extensions.code){case"reached_anonymous_basket_limit":i=n[0].message,this.$showTipMsg(i,"error");break;case"no_shares_added_regular_xb":i=n[0].message,a+=1,e.loanIdx=a,this.allocateLeftoverCredits(e);break;default:this.$showTipMsg(i,"error")}this.basketBalancing=!1})},updateBasketItem(t){const{loanId:e}=t;Ae({amount:t.lendAmount,apollo:this.apollo,loanId:t.loanId}).then(()=>{this.updateBasketState(),t.lendAmount===0?this.completeRemoveLeftoverCreditAllocationBasketItem():(this.handleAddToBasket({loanId:e,success:!0}),this.leftoverCreditAllocationLoanId=e),this.basketBalancing=!1}).catch(a=>{let o=!1;E(`Failed to update loan price to $${t.lendAmount} for loan with id ${e}`,"error");let n="There was a problem updating a loan in your basket";switch(a[0].extensions.code){case"reached_anonymous_basket_limit":n=a[0].message,this.$showTipMsg(n,"error");break;case"no_shares_added_regular_xb":n=a[0].message;break;case"not_all_shared_added":o=!0,n=a[0].message;break;default:this.$showTipMsg(n,"error")}typeof window<"u"&&o&&window.setTimeout(window.location.reload(),8e3),this.basketBalancing=!1})},completeRemoveLeftoverCreditAllocationBasketItem(){this.$closeTipMsg(),this.trackLeftoverCreditAllocationItemRemoved(),this.refreshTotals(),this.updateBasketState(),this.basketBalancing=!1},trackLeftoverCreditAllocationItemRemoved(){const t="basket";let e="Update Loan Amount",a="Loan Removed";this.type==="kivaCard"&&(e="Update Kiva Card Amount",a="Kiva Card Removed"),this.$kvTrackEvent(t,e,a)},async balanceLeftoverCredits(){this.basketBalancing=!0;const t=this.cookieStore.get("lcaid");if(t){const e=this.basketLoans.find(a=>String(a==null?void 0:a.id)===t);if(e!=null&&e.price){let a=parseFloat(e.price)+parseFloat(this.upcCreditRemaining);this.upcCreditRemaining!==0&&(a<0&&(a=0),this.updateBasketItem({loanId:Number(t),lendAmount:a}),this.lcaLoanPrice===0&&this.cookieStore.remove("lcaid")),this.lcaLoanPrice=Number(a)}else this.cookieStore.remove("lcaid");this.basketBalancing=!1}else this.upcCreditRemaining>0&&this.checkoutVisible?this.allocateLeftoverCredits({lendAmount:this.upcCreditRemaining}):this.basketBalancing=!1},async checkoutLightboxClosed(){var t;this.checkoutVisible=!1,((t=this.$router)==null?void 0:t.hash)!==""&&await this.$router.push(this.adjustRouteHash("")).catch(()=>{}),this.handleScrollPosition()},getLoanSectionRef(){var e,a,o;const t=this.$refs;return((e=t==null?void 0:t.mlLoanDisplay)==null?void 0:e.$refs)||((o=(a=t==null?void 0:t.mlLoanDisplay)==null?void 0:a[0])==null?void 0:o.$refs)},handleScrollPosition(t){var e,a;this.scrollToLoans?(a=(e=this.getLoanSectionRef())==null?void 0:e.campaignLoanSection)==null||a.scrollIntoView({behavior:"smooth"}):typeof t<"u"&&window.scrollTo(0,t)},transactionComplete(t){this.transactionId=t.transactionId,this.showThanks=!0,this.checkoutLightboxClosed(),qi(t.transactionId,this.apollo,this.cookieStore),Va({apollo:this.apollo,cookieStore:this.cookieStore}).then(e=>{e&&this.getPromoInformationFromBasket()})},thanksLightboxClosed(){window.location=window.location.origin+window.location.pathname},handleLoanDisplayType(t){this.showLoans=!1,this.showLoanRows=t,this.activeLoanDisplay=t?"rows":"grid",this.$nextTick(()=>{this.showLoans=!0})},handleTeamJoinProcess(t){this.teamJoinStatus=t.join,this.$kvTrackEvent("ManagedLendingCampaign","modal-join-team-process",`${this.teamJoinStatus} team`),this.fetchMyTeams()},fetchMyTeams(){this.apollo.query({fetchPolicy:"network-only",query:Tl}).then(({data:t})=>{var e,a,o;this.myTeams=((o=(a=(e=t.my)==null?void 0:e.lender)==null?void 0:a.teams)==null?void 0:o.values)??[],this.teamJoinStatus!=="declined"&&this.addTeamToLoans()}),this.showBasket()},addTeamToLoans(){if(this.basketLoans.length&&this.teamId){const t=[];this.basketLoans.forEach((e,a)=>{t[a]=this.apollo.mutate({mutation:yt,variables:{teamId:this.teamId,loanId:e.id}})}),Promise.all(t).then(()=>{this.updateBasketState()})}},verificationComplete(){this.verificationSumbitted=!0,this.showBasket();let t="Verification should have completed";this.promoApplied||(t="Verification may have failed or lender opted out"),this.$kvTrackEvent("ManagedLendingCampaign","modal-campaign-verification-complete",t)},handleVerificationOptOut(){this.showVerification=!1,this.showVerifyRemovePromoCredit=!0},handleCancelPromoOptOut(){this.showVerifyRemovePromoCredit=!1,this.showBasket()},verifyPromoMatchesPageId(t){var a,o,n,i;const e=t||((o=(a=this.promoData)==null?void 0:a.managedAccount)==null?void 0:o.pageId);return((i=(n=this.$route)==null?void 0:n.params)==null?void 0:i.dynamicRoute)===e},checkInitialFiltersAgainstAppliedFilters(){return JSON.stringify(this.initialFilters)===JSON.stringify(this.filters)},setAuthStatus(t){typeof t<"u"&&t!==null&&(this.lastActiveLogin=t["https://www.kiva.org/last_login"]||0,this.myId=t["https://www.kiva.org/kiva_id"]||null)},jumpToLoans(){this.scrollToLoans=!0,this.checkoutLightboxClosed()},adjustRouteHash(t){const e={...this.$route};return e.hash=t,e},handleUpdatedFilters(t){this.filters=$e(t)},handleResetLoanFilters(){this.filters=this.initialFilters},handleUpdatedSortBy(t){t&&this.sortBy!==t&&(this.sortBy=t)},setTotalCount(t){this.totalCount=t,t===0&&this.isMatchingCampaign&&this.checkInitialFiltersAgainstAppliedFilters()&&(this.useMatcherAccountIds=!1,this.setInitialFilters())},handleUpdateAvailableLoans(t){this.availableLoans=t},showLoanDetails(t){this.detailedLoan=t,this.loanDetailsVisible=!0},removeLoanFromBasket(t){this.updateBasketItem({loanId:Number(t),lendAmount:0})}},beforeRouteUpdate(t,e,a){this.refreshTotals(),a()}},Il={class:"corporate-campaign-landing"},Sl={key:1},Ll={key:2};function Fl(t,e,a,o,n,i){const r=h("campaign-status"),l=h("campaign-hero"),v=h("dynamic-hero-classic"),c=h("campaign-loan-wrapper"),u=h("campaign-partner"),p=h("campaign-how-kiva-works"),g=h("centered-rich-text"),f=h("rich-text-items-centered"),C=h("campaign-join-team-form"),S=h("campaign-verification-form"),I=h("verify-remove-promo-credit"),M=h("loan-card-controller"),P=h("kv-lightbox"),$=h("in-context-checkout"),te=h("campaign-logo-group"),ae=h("campaign-thanks"),ie=h("www-page-corporate");return s(),T(ie,{"corporate-logo-url":i.corporateLogoUrl,"logo-height":i.logoHeight,"logo-classes":i.logoClasses,onShowBasket:i.showBasket},{default:N(()=>[m("div",Il,[i.hideStatusBar?k("",!0):(s(),T(r,{key:0,class:"corporate-campaign-landing__status tw-sticky tw-z-2","active-credit-type":i.activeCreditType,"is-matching":i.isMatchingCampaign,"loading-promotion":n.loadingPromotion,"promo-error-message":n.promoErrorMessage,"promo-applied":n.promoApplied,"promo-amount":i.promoAmount,"promo-name":i.campaignPartnerName,"status-message-override":i.statusMessageOverride},null,8,["active-credit-type","is-matching","loading-promotion","promo-error-message","promo-applied","promo-amount","promo-name","status-message-override"])),i.usesDynamicContentfulRendering?k("",!0):(s(),d("div",Sl,[i.hasCampaignHero?(s(),T(l,{key:0,"hero-area-content":i.heroAreaContent,"page-setting-data":i.pageSettingData,onAddToBasket:i.handleAddToBasket,onJumpToLoans:i.jumpToLoans},null,8,["hero-area-content","page-setting-data","onAddToBasket","onJumpToLoans"])):k("",!0),i.hasDynamicHeroClassic?(s(),T(v,{key:1,content:i.heroAreaContent,"page-setting-data":i.pageSettingData},null,8,["content","page-setting-data"])):k("",!0),_(c,{ref:"mlLoanDisplay","component-props":i.campaignLoanWrapperProps},null,8,["component-props"]),i.partnerAreaContent?(s(),d(x,{key:2},[_(u,{"partner-area-content":i.partnerAreaContent,"page-setting-data":i.pageSettingData},null,8,["partner-area-content","page-setting-data"]),e[1]||(e[1]=m("hr",null,null,-1))],64)):k("",!0),i.hasOldCampaignHowKivaWorks?(s(),T(p,{key:3,"is-matching-campaign":i.isMatchingCampaign},null,8,["is-matching-campaign"])):k("",!0),i.hasKivaClassicHowKivaWorks?(s(),T(g,{key:4,content:i.centeredRichTextContent},null,8,["content"])):k("",!0),i.hasKivaClassicHowKivaWorks?(s(),T(f,{key:5,content:i.richTextItemsCenteredContent},null,8,["content"])):k("",!0)])),i.usesDynamicContentfulRendering&&n.isClientReady?(s(),d("div",Ll,[(s(!0),d(x,null,K(n.contentGroups,({component:J,content:q})=>(s(),d("div",{key:q.key},[(s(),T(ka(J),{name:q.key,id:q.key,ref_for:!0,ref:q.type,content:q,"data-section-type":"contentful-section","component-props":i.campaignLoanWrapperProps},null,8,["name","id","content","component-props"]))]))),128))])):k("",!0),n.showTeamForm?(s(),T(C,{key:3,"campaign-name":i.campaignPartnerName,"team-id":i.teamId,"promo-id":i.promoFundId,onTeamProcessComplete:i.handleTeamJoinProcess},null,8,["campaign-name","team-id","promo-id","onTeamProcessComplete"])):k("",!0),n.showVerification?(s(),T(S,{key:4,"form-id":String(i.externalFormId),"ma-id":String(i.managedAccountId),"pf-id":String(i.promoFundId),"user-id":String(n.myId),onVerificationComplete:i.verificationComplete,onCampaignVerificationOptOut:i.handleVerificationOptOut},null,8,["form-id","ma-id","pf-id","user-id","onVerificationComplete","onCampaignVerificationOptOut"])):k("",!0),_(I,{visible:n.showVerifyRemovePromoCredit,"applied-promo-total":i.promoAmount,"promo-fund-display-name":i.campaignPartnerName,"active-credit-type":i.activeCreditType,onCreditRemoved:i.handleCreditRemoved,onPromoOptOutLightboxClosed:i.handleCancelPromoOptOut},null,8,["visible","applied-promo-total","promo-fund-display-name","active-credit-type","onCreditRemoved","onPromoOptOutLightboxClosed"]),_(P,{class:"loan-details-lightbox",visible:n.loanDetailsVisible,"no-padding-top":!0,"no-padding-bottom":!0,"no-padding-sides":!0,onLightboxClosed:e[0]||(e[0]=J=>n.loanDetailsVisible=!1),style:{"z-index":"1199 !important"}},{default:N(()=>[n.detailedLoan?(s(),T(M,{key:0,class:"campaign-loan-details","loan-card-type":"DetailedLoanCard",loan:n.detailedLoan,"items-in-basket":n.itemsInBasket,"enable-tracking":!0,"disable-redirects":!0,"is-visitor":n.isVisitor,onAddToBasket:i.handleAddToBasket},null,8,["loan","items-in-basket","is-visitor","onAddToBasket"])):k("",!0)],void 0,!0),_:1},8,["visible"]),n.checkoutVisible?(s(),T(P,{key:5,"prevent-close":n.preventLightboxClose,visible:n.checkoutVisible,onLightboxClosed:i.checkoutLightboxClosed,title:"You're almost there!",style:{"z-index":"1199 !important"}},{default:N(()=>[!i.hideStatusBar&&i.activeCreditType==="lending_reward"?(s(),T(r,{key:0,class:"corporate-campaign-landing__status--incontext collapse","active-credit-type":i.activeCreditType,"in-context":!0,"is-matching":i.isMatchingCampaign,"loading-promotion":n.loadingPromotion,"promo-error-message":n.promoErrorMessage,"promo-applied":n.promoApplied,"promo-amount":i.promoAmount,"promo-name":i.campaignPartnerName,"status-message-override":i.statusMessageOverride},null,8,["active-credit-type","is-matching","loading-promotion","promo-error-message","promo-applied","promo-amount","promo-name","status-message-override"])):k("",!0),_($,{class:"campaign-checkout","is-logged-in":!n.isVisitor,loans:n.basketLoans,"disable-redirects":!0,donations:n.donations,"kiva-cards":n.kivaCards,teams:n.myTeams,totals:n.basketTotals,"show-donation":i.isMatchingCampaign||n.lendingRewardOffered,"auto-redirect-to-thanks":!1,"promo-fund":i.promoFund,"promo-name":i.campaignPartnerName,"lca-loan-price":n.lcaLoanPrice,"custom-checkout-button-text":"Checkout","promo-fund-id":String(i.promoFundId),"managed-account-id":String(i.managedAccountId),"promo-guest-checkout-enabled":i.promoGuestCheckoutEnabled,onCreditRemoved:i.handleCreditRemoved,onTransactionComplete:i.transactionComplete,onRefreshtotals:i.refreshTotals,onJumpToLoans:i.jumpToLoans,ref:"inContextCheckoutRef"},null,8,["is-logged-in","loans","donations","kiva-cards","teams","totals","show-donation","promo-fund","promo-name","lca-loan-price","promo-fund-id","managed-account-id","promo-guest-checkout-enabled","onCreditRemoved","onTransactionComplete","onRefreshtotals","onJumpToLoans"])],void 0,!0),_:1},8,["prevent-close","visible","onLightboxClosed"])):k("",!0),n.showThanks?(s(),T(P,{key:6,class:"campaign-thanks","prevent-close":n.preventLightboxClose,visible:n.showThanks,onLightboxClosed:i.thanksLightboxClosed,style:{"z-index":"1199 !important"}},{default:N(()=>[_(te,{class:"campaign-thanks__logos","corporate-logo-url":i.corporateLogoUrl},null,8,["corporate-logo-url"]),!i.hideStatusBar&&n.hasFreeCredits&&i.campaignPartnerName?(s(),T(r,{key:0,class:"corporate-campaign-landing__status--incontext collapse","active-credit-type":i.activeCreditType,"in-context":!0,"is-matching":i.isMatchingCampaign,"loading-promotion":n.loadingPromotion,"promo-error-message":n.promoErrorMessage,"promo-applied":n.promoApplied,"promo-amount":i.promoAmount,"promo-name":i.campaignPartnerName,"status-message-override":i.statusMessageOverride},null,8,["active-credit-type","is-matching","loading-promotion","promo-error-message","promo-applied","promo-amount","promo-name","status-message-override"])):k("",!0),n.transactionId?(s(),T(ae,{key:1,"transaction-id":n.transactionId,"partner-content":i.partnerThanksContent,"promo-guest-checkout-enabled":i.promoGuestCheckoutEnabled},null,8,["transaction-id","partner-content","promo-guest-checkout-enabled"])):k("",!0)],void 0,!0),_:1},8,["prevent-close","visible","onLightboxClosed"])):k("",!0)])],void 0),_:1},8,["corporate-logo-url","logo-height","logo-classes","onShowBasket"])}const ma=L(da,[["render",Fl],["__scopeId","data-v-71a812f8"]]);da.__docgenInfo={displayName:"CCLandingPage",exportName:"default",description:"",tags:{},props:[{name:"dynamicRoute",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"formComplete",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"lendingReward",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"promoCode",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"upc",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],sourceFiles:["/home/runner/work/ui/ui/src/pages/LandingPages/CorporateCampaign/CCLandingPage.vue"]};const xl=""+new URL("loan-card-stack-BhPO7Qxx.jpg",import.meta.url).href,ua={name:"CampaignHero",components:{KvUiButton:G},emits:["jump-to-loans","add-to-basket"],props:{heroAreaContent:{type:Object,default:()=>{}},pageSettingData:{type:Object,default:()=>{}}},data(){return{loanCardStack:xl}},computed:{headline(){return this.heroAreaContent?this.heroAreaContent.contents[0].headline:""},bodyCopy(){return this.heroAreaContent?vi.documentToHtmlString(this.heroAreaContent.contents[0].bodyCopy):""},secondaryCtaText(){var t,e,a;return((a=(e=(t=this.heroAreaContent)==null?void 0:t.contents)==null?void 0:e[0])==null?void 0:a.primaryCtaText)||""},secondaryCtaLink(){var t,e,a;return((a=(e=(t=this.heroAreaContent)==null?void 0:t.contents)==null?void 0:e[0])==null?void 0:a.primaryCtaLink)||""}},methods:{jumpToLoans(){this.$emit("jump-to-loans")},handleAddToBasket(t){this.$emit("add-to-basket",t)}},async mounted(){await this.$nextTick(),pi(this.$refs.heroBodyCopy,this.pageSettingData)}},Al={class:"tw-py-4 md:tw-py-8"},Dl={class:"row align-center"},Vl={class:"small-12 medium-10 large-6 xlarge-5 columns"},Pl=["src","srcset"],El={class:"small-10 large-6 xlarge-7 align-self-middle columns"},$l={class:"tw-mb-4"},Ml=["innerHTML"],Rl={key:1,class:"tw-text-subhead tw-mb-4"},Bl={class:"tw-flex tw-flex-wrap tw-gap-2"};function Ol(t,e,a,o,n,i){const r=h("kv-ui-button"),l=O("kv-track-event");return s(),d("section",Al,[m("div",Dl,[m("div",Vl,[m("img",{class:"tw-block tw-mx-auto tw-mb-4 md:tw-mt-0",src:n.loanCardStack,srcset:`${n.loanCardStack} 2x`,alt:"",width:"383",height:"455"},null,8,Pl)]),m("div",El,[m("h1",$l,[i.headline?(s(),d(x,{key:0},[w(y(i.headline),1)],64)):(s(),d(x,{key:1},[e[0]||(e[0]=w(" Make a loan, ")),e[1]||(e[1]=m("br",null,null,-1)),e[2]||(e[2]=w(" change a life. "))],64))]),i.bodyCopy?(s(),d("div",{key:0,class:"tw-prose tw-text-subhead tw-mb-4",innerHTML:i.bodyCopy,ref:"heroBodyCopy"},null,8,Ml)):(s(),d("p",Rl," With Kiva you can lend as little as $25 and make a big change in someone's life. ")),m("div",Bl,[F((s(),T(r,{onClick:U(i.jumpToLoans,["prevent"])},{default:N(()=>e[3]||(e[3]=[w(" Find a borrower ")]),void 0),_:1,__:[3]},8,["onClick"])),[[l,["Campaign","click-hero-cta","Find a borrower"]]]),i.secondaryCtaLink&&i.secondaryCtaText?F((s(),T(r,{key:0,variant:"secondary",href:i.secondaryCtaLink,target:"_blank"},{default:N(()=>[w(y(i.secondaryCtaText),1)],void 0),_:1},8,["href"])),[[l,["Campaign","click-hero-secondary-cta",i.secondaryCtaText]]]):k("",!0)])])])])}const ca=L(ua,[["render",Ol]]);ua.__docgenInfo={displayName:"CampaignHero",exportName:"default",description:"",tags:{},props:[{name:"heroAreaContent",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}},{name:"pageSettingData",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}}],events:[{name:"jump-to-loans"},{name:"add-to-basket",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/CorporateCampaign/CampaignHero.vue"]};const jl=Object.freeze(Object.defineProperty({__proto__:null,default:ca},Symbol.toStringTag,{value:"Module"})),ql={title:"Page/CorporateCampaignLanding",component:ma,args:{heroAreaContent:{key:"promo-campaign-test-cg",name:"Promo Campaign Test Content Groups",contents:[{key:"header-area",name:"Test Campaign Title GCB",bodyCopy:{nodeType:"document",data:{},content:[{nodeType:"paragraph",content:[{nodeType:"text",value:`The Kate Spade New York Foundation is giving you a $25 credit to lend to an entrepreneur who inspires you.

`,marks:[],data:{}}],data:{}}]},headline:"Welcome to Kiva!",subHeadline:"__vue_devtool_undefined__",primaryCtaLink:"__vue_devtool_undefined__",primaryCtaKvTrackEvent:"__vue_devtool_undefined__",primaryCtaText:"__vue_devtool_undefined__"},{name:"COVID fund Homepage Promo Images",description:"Lend a hand from afar and join the global COVID-19 response. Take action",images:[{title:"hp-mg lg std",description:"Lend a hand from afar and join the global COVID-19 response. Take action",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/2F0fMUNds6qhAj6CyQ0kn4/360430aae71f90f2164625fbe5ce9d1e/Final_Homepage_lg_std.jpg",details:{size:87066,image:{width:1025,height:545}},fileName:"Final_Homepage_lg_std.jpg",contentType:"image/jpeg"}},{title:"hp-mg med std",description:"Lend a hand from afar and join the global COVID-19 response. Take action",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/4CZue28n9f0crCW7KdtmC3/62e687fdb3089ae04710b88db25b6da9/hp-mg_med_std.jpg",details:{size:73397,image:{width:680,height:675}},fileName:"hp-mg_med_std.jpg",contentType:"image/jpeg"}},{title:"hp-mg med retina",description:"Lend a hand from afar and join the global COVID-19 response. Take action",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/7xdmdw4GgKlUDRUSmvO5Iu/4ed7de5a67d27e2fbddb7f778dcb1317/hp-mg_med_retina.jpg",details:{size:122452,image:{width:1360,height:1350}},fileName:"hp-mg_med_retina.jpg",contentType:"image/jpeg"}},{title:"hp-mg lg retina",description:"Lend a hand from afar and join the global COVID-19 response. Take action",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/5H7wikO7DzKOEqnBBqric1/5ae2476c691165a4c400780b0857cb48/Final_Homepage_lg_retina.jpg",details:{size:167314,image:{width:2048,height:1090}},fileName:"Final_Homepage_lg_retina.jpg",contentType:"image/jpeg"}},{title:"hp-mg xl retina",description:"Lend a hand from afar and join the global COVID-19 response. Take action",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/5YzqkUttXksSAgaHuw9Cuv/23b7a0460c3616bf4f9e349631a5ab0a/hp-mg_xl_retina.jpg",details:{size:270653,image:{width:2880,height:1535}},fileName:"hp-mg_xl_retina.jpg",contentType:"image/jpeg"}},{title:"hp-mg xxl std",description:"Lend a hand from afar and join the global COVID-19 response. Take action",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/6zlivQBwWaw0XtJeYn8diS/c880e3eb4d5884ddc587742e6c010827/hp-mg_xxl_std.jpg",details:{size:148815,image:{width:1921,height:821}},fileName:"hp-mg_xxl_std.jpg",contentType:"image/jpeg"}},{title:"hp-mg xxl retina",description:"Lend a hand from afar and join the global COVID-19 response. Take action",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/1afYQ0d3JJDNbpet9oIr6J/2c21bba64857e54a1a936aa3d4783cbf/hp-mg_xxl_retina.jpg",details:{size:271004,image:{width:3840,height:1640}},fileName:"hp-mg_xxl_retina.jpg",contentType:"image/jpeg"}},{title:"hp-mg xl std",description:"Lend a hand from afar and join the global COVID-19 response. Take action",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/5tuiyeQcopJaHcUy3rDaTN/450b1136acedd6f218a2424ec4cfc5f9/hp-mp_xl_std.jpg",details:{size:137038,image:{width:1441,height:768}},fileName:"hp-mp_xl_std.jpg",contentType:"image/jpeg"}},{title:"hp-mg sm std",description:"Lend a hand from afar and join the global COVID-19 response. Take action",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/7alHPYp7xv7BUT5WLEieTz/e905db49ecfaa6ea102fe94f33c2555c/hp-mg_sm_std.jpg",details:{size:50791,image:{width:480,height:600}},fileName:"hp-mg_sm_std.jpg",contentType:"image/jpeg"}},{title:"hp-mg sm retina",description:"Lend a hand from afar and join the global COVID-19 response. Take action",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/1ykOTxkXIdoDTe8gZ6lRZ2/78faa1f3944065eb6780d20c32235c79/hp-mg_sm_retina.jpg",details:{size:96212,image:{width:960,height:1200}},fileName:"hp-mg_sm_retina.jpg",contentType:"image/jpeg"}}]}],media:[{title:"Kate Spade New York Foundation",description:"Test Campaign Logo",file:{url:"//images.ctfassets.net/j0p9a6ql0rn7/32l10iSqfimSCylspmRCoy/0a59fa708139543539abd90b24406be9/Screen_Shot_2020-09-22_at_11.13.26_AM.png",details:{size:91993,image:{width:854,height:264}},fileName:"Screen Shot 2020-09-22 at 11.13.26 AM.png",contentType:"image/png"}}]},activeCreditType:"Active Credit Type",inContext:!1,isMatching:!1,loadingPromotion:!1,promoErrorMessage:"",promoApplied:!0,promoAmount:"$25.00",promoName:"Kate Spade",statusMessageOverride:null},layout:"fullscreen"},Z=(t,{argTypes:e})=>({props:Object.keys(e),components:{CorporateCampaignLanding:ma},mixins:[ge(),ki()],template:`
        <div style="margin: 1rem;"><corporate-campaign-landing /></div>
    `}),Y=(t,{argTypes:e})=>({components:{CampaignHero:ca},props:Object.keys(e),mixins:[ge()],template:`
        <campaign-hero :hero-area-content="heroAreaContent" />
    `}),X=(t,{argTypes:e})=>({components:{CampaignStatus:Tt},props:Object.keys(e),mixins:[ge()],template:`
        <campaign-status
            :activeCreditType="activeCreditType"
            :inContext="inContext"
            :loading-promotion="loadingPromotion"
            :promo-error-message="promoErrorMessage"
            :promo-applied="promoApplied"
            :promo-amount="promoAmount"
            :promo-name="promoName"
            :statusMessageOverride="statusMessageOverride"
        />
    `});var Qe,Je,Ze;Z.parameters={...Z.parameters,docs:{...(Qe=Z.parameters)==null?void 0:Qe.docs,source:{originalSource:`(args, {
  argTypes
}) => ({
  props: Object.keys(argTypes),
  components: {
    CorporateCampaignLanding
  },
  mixins: [apolloStoryMixin(), cookieStoreStoryMixin()],
  template: \`
        <div style="margin: 1rem;"><corporate-campaign-landing /></div>
    \`
})`,...(Ze=(Je=Z.parameters)==null?void 0:Je.docs)==null?void 0:Ze.source}}};var Ye,Xe,et;Y.parameters={...Y.parameters,docs:{...(Ye=Y.parameters)==null?void 0:Ye.docs,source:{originalSource:`(args, {
  argTypes
}) => ({
  components: {
    CampaignHero
  },
  props: Object.keys(argTypes),
  mixins: [apolloStoryMixin()],
  template: \`
        <campaign-hero :hero-area-content="heroAreaContent" />
    \`
})`,...(et=(Xe=Y.parameters)==null?void 0:Xe.docs)==null?void 0:et.source}}};var tt,at,it;X.parameters={...X.parameters,docs:{...(tt=X.parameters)==null?void 0:tt.docs,source:{originalSource:`(args, {
  argTypes
}) => ({
  components: {
    CampaignStatus
  },
  props: Object.keys(argTypes),
  mixins: [apolloStoryMixin()],
  template: \`
        <campaign-status
            :activeCreditType="activeCreditType"
            :inContext="inContext"
            :loading-promotion="loadingPromotion"
            :promo-error-message="promoErrorMessage"
            :promo-applied="promoApplied"
            :promo-amount="promoAmount"
            :promo-name="promoName"
            :statusMessageOverride="statusMessageOverride"
        />
    \`
})`,...(it=(at=X.parameters)==null?void 0:at.docs)==null?void 0:it.source}}};const Ul=["Combined","Hero","StatusRow"],Hd=Object.freeze(Object.defineProperty({__proto__:null,Combined:Z,Hero:Y,StatusRow:X,__namedExportsOrder:Ul,default:ql},Symbol.toStringTag,{value:"Module"}));export{Hd as C,we as K,Gd as _};
