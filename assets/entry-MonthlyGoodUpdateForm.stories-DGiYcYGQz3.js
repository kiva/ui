import{n as d}from"./entry-numeral-DJCTM12wUX.js";import{r as y,m as p,a as v,u as we}from"./entry-index-vQcuSVWmLL.js";import{l as be}from"./entry-loan-group-categories-QOMAEKz4Qs.js";import{K as _e}from"./entry-KvCurrencyInput-CfnunDY3qP.js";import{E as Ve}from"./entry-mdi-BJHOrBfjV3.js";import{c as l,e as t,f as Me,d as s,n as c,a as m,K as h,J as se,b as xe,E as ke,r as u,o as i,H as Oe,I as De}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";import{w as $e}from"./entry-KvMaterialIcon-DcajXwg-0j.js";import"./entry-KvWwwHeader-CVdIzOPj6Q.js";import{J as Ae}from"./entry-KvTextInput-DOWiWB5Pob.js";import{L as Ce}from"./entry-KvSelect-DG6WmDJ0xC.js";import{_ as Ie}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-attrs-C2OODjD6EW.js";const fe={name:"MonthlyGoodUpdateForm",components:{KvMaterialIcon:$e,KvCurrencyInput:_e,KvSelect:Ce,KvTextInput:Ae},data(){return{form:{category:this.category,dayOfMonth:this.dayOfMonth,donation:this.donation,mgAmount:this.mgAmount},isDayInputShown:!1,mdiPencil:Ve}},setup(){return{v$:we()}},emits:["form-update"],props:{disabled:{type:Boolean,default:!1},donation:{type:Number,default:0},mgAmount:{type:Number,default:0},dayOfMonth:{type:Number,default:new Date().getDate()},category:{type:String,default:""}},mixins:[be],validations(){return{form:{mgAmount:{required:y,minValue:v(5),maxValue:p(1e4),maxTotal(n){return d(n).value()+d(this.donation).value()<1e4}},donation:{minValue:v(0),maxValue:p(1e4),maxTotal(n){return d(n).value()+d(this.mgAmount).value()<1e4}},dayOfMonth:{required:y,minValue:v(1),maxValue:p(31)},category:{required:y}}}},mounted(){var n;this.category||this.lendingCategories.push({label:"Preserve existing settings",value:"",shortName:""}),((n=this.category)==null?void 0:n.marketingName)!=="COVID-19"&&(this.lendingCategories=this.lendingCategories.filter(e=>e.marketingName!=="COVID-19")),this.$watch("form",()=>{this.v$.$touch(),this.$emit("form-update",{...this.form,isChanged:this.v$.$dirty,isFormValid:!this.v$.$invalid})},{deep:!0})},computed:{totalCombinedDeposit(){return d(this.form.donation).value()+d(this.form.mgAmount).value()}},methods:{hideDayInput(){var n,e;(e=(n=this.v$.form)==null?void 0:n.dayOfMonth)!=null&&e.$invalid||(this.isDayInputShown=!1)}}},Fe=["disabled"],Ge=["for"],Se={key:2,class:"validation-errors"},Ne={key:0},Te={key:1},Ee={class:"additional-day-info"},Ue={key:0},Ke={class:"tw-flex tw-items-center tw-justify-between tw-mt-2"},je={key:0,class:"tw-text-right validation-errors"},qe={key:0},Be={key:1},Pe={class:"tw-flex tw-items-center tw-justify-between tw-mt-2"},Je={key:0,class:"tw-text-right validation-errors"},Le={key:0},ze={class:"tw-flex tw-items-center tw-justify-between tw-mt-2"},He={class:"additional-left-pad-currency"},We={key:0,class:"tw-text-center validation-errors"},Ye={class:"tw-flex tw-items-center tw-justify-between tw-mt-2"},Qe=["value"];function Re(n,e,pe,o,a,g){var b,_,V,M,x,k,O,D,$,A,C,I,F,G,S,N,T,E,U,K,j,q,B,P,J,L,z,H,W,Y,Q,R,X,Z,ee,te,oe,ne,ae,ie,le,re;const ve=u("kv-text-input"),ce=u("kv-material-icon"),w=u("kv-currency-input"),he=u("kv-select");return i(),l("form",{onSubmit:e[6]||(e[6]=ke(()=>{},["prevent"])),novalidate:""},[t("fieldset",{disabled:pe.disabled},[t("div",null,[e[7]||(e[7]=t("strong",null,"Each month on the",-1)),t("label",{class:c(["tw-sr-only",{error:(_=(b=o.v$.form)==null?void 0:b.dayOfMonth)==null?void 0:_.$invalid}]),for:a.form.dayOfMonth}," Day of the Month ",10,Ge),a.isDayInputShown?(i(),Me(ve,{key:0,onBlur:e[0]||(e[0]=r=>g.hideDayInput()),class:"text-input__day",id:"dayOfMonth",type:"number",placeholder:"",required:"",min:"1",max:"31",modelValue:a.form.dayOfMonth,"onUpdate:modelValue":e[1]||(e[1]=r=>a.form.dayOfMonth=r),modelModifiers:{number:!0}},null,8,["modelValue"])):s("",!0),a.isDayInputShown?s("",!0):(i(),l("button",{key:1,class:"tw-text-link tw-font-medium",onClick:e[2]||(e[2]=r=>a.isDayInputShown=!0)},[t("strong",null,h(n.$filters.numeral(a.form.dayOfMonth,"Oo")),1),m(ce,{class:"tw-w-2.5 tw-h-2.5 tw-text-action",icon:a.mdiPencil,title:"Edit"},null,8,["icon"])])),e[8]||(e[8]=t("strong",null,"we'll process the following:",-1)),(M=(V=o.v$.form)==null?void 0:V.dayOfMonth)!=null&&M.$invalid?(i(),l("ul",Se,[(O=(k=(x=o.v$.form)==null?void 0:x.dayOfMonth)==null?void 0:k.required)!=null&&O.$invalid?(i(),l("li",Ne," Field is required ")):s("",!0),(A=($=(D=o.v$.form)==null?void 0:D.dayOfMonth)==null?void 0:$.minValue)!=null&&A.$invalid||(F=(I=(C=o.v$.form)==null?void 0:C.dayOfMonth)==null?void 0:I.maxValue)!=null&&F.$invalid?(i(),l("li",Te," Enter day of month between 1 and 31 ")):s("",!0)])):s("",!0),t("div",Ee,[a.form.dayOfMonth>28?(i(),l("small",Ue," (note - may be processed on the last day of the month) ")):s("",!0)])]),t("div",null,[t("div",Ke,[e[9]||(e[9]=t("div",null,[t("span",null," Deposit for lending ")],-1)),t("div",null,[t("label",{class:c(["tw-sr-only",{error:(S=(G=o.v$.form)==null?void 0:G.mgAmount)==null?void 0:S.$invalid}]),for:"amount"}," Amount ",2),m(w,{id:"amount",class:"tw-w-15",modelValue:a.form.mgAmount,"onUpdate:modelValue":e[3]||(e[3]=r=>a.form.mgAmount=r)},null,8,["modelValue"])])]),t("div",null,[(T=(N=o.v$.form)==null?void 0:N.mgAmount)!=null&&T.$invalid?(i(),l("ul",je,[(K=(U=(E=o.v$.form)==null?void 0:E.mgAmount)==null?void 0:U.required)!=null&&K.$invalid?(i(),l("li",qe," Field is required ")):s("",!0),(B=(q=(j=o.v$.form)==null?void 0:j.mgAmount)==null?void 0:q.minValue)!=null&&B.$invalid||(L=(J=(P=o.v$.form)==null?void 0:P.mgAmount)==null?void 0:J.maxValue)!=null&&L.$invalid?(i(),l("li",Be," Enter an amount of $5-$10,000 ")):s("",!0)])):s("",!0)]),t("div",Pe,[e[10]||(e[10]=t("div",null,[t("span",null," Optional donation to support Kiva ")],-1)),t("div",null,[t("label",{class:c(["tw-sr-only",{error:(H=(z=o.v$.form)==null?void 0:z.donation)==null?void 0:H.$invalid}]),for:"donation"}," Donation ",2),m(w,{id:"donation",class:"tw-w-15",modelValue:a.form.donation,"onUpdate:modelValue":e[4]||(e[4]=r=>a.form.donation=r)},null,8,["modelValue"])])]),t("div",null,[(Y=(W=o.v$.form)==null?void 0:W.donation)!=null&&Y.$invalid?(i(),l("ul",Je,[(X=(R=(Q=o.v$.form)==null?void 0:Q.donation)==null?void 0:R.minValue)!=null&&X.$invalid||(te=(ee=(Z=o.v$.form)==null?void 0:Z.donation)==null?void 0:ee.maxValue)!=null&&te.$invalid?(i(),l("li",Le," Enter an amount of $0-$10,000 ")):s("",!0)])):s("",!0)]),t("div",ze,[e[11]||(e[11]=t("div",null,[t("strong",null,"Total/month")],-1)),t("div",null,[t("strong",He,h(n.$filters.numeral(g.totalCombinedDeposit,"$0,0.00")),1)])]),t("div",null,[(ae=(ne=(oe=o.v$.form)==null?void 0:oe.mgAmount)==null?void 0:ne.maxTotal)!=null&&ae.$invalid||(re=(le=(ie=o.v$.form)==null?void 0:ie.donation)==null?void 0:le.maxTotal)!=null&&re.$invalid?(i(),l("ul",We,e[12]||(e[12]=[t("li",null,[se(" The maximum Monthly Good total is $10,000."),t("br"),se(" Please try again by entering in a smaller amount. ")],-1)]))):s("",!0)])]),t("div",Ye,[e[13]||(e[13]=t("div",null,[t("label",{class:"tw-font-medium",for:"monthly-good-categories-select"},"Your contribution will:")],-1)),t("div",null,[m(he,{modelValue:a.form.category,"onUpdate:modelValue":e[5]||(e[5]=r=>a.form.category=r),id:"monthly-good-categories-select"},{default:xe(()=>[(i(!0),l(Oe,null,De(n.lendingCategories,(r,ge)=>(i(),l("option",{value:r.value,key:ge},h(r.label),9,Qe))),128))],void 0),_:1},8,["modelValue"])])])],8,Fe)],32)}const ye=Ie(fe,[["render",Re],["__scopeId","data-v-776a7753"]]);fe.__docgenInfo={displayName:"MonthlyGoodUpdateForm",description:`This form contains all the fields and validation to modify a MG Subscription
It accepts values as props and sets those to initial data values.
When values are changed it emits the validity state and the values
so a parent component can access them.`,tags:{},exportName:"default",props:[{name:"disabled",description:"Should all inputs on the form be disabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"donation",description:"Monthly Good Donation to Kiva",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"mgAmount",description:"Monthly Good Amount to go to loans",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"dayOfMonth",description:"Day of month Monthly Good will take effect",type:{name:"number"},defaultValue:{func:!1,value:"new Date().getDate()"}},{name:"category",description:`Category to lend to.
Should be Category short name found in loanGroupCategoriesMixin`,type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"form-update",type:{names:["Event"]},description:"Event emitted whenever a form value changes."}],sourceFiles:["/home/runner/work/ui/ui/src/components/Forms/MonthlyGoodUpdateForm.vue"]};const ut={title:"Forms/MonthlyGoodUpdateForm",component:ye,args:{donation:3.75,dayOfMonth:20,mgAmount:10.25,category:"women",disabled:!1},argTypes:{category:{control:{type:"select",options:["default","women","agriculture","refugees","education","eco_friendly","us_borrowers","disaster_relief_covid"]}}}},f=(n,{argTypes:e})=>({props:Object.keys(e),components:{MonthlyGoodUpdateForm:ye},setup(){return n},template:`
        <monthly-good-update-form
            :donation="donation"
            :day-of-month="dayOfMonth"
            :category="category"
            :mg-amount="mgAmount"
            :disabled="disabled"
        />
    `});var de,me,ue;f.parameters={...f.parameters,docs:{...(de=f.parameters)==null?void 0:de.docs,source:{originalSource:`(args, {
  argTypes
}) => ({
  props: Object.keys(argTypes),
  components: {
    MonthlyGoodUpdateForm
  },
  setup() {
    return args;
  },
  template: \`
        <monthly-good-update-form
            :donation="donation"
            :day-of-month="dayOfMonth"
            :category="category"
            :mg-amount="mgAmount"
            :disabled="disabled"
        />
    \`
})`,...(ue=(me=f.parameters)==null?void 0:me.docs)==null?void 0:ue.source}}};const ft=["Default"];export{f as Default,ft as __namedExportsOrder,ut as default};
