import{c as n,o as s,d as p,n as r,e as i,f as F,F as I,x as U,r as B,G as H,K as N,z as b,h as u,j as c,A as j}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";import{w as P,$ as V}from"./entry-imageUtils-_95xo2d0ng.js";import{_ as z}from"./entry-KvLoadingPlaceholder-DUZzoT9CoU.js";import{s as D}from"./entry-KvWwwHeader-CVdIzOPj6Q.js";const K={name:"KvUserAvatar",components:{KvLoadingPlaceholder:z},props:{lenderName:{type:String,default:""},lenderImageUrl:{type:String,default:""},isSmall:{type:Boolean,default:!1}},setup(v){const{lenderName:t,lenderImageUrl:e,isSmall:l}=b(v),o=u(!0),m=u(null),w=u(null),g=c(()=>t.value===""&&e.value===""||t.value==="Anonymous"),y=()=>{const a=l!=null&&l.value?"tw-w-3 tw-h-3 tw-text-h4":"tw-w-6 tw-h-6 tw-text-h2";return`${V(t.value)} ${a}`},S=c(()=>{var a;return((a=e==null?void 0:e.value)==null?void 0:a.split("/").pop())??""}),L=c(()=>{var a;return(a=t==null?void 0:t.value)==null?void 0:a.substring(0,1).toUpperCase()}),f=()=>{o.value=!1},A=(a,d=1e4)=>new Promise((C,x)=>{const k=Date.now()+d,h=()=>{!a||a.complete?C(a):Date.now()>k?x(new Error(`Timeout: ${a.src}`)):setTimeout(h,50)};h()});return j(async()=>{const a=m.value;try{await A(a),f()}catch(d){console.log(d.message)}}),{isAnonymousUser:g,avatarClass:y,imageFilename:S,lenderNameFirstLetter:L,isLegacyPlaceholderAvatar:P,isLoading:o,onImgLoad:f,imageRef:m,userAvatar:w}}},M={key:1},_=["src"];function $(v,t,e,l,o,m){const w=B("kv-loading-placeholder");return s(),n("div",{ref:"userAvatar",class:r(["data-hj-suppress tw-flex",{"tw-w-3":e.isSmall,"tw-w-6":!e.isSmall}])},[l.isAnonymousUser?(s(),n("div",{key:0,class:r(["tw-rounded-full tw-bg-brand tw-inline-flex tw-align-center tw-justify-center",{"tw-w-3 tw-h-3":e.isSmall,"tw-w-6 tw-h-6":!e.isSmall}])},[(s(),n("svg",{class:r(["tw-h-full tw-text-brand",{"tw-w-3 tw-h-3":e.isSmall}]),width:"25",height:"37",viewBox:"0 0 25 37",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t[1]||(t[1]=[i("path",{d:"M8.22861 0.875H0.857178V36.3125H8.22861V0.875Z",fill:"white"},null,-1),i("path",{d:"M10.1143 23.2751C21.9428 23.2751 24.6857 13.2126 24.6857 11.4626H23.6571C11.8286 11.4626 9.08569 21.5251 9.08569 23.2751H10.1143Z",fill:"white"},null,-1),i("path",{d:"M9.08569 24.2376C9.08569 26.0751 11.1428 36.3126 23.8285 36.3126H24.8571C24.8571 34.4751 22.8 24.2376 10.1143 24.2376H9.08569Z",fill:"white"},null,-1)]),2))],2)):!l.isLegacyPlaceholderAvatar(l.imageFilename)&&l.imageFilename?(s(),n("div",M,[l.isLoading?(s(),F(w,{key:0,style:U({width:e.isSmall?"1.5rem":"3rem",height:e.isSmall?"1.5rem":"3rem"}),class:"!tw-rounded-full"},null,8,["style"])):p("",!0),I(i("img",{ref:"imageRef",src:e.lenderImageUrl,alt:"Image of lender",class:r(["tw-rounded-full tw-inline-block",{"tw-w-3 tw-h-3":e.isSmall,"tw-w-6 tw-h-6":!e.isSmall}]),onLoad:t[0]||(t[0]=g=>l.onImgLoad())},null,42,_),[[H,!l.isLoading]])])):l.isLegacyPlaceholderAvatar(l.imageFilename)||!l.imageFilename?(s(),n("div",{key:2,class:r(["tw-rounded-full tw-inline-flex tw-align-center tw-justify-center",l.avatarClass()])},[i("span",{class:r(["tw-self-center",{"adjust-vertical-spacing":!e.isSmall}])},N(l.lenderNameFirstLetter),3)],2)):p("",!0)],2)}const G=D(K,[["render",$],["__scopeId","data-v-c9339e78"]]);export{G as J};
