import{c as f}from"./entry-injectionCheck-7gO_RAaPL1.js";import{A}from"./entry-ActionButton-BIhqHg5aws.js";import{c as m,o,m as u,L as l,A as b,r as t,q as s,z as p,B as w,a as r}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{_ as h}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{B as F}from"./entry-BorrowerInfoBody-C_7bSIiGxj.js";import{F as T}from"./entry-FundraisingStatus-DtZ3Y0K9fJ.js";import{L as $}from"./entry-LoanCardImage-CDUN9w9jfR.js";import{M as D}from"./entry-MatchingText-BJHHEalvvk.js";import{c as E}from"./entry-category-row-arrows-visible-mixin-BLgv3UNW2h.js";import{K as M}from"./entry-KvIcon-BUhAos7YaB.js";const O=`mutation updateActiveLoan($xCoordinate: Int, $yCoordinate: Int, $hoverLoanId: Int, $loan: String, $tracking: String) {
	updateActiveLoan(xCoordinate: $xCoordinate, yCoordinate: $yCoordinate, hoverLoanId: $hoverLoanId, loan: $loan, tracking: $tracking ) @client {
		id
		hoverLoanId
	}
}
`,k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateActiveLoan"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"xCoordinate"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"yCoordinate"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hoverLoanId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"loan"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"tracking"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateActiveLoan"},arguments:[{kind:"Argument",name:{kind:"Name",value:"xCoordinate"},value:{kind:"Variable",name:{kind:"Name",value:"xCoordinate"}}},{kind:"Argument",name:{kind:"Name",value:"yCoordinate"},value:{kind:"Variable",name:{kind:"Name",value:"yCoordinate"}}},{kind:"Argument",name:{kind:"Name",value:"hoverLoanId"},value:{kind:"Variable",name:{kind:"Name",value:"hoverLoanId"}}},{kind:"Argument",name:{kind:"Name",value:"loan"},value:{kind:"Variable",name:{kind:"Name",value:"loan"}}},{kind:"Argument",name:{kind:"Name",value:"tracking"},value:{kind:"Variable",name:{kind:"Name",value:"tracking"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hoverLoanId"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:325,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:O}}},g=["apollo"],y={xCoordinate:0,yCoordinate:0,loan:JSON.stringify({activity:{},userProperties:{},loanFundraisingInfo:{},geocode:{country:{}},image:{}}),hoverLoanId:0,tracking:JSON.stringify({})},H={data(){return{activeLoan:y}},computed:{hoverLoan(){try{return JSON.parse(this.activeLoan.loan)}catch{return{}}},hoverLoanId(){return this.activeLoan.hoverLoanId},hoverLoanXCoordinate(){return this.activeLoan.xCoordinate},hoverLoanYCoordinate(){return this.activeLoan.yCoordinate},tracking(){try{return JSON.parse(this.activeLoan.tracking)}catch{return{}}}},methods:{setHoverLoan({xCoordinate:e,yCoordinate:n,hoverLoanId:a,loan:c,tracking:v}){f(this,g),this.apollo.mutate({mutation:k,variables:{...this.activeLoan,xCoordinate:e,yCoordinate:n,hoverLoanId:a,loan:c,tracking:v}})},clearHoverLoan(){f(this,g),this.apollo.mutate({mutation:k,variables:y})}}},L={name:"BorrowerInfoHeaderExpandable",props:{expanded:{type:Boolean,default:!1},name:{type:String,default:""},country:{type:String,default:""},activity:{type:String,default:""}}},R={key:0,class:"name"},j={key:1,class:"details"};function q(e,n,a,c,v,i){return o(),m("div",{class:b(["borrower-info-header-expandable",{expanded:a.expanded}])},[a.name?(o(),m("div",R,l(a.name),1)):u("",!0),a.country||a.activity?(o(),m("div",j,l(a.country?`${a.country}`:"")+" "+l(a.country&&a.activity?"|":"")+" "+l(a.activity?`${a.activity}`:""),1)):u("",!0)],2)}const J=h(L,[["render",q],["__scopeId","data-v-f519b6e9"]]);L.__docgenInfo={displayName:"BorrowerInfoHeaderExpandable",exportName:"default",description:"",tags:{},props:[{name:"expanded",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"name",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"country",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"activity",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/LoanCards/BorrowerInfo/BorrowerInfoHeaderExpandable.vue"]};const P={emits:["toggle-favorite","track-interaction"],props:{amountLeft:{type:Number,default:0},expiringSoonMessage:{type:String,default:""},isFavorite:{type:Boolean,default:!1},isFunded:{type:Boolean,default:!1},isMatchAtRisk:{type:Boolean,default:!1},isSelectedByAnother:{type:Boolean,default:!1},isVisitor:{type:Boolean,required:!0},itemsInBasket:{type:Array,default:()=>[]},loan:{type:Object,default:()=>({userProperties:{},loanFundraisingInfo:{},geocode:{country:{}},image:{}})},percentRaised:{type:Number,default:0},expanded:{type:Boolean,default:!1},categoryId:{type:Number,default:null},categorySetId:{type:String,default:""},rowNumber:{type:Number,default:null},cardNumber:{type:Number,default:null}},methods:{toggleFavorite(){this.$emit("toggle-favorite")},trackInteraction(e){this.$emit("track-interaction",e)}}},N={name:"ExpandableLoanCard",emits:["add-to-basket","track-interaction"],props:{enableFiveDollarsNotes:{type:Boolean,default:!1}},components:{ActionButton:A,BorrowerInfoHeaderExpandable:J,BorrowerInfoBody:F,FundraisingStatus:T,LoanCardImage:$,MatchingText:D,KvIcon:M},mixins:[P,H,E],computed:{disableImageLink(){return!this.categoryRowArrowsVisible()&&!this.expanded}},methods:{trackInteraction(e){this.$emit("track-interaction",e)}}},z={class:"expandable-loan-card-close show-for-small-only"},K={class:"expandable-loan-card-bottom"};function G(e,n,a,c,v,i){const I=t("kv-icon"),C=t("loan-card-image"),B=t("borrower-info-header-expandable"),S=t("fundraising-status"),V=t("borrower-info-body"),x=t("action-button"),_=t("matching-text");return o(),m("div",{class:b(["expandable-loan-card",{expanded:e.expanded}])},[s("div",z,[s("button",{onClick:n[0]||(n[0]=w((...d)=>e.clearHoverLoan&&e.clearHoverLoan(...d),["prevent"])),class:"close-button"},[r(I,{class:"icon-small-x",name:"small-x","from-sprite":!0,title:"Close"})])]),e.loan.image.default?(o(),p(C,{key:0,class:"loan-card-image-component","loan-id":e.loan.id,name:e.loan.name,"retina-image-url":e.loan.image.retina,"standard-image-url":e.loan.image.default,"is-visitor":e.isVisitor,"is-favorite":e.isFavorite,"loan-image-hash":e.loan.image.hash,"disable-link":i.disableImageLink,onTrackLoanCardInteraction:i.trackInteraction,onFavoriteToggled:e.toggleFavorite},null,8,["loan-id","name","retina-image-url","standard-image-url","is-visitor","is-favorite","loan-image-hash","disable-link","onTrackLoanCardInteraction","onFavoriteToggled"])):u("",!0),s("div",null,[s("div",K,[r(B,{country:e.loan.geocode.country.name,activity:e.loan.activity.name,name:e.loan.name,"loan-id":e.loan.id,"single-line":!0,expanded:e.expanded,class:"list-loan-card-borrower-info-header"},null,8,["country","activity","name","loan-id","expanded"]),r(S,{"amount-left":e.amountLeft,"percent-raised":e.percentRaised,"expiring-soon-message":e.expiringSoonMessage,"is-funded":e.loan.status==="funded","single-line":!0},null,8,["amount-left","percent-raised","expiring-soon-message","is-funded"]),r(V,{use:e.loan.fullLoanUse,"loan-id":e.loan.id,"max-use-length":170,onTrackLoanCardInteraction:i.trackInteraction},null,8,["use","loan-id","onTrackLoanCardInteraction"]),r(x,{class:"expandable-loan-card-action-button","loan-id":e.loan.id,loan:e.loan,"items-in-basket":e.itemsInBasket,"is-lent-to":e.loan.userProperties.lentTo,"is-funded":e.isFunded,"is-selected-by-another":e.isSelectedByAnother,"is-simple-lend-button":!0,"enable-five-dollars-notes":a.enableFiveDollarsNotes,onClick:n[1]||(n[1]=d=>i.trackInteraction({interactionType:"addToBasket",interactionElement:"Lend25"})),onAddToBasket:n[2]||(n[2]=d=>e.$emit("add-to-basket",d))},null,8,["loan-id","loan","items-in-basket","is-lent-to","is-funded","is-selected-by-another","enable-five-dollars-notes"]),e.isMatchAtRisk?u("",!0):(o(),p(_,{key:0,"matching-text":e.loan.matchingText,"match-ratio":e.loan.matchRatio,"is-funded":e.isFunded,"is-selected-by-another":e.isSelectedByAnother},null,8,["matching-text","match-ratio","is-funded","is-selected-by-another"]))])])],2)}const Q=h(N,[["render",G],["__scopeId","data-v-a9533def"]]);N.__docgenInfo={displayName:"ExpandableLoanCard",exportName:"default",description:"",tags:{},props:[{name:"enableFiveDollarsNotes",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"add-to-basket"},{name:"track-interaction",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/LoanCards/ExpandableLoanCard/ExpandableLoanCard.vue"]};const ie=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{Q as E,H as a,ie as b,P as e};
