const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./entry-right-leaning-line-BGotuoPe42.js","./entry-vue.esm-bundler-C0PPCo9W96.js","./entry-left-leaning-line-BpB9VTZpAk.js"])))=>i.map(i=>d[i]);
import{_ as N}from"./iframe-Cc_r_Bkf.js";import{c as i,o as l,q as r,j as L,g as d,k as Z,l as ee,m as p,J as P,I as j,z as O,G as u,u as o,L as f,A as g,a as D,C as te,O as S}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{u as ae}from"./entry-useIsMobile-Cv5_qjK3ot.js";import{M as se,u as oe,i as le,b as B,a as _,d as z}from"./entry-useBadgeModal-edgCU2M7Bh.js";import{B as re}from"./entry-KvUserAvatar-DmX-R6-wYd.js";import"./entry-KvWwwHeader-C1bm1YMh4q.js";import"./entry-numeral-xVHG5DEP0A.js";import{K as ne}from"./entry-KvIcon-BUhAos7YaB.js";import{u as ie,d as ce,M as de}from"./entry-useBadgeData-Bo50EdUMyn.js";import{B as ue}from"./entry-BadgeContainer-CwtF9AdoQf.js";import{_ as me}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{f as pe}from"./entry-index-CGacd2nhU3.js";import"./entry-throttle-DL1zg7kAk0.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-isSymbol-5pnFTpIKM9.js";import"./entry-toNumber-MeiYJWOH0A.js";import"./entry-imageUtils-XCIqTGZvrk.js";import"./entry-KvLoadingPlaceholder-B_9_tltQhY.js";import"./entry-index-CWclSTHHJk.js";import"./entry-logReadQueryError-Codcl0QZ_g.js";import"./entry-logFormatter-DhjghUk5Me.js";import"./entry-achievementUtils-Cf0LlmQMSn.js";import"./entry-index-COmIkRYU2t.js";import"./entry-index-CbPSoDvqj7.js";import"./entry-index-tAHLmhMYuW.js";import"./entry-index-D4S0JsTkt8.js";const ge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 124 124"};function ve(y,b){return l(),i("svg",ge,b[0]||(b[0]=[r("path",{d:"M62 2C30.00842 2 4 28.00842 4 60s26.00842 58 58 58 58-26.00842 58-58S93.99158 2 62 2zm24.76943 50.88227L60.673 78.8278C59.21645 80.27594 57.2744 81 55.21094 81c-1.94206 0-3.88412-.72406-5.46204-2.17219L36.27585 65.312c-3.03447-3.01692-3.03447-7.72332 0-10.74025 3.03447-3.01692 7.76825-3.01692 10.80272 0l8.25375 8.20604 20.6344-20.51509c3.03447-3.01692 7.76824-3.01692 10.80271 0 3.03447 3.01693 2.9131 7.72333 0 10.61958z",fill:"#49953f"},null,-1)]))}const we={render:ve},he={class:"tw-flex tw-flex-col tw-h-full"},fe={key:0,class:"tw-flex tw-space-x-1 tw-items-center tw-pb-0.5 tw-pl-1"},_e={class:"tw-flex"},ye={key:0},be={class:"tw-border-b-2 tw-border-tertiary tw-pb-1 tw-mx-1"},De={class:"tw-flex tw-justify-start tw-w-full"},Be=["onClick"],Ce=["src"],ke={class:"tw-text-left tw-bg-white tw-z-1 tw-relative tw-pl-2 tw-space-y-0.5"},xe={key:0,class:"tw-font-small tw-px-0"},Le={key:0,class:"tw-inline-flex tw-items-center tw-rounded tw-space-x-1"},Ee={class:"tw-font-medium"},Me={key:0,class:"tw-h-0.5"},G={__name:"BadgeModalContentJourney",props:{badge:{type:Object,required:!0},loans:{type:Array,default:()=>[]}},emits:["badge-level-clicked","toggle-gradient"],setup(y,{emit:b}){const s=y,{getLevelCaption:R}=ie(),{isMobile:m}=ae(se),v=L(null),C=L(!1),V=e=>e===0?"0px":m.value?"25px":"50px",w=d(()=>s.badge.id===ce),E=d(()=>m.value?"98px":"108px"),M=d(()=>m.value?"150px":"170px"),A=d(()=>m.value?"50px":"100px"),{getTierPositions:J}=oe(s.badge),I=b,k=L(J()),K=e=>{var t;return(!s.badge.achievementData.tiers[e-1]||!!((t=s.badge.achievementData.tiers[e-1])!=null&&t.completedDate))&&!s.badge.achievementData.tiers[e].completedDate},c=e=>(s.badge.achievementData.tiers[e]??{}).completedDate?z:K(e)?_:B,H=e=>R(s.badge.achievementData.tiers[e]),q=e=>{let t;const n=s.badge.achievementData.tiers[e];return[_].includes(c(e))?t=s.badge.achievementData.totalProgressToAchievement:t=Math.min(s.badge.achievementData.totalProgressToAchievement,n.target),[B].includes(c(e))?`${n.target} loans`:`
		Progress:
		${t}/${n.target}
		loans
	`},U=e=>{const t=s.badge.achievementData.tiers[e];return`Achieved on ${pe(new Date(t.completedDate),"MMMM do, yyyy")}!`},F=e=>{c(e)!==B&&I("badge-level-clicked",{id:s.badge.id,challengeName:s.badge.challengeName,tier:s.badge.achievementData.tiers[e]})},x=d(()=>{var e,t;return(t=((e=s.badge.achievementData)==null?void 0:e.loanPurchases)??[])==null?void 0:t.map(n=>n.loan).filter(n=>n!=null)}),h=d(()=>{var t;const e=((t=s.badge.achievementData)==null?void 0:t.totalProgressToAchievement)??0;return Math.min(e,de)}),T=d(()=>h.value-3),W=d(()=>{const e=x.value.slice(0,3).map(t=>(t==null?void 0:t.name)??"");return e.length>1?`${e.slice(0,-1).join(", ")} and ${e.at(-1)}`:e[0]||""}),Y=d(()=>`${h.value?`Your loan${h.value>1?"s":""} to ${W.value} ${h.value>1?"have":"has"} made progress toward these achievements. `:""}${s.badge.description}`),Q=S(()=>N(()=>import("./entry-right-leaning-line-BGotuoPe42.js"),__vite__mapDeps([0,1]),import.meta.url)),X=S(()=>N(()=>import("./entry-left-leaning-line-BpB9VTZpAk.js"),__vite__mapDeps([2,1]),import.meta.url)),$=e=>{const t=e.target.scrollTop+e.target.clientHeight+1>=e.target.scrollHeight;C.value!==t&&(C.value=t,I("toggle-gradient",C.value))};return Z(()=>{v.value=document.getElementById("sidesheet-content"),v.value&&v.value.addEventListener("scroll",$)}),ee(()=>{v.value&&v.value.removeEventListener("scroll",$)}),(e,t)=>(l(),i("div",he,[x.value.length?(l(),i("div",fe,[r("div",_e,[(l(!0),i(P,null,j(x.value.slice(0,3),(n,a)=>(l(),O(o(re),{class:"tw-border-white tw-border-2 tw-w-4 tw-h-4",key:n.id,"lender-name":n.name,"lender-image-url":n.image.url,style:u({"z-index":h.value,"margin-left":a>0?"-25px":0})},null,8,["lender-name","lender-image-url","style"]))),128))]),T.value>0?(l(),i("p",ye," +"+f(T.value),1)):p("",!0)])):p("",!0),r("p",be,f(Y.value),1),r("div",De,[r("div",{class:g(["tw-flex tw-flex-col tw-overflow-x-auto tw-overflow-y-hidden tw-items-start",{"tw-flex-col tw-pt-2 tw-px-1":o(m),"tw-flex-row tw-py-2 tw-px-0.5":!o(m)}])},[(l(!0),i(P,null,j(k.value,(n,a)=>(l(),i("div",{key:a},[r("div",{class:"badge tw-relative tw-flex tw-items-center",style:u({marginTop:V(a),zIndex:k.value.length-a})},[r("div",{class:"tw-relative tw-flex tw-text-center tw-bg-white tw-cursor-pointer",onClick:Ae=>F(a)},[D(o(ue),{status:c(a),shape:o(le)(y.badge.id),style:u({width:E.value,height:E.value}),class:g({"tw--ml-1.5":w.value})},{default:te(()=>[r("img",{src:y.badge.contentfulData[a].imageUrl,alt:"Badge"},null,8,Ce)],void 0),_:2},1032,["status","shape","style","class"])],8,Be),r("div",ke,[r("div",null,[c(a)!==o(B)?(l(),i("div",xe,[r("span",null,"Achievement "+f(H(a)),1)])):p("",!0),r("div",{class:g(["tw-inline-flex tw-items-center tw-rounded tw-space-x-1",{"tw-bg-eco-green-1 tw-px-1 tw-py-1":c(a)==o(_)}])},[c(a)==o(_)?(l(),O(o(ne),{key:0,class:"tw-text-eco-green-3 icon-width",name:"progress-checkmark"})):p("",!0),r("span",{class:g({"tw-font-medium":c(a)==o(_)})},f(q(a)),3)],2)]),c(a)==o(z)?(l(),i("div",Le,[D(o(we),{class:"icon-width"}),r("span",Ee,f(U(a)),1)])):p("",!0)])],4),a!==k.value.length-1?(l(),i("div",Me,[a%2===0?(l(),i("div",{key:0,class:g(["tw-overflow-hidden",{"tw-pl-3 md:tw-pl-4":w.value,"tw-pl-5 md:tw-pl-5":!w.value}]),style:u({height:A.value})},[D(o(Q),{style:u({height:M.value})},null,8,["style"])],6)):(l(),i("div",{key:1,class:g(["tw-overflow-hidden",{"tw-pl-3 md:tw-pl-4":w.value,"tw-pl-4 md:tw-pl-5":!w.value}]),style:u({height:A.value})},[D(o(X),{style:u({height:M.value})},null,8,["style"])],6))])):p("",!0)]))),128))],2)])]))}},st=me(G,[["__scopeId","data-v-b1d0619d"]]);G.__docgenInfo={exportName:"default",displayName:"BadgeModalContentJourney",description:"",tags:{},props:[{name:"badge",type:{name:"object"},required:!0},{name:"loans",type:{name:"array"},defaultValue:{func:!1,value:"[]"}}],events:[{name:"badge-level-clicked"},{name:"toggle-gradient"}],sourceFiles:["/home/runner/work/ui/ui/src/components/MyKiva/BadgeModalContentJourney.vue"]};export{st as default};
