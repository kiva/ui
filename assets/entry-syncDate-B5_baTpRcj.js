const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./entry-KvHeaderMobileMenu-vofeUIjAHx.js","./entry-mdi-B1ONwcTkQ2.js","./entry-KvAccordionItem-DnWt5hHrLc.js","./entry-vue.esm-bundler-C0PPCo9W96.js","./entry-KvExpandable-C7Xh6Dr9N8.js","./entry-KvWwwHeader-C1bm1YMh4q.js","./entry-_commonjsHelpers-Cpj98o6Yn6.js","./entry-index-CWclSTHHJk.js","./entry-numeral-xVHG5DEP0A.js","./KvWwwHeader-DtWMcmZI.css","./entry-KvMaterialIcon-C3KLX5OV-L.js","./KvHeaderMobileMenu-CKZX-sjl.css","./entry-KvHeaderMyKivaMenu-BWkme3Pe5l.js","./entry-KvHeaderMenuLink-sxtCdp09Se.js","./entry-KvLendMenu-DfKbdbm13P.js","./entry-KvLoadingPlaceholder-B_9_tltQhY.js","./entry-KvTabs-CbRnT2lqFN.js","./entry-KvTabPanel-Ct8s7XWvCc.js","./entry-KvGrid-Cgm16aFdnL.js","./entry-KvPageContainer-Dh8GJwjiow.js","./KvLendMenu-_jMEk8QK.css","./entry-KvHeaderTakeActionMenu-QnimHvq0nL.js","./entry-KvHeaderAboutMenu-DIs6FOx_3B.js","./entry-TheLendMenu-WXwMwN_S94.js","./entry-get-BUjo_hX5jl.js","./entry-get-D3xDH2SX94.js","./entry-isSymbol-5pnFTpIKM9.js","./entry-sortBy-C54Lx-S4RT.js","./entry-orderBy-CUrcrXTfYx.js","./entry-keys-B9dmm4b_qU.js","./entry-PromoCreditBanner-CN7uFBF8a4.js","./entry-promoCredit-w2GeqDaA1T.js","./entry-confetti.module-BCnSlh9tqh.js","./entry-_plugin-vue_export-helper-DlAUqK2UKH.js","./entry-KvAccordionItem-C1aTJ3Gq8C.js","./entry-KvExpandable-Bd-oWmSPhz.js","./iframe-Cc_r_Bkf.js","./entry-kiva-logo-CXWq-YcmJ4.js","./entry-CampaignLogoGroup-R50IhBJ4kn.js","./entry-KvContentfulImg-B0t9ZCrx8O.js","./entry-throttle-DL1zg7kAk0.js","./entry-toNumber-MeiYJWOH0A.js","./entry-imageUtils-XCIqTGZvrk.js","./entry-settingsUtils-CXPrtFAPl-.js","./entry-index-COmIkRYU2t.js","./entry-myKivaUtils-DUwPoPrS-N.js","./entry-logReadQueryError-Codcl0QZ_g.js","./entry-logFormatter-DhjghUk5Me.js","./entry-myKivaForAllUsers-DI6rZrUMxZ.js","./entry-KvButton-BA7nBLyz1b.js","./entry-KvLoadingSpinner-CpYE5b1xV2.js","./entry-KvUserAvatar-DmX-R6-wYd.js","./entry-throttle-4FNEI5INvC.js","./entry-KvThemeProvider-BF4_ArwXOx.js","./entry-toInteger-XI_MWEAzOD.js","./entry-lock-scroll-Bww220JhDP.js","./entry-getCacheKey-CFbvtT9xx4.js","./entry-KvTextInput-CnVgGp-sYq.js","./entry-attrs-C2OODjD6EW.js","./TheLendMenu-D3hlyjtR.css"])))=>i.map(i=>d[i]);
import{_ as z}from"./iframe-Cc_r_Bkf.js";import{c as E,o as w,q as M,m as j,L as Z,y as Nn,g as ne,r as D,v as rn,a as P,A as V,B as W,j as H,O as se,w as vt,k as on,l as Bn,b as Pn,D as A,K as le,z as N,C,M as I,E as U,G,s as Fn,V as Dn,T as Qe,P as On,d as Rn,u as Me,J as X,I as Je,a0 as gt}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{g as qn}from"./entry-index-CWclSTHHJk.js";import{n as Ze}from"./entry-numeral-xVHG5DEP0A.js";import{K as Hn}from"./entry-kiva-logo-CXWq-YcmJ4.js";import{_ as _e}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{Y as Vn,Z as ut,m as lt,_ as sn,$ as Un}from"./entry-mdi-B1ONwcTkQ2.js";import Kn from"./entry-CampaignLogoGroup-R50IhBJ4kn.js";import{_ as jn}from"./entry-throttle-DL1zg7kAk0.js";import{x as ce}from"./entry-KvMaterialIcon-C3KLX5OV-L.js";import{$ as et}from"./entry-imageUtils-XCIqTGZvrk.js";import{_ as ct}from"./entry-KvLoadingPlaceholder-B_9_tltQhY.js";import{s as ae,t as an}from"./entry-KvWwwHeader-C1bm1YMh4q.js";import{r as dt,b as $n}from"./entry-settingsUtils-CXPrtFAPl-.js";import{a as Wn,M as zn,_ as ft}from"./entry-myKivaUtils-DUwPoPrS-N.js";import{l as un}from"./entry-logReadQueryError-Codcl0QZ_g.js";import{_ as Gn}from"./entry-myKivaForAllUsers-DI6rZrUMxZ.js";import{g as Xn}from"./entry-KvButton-BA7nBLyz1b.js";import{u as ln}from"./entry-KvPageContainer-Dh8GJwjiow.js";import{B as Yn}from"./entry-KvUserAvatar-DmX-R6-wYd.js";import{u as cn}from"./entry-throttle-4FNEI5INvC.js";import{x as Qn}from"./entry-KvThemeProvider-BF4_ArwXOx.js";import{g as re,c as yt}from"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import{k as Jn,b as ke,c as dn}from"./entry-get-D3xDH2SX94.js";import{f as fn,g as ht,l as Zn,e as hn,m as mn,n as er,o as tr}from"./entry-orderBy-CUrcrXTfYx.js";import{r as nr}from"./entry-toInteger-XI_MWEAzOD.js";import{r as rr,k as ir,g as or}from"./entry-keys-B9dmm4b_qU.js";import{d as sr,f as ar}from"./entry-isSymbol-5pnFTpIKM9.js";import{s as ur,i as lr,P as cr}from"./entry-PromoCreditBanner-CN7uFBF8a4.js";import{l as dr}from"./entry-lock-scroll-Bww220JhDP.js";import{g as fr}from"./entry-getCacheKey-CFbvtT9xx4.js";import{A as hr}from"./entry-KvTextInput-CnVgGp-sYq.js";import{l as mr}from"./entry-logFormatter-DhjghUk5Me.js";const pr="kvu_lb",vr="kvu_db";function be(t,e){typeof window>"u"||(window.optimizely=window.optimizely||[],window.optimizely.push({type:"user",attributes:{[t]:e}}))}function Sa(t){be("us_loan_checkout",t?"yes":"no")}function Aa(t){be("has_ever_logged_in_before",t?"yes":"no")}function gr(t){be("has_lent_before",t?"yes":"no")}function yr(t){be("has_deposited_before",t?"yes":"no")}qn`query optimizelyUserDataQuery {
	my {
		id
		loans(limit:1) {
				totalCount
		}
		transactions(limit:1, filter:{category:deposit}) {
				totalCount
		}
	}
}`;const wr={props:{count:{type:Number,default:0}}},_r={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},kr=["id"],br={x:"12",y:"17",fill:"#000",style:{"font-size":"9px","font-weight":"631","text-anchor":"middle"}},Mr=["mask"];function Sr(t,e,r,i,o,n){return w(),E("svg",_r,[M("defs",null,[r.count>0?(w(),E("mask",{key:0,id:`countMask-${r.count}`},[e[0]||(e[0]=M("rect",{width:"100%",height:"100%",fill:"#fff"},null,-1)),M("text",br,Z(r.count),1)],8,kr)):j("",!0)]),M("path",{d:"M12,3A3,3 0 0,1 15,6H9A3,3 0 0,1 12,3M19,6H17A5,5 0 0,0 12,1A5,5 0 0,0 7,6H5C3.89,6 3,6.89 3,8V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V8C21,6.89 20.1,6 19,6Z",fill:"currentColor",mask:`url(#countMask-${r.count})`},null,8,Mr)])}const Ar=ae(wr,[["render",Sr]]),Er={components:{KvMaterialIcon:ce},props:{refName:{type:String,default:""},href:{type:String,default:void 0},menuComponent:{type:Object,default:()=>({})},openMenuItem:{type:Object,default:()=>({})},dropdownIcon:{type:String,default:""},baseClass:{type:String,default:""},sendLinkPosition:{type:Boolean,default:!1}},emits:["on-hover","user-tap"],setup(t,{emit:e}){const{proxy:r}=Nn(),i=ne(()=>[t.baseClass,{"tw-text-tertiary":t.openMenuItem&&t.openMenuItem!==t.menuComponent}]),o=()=>{if(!t.sendLinkPosition)return null;const n=r.$refs[t.refName];if(!n)return null;const s=n.getBoundingClientRect();return{left:`${s.left+s.width/2}px`,transform:"translateX(-50%)",borderRadius:"0px 0px 8px 8px"}};return{computedClass:i,handleMouseOver:()=>{const n=o();e("on-hover",t.refName,t.menuComponent,n)},handleTouchStart:()=>{const n=o();e("user-tap",t.refName,t.menuComponent,n)}}}},Tr=["href"];function Lr(t,e,r,i,o,n){const s=D("KvMaterialIcon");return w(),E("a",{ref:r.refName,class:"tw-py-1 tw-no-underline hover:tw-no-underline tw-text-primary hover:tw-text-action tw-items-center tw-cursor-pointer",href:r.href,onMouseenter:e[0]||(e[0]=(...a)=>i.handleMouseOver&&i.handleMouseOver(...a)),onTouchstart:e[1]||(e[1]=W((...a)=>i.handleTouchStart&&i.handleTouchStart(...a),["prevent"]))},[M("div",{class:V(["tw-flex tw-items-center",i.computedClass])},[rn(t.$slots,"default"),P(s,{class:V(["tw-inline tw-w-3 tw-ml-0.5 tw-transition-transform tw-duration-300",{"tw-rotate-180":r.openMenuItem===r.menuComponent}]),icon:r.dropdownIcon},null,8,["class","icon"])],2)],40,Tr)}const xr=ae(Er,[["render",Lr]]),Ir=se(()=>z(()=>import("./entry-KvHeaderMobileMenu-vofeUIjAHx.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)),wt=se(()=>z(()=>import("./entry-KvHeaderMyKivaMenu-BWkme3Pe5l.js"),__vite__mapDeps([12,13,3,5,6,7,8,9]),import.meta.url)),Cr=se(()=>z(()=>import("./entry-KvLendMenu-DfKbdbm13P.js"),__vite__mapDeps([14,3,1,2,4,5,6,7,8,9,10,15,16,17,18,19,20]),import.meta.url)),Nr=se(()=>z(()=>import("./entry-KvHeaderTakeActionMenu-QnimHvq0nL.js"),__vite__mapDeps([21,13,3,5,6,7,8,9]),import.meta.url)),Br=se(()=>z(()=>import("./entry-KvHeaderAboutMenu-DIs6FOx_3B.js"),__vite__mapDeps([22,13,3,5,6,7,8,9]),import.meta.url)),_t=150,ie="avatar-menu",fe="menuButton",kt={top:"-3.75rem",width:"100%"},Pr="lendButton",Fr="takeActionButton",Dr="aboutUsLink",Or={components:{KvMaterialIcon:ce,KvIconBag:Ar,KvHeaderDropdownLink:xr,KvUserAvatar:Yn,KvLoadingPlaceholder:ct},props:{loggedIn:{type:Boolean,default:!1},basketCount:{type:Number,default:0},openMenuItem:{type:[Object,Function],default:null},loginUrl:{type:String,default:"/ui-login"},myDashboardUrl:{type:String,default:"/mykiva"},lenderName:{type:String,default:""},lenderImageUrl:{type:String,default:""},isMobile:{type:Boolean,default:!1},balance:{type:Number,default:0},isBasketDataLoading:{type:Boolean,default:!1},isUserDataLoading:{type:Boolean,default:!1}},emits:["item-hover"],setup(t,{emit:e}){const r=H(null),i=H(null),o=H(null),n=H(null),s=H(null),a=H(null),u=H(null),l=H(null),d=H(null),f=H(null),c=Pn("$kvTrackEvent",()=>{}),h={[Pr]:{action:"hover-Lend-menu",label:"Lend"},[Fr]:{action:"hover-Take-action-menu",label:"Take action"},[Dr]:{action:"hover-About-menu",label:"About"},[fe]:{action:"hover-Hamburger-menu",label:"Hamburger"},[ie]:{action:"hover-Avatar-menu",label:"Avatar"}},y=(x=null,O=null,R=null)=>{e("item-hover",x,O,R)},v=(x,O,R=null)=>{if(!navigator.maxTouchPoints){if(x&&f.value!==x){const K=h[x];K&&c("TopNav",K.action,K.label)}f.value=x,y(x,O,x===fe&&t.isMobile?kt:R)}},p=x=>{!navigator.maxTouchPoints&&f.value===x&&(f.value=null,y())},k=()=>{var x;const O=(x=r.value)==null?void 0:x.getBoundingClientRect();if(!O)return null;const R=O.left+O.width/2-_t/2,K=`${window.innerWidth-R-_t}px`;return{right:(window==null?void 0:window.innerWidth)<an.breakpoints.md?0:K}},L=()=>{f.value=ie,y(r.value,wt,k())},S=(x,O,R)=>{if(x&&f.value!==x){const K=h[x];K&&c("TopNav",K.action,K.label)}f.value===fe&&(f.value=null),!f.value||f.value!==x?(f.value=x,x===ie?L():x===fe&&t.isMobile?y(x,O,kt):y(x,O,R)):(f.value=null,y())},g=cn(()=>{f.value===ie&&L()},100),m=ne(()=>t.isMobile?void 0:"/lend-by-category"),_=ne(()=>{var x;return((x=t.lenderImageUrl)==null?void 0:x.split("/").pop())??""}),b=ne(()=>Math.floor(t.balance)),F=ne(()=>et(_.value)||!_.value),B=x=>{x.target===x.currentTarget&&y()};return vt(()=>t.isMobile,()=>{f.value===ie&&L()}),vt(()=>t.openMenuItem,x=>{x||(f.value=null)}),on(()=>{z(()=>import("./entry-KvHeaderMobileMenu-vofeUIjAHx.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url),z(()=>import("./entry-KvHeaderMyKivaMenu-BWkme3Pe5l.js"),__vite__mapDeps([12,13,3,5,6,7,8,9]),import.meta.url),z(()=>import("./entry-KvLendMenu-DfKbdbm13P.js"),__vite__mapDeps([14,3,1,2,4,5,6,7,8,9,10,15,16,17,18,19,20]),import.meta.url),z(()=>import("./entry-KvHeaderTakeActionMenu-QnimHvq0nL.js"),__vite__mapDeps([21,13,3,5,6,7,8,9]),import.meta.url),z(()=>import("./entry-KvHeaderAboutMenu-DIs6FOx_3B.js"),__vite__mapDeps([22,13,3,5,6,7,8,9]),import.meta.url),window.addEventListener("resize",g)}),Bn(()=>{window.removeEventListener("resize",g)}),{AVATAR_MENU_ID:ie,openMenuId:f,numeral:Ze,mdiAccountCircle:sn,mdiChevronDown:lt,mdiMagnify:ut,mdiMenu:Vn,onHover:y,avatar:r,lendButton:i,aboutUsLink:o,partnerWithUsLink:n,borrowLink:s,supportKivaLink:a,basketLink:u,signInLink:l,menuButton:d,lendUrl:m,avatarFilename:_,handleOnHover:v,handleTouchStart:S,handleMouseOut:p,handleAvatarMenuPosition:L,KvHeaderMobileMenu:Ir,KvHeaderMyKivaMenu:wt,KvLendMenu:Cr,KvHeaderTakeActionMenu:Nr,KvHeaderAboutMenu:Br,isLegacyPlaceholderAvatar:et,getAvatarMenuPosition:k,handleEmptySpaceClick:B,roundedBalance:b,isDefaultProfilePic:F}}},Rr=["href"],qr={ref:"avatar",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-1 tw-bg-eco-green-1 tw-rounded-md tw-py-0.5 md:tw-py-1 tw-px-1 md:tw-px-2"},Hr={key:0,class:"tw-w-4 tw-h-3",style:{display:"var(--user-balance-loading-display, inline-block)"}},Vr={key:1,class:"tw-text-eco-green-4"},Ur=["href"];function Kr(t,e,r,i,o,n){const s=D("kv-material-icon"),a=D("KvHeaderDropdownLink"),u=D("kv-icon-bag"),l=D("KvUserAvatar"),d=D("KvLoadingPlaceholder"),f=le("kv-track-event");return w(),E("div",{class:"tw-h-full tw-flex tw-items-center tw-gap-0.5 md:tw-gap-2 lg:tw-gap-2.5",onTouchstart:e[10]||(e[10]=(...c)=>i.handleEmptySpaceClick&&i.handleEmptySpaceClick(...c))},[A((w(),E("button",{ref:"menuButton",class:V(["header-link tw-inline-flex md:tw-hidden",{"tw-text-tertiary":r.openMenuItem&&r.openMenuItem!==i.KvHeaderMobileMenu}]),onMouseover:e[0]||(e[0]=c=>i.handleOnHover("menuButton",i.KvHeaderMobileMenu)),onMouseout:e[1]||(e[1]=c=>i.handleMouseOut("menuButton")),onTouchstart:e[2]||(e[2]=W(c=>i.handleTouchStart("menuButton",i.KvHeaderMobileMenu),["stop"]))},[P(s,{icon:i.mdiMenu},null,8,["icon"])],34)),[[f,r.openMenuItem===i.KvHeaderMobileMenu?["TopNav","click-Hamburger-menu"]:null]]),A((w(),N(a,{class:"tw-py-1","ref-name":"lendButton",href:i.lendUrl,"menu-component":i.KvLendMenu,"open-menu-item":r.openMenuItem,"dropdown-icon":i.mdiChevronDown,"base-class":"tw-inline-flex md:tw-border md:tw-rounded-md tw-px-1.5 tw-py-0.5",onOnHover:i.handleOnHover,onMouseleave:e[3]||(e[3]=c=>i.handleMouseOut("lendButton")),onTouchstart:e[4]||(e[4]=W(c=>i.handleTouchStart("lendButton",i.KvLendMenu),["stop"]))},{default:C(()=>e[11]||(e[11]=[I(" Lend ")])),_:1},8,["href","menu-component","open-menu-item","dropdown-icon","onOnHover"])),[[f,["TopNav","click-Lend"]]]),A((w(),N(a,{"ref-name":"takeActionButton","base-class":"tw-hidden md:tw-inline-flex tw-py-1","menu-component":i.KvHeaderTakeActionMenu,"open-menu-item":r.openMenuItem,"dropdown-icon":i.mdiChevronDown,"send-link-position":"",onOnHover:i.handleOnHover,onMouseleave:e[5]||(e[5]=c=>i.handleMouseOut("takeActionButton")),onUserTap:i.handleTouchStart},{default:C(()=>e[12]||(e[12]=[I(" Take action ")])),_:1},8,["menu-component","open-menu-item","dropdown-icon","onOnHover","onUserTap"])),[[f,["TopNav","click-take-action"]]]),P(a,{"ref-name":"aboutUsLink","data-testid":"header-about","base-class":"tw-hidden md:tw-inline-flex tw-py-1","menu-component":i.KvHeaderAboutMenu,"open-menu-item":r.openMenuItem,"dropdown-icon":i.mdiChevronDown,"send-link-position":"",onOnHover:i.handleOnHover,onMouseleave:e[6]||(e[6]=c=>i.handleMouseOut("aboutUsLink")),onUserTap:i.handleTouchStart},{default:C(()=>e[13]||(e[13]=[I(" About ")])),_:1},8,["menu-component","open-menu-item","dropdown-icon","onOnHover","onUserTap"]),e[17]||(e[17]=M("div",{class:"tw-flex-1 tw-h-full"},null,-1)),r.loggedIn?A((w(),E("a",{key:0,ref:"dashboardLink",href:r.myDashboardUrl,class:V(["header-link tw-hidden md:tw-block",{"tw-text-tertiary":!!r.openMenuItem}])},e[14]||(e[14]=[I(" My dashboard ")]),10,Rr)),[[f,["TopNav","click-Dashboard"]]]):j("",!0),A((w(),E("a",{ref:"basketLink",href:"/basket",class:V(["header-link tw-relative md:!tw-mr-0 tw-flex tw-items-center tw-gap-0.5",{"tw-text-tertiary":!!r.openMenuItem}]),style:G([r.isBasketDataLoading?{display:"var(--basket-display, flex)"}:void 0,{"margin-right":"2px"}]),"data-testid":"header-basket"},[P(u,{class:"tw-w-3 tw-h-3 md:tw-w-3.5 md:tw-h-3.5 tw-pointer-events-none tw-text-action",count:r.isBasketDataLoading?0:r.basketCount},null,8,["count"]),e[15]||(e[15]=M("span",{class:"tw-hidden md:tw-block"},"Basket",-1))],6)),[[U,r.isBasketDataLoading?!0:r.basketCount>0],[f,["TopNav","click-Basket"]]]),M("div",{class:"md:tw-py-1",onMouseenter:e[7]||(e[7]=c=>i.handleOnHover(i.AVATAR_MENU_ID,i.KvHeaderMyKivaMenu,i.getAvatarMenuPosition())),onMouseleave:e[8]||(e[8]=c=>i.handleMouseOut(i.AVATAR_MENU_ID)),onTouchstart:e[9]||(e[9]=W(c=>i.handleTouchStart(i.AVATAR_MENU_ID),["stop"]))},[A(M("div",qr,[P(s,{icon:i.mdiAccountCircle,class:"tw-w-3",style:G(r.isUserDataLoading?{display:"var(--user-avatar-legacy-display, inline-block)"}:{display:i.isDefaultProfilePic?"inline-block":"none"})},null,8,["icon","style"]),P(l,{class:"tw-w-3 tw-h-3","lender-name":r.lenderName,"lender-image-url":r.lenderImageUrl,style:G(r.isUserDataLoading?{display:"var(--user-avatar-display, inline-block)"}:{display:i.isDefaultProfilePic?"none":"inline-block"}),"show-css-placeholder":r.isUserDataLoading,"is-small":""},null,8,["lender-name","lender-image-url","style","show-css-placeholder"]),r.isUserDataLoading?(w(),E("div",Hr,[P(d)])):(w(),E("span",Vr,Z(i.numeral(i.roundedBalance).format("$0")),1))],512),[[U,r.loggedIn]])],32),r.loggedIn?j("",!0):A((w(),E("a",{key:1,ref:"signInLink",href:r.loginUrl,class:V(["header-link",{"tw-text-tertiary":!!r.openMenuItem}])},e[16]||(e[16]=[I(" Sign in ")]),10,Ur)),[[f,["TopNav","click-Sign-in"]]])],32)}const jr=ae(Or,[["render",Kr],["__scopeId","data-v-3db10484"]]),$r={},Wr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 57 23"};function zr(t,e){return w(),E("svg",Wr,e[0]||(e[0]=[M("path",{d:"M4.695.391H0v22.141h4.695V.391zm12.899 22.141h4.695V7.011h-4.695v15.521zm12.159 0h5.413l5.413-15.521h-4.662s-2.544 8.445-3.293 11.119h-.066c-.75-2.674-3.326-11.119-3.326-11.119h-4.956l5.477 15.521zm-23.537-8.31c7.37 0 9.092-6.158 9.092-7.21h-.637c-7.372 0-9.094 6.157-9.094 7.21h.639zm-.639.969c0 1.117 1.276 7.403 9.222 7.403h.638c0-1.119-1.277-7.403-9.221-7.403h-.639zM22.746 2.739C22.746 1.272 21.671 0 19.941 0c-1.727 0-2.804 1.272-2.804 2.739 0 1.468 1.077 2.739 2.804 2.739 1.73 0 2.805-1.271 2.805-2.739M57 7.011h-4.532V9.13c-.783-1.631-2.608-2.543-4.729-2.543-3.848 0-6.88 3.129-6.88 8.184 0 5.087 2.935 8.185 6.652 8.185 2.608 0 4.173-1.272 4.956-2.675v2.25H57V7.011zm-4.663 8.151c0 2.871-1.76 4.208-3.522 4.208-1.924 0-3.163-1.956-3.163-4.598 0-2.608 1.305-4.598 3.326-4.598 1.663 0 3.359 1.37 3.359 4.206v.782z",fill:"currentColor"},null,-1)]))}const Gr=ae($r,[["render",zr]]),Xr={components:{KvLogo:Gr}},Yr={class:"tw-h-2 lg:tw-h-2.5"};function Qr(t,e,r,i,o,n){const s=D("kv-logo");return w(),E("div",Yr,[P(s,{class:"tw-text-brand tw-w-auto tw-h-full tw-mx-auto"})])}const Jr=ae(Xr,[["render",Qr]]),Zr=(t,e)=>{let r=null;return(...i)=>{r&&clearTimeout(r),r=setTimeout(()=>t(...i),e)}},ei="4rem",ti=["lendMenu","aboutUsLink","takeActionButton"],ni={components:{KvHeaderLinkBar:jr,KvHeaderLogo:Jr,KvThemeProvider:Qn,KvPageContainer:ln},props:{loggedIn:{type:Boolean,default:!1},basketCount:{type:Number,default:0},loginUrl:{type:String,default:"/ui-login"},balance:{type:Number,default:0},isBasketDataLoading:{type:Boolean,default:!1},isBorrower:{type:Boolean,default:!1},isTrustee:{type:Boolean,default:!1},isUserDataLoading:{type:Boolean,default:!1},userId:{type:Number,default:null},myDashboardUrl:{type:String,default:"/mykiva"},lenderName:{type:String,default:""},lenderImageUrl:{type:String,default:""},showMGUpsellLink:{type:Boolean,default:!1},countriesNotLentToUrl:{type:String,default:"/lend/countries-not-lent"}},emits:["load-lend-menu-data"],setup(t,{emit:e}){const r=H(!0),i=H(null),o=H(!1),n=Fn(null),s=H(null),a=H({left:0,position:"relative"}),u=H(!1),l=H(null),d=H(!1),f=ne(()=>{var S,g;return((g=(S=s.value)==null?void 0:S.$options)==null?void 0:g.name)==="KvHeaderMobileMenu"}),c=Zr((S,g,m)=>{d.value&&(g?(l.value=S,n.value!==g&&(a.value={left:0,position:"relative"}),n.value=g,o.value=!0,m&&(a.value={...m,position:"absolute"})):o.value&&(o.value=!1,n.value=null))},100),h=S=>{var g;(g=s.value)==null||g.onLoad(S)},y=()=>{if(!f.value)return c()},v=()=>{e("load-lend-menu-data")},p=()=>u.value&&ti.includes(l.value)||!u.value&&f.value,k=()=>{u.value=(window==null?void 0:window.innerWidth)<an.breakpoints.md,p()&&(n.value=null,o.value=!1)},L=cn(k,100);return on(()=>{k(),window.addEventListener("resize",L),d.value=!0}),Dn(()=>{window.removeEventListener("resize",L)}),{HEADER_HEIGHT:ei,emitLendMenuEvent:v,isMobile:u,linksVisible:r,menuOpen:o,isMobileMenuActive:f,onHover:c,loadMenuData:h,handleOverlayClick:y,activeHeaderItem:i,menuComponent:n,menuComponentInstance:s,menuPosition:a}}},ri={href:"/",class:"tw-px-1 tw-py-2 tw-cursor-pointer tw-absolute tw-top-1/2 tw-left-1/2 tw--translate-y-1/2 tw--translate-x-1/2 tw-transition-all tw-duration-300"};function ii(t,e,r,i,o,n){const s=D("kv-header-link-bar"),a=D("kv-header-logo"),u=D("kv-page-container"),l=D("kv-theme-provider"),d=le("kv-track-event");return w(),N(l,{tag:"div",class:"tw-bg-primary"},{default:C(()=>[M("nav",{class:"tw-font-medium tw-relative",style:G({height:i.HEADER_HEIGHT})},[P(u,{class:"tw-h-full"},{default:C(()=>[P(Qe,{name:"header-fade"},{default:C(()=>[A(P(s,{"is-basket-data-loading":r.isBasketDataLoading,"is-user-data-loading":r.isUserDataLoading,"logged-in":r.loggedIn,"basket-count":r.basketCount,"login-url":r.loginUrl,"open-menu-item":i.menuComponent,"my-dashboard-url":r.myDashboardUrl,"lender-name":r.lenderName,"lender-image-url":r.lenderImageUrl,"is-mobile":i.isMobile,balance:r.balance,onItemHover:i.onHover},null,8,["is-basket-data-loading","is-user-data-loading","logged-in","basket-count","login-url","open-menu-item","my-dashboard-url","lender-name","lender-image-url","is-mobile","balance","onItemHover"]),[[U,i.linksVisible]])]),_:1}),A((w(),E("a",ri,[P(a)])),[[d,["TopNav","click-Logo"]]])]),_:1})],4),P(Qe,{name:"header-fade"},{default:C(()=>[A(M("div",{class:"tw-absolute tw-z-modal tw-h-full tw-inset-x-0 tw-bg-eco-green-4 bg-opacity-50 tw-min-h-screen",style:G({top:i.HEADER_HEIGHT}),onTouchstart:e[4]||(e[4]=(...f)=>i.handleOverlayClick&&i.handleOverlayClick(...f))},[M("div",{class:V(["tw-bg-primary tw-overflow-y-auto tw-w-full md:tw-w-auto tw-rounded-none md:tw-rounded-b-sm",{"tw-min-h-dvh":i.isMobileMenuActive}]),style:G({...i.menuPosition,maxHeight:i.isMobileMenuActive?"auto":`calc(100dvh - ${i.HEADER_HEIGHT})`}),onMouseenter:e[2]||(e[2]=f=>i.onHover(i.activeHeaderItem,i.menuComponent)),onMouseleave:e[3]||(e[3]=f=>i.onHover())},[(w(),N(On(i.menuComponent),{ref:"menuComponentInstance","logged-in":r.loggedIn,"login-url":r.loginUrl,"user-id":r.userId,"is-borrower":r.isBorrower,"is-trustee":r.isTrustee,"my-dashboard-url":r.myDashboardUrl,"show-m-g-upsell-link":r.showMGUpsellLink,"is-mobile":i.isMobile,"countries-not-lent-to-url":r.countriesNotLentToUrl,onLoadLendMenuData:i.emitLendMenuEvent,onClosingMenu:e[0]||(e[0]=f=>i.onHover()),onTouchstart:e[1]||(e[1]=W(()=>{},["stop"]))},null,40,["logged-in","login-url","user-id","is-borrower","is-trustee","my-dashboard-url","show-m-g-upsell-link","is-mobile","countries-not-lent-to-url","onLoadLendMenuData"]))],38)],36),[[U,i.menuOpen]])]),_:1})]),_:1})}const oi=ae(ni,[["render",ii],["__scopeId","data-v-cc14a1da"]]);function si(t){typeof window>"u"||window.hj&&(window.hj("identify",t==null?void 0:t.userId,{"Has ever logged in":t==null?void 0:t.hasEverLoggedIn,"Has lent before":t==null?void 0:t.hasLentBefore,"Has deposit before":t==null?void 0:t.hasDepositBefore}),(t==null?void 0:t.isFirstLoan)!==void 0&&window.hj("identify",t==null?void 0:t.userId,{"First loan":t==null?void 0:t.isFirstLoan,"Has direct loan":t==null?void 0:t.hasDirectLoan,"Has core loan":t==null?void 0:t.hasCoreLoan}))}function Ea(t){typeof window>"u"||window.hj&&window.hj("event",t)}const ai=`query wwwHeaderPrivate($basketId: String) {
	hasEverLoggedIn @client
	shop (basketId: $basketId) {
		id
		nonTrivialItemCount
		basket {
			id
			totals {
				itemTotal
			}
		}
	}
	my {
		id
		userAccount {
			id
			balance
		}
		lender {
			id
			image {
				id
				url( presetSize:lender_default )
			}
		}
		isBorrower
		mostRecentBorrowedLoan {
			id
		}
		trustee {
			id
		}
		teams (limit: 5) {
			totalCount
			values {
				id
				team {
					id
					name
					teamPublicId
				}
			}
		}
	}
}
`,ui={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"wwwHeaderPrivate"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"basketId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasEverLoggedIn"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[{kind:"Argument",name:{kind:"Name",value:"basketId"},value:{kind:"Variable",name:{kind:"Name",value:"basketId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonTrivialItemCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"basket"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totals"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemTotal"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"my"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userAccount"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"lender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"presetSize"},value:{kind:"EnumValue",value:"lender_default"}}],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"isBorrower"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mostRecentBorrowedLoan"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"trustee"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"teams"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"5"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"team"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"teamPublicId"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:541,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:ai}}},li=`query wwwHeaderPublic {
	general {
		teamsMenuEnabled: featureSetting(key: "teams_in_navbar.enabled") {
			key
			value
		}
	}
}
`,ci={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"wwwHeaderPublic"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"general"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"teamsMenuEnabled"},name:{kind:"Name",value:"featureSetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"teams_in_navbar.enabled",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:167,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:li}}},di=`query dropdown {
	usingTouch @client
}
`,fi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"dropdown"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"usingTouch"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:77,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:di}}};function hi(t){[...document.body.children].forEach(e=>e.addEventListener("touchstart",t))}function mi(t){[...document.body.children].forEach(e=>e.removeEventListener("touchstart",t))}function pi(t,e){const r=Array.isArray(e)?e:[e];for(let i=0;i<r.length;i+=1)if(r[i]===t.target||r[i].contains(t.target))return!0;return!1}const pn={name:"KvDropdown",inject:{apollo:{default:null},cookieStore:{default:null}},emits:["show","hide"],props:{controller:{type:String,required:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200}},data(){return{popper:null,styles:{},show:!1,timeout:null,usingTouch:!1}},computed:{reference(){return document.getElementById(this.controller)}},apollo:{query:fi,result({data:t}){this.usingTouch=t.usingTouch}},watch:{usingTouch(){this.usingTouch&&this.popper&&this.removeMouseEvents()},show(t){this.reference&&this.reference.setAttribute("aria-expanded",t?"true":"false"),this.$emit(t?"show":"hide")}},mounted(){this.reference?this.makeDropdown():console.error(`KvDropdown: Controller element with id ${this.controller} not found in document.`)},updated(){this.popper&&this.popper.scheduleUpdate()},beforeUnmount(){this.unmakeDropdown()},methods:{open(){this.setTimeout(async()=>{await this.initPopper(),this.show=!0,this.usingTouch&&this.attachBodyEvents()},this.openDelay)},close(){this.setTimeout(()=>{this.show=!1,this.usingTouch&&this.removeBodyEvents()},this.closeDelay)},toggle(){this.show?this.close():this.open()},makeDropdown(){this.attachEvents()},unmakeDropdown(){this.removeEvents(),this.popper&&this.popper.destroy()},remakeDropdown(){this.unmakeDropdown(),this.makeDropdown()},async initPopper(){if(this.popper)return;const{default:t}=await z(async()=>{const{default:e}=await import("./entry-popper-DpEq4IeYnp.js");return{default:e}},[],import.meta.url);this.popper||(this.popper=new t(this.reference,this.$el,{placement:"bottom-start",modifiers:{applyStyle:e=>{this.styles=e.styles,this.setAttributes(e.attributes)},preventOverflow:{padding:0}}}))},bodyTouchHandler(t){pi(t,[this.reference,this.$el])||(this.show=!1,this.removeBodyEvents())},referenceTapHandler(t){t.preventDefault(),this.toggle()},attachEvents(){this.reference.addEventListener("mouseover",this.open),this.reference.addEventListener("mouseout",this.close),this.$el.addEventListener("mouseover",this.open),this.$el.addEventListener("mouseout",this.close),this.reference.addEventListener("touchstart",this.referenceTapHandler)},attachBodyEvents(){hi(this.bodyTouchHandler)},removeEvents(){this.removeMouseEvents(),this.removeBodyEvents(),this.reference.removeEventListener("touchstart",this.referenceTapHandler)},removeMouseEvents(){this.reference.removeEventListener("mouseover",this.open),this.reference.removeEventListener("mouseover",this.close),this.$el.removeEventListener("mouseover",this.open),this.$el.removeEventListener("mouseout",this.close)},removeBodyEvents(){mi(this.bodyTouchHandler)},setAttributes(t){Object.keys(t).forEach(e=>{const r=t[e];r===!1?this.$el.removeAttribute(e):this.$el.setAttribute(e,r)})},setTimeout(t,e){window.clearTimeout(this.timeout),this.timeout=window.setTimeout(t,e)}}},vi=["aria-hidden"];function gi(t,e,r,i,o,n){return w(),E("div",{class:V(["dropdown-pane",{"is-open":o.show}]),style:G(o.styles),"aria-hidden":o.show?"false":"true"},[rn(t.$slots,"default",{},void 0,!0)],14,vi)}const vn=_e(pn,[["render",gi],["__scopeId","data-v-b84b249d"]]);pn.__docgenInfo={displayName:"KvDropdown",exportName:"default",description:"",tags:{},props:[{name:"controller",type:{name:"string"},required:!0},{name:"openDelay",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"closeDelay",type:{name:"number"},defaultValue:{func:!1,value:"200"}}],events:[{name:"show"},{name:"hide"}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/ui/ui/src/components/Kv/KvDropdown.vue"]};const yi={class:"tw-bg-secondary tw-rounded-xs tw-py-0.5 tw-px-1 tw-mr-1"},wi={key:0,class:"tw-w-3 tw-h-3"},_i=["src"],gn=Rn({__name:"MyKivaButton",props:{isUserDataLoading:{type:Boolean,default:!1},balance:{type:[String,Number],default:0},profilePic:{type:String,default:""},profilePicId:{type:[String,Number],default:""}},setup(t){const e=ne(()=>et(t.profilePicId));return(r,i)=>{const o=D("router-link"),n=le("kv-track-event");return A((w(),N(o,{"data-testid":"header-portfolio",to:"/portfolio",class:"tw-inline-flex"},{default:C(()=>[i[0]||(i[0]=M("span",{class:"tw-sr-only"},"My Portfolio",-1)),M("span",yi,[t.isUserDataLoading?(w(),E("div",wi,[P(Me(ct))])):(w(),E(X,{key:1},[I(Z(r.$filters.numeral(t.balance,"$0")),1)],64))]),P(Me(ce),{icon:Me(sn),class:"tw-w-3 tw-h-3 md:tw-w-3.5 md:tw-h-3.5",style:G(t.isUserDataLoading?{display:"var(--ui-data-user-avatar-legacy-display, inline-block)"}:{display:e.value?"inline-block":"none"})},null,8,["icon","style"]),A(M("img",{src:t.profilePic,alt:"My portfolio",class:"data-hj-suppress tw-w-3 tw-h-3 md:tw-w-3.5 md:tw-h-3.5 tw-rounded-full tw-overflow-hidden tw-object-fill",style:G(t.isUserDataLoading?{content:"var(--ui-data-user-avatar)",display:"var(--ui-data-user-avatar-display, inline-block)"}:{display:e.value?"none":"inline-block"})},null,12,_i),[[U,!e.value]])],void 0),_:1,__:[0]})),[[n,["TopNav","click-Portfolio"]]])}}});gn.__docgenInfo={exportName:"default",displayName:"MyKivaButton",description:"",tags:{},props:[{name:"isUserDataLoading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"balance",type:{name:"string|number"},defaultValue:{func:!1,value:"0"}},{name:"profilePic",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"profilePicId",type:{name:"string|number"},defaultValue:{func:!1,value:"''"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/Header/MyKivaButton.vue"]};const yn={name:"TeamsMenu",components:{KvDropdown:vn,KvMaterialIcon:ce},data(){return{mdiChevronDown:lt,teamMenuId:"teams-header-dropdown"}},props:{teams:{type:Object,default:()=>({})}},computed:{teamsData(){var t,e;return((e=(t=this.teams)==null?void 0:t.values)==null?void 0:e.slice(0,5))??[]},totalTeams(){var t;return((t=this.teams)==null?void 0:t.totalCount)??0},onlyTeamId(){var t,e,r;return((r=(e=(t=this.teamsData)==null?void 0:t[0])==null?void 0:e.team)==null?void 0:r.id)??null},onlyTeamPublicId(){var t,e,r;return((r=(e=(t=this.teamsData)==null?void 0:t[0])==null?void 0:e.team)==null?void 0:r.teamPublicId)??null}}},ki={class:"tw-group"},bi={class:"tw-flex"},Mi={key:0},Si=["href"],Ai=["href"],Ei={key:1,style:{width:"9rem"}},Ti=["href"],Li={key:0},xi={href:"/teams/my-teams"};function Ii(t,e,r,i,o,n){const s=D("kv-material-icon"),a=D("router-link"),u=D("kv-dropdown"),l=le("kv-track-event");return w(),E("div",ki,[A((w(),N(a,{id:o.teamMenuId,to:"/teams","data-testid":"header-lending-teams",class:"header__button tw-inline-flex"},{default:C(()=>[M("span",bi,[e[0]||(e[0]=I(" Lending Teams ")),n.totalTeams?(w(),N(s,{key:0,class:"tw-w-3 tw-h-3 tw-transition-transform tw-duration-300 group-hover:tw-rotate-180",icon:o.mdiChevronDown},null,8,["icon"])):j("",!0)])],void 0),_:1},8,["id"])),[[l,["topnav","click","lending-teams"]]]),n.totalTeams?(w(),N(u,{key:0,controller:o.teamMenuId,class:"dropdown-list","data-testid":"header-lending-teams-dropdown-list"},{default:C(()=>[n.totalTeams===1?(w(),E("ul",Mi,[M("li",null,[A((w(),E("a",{href:`/team/${n.onlyTeamPublicId}`},e[1]||(e[1]=[I(" My Team's activity ")]),8,Si)),[[l,["topnav","click","lending-teams","my-teams-activity",n.onlyTeamId]]])]),M("li",null,[A((w(),E("a",{href:`/team/${n.onlyTeamPublicId}/impact`},e[2]||(e[2]=[I(" My Team's impact ")]),8,Ai)),[[l,["topnav","click","lending-teams","my-teams-impact",n.onlyTeamId]]])])])):(w(),E("ul",Ei,[(w(!0),E(X,null,Je(n.teamsData,({team:d})=>(w(),E("li",{key:d.id},[A((w(),E("a",{href:`/team/${d.teamPublicId}`,class:"tw-whitespace-nowrap tw-text-ellipsis tw-overflow-hidden"},[I(Z(d.name),1)],8,Ti)),[[l,["topnav","click","lending-teams",d.name]]])]))),128)),n.totalTeams>n.teamsData.length?(w(),E("li",Li,[A((w(),E("a",xi,e[3]||(e[3]=[I(" View all my teams ")]))),[[l,["topnav","click","lending-teams","view-all-my-teams"]]])])):j("",!0)]))],void 0),_:1},8,["controller"])):j("",!0)])}const Ci=_e(yn,[["render",Ii],["__scopeId","data-v-27c54cda"]]);yn.__docgenInfo={displayName:"TeamsMenu",exportName:"default",description:"",tags:{},props:[{name:"teams",type:{name:"object"},defaultValue:{func:!1,value:"{}"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/Header/TeamsMenu.vue"]};const Ni=`query uiConfigSetting($key: String!) {
	general {
		uiConfigSetting(key: $key) {
			key
			value
		}
	}
}
`,Bi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"uiConfigSetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"key"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"general"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uiConfigSetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"key"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:144,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Ni}}},Pi="new_atb_experience_enable",Fi={inject:["apollo"],data(){return{enableAddToBasketExp:!1}},emits:["show-cart-modal"],created(){this.apollo.query({query:Bi,variables:{key:Pi}}).then(({data:t})=>{this.enableAddToBasketExp=dt(t,"general.uiConfigSetting.value")}).catch(t=>{un(t,"New Add to basket experience")})},methods:{showCartModal(t){this.$emit("show-cart-modal",t)}},computed:{isInExperimentPages(){const{path:t}=this.$route;return t.includes("lend")||t.includes("mykiva")}}},Di={data(){return{redirectToMyKivaHomepage:!1}},computed:{homePagePath(){return this.redirectToMyKivaHomepage?"/mykiva":"/"},portfolioPath(){return this.redirectToMyKivaHomepage?"/mykiva":"/portfolio"}},async mounted(){const{data:t}=await this.apollo.query({query:Gn}),e=(t==null?void 0:t.my)??null,r=dt(t,zn);r&&(this.redirectToMyKivaHomepage=Wn(this.apollo,this.$kvTrackEvent,r,this.cookieStore)&&(e==null?void 0:e.id))}},Oi=`query experimentAssignment($id: String) {
	experiment(id: $id) @client {
		id
		version
	}
}
`,bt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"experimentAssignment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"experiment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:131,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Oi}}},Ri=`query experimentSetting($key: String!) {
	general {
		uiExperimentSetting(key: $key) {
			key
			value
		}
	}
}
`,qi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"experimentSetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"key"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"general"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uiExperimentSetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"key"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:150,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Ri}}};function Ta(t,e){try{const r=t.readQuery({query:qi,variables:{key:e}});return $n(r,"general.uiExperimentSetting.value")??{}}catch(r){return un(r,`getExperimentSettingCached experimentSetting: ${e}`),{}}}function Hi(t,e,r,i,o,n=void 0){const s=t.readFragment({id:`Experiment:${i}`,fragment:ft})??{};return s.version&&s.version!=="unassigned"&&e(r,o??i,s.version,n),s}const wn="combo_page_countries_not_lent_to",Vi={inject:["apollo","cookieStore"],data(){return{isCountriesNotLentToExp:!1}},computed:{countriesNotLentToUrl(){return this.isCountriesNotLentToExp?"/lend/filter?countries-not-lent-to=true":"/lend/countries-not-lent"}},mounted(){var t;this.isCountriesNotLentToExp=((t=this.apollo.readFragment({id:`Experiment:${wn}`,fragment:ft}))==null?void 0:t.version)==="b"}};var Se,Mt;function _n(){if(Mt)return Se;Mt=1;var t=Jn(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Se=e,Se}var Ae,St;function Ui(){if(St)return Ae;St=1;var t=_n();function e(r,i,o){i=="__proto__"&&t?t(r,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[i]=o}return Ae=e,Ae}var Ee,At;function Ki(){if(At)return Ee;At=1;function t(e,r,i,o){for(var n=-1,s=e==null?0:e.length;++n<s;){var a=e[n];r(o,a,i(a),e)}return o}return Ee=t,Ee}var Te,Et;function ji(){if(Et)return Te;Et=1;var t=fn();function e(r,i,o,n){return t(r,function(s,a,u){i(n,s,o(s),u)}),n}return Te=e,Te}var Le,Tt;function $i(){if(Tt)return Le;Tt=1;var t=Ki(),e=ji(),r=ht(),i=ke();function o(n,s){return function(a,u){var l=i(a)?t:e,d=s?s():{};return l(a,n,r(u,2),d)}}return Le=o,Le}var xe,Lt;function Wi(){if(Lt)return xe;Lt=1;var t=Ui(),e=$i(),r=Object.prototype,i=r.hasOwnProperty,o=e(function(n,s,a){i.call(n,a)?n[a].push(s):t(n,a,[s])});return xe=o,xe}var zi=Wi();const Gi=re(zi);var Ie,xt;function Xi(){if(xt)return Ie;xt=1;var t=dn(),e=ht(),r=Zn(),i=ke();function o(n,s){var a=i(n)?t:r;return a(n,e(s,3))}return Ie=o,Ie}var Yi=Xi();const ge=re(Yi);var Ce,It;function Qi(){if(It)return Ce;It=1;function t(e,r,i){var o=-1,n=e.length;r<0&&(r=-r>n?0:n+r),i=i>n?n:i,i<0&&(i+=n),n=r>i?0:i-r>>>0,r>>>=0;for(var s=Array(n);++o<n;)s[o]=e[o+r];return s}return Ce=t,Ce}var Ne,Ct;function Ji(){if(Ct)return Ne;Ct=1;var t=Qi(),e=nr();function r(i,o,n){return i&&i.length?(o=n||o===void 0?1:e(o),t(i,0,o<0?0:o)):[]}return Ne=r,Ne}var Zi=Ji();const eo=re(Zi);var Be,Nt;function to(){if(Nt)return Be;Nt=1;function t(e,r,i){switch(i.length){case 0:return e.call(r);case 1:return e.call(r,i[0]);case 2:return e.call(r,i[0],i[1]);case 3:return e.call(r,i[0],i[1],i[2])}return e.apply(r,i)}return Be=t,Be}var Pe,Bt;function no(){if(Bt)return Pe;Bt=1;var t=to(),e=Math.max;function r(i,o,n){return o=e(o===void 0?i.length-1:o,0),function(){for(var s=arguments,a=-1,u=e(s.length-o,0),l=Array(u);++a<u;)l[a]=s[o+a];a=-1;for(var d=Array(o+1);++a<o;)d[a]=s[a];return d[o]=n(l),t(i,this,d)}}return Pe=r,Pe}var Fe,Pt;function ro(){if(Pt)return Fe;Pt=1;function t(e){return function(){return e}}return Fe=t,Fe}var De,Ft;function io(){if(Ft)return De;Ft=1;var t=ro(),e=_n(),r=hn(),i=e?function(o,n){return e(o,"toString",{configurable:!0,enumerable:!1,value:t(n),writable:!0})}:r;return De=i,De}var Oe,Dt;function oo(){if(Dt)return Oe;Dt=1;var t=800,e=16,r=Date.now;function i(o){var n=0,s=0;return function(){var a=r(),u=e-(a-s);if(s=a,u>0){if(++n>=t)return arguments[0]}else n=0;return o.apply(void 0,arguments)}}return Oe=i,Oe}var Re,Ot;function so(){if(Ot)return Re;Ot=1;var t=io(),e=oo(),r=e(t);return Re=r,Re}var qe,Rt;function ao(){if(Rt)return qe;Rt=1;var t=hn(),e=no(),r=so();function i(o,n){return r(e(o,n,t),o+"")}return qe=i,qe}var He,qt;function uo(){if(qt)return He;qt=1;var t=rr(),e=sr();function r(i){return e(i)&&t(i)}return He=r,He}var Ve,Ht;function lo(){if(Ht)return Ve;Ht=1;var t=mn(),e=dn(),r=er(),i=ir(),o=uo(),n=Math.max;function s(a){if(!(a&&a.length))return[];var u=0;return a=t(a,function(l){if(o(l))return u=n(l.length,u),!0}),i(u,function(l){return e(a,r(l))})}return Ve=s,Ve}var Ue,Vt;function co(){if(Vt)return Ue;Vt=1;var t=ao(),e=lo(),r=t(e);return Ue=r,Ue}var fo=co();const ho=re(fo),mo=`query loanSearchSuggestions {
	lend {
		loanSearchSuggestions {
			group
			label
			query
		}
	}
}
`,po={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"loanSearchSuggestions"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lend"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"loanSearchSuggestions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"query"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:138,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:mo}}};var Ke,Ut;function vo(){if(Ut)return Ke;Ut=1;var t=fn();function e(r,i){var o=[];return t(r,function(n,s,a){i(n,s,a)&&o.push(n)}),o}return Ke=e,Ke}var je,Kt;function go(){if(Kt)return je;Kt=1;var t=mn(),e=vo(),r=ht(),i=ke();function o(n,s){var a=i(n)?t:e;return a(n,r(s,3))}return je=o,je}var yo=go();const wo=re(yo);var $e,jt;function _o(){if(jt)return $e;jt=1;var t=ar(),e=or(),r=ke(),i=t?t.isConcatSpreadable:void 0;function o(n){return r(n)||e(n)||!!(i&&n&&n[i])}return $e=o,$e}var We,$t;function ko(){if($t)return We;$t=1;var t=tr(),e=_o();function r(i,o,n,s,a){var u=-1,l=i.length;for(n||(n=e),a||(a=[]);++u<l;){var d=i[u];o>0&&n(d)?o>1?r(d,o-1,n,s,a):t(a,d):s||(a[a.length]=d)}return a}return We=r,We}var ze,Wt;function bo(){if(Wt)return ze;Wt=1;var t=ko();function e(r){var i=r==null?0:r.length;return i?t(r,1):[]}return ze=e,ze}var Mo=bo();const So=re(Mo);function J(t){return Array.isArray?Array.isArray(t):Mn(t)==="[object Array]"}function Ao(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Eo(t){return t==null?"":Ao(t)}function Q(t){return typeof t=="string"}function kn(t){return typeof t=="number"}function To(t){return t===!0||t===!1||Lo(t)&&Mn(t)=="[object Boolean]"}function bn(t){return typeof t=="object"}function Lo(t){return bn(t)&&t!==null}function $(t){return t!=null}function Ge(t){return!t.trim().length}function Mn(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const xo="Incorrect 'index' type",Io=t=>`Invalid value for key ${t}`,Co=t=>`Pattern length exceeds max of ${t}.`,No=t=>`Missing ${t} property in key`,Bo=t=>`Property 'weight' in key '${t}' must be a positive integer`,zt=Object.prototype.hasOwnProperty;class Po{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(i=>{let o=Sn(i);this._keys.push(o),this._keyMap[o.id]=o,r+=o.weight}),this._keys.forEach(i=>{i.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Sn(t){let e=null,r=null,i=null,o=1,n=null;if(Q(t)||J(t))i=t,e=Gt(t),r=tt(t);else{if(!zt.call(t,"name"))throw new Error(No("name"));const s=t.name;if(i=s,zt.call(t,"weight")&&(o=t.weight,o<=0))throw new Error(Bo(s));e=Gt(s),r=tt(s),n=t.getFn}return{path:e,id:r,weight:o,src:i,getFn:n}}function Gt(t){return J(t)?t:t.split(".")}function tt(t){return J(t)?t.join("."):t}function Fo(t,e){let r=[],i=!1;const o=(n,s,a)=>{if($(n))if(!s[a])r.push(n);else{let u=s[a];const l=n[u];if(!$(l))return;if(a===s.length-1&&(Q(l)||kn(l)||To(l)))r.push(Eo(l));else if(J(l)){i=!0;for(let d=0,f=l.length;d<f;d+=1)o(l[d],s,a+1)}else s.length&&o(l,s,a+1)}};return o(t,Q(e)?e.split("."):e,0),i?r:r[0]}const Do={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Oo={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Ro={location:0,threshold:.6,distance:100},qo={useExtendedSearch:!1,getFn:Fo,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var T={...Oo,...Do,...Ro,...qo};const Ho=/[^ ]+/g;function Vo(t=1,e=3){const r=new Map,i=Math.pow(10,e);return{get(o){const n=o.match(Ho).length;if(r.has(n))return r.get(n);const s=1/Math.pow(n,.5*t),a=parseFloat(Math.round(s*i)/i);return r.set(n,a),a},clear(){r.clear()}}}class mt{constructor({getFn:e=T.getFn,fieldNormWeight:r=T.fieldNormWeight}={}){this.norm=Vo(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,i)=>{this._keysMap[r.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Q(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();Q(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,i=this.size();r<i;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!$(e)||Ge(e))return;let i={v:e,i:r,n:this.norm.get(e)};this.records.push(i)}_addObject(e,r){let i={i:r,$:{}};this.keys.forEach((o,n)=>{let s=o.getFn?o.getFn(e):this.getFn(e,o.path);if($(s)){if(J(s)){let a=[];const u=[{nestedArrIndex:-1,value:s}];for(;u.length;){const{nestedArrIndex:l,value:d}=u.pop();if($(d))if(Q(d)&&!Ge(d)){let f={v:d,i:l,n:this.norm.get(d)};a.push(f)}else J(d)&&d.forEach((f,c)=>{u.push({nestedArrIndex:c,value:f})})}i.$[n]=a}else if(Q(s)&&!Ge(s)){let a={v:s,n:this.norm.get(s)};i.$[n]=a}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function An(t,e,{getFn:r=T.getFn,fieldNormWeight:i=T.fieldNormWeight}={}){const o=new mt({getFn:r,fieldNormWeight:i});return o.setKeys(t.map(Sn)),o.setSources(e),o.create(),o}function Uo(t,{getFn:e=T.getFn,fieldNormWeight:r=T.fieldNormWeight}={}){const{keys:i,records:o}=t,n=new mt({getFn:e,fieldNormWeight:r});return n.setKeys(i),n.setIndexRecords(o),n}function he(t,{errors:e=0,currentLocation:r=0,expectedLocation:i=0,distance:o=T.distance,ignoreLocation:n=T.ignoreLocation}={}){const s=e/t.length;if(n)return s;const a=Math.abs(i-r);return o?s+a/o:a?1:s}function Ko(t=[],e=T.minMatchCharLength){let r=[],i=-1,o=-1,n=0;for(let s=t.length;n<s;n+=1){let a=t[n];a&&i===-1?i=n:!a&&i!==-1&&(o=n-1,o-i+1>=e&&r.push([i,o]),i=-1)}return t[n-1]&&n-i>=e&&r.push([i,n-1]),r}const te=32;function jo(t,e,r,{location:i=T.location,distance:o=T.distance,threshold:n=T.threshold,findAllMatches:s=T.findAllMatches,minMatchCharLength:a=T.minMatchCharLength,includeMatches:u=T.includeMatches,ignoreLocation:l=T.ignoreLocation}={}){if(e.length>te)throw new Error(Co(te));const d=e.length,f=t.length,c=Math.max(0,Math.min(i,f));let h=n,y=c;const v=a>1||u,p=v?Array(f):[];let k;for(;(k=t.indexOf(e,y))>-1;){let b=he(e,{currentLocation:k,expectedLocation:c,distance:o,ignoreLocation:l});if(h=Math.min(b,h),y=k+d,v){let F=0;for(;F<d;)p[k+F]=1,F+=1}}y=-1;let L=[],S=1,g=d+f;const m=1<<d-1;for(let b=0;b<d;b+=1){let F=0,B=g;for(;F<B;)he(e,{errors:b,currentLocation:c+B,expectedLocation:c,distance:o,ignoreLocation:l})<=h?F=B:g=B,B=Math.floor((g-F)/2+F);g=B;let x=Math.max(1,c-B+1),O=s?f:Math.min(c+B,f)+d,R=Array(O+2);R[O+1]=(1<<b)-1;for(let q=O;q>=x;q-=1){let de=q-1,pt=r[t.charAt(de)];if(v&&(p[de]=+!!pt),R[q]=(R[q+1]<<1|1)&pt,b&&(R[q]|=(L[q+1]|L[q])<<1|1|L[q+1]),R[q]&m&&(S=he(e,{errors:b,currentLocation:de,expectedLocation:c,distance:o,ignoreLocation:l}),S<=h)){if(h=S,y=de,y<=c)break;x=Math.max(1,2*c-y)}}if(he(e,{errors:b+1,currentLocation:c,expectedLocation:c,distance:o,ignoreLocation:l})>h)break;L=R}const _={isMatch:y>=0,score:Math.max(.001,S)};if(v){const b=Ko(p,a);b.length?u&&(_.indices=b):_.isMatch=!1}return _}function $o(t){let e={};for(let r=0,i=t.length;r<i;r+=1){const o=t.charAt(r);e[o]=(e[o]||0)|1<<i-r-1}return e}const ye=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class En{constructor(e,{location:r=T.location,threshold:i=T.threshold,distance:o=T.distance,includeMatches:n=T.includeMatches,findAllMatches:s=T.findAllMatches,minMatchCharLength:a=T.minMatchCharLength,isCaseSensitive:u=T.isCaseSensitive,ignoreDiacritics:l=T.ignoreDiacritics,ignoreLocation:d=T.ignoreLocation}={}){if(this.options={location:r,threshold:i,distance:o,includeMatches:n,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:u,ignoreDiacritics:l,ignoreLocation:d},e=u?e:e.toLowerCase(),e=l?ye(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const f=(h,y)=>{this.chunks.push({pattern:h,alphabet:$o(h),startIndex:y})},c=this.pattern.length;if(c>te){let h=0;const y=c%te,v=c-y;for(;h<v;)f(this.pattern.substr(h,te),h),h+=te;if(y){const p=c-te;f(this.pattern.substr(p),p)}}else f(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,ignoreDiacritics:i,includeMatches:o}=this.options;if(e=r?e:e.toLowerCase(),e=i?ye(e):e,this.pattern===e){let v={isMatch:!0,score:0};return o&&(v.indices=[[0,e.length-1]]),v}const{location:n,distance:s,threshold:a,findAllMatches:u,minMatchCharLength:l,ignoreLocation:d}=this.options;let f=[],c=0,h=!1;this.chunks.forEach(({pattern:v,alphabet:p,startIndex:k})=>{const{isMatch:L,score:S,indices:g}=jo(e,v,p,{location:n+k,distance:s,threshold:a,findAllMatches:u,minMatchCharLength:l,includeMatches:o,ignoreLocation:d});L&&(h=!0),c+=S,L&&g&&(f=[...f,...g])});let y={isMatch:h,score:h?c/this.chunks.length:1};return h&&o&&(y.indices=f),y}}class ee{constructor(e){this.pattern=e}static isMultiMatch(e){return Xt(e,this.multiRegex)}static isSingleMatch(e){return Xt(e,this.singleRegex)}search(){}}function Xt(t,e){const r=t.match(e);return r?r[1]:null}class Wo extends ee{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class zo extends ee{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class Go extends ee{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Xo extends ee{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Yo extends ee{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Qo extends ee{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Tn extends ee{constructor(e,{location:r=T.location,threshold:i=T.threshold,distance:o=T.distance,includeMatches:n=T.includeMatches,findAllMatches:s=T.findAllMatches,minMatchCharLength:a=T.minMatchCharLength,isCaseSensitive:u=T.isCaseSensitive,ignoreDiacritics:l=T.ignoreDiacritics,ignoreLocation:d=T.ignoreLocation}={}){super(e),this._bitapSearch=new En(e,{location:r,threshold:i,distance:o,includeMatches:n,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:u,ignoreDiacritics:l,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ln extends ee{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,i;const o=[],n=this.pattern.length;for(;(i=e.indexOf(this.pattern,r))>-1;)r=i+n,o.push([i,r-1]);const s=!!o.length;return{isMatch:s,score:s?0:1,indices:o}}}const nt=[Wo,Ln,Go,Xo,Qo,Yo,zo,Tn],Yt=nt.length,Jo=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Zo="|";function es(t,e={}){return t.split(Zo).map(r=>{let i=r.trim().split(Jo).filter(n=>n&&!!n.trim()),o=[];for(let n=0,s=i.length;n<s;n+=1){const a=i[n];let u=!1,l=-1;for(;!u&&++l<Yt;){const d=nt[l];let f=d.isMultiMatch(a);f&&(o.push(new d(f,e)),u=!0)}if(!u)for(l=-1;++l<Yt;){const d=nt[l];let f=d.isSingleMatch(a);if(f){o.push(new d(f,e));break}}}return o})}const ts=new Set([Tn.type,Ln.type]);class ns{constructor(e,{isCaseSensitive:r=T.isCaseSensitive,ignoreDiacritics:i=T.ignoreDiacritics,includeMatches:o=T.includeMatches,minMatchCharLength:n=T.minMatchCharLength,ignoreLocation:s=T.ignoreLocation,findAllMatches:a=T.findAllMatches,location:u=T.location,threshold:l=T.threshold,distance:d=T.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:i,includeMatches:o,minMatchCharLength:n,findAllMatches:a,ignoreLocation:s,location:u,threshold:l,distance:d},e=r?e:e.toLowerCase(),e=i?ye(e):e,this.pattern=e,this.query=es(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:o,ignoreDiacritics:n}=this.options;e=o?e:e.toLowerCase(),e=n?ye(e):e;let s=0,a=[],u=0;for(let l=0,d=r.length;l<d;l+=1){const f=r[l];a.length=0,s=0;for(let c=0,h=f.length;c<h;c+=1){const y=f[c],{isMatch:v,indices:p,score:k}=y.search(e);if(v){if(s+=1,u+=k,i){const L=y.constructor.type;ts.has(L)?a=[...a,...p]:a.push(p)}}else{u=0,s=0,a.length=0;break}}if(s){let c={isMatch:!0,score:u/s};return i&&(c.indices=a),c}}return{isMatch:!1,score:1}}}const rt=[];function rs(...t){rt.push(...t)}function it(t,e){for(let r=0,i=rt.length;r<i;r+=1){let o=rt[r];if(o.condition(t,e))return new o(t,e)}return new En(t,e)}const we={AND:"$and",OR:"$or"},ot={PATH:"$path",PATTERN:"$val"},st=t=>!!(t[we.AND]||t[we.OR]),is=t=>!!t[ot.PATH],os=t=>!J(t)&&bn(t)&&!st(t),Qt=t=>({[we.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function xn(t,e,{auto:r=!0}={}){const i=o=>{let n=Object.keys(o);const s=is(o);if(!s&&n.length>1&&!st(o))return i(Qt(o));if(os(o)){const u=s?o[ot.PATH]:n[0],l=s?o[ot.PATTERN]:o[u];if(!Q(l))throw new Error(Io(u));const d={keyId:tt(u),pattern:l};return r&&(d.searcher=it(l,e)),d}let a={children:[],operator:n[0]};return n.forEach(u=>{const l=o[u];J(l)&&l.forEach(d=>{a.children.push(i(d))})}),a};return st(t)||(t=Qt(t)),i(t)}function ss(t,{ignoreFieldNorm:e=T.ignoreFieldNorm}){t.forEach(r=>{let i=1;r.matches.forEach(({key:o,norm:n,score:s})=>{const a=o?o.weight:null;i*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(e?1:n))}),r.score=i})}function as(t,e){const r=t.matches;e.matches=[],$(r)&&r.forEach(i=>{if(!$(i.indices)||!i.indices.length)return;const{indices:o,value:n}=i;let s={indices:o,value:n};i.key&&(s.key=i.key.src),i.idx>-1&&(s.refIndex=i.idx),e.matches.push(s)})}function us(t,e){e.score=t.score}function ls(t,e,{includeMatches:r=T.includeMatches,includeScore:i=T.includeScore}={}){const o=[];return r&&o.push(as),i&&o.push(us),t.map(n=>{const{idx:s}=n,a={item:e[s],refIndex:s};return o.length&&o.forEach(u=>{u(n,a)}),a})}class ue{constructor(e,r={},i){this.options={...T,...r},this.options.useExtendedSearch,this._keyStore=new Po(this.options.keys),this.setCollection(e,i)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof mt))throw new Error(xo);this._myIndex=r||An(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){$(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let i=0,o=this._docs.length;i<o;i+=1){const n=this._docs[i];e(n,i)&&(this.removeAt(i),i-=1,o-=1,r.push(n))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:i,includeScore:o,shouldSort:n,sortFn:s,ignoreFieldNorm:a}=this.options;let u=Q(e)?Q(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ss(u,{ignoreFieldNorm:a}),n&&u.sort(s),kn(r)&&r>-1&&(u=u.slice(0,r)),ls(u,this._docs,{includeMatches:i,includeScore:o})}_searchStringList(e){const r=it(e,this.options),{records:i}=this._myIndex,o=[];return i.forEach(({v:n,i:s,n:a})=>{if(!$(n))return;const{isMatch:u,score:l,indices:d}=r.searchIn(n);u&&o.push({item:n,idx:s,matches:[{score:l,value:n,norm:a,indices:d}]})}),o}_searchLogical(e){const r=xn(e,this.options),i=(a,u,l)=>{if(!a.children){const{keyId:f,searcher:c}=a,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:c});return h&&h.length?[{idx:l,item:u,matches:h}]:[]}const d=[];for(let f=0,c=a.children.length;f<c;f+=1){const h=a.children[f],y=i(h,u,l);if(y.length)d.push(...y);else if(a.operator===we.AND)return[]}return d},o=this._myIndex.records,n={},s=[];return o.forEach(({$:a,i:u})=>{if($(a)){let l=i(r,a,u);l.length&&(n[u]||(n[u]={idx:u,item:a,matches:[]},s.push(n[u])),l.forEach(({matches:d})=>{n[u].matches.push(...d)}))}}),s}_searchObjectList(e){const r=it(e,this.options),{keys:i,records:o}=this._myIndex,n=[];return o.forEach(({$:s,i:a})=>{if(!$(s))return;let u=[];i.forEach((l,d)=>{u.push(...this._findMatches({key:l,value:s[d],searcher:r}))}),u.length&&n.push({idx:a,item:s,matches:u})}),n}_findMatches({key:e,value:r,searcher:i}){if(!$(r))return[];let o=[];if(J(r))r.forEach(({v:n,i:s,n:a})=>{if(!$(n))return;const{isMatch:u,score:l,indices:d}=i.searchIn(n);u&&o.push({score:l,key:e,value:n,idx:s,norm:a,indices:d})});else{const{v:n,n:s}=r,{isMatch:a,score:u,indices:l}=i.searchIn(n);a&&o.push({score:u,key:e,value:n,norm:s,indices:l})}return o}}ue.version="7.1.0";ue.createIndex=An;ue.parseIndex=Uo;ue.config=T;ue.parseQuery=xn;rs(ns);class cs{constructor(e=[]){this.ready=new Promise(r=>{this.resolveReady=r}),e.length&&this.init(e)}reset(e){this.fuse?this.fuse.setCollection(e):this.init(e)}init(e){this.fuse=new ue(e,{threshold:.25,distance:1e5,includeMatches:!0,keys:["label","keywords"]}),this.resolveReady()}search(e){return this.ready.then(()=>new Promise(r=>{const i=this.fuse.search(e),o=wo(i,s=>s.matches.length),n=ge(o,({item:s,matches:a})=>({...s,matches:So(ge(a,"indices"))}));r(n.sort(ur(e,"label")))}))}}function ds(t){const e=["city_state","loanTags","state","loanLimit"];return Object.keys(t).filter(i=>e.includes(i)).length>0}const Jt=new cs,In={name:"SearchBar",serverCacheKey:()=>fr("SearchBar"),components:{KvTextInput:hr},inject:["apollo"],mixins:[dr],data(){return{term:"",listIndex:-1,hasFocus:!1,searching:!1,rawResults:[],searchResultsStyle:null,mdiMagnify:ut}},computed:{displayTerm(){return this.highlighted.label?this.highlighted.label:this.term},highlighted(){if(this.listIndex>-1){let t=this.listIndex;for(let e=0;e<this.sections.length;e+=1){if(this.sections[e].suggestions.length>t)return this.sections[e].suggestions[t];t-=this.sections[e].suggestions.length}}return{}},showResults(){return this.sections.length>0&&this.hasFocus&&!this.searching},sections(){const t=Gi(this.rawResults,"group"),e=ge(t,(i,o)=>{const n=eo(i,5);return{name:o,suggestions:n}}),r=["Gender","Regions","Countries and Territories","United States","U.S. cities","Sectors","Group or Individual","Attributes","User tags","Partners","Gifts"];return e.sort(lr(r,"name"))}},methods:{focus(){this.$refs.input.focus()},onFocus(){this.hasFocus=!0,this.apollo.query({query:po}).then(({data:t})=>{t&&t.lend&&Jt.reset([...t.lend.loanSearchSuggestions,{group:"Gifts",label:"Kiva Cards",keywords:["gift card","kiva card","gift","gift certificate"],url:"https://www.kiva.org/gifts/kiva-cards"},{group:"Gifts",label:"Kiva Store",keywords:["gift card","kiva card","gift","gift certificate"],url:"https://store.kiva.org"}])}),this.$kvTrackEvent("search","click","Nav-search-bar")},onBlur(){this.hasFocus=!1,this.listIndex=-1},onInput(t){this.term=t},onSubmit(){this.listIndex>-1?this.runSearch(this.highlighted):this.runSearch(this.term)},listDown(){this.listIndex+=1,this.listIndex===this.rawResults.length&&(this.listIndex=-1)},listUp(){this.listIndex===-1&&(this.listIndex=this.rawResults.length),this.listIndex-=1},runSearch(t){let e;if(this.searching=!0,typeof t=="string"?this.$kvTrackEvent("search","click","custom-search-option",t):this.$kvTrackEvent("search","click","type-ahead-search",t.label),t.url)window.location=t.url;else{if(t.query){const[i,o]=t.query.split("=");e={[i]:o}}else e={queryString:t};let r="/lend/filter";ds(e)&&(r="/lend"),this.$router.currentRoute.fullPath!==`${r}?${new URLSearchParams(e).toString()}`&&this.$router.push({path:r,query:e}),this.searching=!1,this.$refs.input.blur()}},formatResult({label:t,matches:e}){if(!e||!e.length)return t;const[r,i]=ho(...e);return ge(t,(n,s)=>{const a=r.indexOf(s)>-1?'<mark class="tw-bg-tertiary tw-rounded-xs tw-mix-blend-multiply tw-p-0.5 tw--m-0.5">':"",u=i.indexOf(s)>-1?"</mark>":"";return`${a}${n}${u}`}).join("")}},watch:{hasFocus(t){if(t){const e=this.$refs.input.$el.getBoundingClientRect().bottom;this.searchResultsStyle={"--search-input-bottom":`${e}px`},this.lockScrollSmallOnly()}else this.unlockScrollSmallOnly()},term(t){this.listIndex=-1,t.length>0?Jt.search(t).then(e=>{this.rawResults=e}):this.rawResults=[]}}},fs=["data-testid"],hs={class:"tw-text-base tw-py-0.5"},ms=["onClick"],ps=["innerHTML"];function vs(t,e,r,i,o,n){const s=D("kv-text-input");return w(),E("form",{class:"search-form tw-relative",autocomplete:"off",onSubmit:e[1]||(e[1]=W((...a)=>n.onSubmit&&n.onSubmit(...a),["prevent"]))},[e[2]||(e[2]=M("label",{for:"top-nav-search",class:"tw-sr-only"},"Search all loans",-1)),P(s,{type:"text",id:"top-nav-search",ref:"input",name:"queryString","data-testid":"header-search-text-input",icon:o.mdiMagnify,"model-value":n.displayTerm,"can-clear":!0,class:"tw-w-full",onInput:n.onInput,onFocus:n.onFocus,onBlur:n.onBlur,onKeydown:[gt(W(n.listUp,["prevent"]),["up"]),gt(W(n.listDown,["prevent"]),["down"])],placeholder:"Search all loans"},null,8,["icon","model-value","onInput","onFocus","onBlur","onKeydown"]),A(M("ol",{style:G(o.searchResultsStyle),class:"search-results tw-w-full tw-bg-primary tw-p-2.5 tw-border tw-border-tertiary tw-fixed tw-z-popover tw-right-0 tw-bottom-0 tw-left-0 tw-overflow-auto md:tw-absolute md:tw-bottom-auto md:tw-top-auto md:tw-rounded-b"},[(w(!0),E(X,null,Je(n.sections,a=>(w(),E("li",{key:a.name,class:"section","data-testid":`header-search-results-${a.name}`},[M("h2",hs,Z(a.name),1),M("ol",null,[(w(!0),E(X,null,Je(a.suggestions,u=>(w(),E("li",{key:u.label,onMousedown:e[0]||(e[0]=W(()=>{},["prevent"])),onClick:l=>n.runSearch(u),"data-testid":"header-search-result-item",class:V(["tw-pl-1.5 tw-py-0.5 tw-rounded-xs tw-font-medium tw-cursor-pointer hover:tw-bg-secondary hover:tw-underline",{"tw-bg-secondary tw-underline":u.label===n.highlighted.label}])},[M("span",{innerHTML:n.formatResult(u)},null,8,ps)],42,ms))),128))])],8,fs))),128))],4),[[U,n.showResults]]),e[3]||(e[3]=M("input",{type:"submit",class:"tw-sr-only","aria-hidden":"true",tabindex:"-1"},null,-1))],32)}const gs=_e(In,[["render",vs],["__scopeId","data-v-1fa80218"]]);In.__docgenInfo={displayName:"SearchBar",exportName:"default",description:"",tags:{},sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/SearchBar.vue"]};const Zt="opt_in_comms",ys="home_page",Cn={name:"TheHeader",components:{CampaignLogoGroup:Kn,KivaLogo:Hn,KvDropdown:vn,KvLoadingPlaceholder:ct,KvMaterialIcon:ce,KvPageContainer:ln,MyKivaButton:gn,PromoCreditBanner:cr,SearchBar:gs,KvButton:Xn,TheLendMenu:se(()=>z(()=>import("./entry-TheLendMenu-WXwMwN_S94.js"),__vite__mapDeps([23,24,6,25,26,27,28,29,7,30,8,31,3,32,33,34,35,1,10,5,9,15,16,17,18,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,19,51,52,53,54,55,56,57,58,59]),import.meta.url)),TeamsMenu:Ci,KvWwwHeader:oi},inject:{apollo:{default:null},cookieStore:{default:null},kvAuth0:{default:null}},mixins:[Fi,Di,Vi],data(){return{aboutMenuId:"about-header-dropdown",balance:0,basketCount:0,basketTotal:0,hasEverLoggedIn:!1,hideLendMenuTimeout:null,isBasketLoading:!1,isBorrower:!1,isLendMenuDesired:!1,isLendMenuVisible:!1,isMobile:!1,isUserDataLoading:!1,lcaLoanCount:0,lendMenuId:"lend-header-dropdown",loanId:null,mdiBriefcase:Un,mdiChevronDown:lt,mdiMagnify:ut,myKivaMenuId:"my-kiva-header-dropdown",profilePic:"",profilePicId:null,searchOpen:!1,teams:null,teamsMenuEnabled:!1,trusteeId:null,userId:null,isNavUpdateExp:!1,isCountriesNotLentToExp:!1,throttledDetermineIfMobile:null}},emits:["show-basket"],props:{hideSearchInHeader:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},corporate:{type:Boolean,default:!1},corporateLogoUrl:{type:String,default:""},logoHeight:{type:String,default:"28",required:!1},logoClasses:{type:String,default:"",required:!1}},computed:{isVisitor(){var t;return!this.userId&&!((t=this.$renderConfig)!=null&&t.cdnNotedLoggedIn)},isTrustee(){return!!this.trusteeId},trusteeLoansUrl(){return{path:"/lend",query:{trustee:this.trusteeId,status:"fundraising",sortBy:"newest"}}},hasBasket(){return this.corporate?this.basketCount-this.lcaLoanCount>0:this.basketCount>0},hidePromoCreditBanner(){var i;const t=["/cc","/checkout"],e=(i=this.$route)==null?void 0:i.path;return t.filter(o=>e.indexOf(o)!==-1).length>0},loginUrl(){return this.$route.path==="/"?"/ui-login":`/ui-login?doneUrl=${encodeURIComponent(this.$route.fullPath)}`},openTabletVariant(){return this.hasBasket&&this.isVisitor||this.hasBasket||this.balance},hasLargeBasket(){return this.basketTotal>500},basketNumber(){return this.hasLargeBasket?Ze(this.basketTotal).format("$0,0"):this.basketCount}},apollo:[{query:ci,preFetch:!0,result({data:t}){this.teamsMenuEnabled=dt(t,"general.teamsMenuEnabled.value")}},{query:ui,preFetch:!0,shouldPreFetch(t,{renderConfig:e}){return!e.useCDNCaching},result({data:t}){var e,r,i,o,n,s,a,u,l,d,f,c,h,y,v,p,k,L,S,g;this.isBasketLoading=!1,this.isUserDataLoading=!1,this.userId=((r=(e=t==null?void 0:t.my)==null?void 0:e.userAccount)==null?void 0:r.id)??null,this.isBorrower=((i=t==null?void 0:t.my)==null?void 0:i.isBorrower)??!1,this.loanId=((n=(o=t==null?void 0:t.my)==null?void 0:o.mostRecentBorrowedLoan)==null?void 0:n.id)??null,this.trusteeId=((a=(s=t==null?void 0:t.my)==null?void 0:s.trustee)==null?void 0:a.id)??null,this.basketCount=((u=t==null?void 0:t.shop)==null?void 0:u.nonTrivialItemCount)??0,this.balance=Math.floor(((d=(l=t==null?void 0:t.my)==null?void 0:l.userAccount)==null?void 0:d.balance)??0),this.profilePic=((h=(c=(f=t==null?void 0:t.my)==null?void 0:f.lender)==null?void 0:c.image)==null?void 0:h.url)??"",this.profilePicId=((p=(v=(y=t==null?void 0:t.my)==null?void 0:y.lender)==null?void 0:v.image)==null?void 0:p.id)??null,this.hasEverLoggedIn=t==null?void 0:t.hasEverLoggedIn,this.basketTotal=Ze((S=(L=(k=t.shop)==null?void 0:k.basket)==null?void 0:L.totals)==null?void 0:S.itemTotal).value()||0,this.teams=((g=t==null?void 0:t.my)==null?void 0:g.teams)??{}}},{query:bt,preFetch(t,e){return e.query({query:bt,variables:{id:ys}})}}],created(){var t,e,r;this.isBasketLoading=((t=this.$renderConfig)==null?void 0:t.useCDNCaching)??!1,this.isUserDataLoading=((e=this.$renderConfig)==null?void 0:e.useCDNCaching)&&((r=this.$renderConfig)==null?void 0:r.cdnNotedLoggedIn)},mounted(){var i;const{version:t}=this.apollo.readFragment({id:`Experiment:${Zt}`,fragment:ft})??{};t&&this.cookieStore.set(Zt,t,{path:"/"});const e=this.cookieStore.get(pr)==="true",r=this.cookieStore.get(vr)==="true";gr(e),yr(r),si({userId:this.userId,hasEverLoggedIn:this.hasEverLoggedIn,hasLentBefore:e,hasDepositBefore:r}),this.throttledDetermineIfMobile=jn(()=>{this.determineIfMobile()},200),this.determineIfMobile(),window.addEventListener("resize",this.throttledDetermineIfMobile),this.isVisitor||(this.isCountriesNotLentToExp=((i=Hi(this.apollo,this.$kvTrackEvent,"Lending",wn,"EXP-MP-1824-Aug2025"))==null?void 0:i.version)==="b")},beforeUnmount(){window.removeEventListener("resize",this.throttledDetermineIfMobile)},methods:{determineIfMobile(){this.isMobile=document.documentElement.clientWidth<735},toggleLendMenu(t=!1){var r,i,o;const e=this.isLendMenuVisible;t?this.isLendMenuVisible=!this.isLendMenuVisible:this.isLendMenuVisible?(clearTimeout(this.hideLendMenuTimeout),this.hideLendMenuTimeout=setTimeout(()=>{this.isLendMenuDesired||(this.isLendMenuVisible=!1)},500)):this.isLendMenuVisible=!0,!e&&this.isLendMenuVisible&&((o=(i=(r=this.$refs)==null?void 0:r.lendMenu)==null?void 0:i.onLoad)==null||o.call(i))},onLendLinkPointerEnter(t){t.pointerType!=="touch"&&(this.isLendMenuDesired=!0,this.toggleLendMenu())},onLendLinkPointerLeave(t){t.pointerType!=="touch"&&(this.isLendMenuDesired=!1,this.toggleLendMenu())},onLendLinkPointerUp(t){t.pointerType==="touch"?this.toggleLendMenu(!0):this.$router.push({path:"/lend-by-category"}).catch(()=>{})},onLendLinkClick(t){t.pointerType!=="touch"&&this.$router.push({path:"/lend-by-category"}).catch(()=>{})},onLendMenuPointerEnter(t){t.pointerType!=="touch"&&(this.isLendMenuDesired=!0,this.toggleLendMenu())},onLendMenuPointerLeave(t){t.pointerType!=="touch"&&(this.isLendMenuDesired=!1,this.toggleLendMenu())},onLendMenuShow(){this.$kvTrackEvent("TopNav","hover-Lend-menu","Lend")},onLendMenuHide(){this.$refs.lendMenu&&this.$refs.lendMenu.onClose()},addHashToRoute(t){const e={...this.$route};return e.hash=t,e},loadLendInfo(){this.$refs.lendMenu&&this.$refs.lendMenu.onLoad()},toggleMobileSearch(){this.searchOpen=!this.searchOpen,document.activeElement.blur(),this.searchOpen&&this.$nextTick(()=>{this.$refs.search.focus()})},withinBoundaryCheck(t){var i,o;const e=((o=(i=this.$refs)==null?void 0:i.lendMenu)==null?void 0:o.$el)??null;if(!e)return!1;t.composedPath().includes(e)||this.toggleLendMenu(!0)},loadMenu(){this.$refs.newExpHeader&&this.$refs.newExpHeader.loadMenuData(this.apollo)}},watch:{isVisitor(t,e){t!==e&&!t&&this.$refs.userDropdown&&this.$nextTick(()=>{this.$refs.userDropdown.remakeDropdown()})},isLendMenuVisible(){setTimeout(()=>{this.isLendMenuVisible===!0?(this.onLendMenuShow(),document.addEventListener("pointerup",this.withinBoundaryCheck)):(this.onLendMenuHide(),document.removeEventListener("pointerup",this.withinBoundaryCheck))})},basketCount(){this.lcaLoanCount=this.cookieStore.get("lcaid")?1:0}}},ws={key:1,"aria-label":"Primary navigation",class:"tw-bg-primary tw-border-b tw-border-tertiary tw-relative"},_s={key:0,class:"tw-flex tw-justify-center"},ks=["href"],bs={key:1,class:"tw-flex tw-gap-2.5 lg:tw-gap-6 tw-items-center align-middle"},Ms={class:"tw-bg-secondary tw-rounded-xs tw-py-0.5 tw-px-1 tw-mr-1"},Ss={key:0,class:"tw-w-1 tw-h-3"},As={class:"header__logo"},Es=["href"],Ts={class:"tw-flex tw-items-center"},Ls={class:"tw-absolute tw-left-0 tw-right-0 tw-top-8 md:tw-top-9 tw-z-dropdown tw-bg-primary tw-border-b tw-border-tertiary","data-testid":"header-lend-dropdown-list",style:{"margin-top":"1px"}},xs=["aria-expanded","aria-pressed"],Is={class:"tw-flex"},Cs={href:"/about/partner-with-us"},Ns={href:"/about/how"},Bs={href:"/about/press-center"},Ps={class:"tw-bg-secondary tw-rounded-xs tw-py-0.5 tw-px-1 tw-mr-1"},Fs={key:0,class:"tw-w-1 tw-h-3"},Ds={class:"tw-absolute tw-w-4 tw-h-4 tw-pt-0.5 tw-flex tw-items-center tw-justify-center tw-text-white tw-text-small tw-font-medium"},Os={key:0,class:"tw-w-1 tw-h-1.5"};function Rs(t,e,r,i,o,n){const s=D("KvWwwHeader"),a=D("kiva-logo"),u=D("campaign-logo-group"),l=D("kv-loading-placeholder"),d=D("my-kiva-button"),f=D("kv-button"),c=D("kv-material-icon"),h=D("router-link"),y=D("the-lend-menu"),v=D("kv-page-container"),p=D("search-bar"),k=D("teams-menu"),L=D("kv-dropdown"),S=D("promo-credit-banner"),g=le("kv-track-event");return w(),E("header",{class:V(["tw-transition-all tw-duration-1000 tw-ease-in-out",t.isInExperimentPages&t.enableAddToBasketExp?"tw-sticky tw-top-0 tw-z-sticky":""])},[o.isNavUpdateExp?(w(),N(s,{key:0,class:"tw-bg-primary tw-border-b tw-border-tertiary tw-relative",ref:"newExpHeader","logged-in":!n.isVisitor,"basket-count":o.basketCount,"login-url":n.loginUrl,balance:o.balance,"is-borrower":o.isBorrower,"is-trustee":n.isTrustee,"user-id":o.userId,"is-mobile":o.isMobile,"lender-image-url":o.profilePic,"countries-not-lent-to-url":t.countriesNotLentToUrl,"show-m-g-upsell-link":"",onLoadLendMenuData:n.loadMenu},null,8,["logged-in","basket-count","login-url","balance","is-borrower","is-trustee","user-id","is-mobile","lender-image-url","countries-not-lent-to-url","onLoadLendMenuData"])):(w(),E("nav",ws,[P(v,null,{default:C(()=>[r.minimal?(w(),E("div",_s,[A((w(),E("a",{class:"header__button tw-inline-flex",href:t.homePagePath,"data-testid":"header-home"},[P(a,{class:"tw-w-6 tw-text-brand",style:{transform:"translateY(-0.1875rem)"}}),e[2]||(e[2]=M("span",{class:"tw-sr-only"},"Kiva Home",-1))],8,ks)),[[g,["TopNav","click-Logo"]]])])):r.corporate?(w(),E("div",bs,[P(u,{class:"tw-h-2.5 lg:tw-h-3.5","corporate-logo-url":r.corporateLogoUrl,"logo-height":r.logoHeight,"logo-classes":r.logoClasses},null,8,["corporate-logo-url","logo-height","logo-classes"]),e[5]||(e[5]=M("div",{class:"tw-flex-1"},null,-1)),A((w(),E("span",{onClick:e[0]||(e[0]=m=>t.$emit("show-basket")),"data-testid":"header-basket",class:"header__button header__basket tw-cursor-pointer",style:G(o.isBasketLoading?{display:"var(--ui-data-corporate-basket-count-display, inline-flex)"}:{display:n.hasBasket?"inline-flex":"none"})},[M("span",Ms,[o.isBasketLoading?(w(),E("div",Ss,[P(l)])):(w(),E(X,{key:1},[I(Z(o.basketCount-o.lcaLoanCount),1)],64))]),e[3]||(e[3]=I(" Basket "))],4)),[[g,["TopNav","click-Basket"]]]),A(P(d,{id:o.myKivaMenuId,class:"header__button header__portfolio",balance:o.balance,"is-user-data-loading":o.isUserDataLoading,"profile-pic":o.profilePic,"profile-pic-id":o.profilePicId},null,8,["id","balance","is-user-data-loading","profile-pic","profile-pic-id"]),[[U,!n.isVisitor]]),A((w(),N(f,{variant:"secondary",class:"tw-bg-white tw-whitespace-nowrap",to:n.loginUrl,"data-testid":"header-log-in"},{default:C(()=>e[4]||(e[4]=[I(" Log in ")]),void 0,!0),_:1,__:[4]},8,["to"])),[[U,n.isVisitor],[g,["TopNav","click-Sign-in"]]])])):(w(),E("div",{key:2,class:V(["header tw-grid xl:tw-gap-x-4 tw-items-center",{"tw-gap-x-1 ":o.isMobile,"tw-gap-x-2.5":!o.isMobile,"header--mobile-open":o.searchOpen||n.isVisitor,"header--tablet-open":n.openTabletVariant}])},[M("div",As,[A((w(),E("a",{class:"header__button tw-inline-flex",href:t.homePagePath,"data-testid":"header-home"},[P(a,{class:"tw-w-6 tw-text-brand",style:{transform:"translateY(-0.1875rem)"}}),e[6]||(e[6]=M("span",{class:"tw-sr-only"},"Kiva Home",-1))],8,Es)),[[g,["TopNav","click-Logo"]]])]),A((w(),N(h,{id:o.lendMenuId,to:"/lend-by-category","data-testid":"header-lend",class:"header__button header__lend tw-inline-flex",onPointerenter:W(n.onLendLinkPointerEnter,["stop"]),onPointerleave:W(n.onLendLinkPointerLeave,["stop"]),onPointerup:W(n.onLendLinkPointerUp,["stop"]),onClick:W(n.onLendLinkClick,["stop"])},{default:C(()=>[M("span",Ts,[e[7]||(e[7]=I("Lend ")),P(c,{class:V(["tw-w-3 tw-h-3 tw-transition-transform tw-duration-300",{"tw-rotate-180":o.isLendMenuVisible}]),icon:o.mdiChevronDown},null,8,["icon","class"])])],void 0,!0),_:1},8,["id","onPointerenter","onPointerleave","onPointerup","onClick"])),[[g,["TopNav","click-Lend"]]]),P(Qe,{name:"kvfastfade"},{default:C(()=>[A(M("div",Ls,[P(v,null,{default:C(()=>[P(y,{ref:"lendMenu",onPointerenter:n.onLendMenuPointerEnter,onPointerleave:n.onLendMenuPointerLeave},null,8,["onPointerenter","onPointerleave"])],void 0,!0),_:1})],512),[[U,o.isLendMenuVisible]])],void 0,!0),_:1}),r.hideSearchInHeader?j("",!0):(w(),E("div",{key:0,"data-testid":"header-search-area",id:"top-nav-search-area",class:V(["header__search tw-py-1.5 md:py-0 tw--mx-2.5 tw-px-2 md:tw-mx-0 md:tw-px-0 tw-border-t tw-border-tertiary md:tw-border-t-0 lg:tw-block",{"tw-hidden":!o.searchOpen||n.isVisitor,"md:tw-hidden":n.hasBasket&&n.isVisitor&&!o.searchOpen||!o.searchOpen,"md:tw-block":o.searchOpen||!n.isVisitor,"md:!tw-block":o.searchOpen&&n.hasBasket&&o.balance||!n.hasBasket,"lg:tw-block":n.hasBasket}])},[P(p,{ref:"search"},null,512)],2)),M("div",{class:V(["header__right-side tw-flex tw-justify-end xl:tw-gap-4 align-middle",{"tw-gap-1":o.isMobile,"tw-gap-2.5":!o.isMobile}])},[A((w(),E("button",{class:V(["header__button header__search-icon tw-inline-flex",{"!tw-hidden":n.isVisitor,"md:!tw-hidden":!n.hasBasket,"md:!tw-inline-flex lg:!tw-hidden":n.isVisitor&&n.hasBasket,"lg:!tw-hidden":!n.isVisitor}]),"data-testid":"header-mobile-search-toggle","aria-expanded":o.searchOpen?"true":"false","aria-pressed":o.searchOpen?"true":"false","aria-controls":"top-nav-search-area",onClick:e[1]||(e[1]=(...m)=>n.toggleMobileSearch&&n.toggleMobileSearch(...m))},[P(c,{class:"tw-w-3 tw-h-3",icon:o.mdiMagnify},null,8,["icon"])],10,xs)),[[U,!r.hideSearchInHeader],[g,["TopNav","click-search-toggle"]]]),A((w(),N(h,{to:"/borrow","data-testid":"header-borrow",class:V(["header__borrow",{"tw-hidden":!n.isVisitor,"header__button !tw-hidden md:!tw-flex":n.isVisitor}])},{default:C(()=>e[8]||(e[8]=[I(" Borrow ")]),void 0,!0),_:1,__:[8]},8,["class"])),[[U,!o.isMobile],[g,["TopNav","click-Borrow"]]]),!n.isVisitor&&o.teamsMenuEnabled?(w(),N(k,{key:0,class:"tw-hidden lg:tw-block",teams:o.teams},null,8,["teams"])):j("",!0),M("div",{class:V(["tw-group",{"tw-hidden md:tw-block":!n.isVisitor}])},[A((w(),N(h,{id:o.aboutMenuId,to:"/about","data-testid":"header-about",class:"header__about header__button tw-inline-flex"},{default:C(()=>[M("span",Is,[e[9]||(e[9]=I(" About ")),P(c,{class:"tw-w-3 tw-h-3 tw-transition-transform tw-duration-300 group-hover:tw-rotate-180",icon:o.mdiChevronDown},null,8,["icon"])])],void 0,!0),_:1},8,["id"])),[[g,["TopNav","click-About"]]]),P(L,{controller:o.aboutMenuId,class:"dropdown-list","data-testid":"header-about-dropdown-list"},{default:C(()=>[M("ul",null,[M("li",null,[A((w(),N(h,{to:"/about"},{default:C(()=>e[10]||(e[10]=[I(" About us ")]),void 0,!0),_:1,__:[10]})),[[g,["TopNav","click-About-About us"]]])]),M("li",null,[A((w(),E("a",Cs,e[11]||(e[11]=[I(" Partner with us ")]))),[[g,["TopNav","click-About-Partner with us"]]])]),M("li",null,[A((w(),E("a",Ns,e[12]||(e[12]=[I(" How Kiva works ")]))),[[g,["TopNav","click-About-How Kiva works"]]])]),M("li",null,[A((w(),N(h,{to:"/donate/supportus"},{default:C(()=>e[13]||(e[13]=[I(" Support Kiva ")]),void 0,!0),_:1,__:[13]})),[[g,["TopNav","click-Support-Kiva"]]])]),M("li",null,[A((w(),N(h,{to:"/about/where-kiva-works"},{default:C(()=>e[14]||(e[14]=[I(" Where Kiva works ")]),void 0,!0),_:1,__:[14]})),[[g,["TopNav","click-About-Where Kiva works"]]])]),M("li",null,[A((w(),N(h,{to:"/impact"},{default:C(()=>e[15]||(e[15]=[I(" Impact ")]),void 0,!0),_:1,__:[15]})),[[g,["TopNav","click-About-Impact"]]])]),M("li",null,[A((w(),N(h,{to:"/about/leadership"},{default:C(()=>e[16]||(e[16]=[I(" Leadership ")]),void 0,!0),_:1,__:[16]})),[[g,["TopNav","click-About-Leadership"]]])]),M("li",null,[A((w(),N(h,{to:"/about/finances"},{default:C(()=>e[17]||(e[17]=[I(" Finances ")]),void 0,!0),_:1,__:[17]})),[[g,["TopNav","click-About-Finances"]]])]),M("li",null,[A((w(),E("a",Bs,e[18]||(e[18]=[I(" Press ")]))),[[g,["TopNav","click-About-Press"]]])]),M("li",null,[A((w(),N(h,{to:"/about/due-diligence"},{default:C(()=>e[19]||(e[19]=[I(" Due diligence ")]),void 0,!0),_:1,__:[19]})),[[g,["TopNav","click-About-Due diligence"]]])])])],void 0,!0),_:1},8,["controller"])],2),M("div",{style:G(o.isBasketLoading?{display:"var(--ui-data-basket-count-display, flex)"}:{display:n.hasBasket?"flex":"none"})},[A((w(),N(h,{to:"/basket","data-testid":"header-basket",class:V(["header__button header__basket",{"tw-hidden md:tw-flex":!n.hasLargeBasket,"tw-flex":n.hasLargeBasket}])},{default:C(()=>[M("span",Ps,[o.isBasketLoading?(w(),E("div",Fs,[P(l)])):(w(),E(X,{key:1},[I(Z(n.basketNumber),1)],64))]),e[20]||(e[20]=M("span",{class:"tw-hidden md:tw-flex"},"Basket",-1))],void 0,!0),_:1,__:[20]},8,["class"])),[[g,["TopNav","click-Basket"]]]),A((w(),N(h,{to:"/basket","data-testid":"header-basket",class:"tw-flex tw-items-center tw-relative md:tw-hidden tw-text-eco-green-4"},{default:C(()=>[M("span",Ds,[o.isBasketLoading?(w(),E("div",Os,[P(l)])):(w(),E(X,{key:1},[I(Z(o.basketCount),1)],64))]),P(c,{icon:o.mdiBriefcase,class:"tw-inline-block tw-w-4 tw-h-4"},null,8,["icon"])],void 0,!0),_:1})),[[g,["TopNav","click-Basket"]]])],4),A((w(),N(h,{class:"header__button tw-bg-white tw-whitespace-nowrap tw-inline-flex",to:n.loginUrl,"data-testid":"header-log-in"},{default:C(()=>e[21]||(e[21]=[I(" Log in ")]),void 0,!0),_:1,__:[21]},8,["to"])),[[U,n.isVisitor],[g,["TopNav","click-Sign-in"]]]),A((w(),N(f,{variant:"secondary",class:"tw-hidden md:tw-block tw-bg-white tw-whitespace-nowrap",href:"/donate/supportus","data-testid":"header-support-kiva"},{default:C(()=>e[22]||(e[22]=[I(" Support Kiva ")]),void 0,!0),_:1,__:[22]})),[[U,!o.isMobile],[g,["TopNav","click-Support-Kiva"]]]),A(P(d,{id:o.myKivaMenuId,class:"header__button header__portfolio",balance:o.balance,"is-user-data-loading":o.isUserDataLoading,"profile-pic":o.profilePic,"profile-pic-id":o.profilePicId},null,8,["id","balance","is-user-data-loading","profile-pic","profile-pic-id"]),[[U,!n.isVisitor]]),A(P(L,{controller:o.myKivaMenuId,class:"dropdown-list","data-testid":"header-my-kiva-dropdown-list",id:"my-kiva-dropdown",ref:"userDropdown"},{default:C(()=>[M("ul",null,[o.isBorrower?(w(),E(X,{key:0},[M("li",null,[A((w(),N(h,{to:"/my/borrower"},{default:C(()=>e[23]||(e[23]=[I(" My borrower dashboard ")]),void 0,!0),_:1,__:[23]})),[[g,["TopNav","click-Portfolio-My borrower dashboard"]]])]),o.loanId!==null?(w(),E(X,{key:0},[M("li",null,[A((w(),N(h,{to:`/lend/${o.loanId}`},{default:C(()=>e[24]||(e[24]=[I(" My loan page ")]),void 0,!0),_:1,__:[24]},8,["to"])),[[g,["TopNav","click-Portfolio-My loan page"]]])]),M("li",null,[A((w(),N(h,{to:`/lend-classic/${o.loanId}#loanComments`},{default:C(()=>e[25]||(e[25]=[I(" My conversations ")]),void 0,!0),_:1,__:[25]},8,["to"])),[[g,["TopNav","click-Portfolio-My Conversations"]]])])],64)):j("",!0)],64)):j("",!0),n.isTrustee?(w(),E(X,{key:1},[o.isBorrower?j("",!0):(w(),E(X,{key:0},[M("li",null,[A((w(),N(h,{to:n.trusteeLoansUrl},{default:C(()=>e[26]||(e[26]=[I(" My Trustee loans ")]),void 0,!0),_:1,__:[26]},8,["to"])),[[g,["TopNav","click-Portfolio-My Trustee loans"]]])]),M("li",null,[A((w(),N(h,{to:`/trustees/${o.trusteeId}`},{default:C(()=>e[27]||(e[27]=[I(" My public Trustee page ")]),void 0,!0),_:1,__:[27]},8,["to"])),[[g,["TopNav","click-Portfolio-My public Trustee page"]]])])],64)),M("li",null,[A((w(),N(h,{to:"/my/trustee"},{default:C(()=>e[28]||(e[28]=[I(" My Trustee dashboard ")]),void 0,!0),_:1,__:[28]})),[[g,["TopNav","click-Portfolio-My Trustee dashboard"]]])]),e[29]||(e[29]=M("hr",null,null,-1))],64)):j("",!0),M("li",null,[A((w(),N(h,{to:"/portfolio"},{default:C(()=>e[30]||(e[30]=[I(" Portfolio ")]),void 0,!0),_:1,__:[30]})),[[g,["TopNav","click-Portfolio-Portfolio"]]])]),M("li",null,[A((w(),N(h,{to:"/teams/my-teams"},{default:C(()=>e[31]||(e[31]=[I(" My teams ")]),void 0,!0),_:1,__:[31]})),[[g,["TopNav","click-Portfolio-My teams"]]])]),M("li",null,[A((w(),N(h,{to:"/portfolio/donations"},{default:C(()=>e[32]||(e[32]=[I(" Donations ")]),void 0,!0),_:1,__:[32]})),[[g,["TopNav","click-Portfolio-Donations"]]])]),M("li",null,[A((w(),N(h,{to:"/settings"},{default:C(()=>e[33]||(e[33]=[I(" Settings ")]),void 0,!0),_:1,__:[33]})),[[g,["TopNav","click-Portfolio-Settings"]]])]),A(M("li",null,[A((w(),N(h,{to:"/donate/supportus"},{default:C(()=>e[34]||(e[34]=[I(" Support Kiva ")]),void 0,!0),_:1,__:[34]})),[[g,["TopNav","click-Support-Kiva"]]])],512),[[U,o.isMobile]]),e[36]||(e[36]=M("hr",null,null,-1)),M("li",null,[A((w(),N(h,{to:"/ui-logout"},{default:C(()=>e[35]||(e[35]=[I(" Sign out ")]),void 0,!0),_:1,__:[35]})),[[g,["TopNav","click-Portfolio-Sign out"]]])])])],void 0,!0),_:1},8,["controller"]),[[U,!n.isVisitor]])],2)],2))],void 0),_:1})])),n.hidePromoCreditBanner?j("",!0):(w(),N(S,{key:2}))],2)}const La=_e(Cn,[["render",Rs],["__scopeId","data-v-ef656d66"]]);Cn.__docgenInfo={displayName:"TheHeader",exportName:"default",description:"",tags:{},props:[{name:"hideSearchInHeader",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"minimal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"corporate",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"corporateLogoUrl",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"logoHeight",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"'28'"}},{name:"logoClasses",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"''"}}],events:[{name:"show-basket"}],sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/TheHeader.vue"]};var ve={exports:{}};/*! store2 - v2.14.3 - 2024-02-14
* Copyright (c) 2024 Nathan Bubna; Licensed MIT */var Xe=ve.exports,en;function qs(){return en||(en=1,function(t){(function(e,r){var i={version:"2.14.3",areas:{},apis:{},nsdelim:".",inherit:function(n,s){for(var a in n)s.hasOwnProperty(a)||Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(n,a));return s},stringify:function(n,s){return n===void 0||typeof n=="function"?n+"":JSON.stringify(n,s||i.replace)},parse:function(n,s){try{return JSON.parse(n,s||i.revive)}catch{return n}},fn:function(n,s){i.storeAPI[n]=s;for(var a in i.apis)i.apis[a][n]=s},get:function(n,s){return n.getItem(s)},set:function(n,s,a){n.setItem(s,a)},remove:function(n,s){n.removeItem(s)},key:function(n,s){return n.key(s)},length:function(n){return n.length},clear:function(n){n.clear()},Store:function(n,s,a){var u=i.inherit(i.storeAPI,function(d,f,c){return arguments.length===0?u.getAll():typeof f=="function"?u.transact(d,f,c):f!==void 0?u.set(d,f,c):typeof d=="string"||typeof d=="number"?u.get(d):typeof d=="function"?u.each(d):d?u.setAll(d,f):u.clear()});u._id=n;try{var l="__store2_test";s.setItem(l,"ok"),u._area=s,s.removeItem(l)}catch{u._area=i.storage("fake")}return u._ns=a||"",i.areas[n]||(i.areas[n]=u._area),i.apis[u._ns+u._id]||(i.apis[u._ns+u._id]=u),u},storeAPI:{area:function(n,s){var a=this[n];return(!a||!a.area)&&(a=i.Store(n,s,this._ns),this[n]||(this[n]=a)),a},namespace:function(n,s,a){if(a=a||this._delim||i.nsdelim,!n)return this._ns?this._ns.substring(0,this._ns.length-a.length):"";var u=n,l=this[u];if((!l||!l.namespace)&&(l=i.Store(this._id,this._area,this._ns+u+a),l._delim=a,this[u]||(this[u]=l),!s))for(var d in i.areas)l.area(d,i.areas[d]);return l},isFake:function(n){return n?(this._real=this._area,this._area=i.storage("fake")):n===!1&&(this._area=this._real||this._area),this._area.name==="fake"},toString:function(){return"store"+(this._ns?"."+this.namespace():"")+"["+this._id+"]"},has:function(n){return this._area.has?this._area.has(this._in(n)):this._in(n)in this._area},size:function(){return this.keys().length},each:function(n,s){for(var a=0,u=i.length(this._area);a<u;a++){var l=this._out(i.key(this._area,a));if(l!==void 0&&n.call(this,l,this.get(l),s)===!1)break;u>i.length(this._area)&&(u--,a--)}return s||this},keys:function(n){return this.each(function(s,a,u){u.push(s)},n||[])},get:function(n,s){var a=i.get(this._area,this._in(n)),u;return typeof s=="function"&&(u=s,s=null),a!==null?i.parse(a,u):s??a},getAll:function(n){return this.each(function(s,a,u){u[s]=a},n||{})},transact:function(n,s,a){var u=this.get(n,a),l=s(u);return this.set(n,l===void 0?u:l),this},set:function(n,s,a){var u=this.get(n),l;return u!=null&&a===!1?s:(typeof a=="function"&&(l=a,a=void 0),i.set(this._area,this._in(n),i.stringify(s,l),a)||u)},setAll:function(n,s){var a,u;for(var l in n)u=n[l],this.set(l,u,s)!==u&&(a=!0);return a},add:function(n,s,a){var u=this.get(n);if(u instanceof Array)s=u.concat(s);else if(u!==null){var l=typeof u;if(l===typeof s&&l==="object"){for(var d in s)u[d]=s[d];s=u}else s=u+s}return i.set(this._area,this._in(n),i.stringify(s,a)),s},remove:function(n,s){var a=this.get(n,s);return i.remove(this._area,this._in(n)),a},clear:function(){return this._ns?this.each(function(n){i.remove(this._area,this._in(n))},1):i.clear(this._area),this},clearAll:function(){var n=this._area;for(var s in i.areas)i.areas.hasOwnProperty(s)&&(this._area=i.areas[s],this.clear());return this._area=n,this},_in:function(n){return typeof n!="string"&&(n=i.stringify(n)),this._ns?this._ns+n:n},_out:function(n){return this._ns?n&&n.indexOf(this._ns)===0?n.substring(this._ns.length):void 0:n}},storage:function(n){return i.inherit(i.storageAPI,{items:{},name:n})},storageAPI:{length:0,has:function(n){return this.items.hasOwnProperty(n)},key:function(n){var s=0;for(var a in this.items)if(this.has(a)&&n===s++)return a},setItem:function(n,s){this.has(n)||this.length++,this.items[n]=s},removeItem:function(n){this.has(n)&&(delete this.items[n],this.length--)},getItem:function(n){return this.has(n)?this.items[n]:null},clear:function(){for(var n in this.items)this.removeItem(n)}}},o=i.Store("local",function(){try{return localStorage}catch{}}());o.local=o,o._=i,o.area("session",function(){try{return sessionStorage}catch{}}()),o.area("page",i.storage("page")),typeof r=="function"&&r.amd!==void 0?r("store2",[],function(){return o}):t.exports?t.exports=o:(e.store&&(i.conflict=e.store),e.store=o)})(Xe,Xe&&Xe.define)}(ve)),ve.exports}var Hs=qs();const me=re(Hs);function pe(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ye={exports:{}},tn;function Vs(){return tn||(tn=1,function(t,e){(function(r){t.exports=r()})(function(){return function(){function r(i,o,n){function s(l,d){if(!o[l]){if(!i[l]){var f=typeof pe=="function"&&pe;if(!d&&f)return f(l,!0);if(a)return a(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var h=o[l]={exports:{}};i[l][0].call(h.exports,function(y){var v=i[l][1][y];return s(v||y)},h,h.exports,r,i,o,n)}return o[l].exports}for(var a=typeof pe=="function"&&pe,u=0;u<n.length;u++)s(n[u]);return s}return r}()({1:[function(r,i,o){var n=r("./raw"),s=[],a=[],u=n.makeRequestCallFromTimer(l);function l(){if(a.length)throw a.shift()}i.exports=d;function d(c){var h;s.length?h=s.pop():h=new f,h.task=c,n(h)}function f(){this.task=null}f.prototype.call=function(){try{this.task.call()}catch(c){d.onerror?d.onerror(c):(a.push(c),u())}finally{this.task=null,s[s.length]=this}}},{"./raw":2}],2:[function(r,i,o){i.exports=n;function n(v){s.length||a(),s[s.length]=v}var s=[],a,u=0,l=1024;function d(){for(;u<s.length;){var v=u;if(u=u+1,s[v].call(),u>l){for(var p=0,k=s.length-u;p<k;p++)s[p]=s[p+u];s.length-=u,u=0}}s.length=0,u=0}var f=typeof yt<"u"?yt:self,c=f.MutationObserver||f.WebKitMutationObserver;typeof c=="function"?a=h(d):a=y(d),n.requestFlush=a;function h(v){var p=1,k=new c(v),L=document.createTextNode("");return k.observe(L,{characterData:!0}),function(){p=-p,L.data=p}}function y(v){return function(){var k=setTimeout(S,0),L=setInterval(S,50);function S(){clearTimeout(k),clearInterval(L),v()}}}n.makeRequestCallFromTimer=y},{}],3:[function(r,i,o){i.exports=r("./lib")},{"./lib":8}],4:[function(r,i,o){var n=r("asap/raw");function s(){}var a=null,u={};function l(m){try{return m.then}catch(_){return a=_,u}}function d(m,_){try{return m(_)}catch(b){return a=b,u}}function f(m,_,b){try{m(_,b)}catch(F){return a=F,u}}i.exports=c;function c(m){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof m!="function")throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,m!==s&&g(m,this)}c._Y=null,c._Z=null,c._0=s,c.prototype.then=function(m,_){if(this.constructor!==c)return h(this,m,_);var b=new c(s);return y(this,new S(m,_,b)),b};function h(m,_,b){return new m.constructor(function(F,B){var x=new c(s);x.then(F,B),y(m,new S(_,b,x))})}function y(m,_){for(;m._V===3;)m=m._W;if(c._Y&&c._Y(m),m._V===0){if(m._U===0){m._U=1,m._X=_;return}if(m._U===1){m._U=2,m._X=[m._X,_];return}m._X.push(_);return}v(m,_)}function v(m,_){n(function(){var b=m._V===1?_.onFulfilled:_.onRejected;if(b===null){m._V===1?p(_.promise,m._W):k(_.promise,m._W);return}var F=d(b,m._W);F===u?k(_.promise,a):p(_.promise,F)})}function p(m,_){if(_===m)return k(m,new TypeError("A promise cannot be resolved with itself."));if(_&&(typeof _=="object"||typeof _=="function")){var b=l(_);if(b===u)return k(m,a);if(b===m.then&&_ instanceof c){m._V=3,m._W=_,L(m);return}else if(typeof b=="function"){g(b.bind(_),m);return}}m._V=1,m._W=_,L(m)}function k(m,_){m._V=2,m._W=_,c._Z&&c._Z(m,_),L(m)}function L(m){if(m._U===1&&(y(m,m._X),m._X=null),m._U===2){for(var _=0;_<m._X.length;_++)y(m,m._X[_]);m._X=null}}function S(m,_,b){this.onFulfilled=typeof m=="function"?m:null,this.onRejected=typeof _=="function"?_:null,this.promise=b}function g(m,_){var b=!1,F=f(m,function(B){b||(b=!0,p(_,B))},function(B){b||(b=!0,k(_,B))});!b&&F===u&&(b=!0,k(_,a))}},{"asap/raw":2}],5:[function(r,i,o){var n=r("./core.js");i.exports=n,n.prototype.done=function(s,a){var u=arguments.length?this.then.apply(this,arguments):this;u.then(null,function(l){setTimeout(function(){throw l},0)})}},{"./core.js":4}],6:[function(r,i,o){var n=r("./core.js");i.exports=n;var s=c(!0),a=c(!1),u=c(null),l=c(void 0),d=c(0),f=c("");function c(y){var v=new n(n._0);return v._V=1,v._W=y,v}n.resolve=function(y){if(y instanceof n)return y;if(y===null)return u;if(y===void 0)return l;if(y===!0)return s;if(y===!1)return a;if(y===0)return d;if(y==="")return f;if(typeof y=="object"||typeof y=="function")try{var v=y.then;if(typeof v=="function")return new n(v.bind(y))}catch(p){return new n(function(k,L){L(p)})}return c(y)};var h=function(y){return typeof Array.from=="function"?(h=Array.from,Array.from(y)):(h=function(v){return Array.prototype.slice.call(v)},Array.prototype.slice.call(y))};n.all=function(y){var v=h(y);return new n(function(p,k){if(v.length===0)return p([]);var L=v.length;function S(m,_){if(_&&(typeof _=="object"||typeof _=="function"))if(_ instanceof n&&_.then===n.prototype.then){for(;_._V===3;)_=_._W;if(_._V===1)return S(m,_._W);_._V===2&&k(_._W),_.then(function(B){S(m,B)},k);return}else{var b=_.then;if(typeof b=="function"){var F=new n(b.bind(_));F.then(function(B){S(m,B)},k);return}}v[m]=_,--L===0&&p(v)}for(var g=0;g<v.length;g++)S(g,v[g])})},n.reject=function(y){return new n(function(v,p){p(y)})},n.race=function(y){return new n(function(v,p){h(y).forEach(function(k){n.resolve(k).then(v,p)})})},n.prototype.catch=function(y){return this.then(null,y)}},{"./core.js":4}],7:[function(r,i,o){var n=r("./core.js");i.exports=n,n.prototype.finally=function(s){return this.then(function(a){return n.resolve(s()).then(function(){return a})},function(a){return n.resolve(s()).then(function(){throw a})})}},{"./core.js":4}],8:[function(r,i,o){i.exports=r("./core.js"),r("./done.js"),r("./finally.js"),r("./es6-extensions.js"),r("./node-extensions.js"),r("./synchronous.js")},{"./core.js":4,"./done.js":5,"./es6-extensions.js":6,"./finally.js":7,"./node-extensions.js":9,"./synchronous.js":10}],9:[function(r,i,o){var n=r("./core.js"),s=r("asap");i.exports=n,n.denodeify=function(d,f){return typeof f=="number"&&f!==1/0?u(d,f):l(d)};var a="function (err, res) {if (err) { rj(err); } else { rs(res); }}";function u(d,f){for(var c=[],h=0;h<f;h++)c.push("a"+h);var y=["return function ("+c.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(c).concat([a]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],y)(n,d)}function l(d){for(var f=Math.max(d.length-1,3),c=[],h=0;h<f;h++)c.push("a"+h);var y=["return function ("+c.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+f+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+a+";","var res;","switch (argLength) {",c.concat(["extra"]).map(function(v,p){return"case "+p+":res = fn.call("+["self"].concat(c.slice(0,p)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],y)(n,d)}n.nodeify=function(d){return function(){var f=Array.prototype.slice.call(arguments),c=typeof f[f.length-1]=="function"?f.pop():null,h=this;try{return d.apply(this,arguments).nodeify(c,h)}catch(y){if(c===null||typeof c>"u")return new n(function(v,p){p(y)});s(function(){c.call(h,y)})}}},n.prototype.nodeify=function(d,f){if(typeof d!="function")return this;this.then(function(c){s(function(){d.call(f,null,c)})},function(c){s(function(){d.call(f,c)})})}},{"./core.js":4,asap:1}],10:[function(r,i,o){var n=r("./core.js");i.exports=n,n.enableSynchronous=function(){n.prototype.isPending=function(){return this.getState()==0},n.prototype.isFulfilled=function(){return this.getState()==1},n.prototype.isRejected=function(){return this.getState()==2},n.prototype.getValue=function(){if(this._V===3)return this._W.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._W},n.prototype.getReason=function(){if(this._V===3)return this._W.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._W},n.prototype.getState=function(){return this._V===3?this._W.getState():this._V===-1||this._V===-2?0:this._V}},n.disableSynchronous=function(){n.prototype.isPending=void 0,n.prototype.isFulfilled=void 0,n.prototype.isRejected=void 0,n.prototype.getValue=void 0,n.prototype.getReason=void 0,n.prototype.getState=void 0}},{"./core.js":4}],11:[function(r,i,o){i.exports=typeof window>"u"||typeof window.Promise>"u"?r("promise"):window.Promise},{promise:3}],12:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=n;function n(s){var a={};return s.emit=function(u,l){var d=a[u];d&&d.forEach(function(f){return f(l)})},s.on=function(u,l){var d=a[u]||(a[u]=[]);return d.push(l),s},s.off=function(u,l){if(l){var d=a[u],f=d.indexOf(l);f!==-1&&d.splice(f,1),d.length===0&&delete a[u]}else delete a[u];return s},s.list=function(u){return a[u]||[]},s}},{}],13:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.fetch=n,o.post=s;function n(a,u,l,d,f,c){try{var h=new XMLHttpRequest;if(h.onreadystatechange=function(){if(h.readyState==4){var v=h.getResponseHeader("Content-Type");if(v&&v.indexOf("json")!==-1)try{var p=JSON.parse(h.responseText);f(null,p,h.status)}catch(k){f(k,null,h.status)}else f(null,h.responseText,h.status)}},d)for(var y in d)d.hasOwnProperty(y)&&h.setRequestHeader(y,d[y]);h.ontimeout=function(v){f(v,null,0)},h.open(a,u,!0),h.timeout=c,typeof l=="string"?h.send(l):l?(h.setRequestHeader("Content-Type","application/json"),h.send(JSON.stringify(l))):h.send()}catch(v){f(v,null,0)}}function s(a,u,l){return new Promise(function(d,f){var c=function(y,v,p){if(y)return f(y);d([v,p])};n("POST",a,u,null,c,l)})}},{}],14:[function(r,i,o){var n=typeof document<"u",s=typeof navigator<"u"&&navigator.product==="ReactNative";i.exports=r(n||s?"./request.browser":"./request.node")},{"./request.browser":13,"./request.node":15}],15:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.post=d;var n=u(r("http")),s=u(r("https")),a=u(r("url"));function u(f){return f&&f.__esModule?f:{default:f}}var l=a.default.parse;function d(f,c,h){return new Promise(function(y,v){var p=c==="string"?c:JSON.stringify(c),k=l(f),L={host:k.hostname,port:k.port,path:k.path,method:"POST",headers:{"Content-Length":p.length}};c!=="string"&&(L.headers["Content-Type"]="application/json");var S=k.protocol==="https:"?s.default:n.default,g=S.request(L,function(m){m.setEncoding("utf8");var _="";m.on("data",function(b){_+=b}),m.on("end",function(){var b=m.headers["content-type"],F=b&&b.indexOf("json")!==-1;try{var B=F?JSON.parse(_):_;y([B,m.statusCode])}catch(x){v(x)}})});g.on("error",v),g.on("socket",function(m){m.setTimeout(h,function(){g.abort()})}),g.write(p),g.end()})}},{http:void 0,https:void 0,url:void 0}],16:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.compare=n,o.add=s,o.sum=a,o.mean=u,o.std=l,o.variance=d,o.median=f;function n(c,h){return c>h?1:c<h?-1:0}function s(c,h){return c+h}function a(c){return c.reduce(s)}function u(c){return a(c)/c.length}function l(c){return Math.sqrt(d(c))}function d(c){if(c.length<2)return 0;var h=u(c);return c.map(function(y){return Math.pow(y-h,2)}).reduce(s)/(c.length-1)}function f(c){if(c.length<2)return c[0];var h=c.slice().sort(n);return h.length%2===0?(h[c.length/2-1]+h[c.length/2])/2:h[(c.length-1)/2]}},{}],17:[function(r,i,o){function n(v){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(k){return typeof k}:n=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},n(v)}Object.defineProperty(o,"__esModule",{value:!0}),o.create=y;var s=c(r("./util.js")),a=c(r("./stat.js")),u=c(r("./request/request")),l=d(r("./emitter.js"));function d(v){return v&&v.__esModule?v:{default:v}}function f(){if(typeof WeakMap!="function")return null;var v=new WeakMap;return f=function(){return v},v}function c(v){if(v&&v.__esModule)return v;if(v===null||n(v)!=="object"&&typeof v!="function")return{default:v};var p=f();if(p&&p.has(v))return p.get(v);var k={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in v)if(Object.prototype.hasOwnProperty.call(v,S)){var g=L?Object.getOwnPropertyDescriptor(v,S):null;g&&(g.get||g.set)?Object.defineProperty(k,S,g):k[S]=v[S]}return k.default=v,p&&p.set(v,k),k}var h=r("./Promise");function y(v){var p={options:{interval:36e5,timeout:1e4,delay:1e3,repeat:5,peers:[],server:null,now:Date.now},offset:0,_timeout:null,_inProgress:{},_isFirst:!0,send:function(g,m,_){return u.post(g,m,_).then(function(b){var F=b[0];p.receive(g,F)}).catch(function(b){L(b)})},receive:function(g,m){m===void 0&&(m=g,g=void 0),m&&m.id in p._inProgress?p._inProgress[m.id](m.result):m&&m.id!==void 0&&p.send(g,{jsonrpc:"2.0",id:m.id,result:p.now()})},_handleRPCSendError:function(g,m,_){delete p._inProgress[g],m(new Error("Send failure"))},rpc:function(g,m,_){var b=s.nextId(),F,B,x=new h(function(R,K){F=R,B=K});p._inProgress[b]=function(R){delete p._inProgress[b],F(R)};var O;try{O=p.send(g,{jsonrpc:"2.0",id:b,method:m,params:_},p.options.timeout)}catch(R){p._handleRPCSendError(b,B,R)}return O&&(O instanceof h||O.then&&O.catch)?O.catch(p._handleRPCSendError.bind(this,b,B)):console.warn("Send should return a promise"),x},sync:function(){p.emit("sync","start");var g=p.options.server?[p.options.server]:p.options.peers;return h.all(g.map(function(m){return p._syncWithPeer(m)})).then(function(m){var _=m.filter(function(b){return p._validOffset(b)});_.length>0&&(p.offset=a.mean(_),p.emit("change",p.offset)),p.emit("sync","end")})},_validOffset:function(g){return g!==null&&!isNaN(g)&&isFinite(g)},_syncWithPeer:function(g){var m=[];function _(){return p._getOffset(g).then(function(B){return m.push(B)})}function b(){return s.wait(p.options.delay).then(_)}function F(){return m.length<p.options.repeat}return _().then(function(){return s.whilst(F,b)}).then(function(){var B=m.filter(function(q){return q!==null}),x=B.map(function(q){return q.roundtrip}),O=a.median(x)+a.std(x),R=B.filter(function(q){return q.roundtrip<O}),K=R.map(function(q){return q.offset});return K.length>0?a.mean(K):null})},_getOffset:function(g){var m=p.options.now();return p.rpc(g,"timesync").then(function(_){var b=p.options.now(),F=b-m,B=_-b+F/2;return p._isFirst&&(p._isFirst=!1,p.offset=B,p.emit("change",B)),{roundtrip:F,offset:B}}).catch(function(_){return null})},now:function(){return p.options.now()+p.offset},destroy:function(){clearTimeout(p._timeout)}};if(v){if(v.server&&v.peers)throw new Error('Configure either option "peers" or "server", not both.');for(var k in v)v.hasOwnProperty(k)&&(k==="peers"&&typeof v.peers=="string"?p.options.peers=v.peers.split(",").map(function(S){return S.trim()}).filter(function(S){return S!==""}):p.options[k]=v[k])}(0,l.default)(p);function L(S){p.list("error").length>0?p.emit("error",S):console.log("Error",S)}return p.options.interval!==null&&(p._timeout=setInterval(p.sync,p.options.interval),setTimeout(function(){p.sync().catch(function(S){return L(S)})},0)),p}},{"./Promise":11,"./emitter.js":12,"./request/request":14,"./stat.js":16,"./util.js":18}],18:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.wait=s,o.repeat=a,o.whilst=u,o.nextId=l;var n=r("./Promise");function s(f){return new n(function(c){setTimeout(c,f)})}function a(f,c){return new n(function(h,y){var v=0,p=[];function k(){v<c?(v++,f().then(function(L){p.push(L),k()})):h(p)}k()})}function u(f,c){return new n(function(h,y){function v(){f()?c().then(function(){return v()}):h()}v()})}function l(){return d++}var d=0},{"./Promise":11}]},{},[17])(17)})}(Ye)),Ye.exports}var Us=Vs();const at=Date.now,Y=Us.create({server:"/timesync",delay:250,interval:null,now:at});let oe;function xa(){if(oe)return oe;const t=10*60*1e3,e=me.get("timesync.lastSyncTime");if(e&&at()-e<t){const r=me.get("timesync.lastOffset");return r&&!Y.offset&&(Y.offset=r),Promise.resolve()}return oe=new Promise(r=>{Y.on("sync",i=>{i==="end"&&(me.set("timesync.lastOffset",Y.offset),Y.off("sync"),oe=null,r())}),Y.on("error",i=>{mr(i,"error"),Y.off("error"),oe=null,r()}),Y.sync(),me.set("timesync.lastSyncTime",at())}),oe}const{bind:nn}=Function,Ks=nn.bind(nn);function js(t,e){return new(Ks(t,null).apply(null,e))}Date=function(e){function r(){const i=js(e,arguments);return arguments.length===0&&i.setTime(Math.round(Y.now())),i}return r.now=function(){return Math.round(Y.now())},r.parse=function(){return e.parse.apply(this,arguments)},r.UTC=function(){return e.UTC.apply(this,arguments)},r.prototype=e.prototype,r}(Date);export{vn as K,La as T,ge as _,ao as a,yr as b,pe as c,Aa as d,Vi as e,Gi as f,hi as g,uo as h,pi as i,Qi as j,to as k,Ui as l,bt as m,Ta as n,mi as o,Ea as p,wo as q,ko as r,si as s,Hi as t,gr as u,Sa as v,xa as w};
