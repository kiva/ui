import{_ as x}from"./entry-throttle-DL1zg7kAk0.js";import{K as I}from"./entry-KvChipClassic-Bhp7TvRvWy.js";import{f as m}from"./entry-filterConfig-CYtqWPfM7q.js";import{c as i,d,e as p,x as A,H as f,I as L,a as h,b as u,J as o,n as E,r as y,o as n,K as g}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";import"./entry-KvWwwHeader-CVdIzOPj6Q.js";import"./entry-numeral-DJCTM12wUX.js";import{K as R}from"./entry-KvTextLink-CFK6VYUYhK.js";import{_ as N}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-isSymbol-5pnFTpIKM9.js";import"./entry-toNumber-MeiYJWOH0A.js";import"./entry-mdi-BJHOrBfjV3.js";import"./entry-KvMaterialIcon-DcajXwg-0j.js";import"./entry-numberUtils-CJK53TfNzV.js";import"./entry-filterUtils-D0mz1tA9_E.js";import"./entry-orderBy-CUrcrXTfYx.js";import"./entry-get-D3xDH2SX94.js";import"./entry-keys-B9dmm4b_qU.js";import"./entry-sortOptions-DCsqn1mIXB.js";import"./entry-regions-iDsXyep4ay.js";const F={name:"LoanSearchFilterChips",components:{KvChipClassic:I,KvTextLink:R},emits:["updated","reset"],props:{loanSearchState:{type:Object,default:()=>({})},allFacets:{type:Object,default:()=>({})}},data(){return{isCollapsable:void 0,isCollapsed:!0,throttledDetermineIsCollapsable:x(this.determineIsCollapsable,200)}},mounted(){this.determineIsCollapsable(),window.addEventListener("resize",this.throttledDetermineIsCollapsable)},beforeUnmount(){window.removeEventListener("resize",this.throttledDetermineIsCollapsable)},computed:{isCollapsableSet(){return typeof this.isCollapsable<"u"&&this.isCollapsable},items(){return this.getLabelsFromState()},containerMaxHeight(){return this.isCollapsed?void 0:{"max-height":"none"}}},methods:{formatRemovedFacet(e){return m.config[e.key].getRemovedFacet(this.loanSearchState,e)},getLabelsFromState(){return m.keys.reduce((e,t)=>{const s=m.config[t].getFilterChips(this.loanSearchState,this.allFacets);return e.push(...s.map(r=>({...r,key:t}))),e},[])},handleChipClick(e){const t=e.__typename,s=this.formatRemovedFacet(e);this.$emit("updated",s),this.$kvTrackEvent("Lending","click-remove-filter-chip",`${t}-${e.name}`)},handleResetClick(){this.$emit("reset"),this.isCollapsed=!0,this.$kvTrackEvent("Lending","click-reset-filter-chips","Loan Search Filter Chips Reset")},async determineIsCollapsable(){(!this.$refs.container||!this.$refs.chips)&&await this.$nextTick();const{container:e,chips:t}=this.$refs;if(e&&t){const s=this.isCollapsed;this.isCollapsed=!0,this.isCollapsable=void 0,await this.$nextTick(),this.isCollapsable=t.clientHeight>e.clientHeight,this.isCollapsed=s}},handleToggleClick(){this.isCollapsed=!this.isCollapsed,this.$kvTrackEvent("Lending","click-toggle-filter-chips","Loan Search Filter Chips Toggled",this.isCollapsed?"hidden":"shown")}},watch:{items(){this.determineIsCollapsable()}}},M={key:0},D={ref:"chips",class:"tw-flex tw-flex-wrap tw-gap-1.5"},B={key:0,class:"tw-whitespace-nowrap tw-my-0.5 tw-mx-1"};function H(e,t,s,r,c,a){const b=y("kv-chip-classic"),C=y("kv-text-link");return a.items.length?(n(),i("div",M,[p("div",{class:E(["tw-flex tw-items-start tw-flex-col",{"lg:tw-flex-row":c.isCollapsed}])},[p("div",{ref:"container",class:"chip-container tw-overflow-hidden",style:A(a.containerMaxHeight)},[p("div",D,[(n(!0),i(f,null,L(a.items,(_,w)=>(n(),i("div",{key:w},[h(b,{onClick:V=>a.handleChipClick(_)},{default:u(()=>[o(g(_.name),1)],void 0),_:2},1032,["onClick"])]))),128))],512)],4),a.isCollapsableSet?(n(),i("div",B,[h(C,{onClick:a.handleToggleClick},{default:u(()=>[o(g(c.isCollapsed?`Show all ${a.items.length} filters`:"Hide filters"),1)],void 0),_:1},8,["onClick"]),c.isCollapsed?d("",!0):(n(),i(f,{key:0},[t[1]||(t[1]=o(" | ")),h(C,{onClick:a.handleResetClick},{default:u(()=>t[0]||(t[0]=[o(" Reset all ")]),void 0),_:1,__:[0]},8,["onClick"])],64))])):d("",!0)],2)])):d("",!0)}const T=N(F,[["render",H],["__scopeId","data-v-3f6af5d4"]]);F.__docgenInfo={displayName:"LoanSearchFilterChips",exportName:"default",description:"",tags:{},props:[{name:"loanSearchState",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"allFacets",type:{name:"object"},defaultValue:{func:!1,value:"{}"}}],events:[{name:"updated",type:{names:["undefined"]}},{name:"reset"}],sourceFiles:["/home/runner/work/ui/ui/src/components/Lend/LoanSearch/LoanSearchFilterChips.vue"]};const O={gender:"female",countryIsoCode:["US"],sectorId:[1],sortBy:"expiringSoon",themeId:[1],tagId:[1],distributionModel:"DIRECT",isIndividual:!1,lenderRepaymentTerm:{min:0,max:8,__typename:"MinMaxRange"},pageOffset:10,pageLimit:5,keywordSearch:"search",partnerId:[1],isMatchable:!0,flexibleFundraisingEnabled:!1,activityId:[9]},$={countryFacets:[{country:{isoCode:"US",name:"United States",region:"North America",__typename:"Country"}},{country:{isoCode:"CA",name:"Canada",region:"North America",__typename:"Country"}}],countryIsoCodes:["US","CA"],countryNames:["UNITED STATES","CANADA"],sectorFacets:[{id:1,name:"Sector 1",__typename:"Sector"},{id:2,name:"Sector 2",__typename:"Sector"}],sectorIds:[1],sectorNames:["SECTOR 1","SECTOR 2"],themeFacets:[{id:1,name:"Theme 1",__typename:"LoanThemeFilter"},{id:2,name:"Theme 2",__typename:"LoanThemeFilter"}],themeIds:[1,2],themeNames:["THEME 1","THEME 2"],tagFacets:[{id:1,name:"Tag 1",__typename:"Tag"},{id:2,name:"Tag 2",__typename:"Tag"}],tagIds:[1,2],tagNames:["TAG 1","TAG 2"],genderFacets:[{name:"female",__typename:"Gender"},{name:"male",__typename:"Gender"}],genders:["FEMALE","MALE"],flssSorts:[{name:"expiringSoon"},{name:"personalized"},{name:"popularityScore"}],standardSorts:[{name:"expiringSoon"},{name:"popularity"}],distributionModelFacets:[{name:"FIELDPARTNER",__typename:"DistributionModel"},{name:"DIRECT",__typename:"DistributionModel"}],distributionModels:["FIELDPARTNER","DIRECT"],partnerFacets:[{id:1,name:"Ccc",countries:[{region:"Africa",__typename:"Country"}],__typename:"Partner"},{id:2,name:"Bbb",countries:[{region:"Central America",__typename:"Country"}],__typename:"Partner"},{id:3,name:"Aaa",countries:[{region:"Central America",__typename:"Country"}],__typename:"Partner"}],partnerIds:[1,2,3],partnerNames:["AAA","BBB","CCC"],activityFacets:[{id:1,name:"Activity 1",__typename:"Activity"},{id:2,name:"Activity 2",__typename:"Activity"}]},le={title:"Loan Search/Loan Search Filter Chips",component:T},U=(e={})=>(s,{argTypes:r})=>({props:Object.keys(r),components:{LoanSearchFilterChips:T},setup(){return e},template:'<div style="width: 400px"><loan-search-filter-chips :loan-search-state="loanSearchState" :all-facets="allFacets" /></div>'}),l=U({loanSearchState:O,allFacets:$});var S,k,v;l.parameters={...l.parameters,docs:{...(S=l.parameters)==null?void 0:S.docs,source:{originalSource:`story({
  loanSearchState: mockState,
  allFacets: mockAllFacets
})`,...(v=(k=l.parameters)==null?void 0:k.docs)==null?void 0:v.source}}};const ce=["Chips"];export{l as Chips,ce as __namedExportsOrder,le as default};
