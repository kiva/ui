import{n as d}from"./entry-numeral-xVHG5DEP0A.js";import{r as y,m as p,a as v,u as wt}from"./entry-index-C6hFcg-rEP.js";import{l as bt}from"./entry-loan-group-categories-QOMAEKz4Qs.js";import{K as _t}from"./entry-KvCurrencyInput-7U5c7OVo1k.js";import{G as Mt}from"./entry-mdi-B1ONwcTkQ2.js";import{c as l,q as e,z as Vt,m as s,A as c,a as m,L as h,M as st,C as xt,B as kt,r as u,o as i,J as Ot,I as Dt}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{x as $t}from"./entry-KvMaterialIcon-C3KLX5OV-L.js";import"./entry-KvWwwHeader-C1bm1YMh4q.js";import{A as At}from"./entry-KvTextInput-CnVgGp-sYq.js";import{B as Ct}from"./entry-KvSelect-BPt7lipyTp.js";import{_ as It}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-index-CWclSTHHJk.js";import"./entry-attrs-C2OODjD6EW.js";const ft={name:"MonthlyGoodUpdateForm",components:{KvMaterialIcon:$t,KvCurrencyInput:_t,KvSelect:Ct,KvTextInput:At},data(){return{form:{category:this.category,dayOfMonth:this.dayOfMonth,donation:this.donation,mgAmount:this.mgAmount},isDayInputShown:!1,mdiPencil:Mt}},setup(){return{v$:wt()}},emits:["form-update"],props:{disabled:{type:Boolean,default:!1},donation:{type:Number,default:0},mgAmount:{type:Number,default:0},dayOfMonth:{type:Number,default:new Date().getDate()},category:{type:String,default:""}},mixins:[bt],validations(){return{form:{mgAmount:{required:y,minValue:v(5),maxValue:p(1e4),maxTotal(n){return d(n).value()+d(this.donation).value()<1e4}},donation:{minValue:v(0),maxValue:p(1e4),maxTotal(n){return d(n).value()+d(this.mgAmount).value()<1e4}},dayOfMonth:{required:y,minValue:v(1),maxValue:p(31)},category:{required:y}}}},mounted(){var n;this.category||this.lendingCategories.push({label:"Preserve existing settings",value:"",shortName:""}),((n=this.category)==null?void 0:n.marketingName)!=="COVID-19"&&(this.lendingCategories=this.lendingCategories.filter(t=>t.marketingName!=="COVID-19")),this.$watch("form",()=>{this.v$.$touch(),this.$emit("form-update",{...this.form,isChanged:this.v$.$dirty,isFormValid:!this.v$.$invalid})},{deep:!0})},computed:{totalCombinedDeposit(){return d(this.form.donation).value()+d(this.form.mgAmount).value()}},methods:{hideDayInput(){var n,t;(t=(n=this.v$.form)==null?void 0:n.dayOfMonth)!=null&&t.$invalid||(this.isDayInputShown=!1)}}},Gt=["disabled"],Ft=["for"],St={key:2,class:"validation-errors"},Nt={key:0},Tt={key:1},Ut={class:"additional-day-info"},Et={key:0},Bt={class:"tw-flex tw-items-center tw-justify-between tw-mt-2"},qt={key:0,class:"tw-text-right validation-errors"},Kt={key:0},jt={key:1},Pt={class:"tw-flex tw-items-center tw-justify-between tw-mt-2"},zt={key:0,class:"tw-text-right validation-errors"},Lt={key:0},Jt={class:"tw-flex tw-items-center tw-justify-between tw-mt-2"},Wt={class:"additional-left-pad-currency"},Yt={key:0,class:"tw-text-center validation-errors"},Ht={class:"tw-flex tw-items-center tw-justify-between tw-mt-2"},Qt=["value"];function Rt(n,t,pt,o,a,g){var b,_,M,V,x,k,O,D,$,A,C,I,G,F,S,N,T,U,E,B,q,K,j,P,z,L,J,W,Y,H,Q,R,X,Z,tt,et,ot,nt,at,it,lt,rt;const vt=u("kv-text-input"),ct=u("kv-material-icon"),w=u("kv-currency-input"),ht=u("kv-select");return i(),l("form",{onSubmit:t[6]||(t[6]=kt(()=>{},["prevent"])),novalidate:""},[e("fieldset",{disabled:pt.disabled},[e("div",null,[t[7]||(t[7]=e("strong",null,"Each month on the",-1)),e("label",{class:c(["tw-sr-only",{error:(_=(b=o.v$.form)==null?void 0:b.dayOfMonth)==null?void 0:_.$invalid}]),for:a.form.dayOfMonth}," Day of the Month ",10,Ft),a.isDayInputShown?(i(),Vt(vt,{key:0,onBlur:t[0]||(t[0]=r=>g.hideDayInput()),class:"text-input__day",id:"dayOfMonth",type:"number",placeholder:"",required:"",min:"1",max:"31",modelValue:a.form.dayOfMonth,"onUpdate:modelValue":t[1]||(t[1]=r=>a.form.dayOfMonth=r),modelModifiers:{number:!0}},null,8,["modelValue"])):s("",!0),a.isDayInputShown?s("",!0):(i(),l("button",{key:1,class:"tw-text-link tw-font-medium",onClick:t[2]||(t[2]=r=>a.isDayInputShown=!0)},[e("strong",null,h(n.$filters.numeral(a.form.dayOfMonth,"Oo")),1),m(ct,{class:"tw-w-2.5 tw-h-2.5 tw-text-action",icon:a.mdiPencil,title:"Edit"},null,8,["icon"])])),t[8]||(t[8]=e("strong",null,"we'll process the following:",-1)),(V=(M=o.v$.form)==null?void 0:M.dayOfMonth)!=null&&V.$invalid?(i(),l("ul",St,[(O=(k=(x=o.v$.form)==null?void 0:x.dayOfMonth)==null?void 0:k.required)!=null&&O.$invalid?(i(),l("li",Nt," Field is required ")):s("",!0),(A=($=(D=o.v$.form)==null?void 0:D.dayOfMonth)==null?void 0:$.minValue)!=null&&A.$invalid||(G=(I=(C=o.v$.form)==null?void 0:C.dayOfMonth)==null?void 0:I.maxValue)!=null&&G.$invalid?(i(),l("li",Tt," Enter day of month between 1 and 31 ")):s("",!0)])):s("",!0),e("div",Ut,[a.form.dayOfMonth>28?(i(),l("small",Et," (note - may be processed on the last day of the month) ")):s("",!0)])]),e("div",null,[e("div",Bt,[t[9]||(t[9]=e("div",null,[e("span",null," Deposit for lending ")],-1)),e("div",null,[e("label",{class:c(["tw-sr-only",{error:(S=(F=o.v$.form)==null?void 0:F.mgAmount)==null?void 0:S.$invalid}]),for:"amount"}," Amount ",2),m(w,{id:"amount",class:"tw-w-15",modelValue:a.form.mgAmount,"onUpdate:modelValue":t[3]||(t[3]=r=>a.form.mgAmount=r)},null,8,["modelValue"])])]),e("div",null,[(T=(N=o.v$.form)==null?void 0:N.mgAmount)!=null&&T.$invalid?(i(),l("ul",qt,[(B=(E=(U=o.v$.form)==null?void 0:U.mgAmount)==null?void 0:E.required)!=null&&B.$invalid?(i(),l("li",Kt," Field is required ")):s("",!0),(j=(K=(q=o.v$.form)==null?void 0:q.mgAmount)==null?void 0:K.minValue)!=null&&j.$invalid||(L=(z=(P=o.v$.form)==null?void 0:P.mgAmount)==null?void 0:z.maxValue)!=null&&L.$invalid?(i(),l("li",jt," Enter an amount of $5-$10,000 ")):s("",!0)])):s("",!0)]),e("div",Pt,[t[10]||(t[10]=e("div",null,[e("span",null," Optional donation to support Kiva ")],-1)),e("div",null,[e("label",{class:c(["tw-sr-only",{error:(W=(J=o.v$.form)==null?void 0:J.donation)==null?void 0:W.$invalid}]),for:"donation"}," Donation ",2),m(w,{id:"donation",class:"tw-w-15",modelValue:a.form.donation,"onUpdate:modelValue":t[4]||(t[4]=r=>a.form.donation=r)},null,8,["modelValue"])])]),e("div",null,[(H=(Y=o.v$.form)==null?void 0:Y.donation)!=null&&H.$invalid?(i(),l("ul",zt,[(X=(R=(Q=o.v$.form)==null?void 0:Q.donation)==null?void 0:R.minValue)!=null&&X.$invalid||(et=(tt=(Z=o.v$.form)==null?void 0:Z.donation)==null?void 0:tt.maxValue)!=null&&et.$invalid?(i(),l("li",Lt," Enter an amount of $0-$10,000 ")):s("",!0)])):s("",!0)]),e("div",Jt,[t[11]||(t[11]=e("div",null,[e("strong",null,"Total/month")],-1)),e("div",null,[e("strong",Wt,h(n.$filters.numeral(g.totalCombinedDeposit,"$0,0.00")),1)])]),e("div",null,[(at=(nt=(ot=o.v$.form)==null?void 0:ot.mgAmount)==null?void 0:nt.maxTotal)!=null&&at.$invalid||(rt=(lt=(it=o.v$.form)==null?void 0:it.donation)==null?void 0:lt.maxTotal)!=null&&rt.$invalid?(i(),l("ul",Yt,t[12]||(t[12]=[e("li",null,[st(" The maximum Monthly Good total is $10,000."),e("br"),st(" Please try again by entering in a smaller amount. ")],-1)]))):s("",!0)])]),e("div",Ht,[t[13]||(t[13]=e("div",null,[e("label",{class:"tw-font-medium",for:"monthly-good-categories-select"},"Your contribution will:")],-1)),e("div",null,[m(ht,{modelValue:a.form.category,"onUpdate:modelValue":t[5]||(t[5]=r=>a.form.category=r),id:"monthly-good-categories-select"},{default:xt(()=>[(i(!0),l(Ot,null,Dt(n.lendingCategories,(r,gt)=>(i(),l("option",{value:r.value,key:gt},h(r.label),9,Qt))),128))],void 0),_:1},8,["modelValue"])])])],8,Gt)],32)}const yt=It(ft,[["render",Rt],["__scopeId","data-v-776a7753"]]);ft.__docgenInfo={displayName:"MonthlyGoodUpdateForm",description:`This form contains all the fields and validation to modify a MG Subscription
It accepts values as props and sets those to initial data values.
When values are changed it emits the validity state and the values
so a parent component can access them.`,tags:{},exportName:"default",props:[{name:"disabled",description:"Should all inputs on the form be disabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"donation",description:"Monthly Good Donation to Kiva",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"mgAmount",description:"Monthly Good Amount to go to loans",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"dayOfMonth",description:"Day of month Monthly Good will take effect",type:{name:"number"},defaultValue:{func:!1,value:"new Date().getDate()"}},{name:"category",description:`Category to lend to.
Should be Category short name found in loanGroupCategoriesMixin`,type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"form-update",type:{names:["Event"]},description:"Event emitted whenever a form value changes."}],sourceFiles:["/home/runner/work/ui/ui/src/components/Forms/MonthlyGoodUpdateForm.vue"]};const fe={title:"Forms/MonthlyGoodUpdateForm",component:yt,args:{donation:3.75,dayOfMonth:20,mgAmount:10.25,category:"women",disabled:!1},argTypes:{category:{control:{type:"select",options:["default","women","agriculture","refugees","education","eco_friendly","us_borrowers","disaster_relief_covid"]}}}},f=(n,{argTypes:t})=>({props:Object.keys(t),components:{MonthlyGoodUpdateForm:yt},setup(){return n},template:`
        <monthly-good-update-form
            :donation="donation"
            :day-of-month="dayOfMonth"
            :category="category"
            :mg-amount="mgAmount"
            :disabled="disabled"
        />
    `});var dt,mt,ut;f.parameters={...f.parameters,docs:{...(dt=f.parameters)==null?void 0:dt.docs,source:{originalSource:`(args, {
  argTypes
}) => ({
  props: Object.keys(argTypes),
  components: {
    MonthlyGoodUpdateForm
  },
  setup() {
    return args;
  },
  template: \`
        <monthly-good-update-form
            :donation="donation"
            :day-of-month="dayOfMonth"
            :category="category"
            :mg-amount="mgAmount"
            :disabled="disabled"
        />
    \`
})`,...(ut=(mt=f.parameters)==null?void 0:mt.docs)==null?void 0:ut.source}}};const ye=["Default"];export{f as Default,ye as __namedExportsOrder,fe as default};
