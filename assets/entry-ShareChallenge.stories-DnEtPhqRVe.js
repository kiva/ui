import{t as M}from"./entry-team-goal-mixin-kEzWJwoLeD.js";import{K as O}from"./entry-KvProgressCircle-Dl0vzA6hWT.js";import{R}from"./entry-rewards-Js01P1PoY8.js";import{s as z,c as A,C as H}from"./entry-social-sharing-mixin-mcFPgMmQne.js";import{t as J}from"./entry-mdi-BJHOrBfjV3.js";import{g as C}from"./entry-urlUtils-D59-4GikCB.js";import{K as q}from"./entry-KvIcon-DpMQFaEAGT.js";import{c,a as r,b as _,r as l,P as Q,o as m,e as s,J as W,K as S,F as d,n as X}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";import{w as Y}from"./entry-KvMaterialIcon-DcajXwg-0j.js";import"./entry-KvWwwHeader-CVdIzOPj6Q.js";import{g as Z}from"./entry-KvGrid-A3hpmYTsti.js";import"./entry-numeral-DJCTM12wUX.js";import{x as $}from"./entry-KvPageContainer-B9-1kg27t_.js";import{_ as ee}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{a as te}from"./entry-apollo-story-mixin-CB9BNmK9U5.js";import"./entry-index-tAHLmhMYuW.js";import"./entry-index-D4S0JsTkt8.js";import"./entry-index-COmIkRYU2t.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./iframe-CWeBLAo0.js";const T={name:"ShareChallenge",inject:["apollo"],mixins:[z,M],components:{KvProgressCircle:O,KvMaterialIcon:Y,RewardsIcon:R,KvIcon:q,KvPageContainer:$,KvGrid:Z},props:{teamPublicId:{type:String,default:""},loan:{type:Object,default:()=>({})},lender:{type:Object,default:()=>({})},isGuest:{type:Boolean,default:!1},teamName:{type:String,default:""}},data(){return{utmCampaign:"teamschallenge",mdiLink:J,copyStatus:{class:"",disabled:!1,text:"Copy link"},KvBlueskyIcon:H}},computed:{loanId(){var t;return((t=this.loan)==null?void 0:t.id)??""},borrowerName(){var t;return((t=this.loan)==null?void 0:t.name)??""},teamChallengePath(){return this.teamPublicId?`/lend/filter?team=${this.teamPublicId}`:"/teams"},utmContent(){var t,e,n;return this.isGuest?"guest":(t=this.lender)!=null&&t.public&&((e=this.lender)!=null&&e.publicId)?(n=this.lender)==null?void 0:n.publicId:"anonymous"},shareLink(){var i,a;const t=`https://${this.$appConfig.host}`,e={team:this.teamPublicId,lender:(i=this.lender)!=null&&i.publicId?`${this.lender.publicId}`:""};let n="";return this.loan.id&&((a=this.lender)!=null&&a.inviterName)&&(n=`invitedby/${this.lender.inviterName}/for/${this.loan.id}`),C(`${t}/${n}`,e)},shareMessage(){return`Kiva is an easy way to make a real difference in someone's life.${this.borrowerName&&this.borrowerLocation?` Support ${this.borrowerName} and help ${this.teamName} hit their goal.`:""}`}},methods:{async copyUrl({utmCampaign:t,utmContent:e},n){const i=C(this.shareLink,{utm_source:"social_share_link",utm_medium:"referral",utm_campaign:t,utm_content:e});try{await A(i),this.copyStatus&&(this.copyStatus={class:"tw-transition-colors tw-border-action-highlight tw-text-action-highlight",disabled:!0,text:"Copied!"})}catch{this.copyStatus&&(this.copyStatus={class:"tw-transition-colors tw-border-danger-highlight tw-text-danger-highlight",disabled:!0,text:"Error"})}finally{setTimeout(()=>{this.copyStatus&&(this.copyStatus={class:"",disabled:!1,text:n})},500)}}},mounted(){this.$kvTrackEvent("post-checkout","view challenge complete",this.teamName)}},ae={class:"tw-bg-secondary"},se={class:"tw-col-span-12 lg:tw-col-span-8 lg:tw-col-start-3 tw-py-4 hide-for-print"},ne={class:"tw-flex tw-flex-col tw-items-center tw-w-full tw-bg-white tw-rounded tw-px-2.5 tw-py-3.5 md:tw-px-4 md:tw-pt-3 md:tw-pb-7 tw-shadow-lg"},oe={class:"tw-flex tw-items-center tw-justify-center tw-gap-2 tw-w-full tw-mb-2.5"},re={class:"tw-flex tw-items-center tw-justify-center tw-relative"},ie={class:"tw-absolute"},le=["href"],ce={class:"tw-flex tw-flex-col md:tw-flex-row tw-justify-between tw-gap-1 tw-w-full"},me=["disabled"],ue={class:"tw-font-medium"};function de(t,e,n,i,a,o){const V=l("kv-progress-circle"),D=l("rewards-icon"),k=l("kv-icon"),v=l("kv-material-icon"),E=l("kv-grid"),G=l("kv-page-container"),u=Q("kv-track-event");return m(),c("div",ae,[r(G,{"data-testid":"share-challenge"},{default:_(()=>[r(E,{class:"tw-grid-cols-12"},{default:_(()=>[s("div",se,[s("div",ne,[s("div",oe,[s("div",re,[r(V,{class:"tw-w-10 tw-z-2 tw-h-10","stroke-width":20,value:t.percentageFunded,"arc-scale":.8,rotate:36,"show-number":!1},null,8,["value"]),s("div",ie,[r(D,{class:"tw-h-7 tw-w-6"})])]),s("h4",null,[e[4]||(e[4]=W(" Challenge ")),s("a",{href:o.teamChallengePath,"data-testid":"percentage-funded",class:"tw-text-eco-green-3"},S(t.percentageFunded)+"% complete ",9,le)])]),e[8]||(e[8]=s("h2",{class:"tw-text-center tw-mb-2.5"}," Help your team complete this challenge by sharing it with a friend! ",-1)),s("div",ce,[d((m(),c("button",{class:"tw-flex tw-items-center tw-justify-center tw-gap-1 tw-border tw-border-gray-800 tw-rounded tw-py-1 tw-basis-1/3",onClick:e[0]||(e[0]=f=>t.showSharePopUp(t.facebookShareUrl({utmCampaign:a.utmCampaign,utmContent:o.utmContent}),"Thanks for sharing to Facebook!"))},[r(k,{name:"facebook-round",title:"Facebook",style:{width:"28px",fill:"#1877F2"}}),e[5]||(e[5]=s("span",{class:"tw-font-medium"},"Facebook",-1))])),[[u,["post-checkout","share","facebook",a.utmCampaign,o.loanId]]]),d((m(),c("button",{class:"tw-flex tw-items-center tw-justify-center tw-gap-1 tw-border tw-border-gray-800 tw-rounded tw-py-1 tw-basis-1/3",onClick:e[1]||(e[1]=f=>t.showSharePopUp(t.blueskyShareUrl({utmCampaign:a.utmCampaign,utmContent:o.utmContent}),"Thanks for sharing to Bluesky!"))},[r(v,{name:"bluesky",icon:a.KvBlueskyIcon,style:{width:"28px",color:"#1185FE"}},null,8,["icon"]),e[6]||(e[6]=s("span",{class:"tw-font-medium"},"Share",-1))])),[[u,["post-checkout","share","bluesky",a.utmCampaign,t.selectedLoanId]]]),d((m(),c("button",{class:"tw-flex tw-items-center tw-justify-center tw-gap-1 tw-border tw-border-gray-800 tw-rounded tw-py-1 tw-basis-1/3",onClick:e[2]||(e[2]=f=>t.showSharePopUp(t.linkedInShareUrl({utmCampaign:a.utmCampaign,utmContent:o.utmContent}),"Thanks for sharing to LinkedIn!"))},[r(k,{name:"linkedin",title:"LinkedIn",style:{width:"26px",fill:"#0A66C2"}}),e[7]||(e[7]=s("span",{class:"tw-font-medium"},"LinkedIn",-1))])),[[u,["post-checkout","share","linkedin",a.utmCampaign,o.loanId]]]),d((m(),c("button",{class:X(["tw-flex tw-items-center tw-justify-center tw-gap-1 tw-border tw-border-gray-800 tw-rounded tw-py-1 tw-basis-1/3",a.copyStatus.class]),disabled:a.copyStatus.disabled,onClick:e[3]||(e[3]=f=>o.copyUrl({utmCampaign:a.utmCampaign,utmContent:o.utmContent},a.copyStatus.text))},[r(v,{icon:a.mdiLink,style:{width:"28px"},class:"tw-bg-secondary tw-p-0.5 tw-rounded"},null,8,["icon"]),s("span",ue,S(a.copyStatus.text),1)],10,me)),[[u,["post-checkout","share","copy-link",a.utmCampaign,o.loanId]]])])])])],void 0,!0),_:1})],void 0),_:1})])}const B=ee(T,[["render",de]]);T.__docgenInfo={displayName:"ShareChallenge",exportName:"default",description:"",tags:{},props:[{name:"teamPublicId",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"loan",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"lender",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"isGuest",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"teamName",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Thanks/ShareChallenge.vue"]};const Be={title:"Components/ShareChallenge",component:B},pe=()=>({methods:{handleFacebookResponse:()=>{},showSharePopUp:()=>{},blueskyShareUrl:()=>{},facebookShareUrl:()=>{},linkedInShareUrl:()=>{},copyLink:()=>{}}}),g=(t={})=>(n,{argTypes:i})=>({props:Object.keys(i),components:{ShareChallenge:B},mixins:[te(),pe()],setup(){return t},template:'<share-challenge :goal="goal" :loan="loan" :lender="lender" :team-public-id="teamPublicId" />'}),b={participation:{values:[{amountLent:10}]},targets:{values:[{targetLendAmount:20}]}},y={id:1,name:"Test Loan"},we={inviterName:"Test Lender",public:!0,publicId:"test-lender"},p=g({goal:b,loan:y}),w=g({goal:b,loan:y,teamPublicId:"aplus"}),h=g({goal:b,loan:y,lender:we,teamPublicId:"aplus"});var I,x,P;p.parameters={...p.parameters,docs:{...(I=p.parameters)==null?void 0:I.docs,source:{originalSource:`story({
  goal,
  loan
})`,...(P=(x=p.parameters)==null?void 0:x.docs)==null?void 0:P.source}}};var L,N,j;w.parameters={...w.parameters,docs:{...(L=w.parameters)==null?void 0:L.docs,source:{originalSource:`story({
  goal,
  loan,
  teamPublicId: 'aplus'
})`,...(j=(N=w.parameters)==null?void 0:N.docs)==null?void 0:j.source}}};var U,F,K;h.parameters={...h.parameters,docs:{...(U=h.parameters)==null?void 0:U.docs,source:{originalSource:`story({
  goal,
  loan,
  lender,
  teamPublicId: 'aplus'
})`,...(K=(F=h.parameters)==null?void 0:F.docs)==null?void 0:K.source}}};const Ve=["Default","Team","Lender"];export{p as Default,h as Lender,w as Team,Ve as __namedExportsOrder,Be as default};
