import{_ as A}from"./entry-get-BUjo_hX5jl.js";import{e as q,_ as T,f as j}from"./entry-syncDate-B5_baTpRcj.js";import{_ as U}from"./entry-sortBy-C54Lx-S4RT.js";import{g as z}from"./entry-index-CWclSTHHJk.js";import{i as J}from"./entry-PromoCreditBanner-CN7uFBF8a4.js";import{K as H}from"./entry-KvAccordionItem-C1aTJ3Gq8C.js";import{y as O,g as X}from"./entry-mdi-B1ONwcTkQ2.js";import{K as D,c as s,o as n,J as v,I as w,D as h,M as m,L as _,r as f,q as t,a as r,C as u,z as y,m as I,A as Y,G as Z}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{x as R}from"./entry-KvMaterialIcon-C3KLX5OV-L.js";import{_ as B}from"./entry-KvLoadingPlaceholder-B_9_tltQhY.js";import"./entry-KvWwwHeader-C1bm1YMh4q.js";import"./entry-numeral-xVHG5DEP0A.js";import{h as ee,_ as ne}from"./entry-KvTabs-CbRnT2lqFN.js";import{y as te}from"./entry-KvTabPanel-Ct8s7XWvCc.js";import{_ as F}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{w as ie}from"./entry-KvGrid-Cgm16aFdnL.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-get-D3xDH2SX94.js";import"./entry-isSymbol-5pnFTpIKM9.js";import"./iframe-Cc_r_Bkf.js";import"./entry-kiva-logo-CXWq-YcmJ4.js";import"./entry-CampaignLogoGroup-R50IhBJ4kn.js";import"./entry-KvContentfulImg-B0t9ZCrx8O.js";import"./entry-throttle-DL1zg7kAk0.js";import"./entry-toNumber-MeiYJWOH0A.js";import"./entry-imageUtils-XCIqTGZvrk.js";import"./entry-settingsUtils-CXPrtFAPl-.js";import"./entry-index-COmIkRYU2t.js";import"./entry-myKivaUtils-DUwPoPrS-N.js";import"./entry-logReadQueryError-Codcl0QZ_g.js";import"./entry-logFormatter-DhjghUk5Me.js";import"./entry-myKivaForAllUsers-DI6rZrUMxZ.js";import"./entry-KvButton-BA7nBLyz1b.js";import"./entry-KvLoadingSpinner-CpYE5b1xV2.js";import"./entry-KvPageContainer-Dh8GJwjiow.js";import"./entry-KvUserAvatar-DmX-R6-wYd.js";import"./entry-throttle-4FNEI5INvC.js";import"./entry-KvThemeProvider-BF4_ArwXOx.js";import"./entry-orderBy-CUrcrXTfYx.js";import"./entry-keys-B9dmm4b_qU.js";import"./entry-toInteger-XI_MWEAzOD.js";import"./entry-lock-scroll-Bww220JhDP.js";import"./entry-getCacheKey-CFbvtT9xx4.js";import"./entry-KvTextInput-CnVgGp-sYq.js";import"./entry-attrs-C2OODjD6EW.js";import"./entry-promoCredit-w2GeqDaA1T.js";import"./entry-confetti.module-BCnSlh9tqh.js";import"./entry-KvExpandable-Bd-oWmSPhz.js";const se=`query lendMenuData {
	lend {
		loanChannels(popular: true, applyMinLoanCount: true, limit: 50) {
			values {
				id
				name
				url
			}
		}
	}
}
`,ae={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"lendMenuData"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lend"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"loanChannels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"popular"},value:{kind:"BooleanValue",value:!0}},{kind:"Argument",name:{kind:"Name",value:"applyMinLoanCount"},value:{kind:"BooleanValue",value:!0}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:185,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:se}}},le=`query lendMenuPrivateData($userId: Int) {
	lend {
		loans(limit: 1, filters: {
			lenderFavorite: $userId
		}) {
			totalCount
		}
	}
	my {
		id
		savedSearches(limit: 10) {
			values {
				id
				name
				url
			}
		}
	}
}
`,oe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"lendMenuPrivateData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lend"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"loans"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"lenderFavorite"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"my"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"savedSearches"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:262,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:le}}},re=`query countryList {
	lend {
		countryFacets {
			count
			country {
				id
				name
				region
				isoCode
			}
		}
	}
}
`,de={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"countryList"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lend"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryFacets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"country"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"region"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isoCode"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:159,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:re}}},G={name:"CountryList",props:{countries:{type:Array,default:()=>[]}}},ue={class:"tw-whitespace-nowrap tw-font-medium"},ce=["href"],me={key:1,class:"tw-block tw-py-1 tw-text-tertiary"};function fe(l,e,a,p,i,o){const g=D("kv-track-event");return n(),s("ul",ue,[(n(!0),s(v,null,w(a.countries,d=>(n(),s("li",{key:d.isoCode,class:"lg:tw-w-[11rem]"},[d.count>0?h((n(),s("a",{key:0,href:`/lend/filter?country=${d.isoCode}`,class:"tw-text-primary tw-block tw-w-full tw-py-1 tw-no-underline hover:tw-underline hover:tw-text-action active:tw-text-action-highlight"},[m(_(d.name)+" ("+_(d.count)+") ",1)],8,ce)),[[g,["TopNav","click-Lend-Country",d.name]]]):(n(),s("span",me,_(d.name)+" (0) ",1))]))),128))])}const K=F(G,[["render",fe]]);G.__docgenInfo={displayName:"CountryList",exportName:"default",description:"",tags:{},props:[{name:"countries",type:{name:"array"},defaultValue:{func:!1,value:"[]"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/LendMenu/CountryList.vue"]};const $={name:"SearchList",props:{searches:{type:Array,default:()=>[]}}},pe={class:"tw-font-medium"},ke=["href"];function ve(l,e,a,p,i,o){const g=f("router-link");return n(),s("ul",pe,[(n(!0),s(v,null,w(a.searches,d=>(n(),s("li",{key:d.id},[t("a",{class:"search-link",href:d.url},_(d.name),9,ke)]))),128)),t("li",null,[r(g,{to:"/lend/saved-search",class:"search-link"},{default:u(()=>e[0]||(e[0]=[m(" Manage saved searches ")]),void 0),_:1,__:[0]})])])}const W=F($,[["render",ve],["__scopeId","data-v-51188a34"]]);$.__docgenInfo={displayName:"SearchList",exportName:"default",description:"",tags:{},props:[{name:"searches",type:{name:"array"},defaultValue:{func:!1,value:"[]"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/LendMenu/SearchList.vue"]};const E={name:"LendListMenu",inject:{apollo:{default:null},cookieStore:{default:null}},components:{CountryList:K,KvAccordionItem:H,KvMaterialIcon:R,KvTab:ne,KvTabPanel:te,KvTabs:ee,KvLoadingPlaceholder:B,SearchList:W},props:{categories:{type:Array,default:()=>[]},favorites:{type:Number,default:0},userId:{type:Number,default:null},regions:{type:Array,default:()=>[]},searches:{type:Array,default:()=>[]},isRegionsLoading:{type:Boolean,default:!0},isChannelsLoading:{type:Boolean,default:!0},isUserDataLoading:{type:Boolean,default:!1},showMGUpsellLink:{type:Boolean,default:!1}},mixins:[q],data(){return{mgHighlightInNavVersion:null,mdiArrowRight:O}},computed:{hasSearches(){return this.searches.length>0}},methods:{onClose(){var l,e,a,p,i,o;(a=(e=(l=this.$refs)==null?void 0:l.navLendCategories)==null?void 0:e.tabContext)!=null&&a.setTab&&((p=this.$refs.navLendCategories.tabContext)==null||p.setTab(0)),(i=this.$refs)!=null&&i.regionAccordions&&this.$refs.regionAccordions.forEach(g=>{g.collapse()}),this.hasSearches&&((o=this.$refs)!=null&&o.searches)&&this.$refs.searches.collapse()},trackMgLinkClick(){this.$kvTrackEvent("TopNav","click-Lend-Menu-Monthly-Good","Lend-monthly")}}},he={class:"tw-pb-2"},ge={class:"tw-inline-flex tw-items-center tw-py-2 tw-mb-2 tw-gap-0.5 tw-border-b tw-border-tertiary tw-font-medium"},ye={key:1,class:"tw-block tw-py-2 tw-mb-2 tw-w-16"},we={class:"tw-font-medium"},_e=["href"],Le={class:"tw-border-t tw-border-tertiary"},be={class:"tw-flex"},Se={class:"tw-text-h4"},Ce={class:"tw-font-medium"},Ne={key:1,class:"tw-block tw-py-1 tw-text-tertiary"},xe={key:0},Me={key:1},Fe=["href"];function Ie(l,e,a,p,i,o){const g=f("kv-material-icon"),d=f("router-link"),b=f("kv-loading-placeholder"),C=f("kv-tab"),N=f("kv-tab-panel"),x=f("kv-accordion-item"),L=f("country-list"),c=f("search-list"),M=f("kv-tabs"),S=D("kv-track-event");return n(),s("div",he,[a.showMGUpsellLink?(n(),y(d,{key:0,to:"/monthlygood",onClick:o.trackMgLinkClick},{default:u(()=>[t("span",ge,[e[0]||(e[0]=m(" Lend monthly ")),r(g,{icon:i.mdiArrowRight,class:"tw-w-3 tw-h-3"},null,8,["icon"])])],void 0),_:1},8,["onClick"])):(n(),s("div",ye,[r(b,{style:{height:"1.5rem"}})])),r(M,{ref:"navLendCategories"},{tabNav:u(()=>[r(C,{"for-panel":"nav-lend-categories"},{default:u(()=>e[1]||(e[1]=[m(" Categories ")]),void 0,!0),_:1,__:[1]}),r(C,{"for-panel":"nav-lend-regions"},{default:u(()=>e[2]||(e[2]=[m(" Regions ")]),void 0,!0),_:1,__:[2]}),a.userId||a.isUserDataLoading?(n(),y(C,{key:0,"for-panel":"nav-my-kiva"},{default:u(()=>e[3]||(e[3]=[m(" My Kiva ")]),void 0,!0),_:1,__:[3]})):I("",!0)]),tabPanels:u(()=>[r(N,{id:"nav-lend-categories"},{default:u(()=>[t("ul",we,[a.isChannelsLoading?(n(),s(v,{key:0},w(14,k=>t("li",{key:k,class:"tw-w-[11rem] tw-py-1 tw-flex"},[r(b,{class:"tw-inline-block tw-align-middle",style:{height:"1rem",display:"inline-block"}}),e[4]||(e[4]=t("span",{class:"tw-inline-block"}," ",-1))])),64)):(n(!0),s(v,{key:1},w(a.categories,(k,V)=>(n(),s("li",{key:V},[h((n(),s("a",{href:k.url,class:"lend-link tw-text-primary"},[m(_(k.name),1)],8,_e)),[[S,["TopNav","click-Lend-Category",k.name,V+1]]])]))),128)),t("li",Le,[h((n(),y(d,{to:"/lend",class:"lend-link tw-text-primary"},{default:u(()=>e[5]||(e[5]=[m(" All loans ")]),void 0,!0),_:1,__:[5]})),[[S,["TopNav","click-Lend-All_Loans"]]])]),t("li",null,[h((n(),y(d,{to:"/categories",class:"lend-link tw-text-primary"},{default:u(()=>e[6]||(e[6]=[m(" All categories ")]),void 0,!0),_:1,__:[6]})),[[S,["TopNav","click-Lend-All_Categories"]]])])])],void 0,!0),_:1}),r(N,{id:"nav-lend-regions"},{default:u(()=>[a.isRegionsLoading?(n(),s(v,{key:0},w(8,k=>r(x,{key:k,id:l.$filters.changeCase(`placeholder-${k}-panel`,"kebabCase"),disabled:!0},{header:u(()=>[t("div",be,[r(b,{class:"tw-inline-block tw-align-middle",style:{height:"1rem",display:"inline-block"}}),e[7]||(e[7]=t("span",{class:"tw-inline-block tw-text-h4"}," ",-1))])]),_:2},1032,["id"])),64)):(n(!0),s(v,{key:1},w(a.regions,k=>(n(),y(x,{key:k.name,id:l.$filters.changeCase(`lend-menu-${k.name}-panel`,"kebabCase"),ref_for:!0,ref:"regionAccordions"},{header:u(()=>[t("h3",Se,[h((n(),s("span",null,[m(_(k.name),1)])),[[S,["TopNav","click-Lend-Region",k.name]]])])]),default:u(()=>[r(L,{countries:k.countries},null,8,["countries"])],void 0,!0),_:2},1032,["id"]))),128))],void 0,!0),_:1}),a.userId||a.isUserDataLoading?(n(),y(N,{key:0,id:"nav-my-kiva"},{default:u(()=>[t("ul",Ce,[t("li",null,[a.favorites>0?h((n(),y(d,{key:0,to:{path:"/lend",query:{lenderFavorite:a.userId}},class:"lend-link tw-text-primary"},{default:u(()=>e[8]||(e[8]=[m(" Saved loans ")]),void 0,!0),_:1,__:[8]},8,["to"])),[[S,["TopNav","click-Lend-Favorites"]]]):(n(),s("span",Ne,"Saved loans"))]),o.hasSearches?(n(),s("li",xe,[r(x,{id:"lend-menu-saved-searches-panel",ref:"searches"},{header:u(()=>e[9]||(e[9]=[t("p",{class:"tw-font-medium"}," Saved searches ",-1)])),default:u(()=>[r(c,{searches:a.searches},null,8,["searches"])],void 0,!0),_:1},512)])):(n(),s("li",Me,e[10]||(e[10]=[t("span",{class:"tw-block tw-py-1 tw-text-tertiary"},"Saved searches",-1)]))),t("li",null,[h((n(),s("a",{href:l.countriesNotLentToUrl,class:"lend-link tw-text-primary"},e[11]||(e[11]=[m(" Countries I haven't lent to ")]),8,Fe)),[[S,["TopNav","click-Lend-Countries_Not_Lent"]]])])])],void 0,!0),_:1})):I("",!0)]),_:1},512)])}const Ae=F(E,[["render",Ie],["__scopeId","data-v-247d2304"]]);E.__docgenInfo={displayName:"LendListMenu",exportName:"default",description:"",tags:{},props:[{name:"categories",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"favorites",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"userId",type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"regions",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"searches",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"isRegionsLoading",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"isChannelsLoading",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"isUserDataLoading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showMGUpsellLink",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/LendMenu/LendListMenu.vue"]};const P={name:"LendMegaMenu",inject:{apollo:{default:null},cookieStore:{default:null}},components:{CountryList:K,KvGrid:ie,KvLoadingPlaceholder:B,KvMaterialIcon:R,SearchList:W},props:{categories:{type:Array,default:()=>[]},favorites:{type:Number,default:0},isRegionsLoading:{type:Boolean,default:!0},isChannelsLoading:{type:Boolean,default:!0},isUserDataLoading:{type:Boolean,default:!1},userId:{type:Number,default:null},regions:{type:Array,default:()=>[]},searches:{type:Array,default:()=>[]},showMGUpsellLink:{type:Boolean,default:!1}},mixins:[q],data(){return{categoriesWidth:null,openedSection:"",savedSearchesTitle:"Saved searches",mdiArrowRight:O,mdiChevronLeft:X}},computed:{computedStyle(){let l="width: 150%;";if(this.sectionOpen){const e=this.getRefWidth("categories");l+=`transform: translateX(${e*-1}px);`}return l},hasSearches(){return this.searches.length>0},sectionOpen(){return this.openedSection!==""},openRegions(){return this.regions.filter(l=>this.isOpenSection(l.name))}},methods:{getRefWidth(l){const e=this.$refs[l]||null;return(e==null?void 0:e.clientWidth)??0},onClose(){this.closeSection()},isOpenSection(l){return this.openedSection===l},openSection(l){this.openedSection=l},closeSection(){this.openedSection=""},trackMgLinkClick(){this.$kvTrackEvent("TopNav","click-Lend-Menu-Monthly-Good","Lend-monthly")}}},Te={class:"lend-mega-menu tw-overflow-hidden tw-pb-3 lg:tw-pt-3"},De={class:"tw-inline-flex tw-items-center tw-py-2 tw-mb-2 tw-gap-0.5 tw-font-medium"},Ve={key:1,class:"tw-block tw-py-2 tw-mb-2 tw-w-16"},Ue={class:"tw-col-span-7 tw-z-1",ref:"categories"},qe={class:"tw-flex tw-gap-4 tw-whitespace-nowrap"},Oe={class:"tw-columns-2 tw-gap-4 tw-font-medium"},Re=["href"],Be={class:"tw-font-medium"},Ge={class:"tw-w-[11rem]"},Ke={class:"tw-w-[11rem]",ref:"allLoans"},$e={key:0},We={class:"tw-font-medium"},Ee={key:1,class:"tw-text-secondary tw-py-1 tw-inline-block"},Pe=["aria-pressed"],Qe={key:1,class:"tw-text-secondary tw-py-1 tw-inline-block"},je=["href"],ze={class:"tw-col-span-2"},Je={class:"tw-col-span-8 tw-flex tw-flex-col"},He={class:"tw-flex tw-whitespace-nowrap tw-h-full"},Xe={class:"tw-font-medium"},Ye=["onClick","aria-pressed"];function Ze(l,e,a,p,i,o){const g=f("kv-material-icon"),d=f("router-link"),b=f("kv-loading-placeholder"),C=f("search-list"),N=f("country-list"),x=f("kv-grid"),L=D("kv-track-event");return n(),s("div",Te,[a.showMGUpsellLink?(n(),y(d,{key:0,to:"/monthlygood",onClick:o.trackMgLinkClick},{default:u(()=>[t("span",De,[e[2]||(e[2]=m(" Lend monthly ")),r(g,{icon:i.mdiArrowRight,class:"tw-w-3 tw-h-3"},null,8,["icon"])])],void 0),_:1},8,["onClick"])):(n(),s("div",Ve,[r(b,{style:{height:"1.5rem"}})])),t("div",{style:Z(o.computedStyle),class:"tw-transition tw-duration-1000 tw-ease-in-out"},[r(x,{style:{"grid-template-columns":"repeat(18, minmax(0, 1fr))"}},{default:u(()=>[t("div",Ue,[e[10]||(e[10]=t("h2",{class:"tw-text-base tw-mb-2"}," Categories ",-1)),t("div",qe,[t("ul",Oe,[a.isChannelsLoading?(n(),s(v,{key:0},w(14,c=>t("li",{key:c,class:"tw-w-[11rem]"},[r(b,{class:"tw-inline-block tw-align-middle",style:{height:"1.25rem"}}),e[3]||(e[3]=t("span",{class:"tw-py-1 tw-inline-block"}," ",-1))])),64)):(n(!0),s(v,{key:1},w(a.categories,(c,M)=>(n(),s("li",{key:M,class:"tw-w-[11rem]"},[h((n(),s("a",{href:c.url,class:"lend-menu-link tw-text-primary tw-text-left tw-py-1 tw-inline-block"},[m(_(c.name),1)],8,Re)),[[L,["TopNav","click-Lend-Category",c.name,M+1]]])]))),128))]),t("div",null,[t("ul",Be,[t("li",Ge,[h((n(),y(d,{to:"/categories",class:"lend-menu-link tw-text-primary tw-inline-block tw-py-1"},{default:u(()=>e[4]||(e[4]=[m(" All categories ")]),void 0,!0),_:1,__:[4]})),[[L,["TopNav","click-Lend-All_Categories"]]])]),t("li",Ke,[h((n(),y(d,{class:"lend-menu-link tw-text-primary tw-inline-block tw-py-1",to:"/lend"},{default:u(()=>e[5]||(e[5]=[m(" All loans ")]),void 0,!0),_:1,__:[5]})),[[L,["TopNav","click-Lend-All_Loans"]]])],512)]),a.userId||a.isUserDataLoading?(n(),s("div",$e,[e[8]||(e[8]=t("span",{class:"tw-inline-block tw-py-1"}," ",-1)),e[9]||(e[9]=t("h2",{class:"tw-text-base tw-my-1"}," My Kiva ",-1)),t("ul",We,[t("li",null,[a.favorites>0?h((n(),y(d,{key:0,to:{path:"/lend",query:{lenderFavorite:a.userId}},class:"lend-menu-link tw-text-primary tw-text-left tw-py-1 tw-inline-block"},{default:u(()=>e[6]||(e[6]=[m(" Saved loans ")]),void 0,!0),_:1,__:[6]},8,["to"])),[[L,["TopNav","click-Lend-Favorites"]]]):(n(),s("span",Ee," Saved loans "))]),t("li",null,[o.hasSearches?(n(),s("button",{key:0,onClick:e[0]||(e[0]=c=>o.openSection(i.savedSearchesTitle)),"aria-pressed":o.isOpenSection(i.savedSearchesTitle)?"true":"false",class:"lend-menu-link tw-text-primary tw-text-left tw-py-1 tw-inline-block"},_(i.savedSearchesTitle),9,Pe)):(n(),s("span",Qe," Saved searches "))]),t("li",null,[h((n(),s("a",{href:l.countriesNotLentToUrl,class:"lend-menu-link tw-text-primary tw-text-left tw-py-1 tw-inline-block"},e[7]||(e[7]=[m(" Countries I haven't lent to ")]),8,je)),[[L,["TopNav","click-Lend-Countries_Not_Lent"]]])])])])):I("",!0)])])],512),t("div",ze,[o.sectionOpen?(n(),s("button",{key:0,class:"tw-flex",onClick:e[1]||(e[1]=c=>i.openedSection="")},[r(g,{class:"tw-flex-shrink-0 tw-w-3 tw-h-3",icon:i.mdiChevronLeft},null,8,["icon"]),e[11]||(e[11]=t("span",{class:"tw-text-base"}," Back ",-1))])):I("",!0)]),t("div",Je,[o.isOpenSection(i.savedSearchesTitle)?(n(),s(v,{key:0},[e[12]||(e[12]=t("h2",{class:"tw-text-base tw-mb-2"}," Saved Searches ",-1)),r(C,{class:"search-list tw-h-full",searches:a.searches},null,8,["searches"])],64)):(n(),s(v,{key:1},[e[14]||(e[14]=t("h2",{class:"tw-text-base tw-mb-2"}," Regions ",-1)),t("div",He,[t("ul",Xe,[a.isRegionsLoading?(n(),s(v,{key:0},w(8,c=>t("li",{key:c,class:"tw-w-[11rem]"},[r(b,{class:"tw-inline-block tw-align-middle",style:{height:"1.25rem"}}),e[13]||(e[13]=t("span",{class:"tw-py-1 tw-inline-block"}," ",-1))])),64)):(n(!0),s(v,{key:1},w(a.regions,c=>(n(),s("li",{key:c.name,class:"tw-w-[11rem] tw-mr-4"},[h((n(),s("button",{onClick:M=>o.openSection(c.name),"aria-pressed":o.isOpenSection(c.name)?"true":"false",class:Y(["lend-menu-link tw-text-primary tw-text-left tw-py-1",{"tw-text-action":o.isOpenSection(c.name)}])},[m(_(c.name),1)],10,Ye)),[[L,["TopNav","click-Lend-Region",c.name]]])]))),128))]),(n(!0),s(v,null,w(o.openRegions,c=>(n(),s("div",{key:c.name,class:"tw-h-full"},[r(N,{countries:c.countries,class:"region-list tw-h-full"},null,8,["countries"])]))),128))])],64))])],void 0),_:1})],4)])}const en=F(P,[["render",Ze],["__scopeId","data-v-b91e014e"]]);P.__docgenInfo={displayName:"LendMegaMenu",exportName:"default",description:"",tags:{},props:[{name:"categories",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"favorites",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"isRegionsLoading",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"isChannelsLoading",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"isUserDataLoading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"userId",type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"regions",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"searches",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"showMGUpsellLink",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/LendMenu/LendMegaMenu.vue"]};const nn=z`query lendMenu {
		my {
			id
			userAccount {
				id
			}
		}
	}`,Q={name:"TheLendMenu",components:{LendListMenu:Ae,LendMegaMenu:en},inject:{apollo:{default:null},cookieStore:{default:null}},data(){return{userId:null,categories:[],countryFacets:[],favoritesCount:0,savedSearches:[],regionDisplayOrder:["North America","Central America","South America","Africa","Eastern Europe","Middle East","Asia","Oceania"],isRegionsLoading:!0,isChannelsLoading:!0,isUserDataLoading:!1,showMGUpsellLink:!1}},apollo:{query:nn,preFetch:!0,shouldPreFetch(l,{renderConfig:e}){return!e.useCDNCaching},result({data:l}){this.userId=A(l,"my.userAccount.id")}},computed:{regions(){const l=T(this.countryFacets,p=>({name:p.country.name,region:p.country.region,isoCode:p.country.isoCode.toLowerCase(),count:p.count||0})),e=j(l,"region");return T(e,(p,i)=>({name:i,countries:U(p,"name")})).sort(J(this.regionDisplayOrder,"name"))},computedCategories(){const l=T(this.categories,e=>{const a=JSON.parse(JSON.stringify(e));return a.url=a.url.replace("lend","lend-by-category"),a});return U(l,"name")},hasUserId(){return!!this.userId}},methods:{onClose(){this.$refs.list.onClose(),this.$refs.mega.onClose()},async onLoad(){var l,e,a,p;if(this.apollo.watchQuery({query:de}).subscribe({next:({data:i})=>{this.countryFacets=A(i,"lend.countryFacets"),this.isRegionsLoading=!1}}),this.apollo.watchQuery({query:ae}).subscribe({next:({data:i})=>{this.categories=A(i,"lend.loanChannels.values"),this.isChannelsLoading=!1}}),this.hasUserId){const{data:i}=await this.apollo.query({query:oe,variables:{userId:this.userId},fetchPolicy:"network-only"});this.isUserDataLoading=!1,this.favoritesCount=((e=(l=i==null?void 0:i.lend)==null?void 0:l.loans)==null?void 0:e.totalCount)??0,this.savedSearches=((p=(a=i==null?void 0:i.my)==null?void 0:a.savedSearches)==null?void 0:p.values)??[]}}},created(){var l,e;this.isUserDataLoading=((l=this.$renderConfig)==null?void 0:l.useCDNCaching)&&((e=this.$renderConfig)==null?void 0:e.cdnNotedLoggedIn)},mounted(){this.$nextTick(()=>{this.showMGUpsellLink=!0})}};function tn(l,e,a,p,i,o){const g=f("lend-list-menu"),d=f("lend-mega-menu");return n(),s("div",null,[r(g,{ref:"list",class:"lg:tw-hidden",categories:o.computedCategories,regions:o.regions,searches:i.savedSearches,favorites:i.favoritesCount,"user-id":i.userId,"is-channels-loading":i.isChannelsLoading,"is-regions-loading":i.isRegionsLoading,"is-user-data-loading":i.isUserDataLoading,"show-m-g-upsell-link":i.showMGUpsellLink},null,8,["categories","regions","searches","favorites","user-id","is-channels-loading","is-regions-loading","is-user-data-loading","show-m-g-upsell-link"]),r(d,{ref:"mega",class:"tw-hidden lg:tw-block",categories:o.computedCategories,regions:o.regions,searches:i.savedSearches,favorites:i.favoritesCount,"user-id":i.userId,"is-channels-loading":i.isChannelsLoading,"is-regions-loading":i.isRegionsLoading,"is-user-data-loading":i.isUserDataLoading,"show-m-g-upsell-link":i.showMGUpsellLink},null,8,["categories","regions","searches","favorites","user-id","is-channels-loading","is-regions-loading","is-user-data-loading","show-m-g-upsell-link"])])}const Yn=F(Q,[["render",tn]]);Q.__docgenInfo={displayName:"TheLendMenu",exportName:"default",description:"",tags:{},sourceFiles:["/home/runner/work/ui/ui/src/components/WwwFrame/LendMenu/TheLendMenu.vue"]};export{Yn as default};
