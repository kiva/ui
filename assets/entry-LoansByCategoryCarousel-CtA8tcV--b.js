import{c as g}from"./entry-contentful-ui-setting-styles-mixin-O0hIwaljDi.js";import{g as v}from"./entry-numeral-DJCTM12wUX.js";import{K as k}from"./entry-KivaClassicLoanCarousel-k0btLiNi28.js";import{c as d,o as i,H as L,I as w,f as p,b as m,J as b,K as x,r,d as I,a as u,e as D}from"./entry-vue.esm-bundler-Bf_Yeyugwo.js";import"./entry-KvWwwHeader-CVdIzOPj6Q.js";import{U as N}from"./entry-KvButton-DF0Vhz1EWA.js";import{_ as h}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";import{S}from"./entry-SectionWithBackgroundClassic-CIto-a7N3g.js";import{x as V}from"./entry-KvPageContainer-B9-1kg27t_.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-KivaClassicBasicLoanCard-mqx9jt4fGB.js";import"./entry-mdi-BJHOrBfjV3.js";import"./entry-loanUtils-5D9a5yj3H7.js";import"./entry-get-BUjo_hX5jl.js";import"./entry-get-D3xDH2SX94.js";import"./entry-isSymbol-5pnFTpIKM9.js";import"./entry-observerUtils-DveHpw6JZJ.js";import"./entry-time-left-mixin-BgOgttSZrl.js";import"./entry-index-CNzTSTNafD.js";import"./entry-index-COmIkRYU2t.js";import"./entry-index-D4S0JsTkt8.js";import"./entry-index-CbPSoDvqj7.js";import"./entry-index-DwHITppAlA.js";import"./entry-BorrowerImage-WXGsRE2huI.js";import"./entry-imageUtils-_95xo2d0ng.js";import"./entry-SummaryTag-BL5nRGkmuD.js";import"./entry-KvLoadingParagraph-B1vku9KEXS.js";import"./entry-getCacheKey-BX3EO2qX-W.js";import"./entry-KvLoadingPlaceholder-DUZzoT9CoU.js";import"./entry-KvProgressBar-CQtXD0YVwH.js";import"./entry-injectionCheck-B-GzsW2qm5.js";import"./entry-logFormatter-DhjghUk5Me.js";import"./entry-basketCount-CZ-kE9ye_Z.js";import"./entry-basketItems-B-09YWrzPC.js";import"./entry-updateLoanReservation-BaDuxVurTB.js";import"./entry-exports-CudK1O5XNw.js";import"./entry-ActionButton-DBlbdMcglY.js";import"./entry-includes-CAVAVivXb3.js";import"./entry-_baseIndexOf-qfoVQuLp0t.js";import"./entry-_baseFindIndex-Ca62E79BN9.js";import"./entry-keys-B9dmm4b_qU.js";import"./entry-toInteger-XI_MWEAzOD.js";import"./entry-toNumber-MeiYJWOH0A.js";import"./entry-KvSelect-DG6WmDJ0xC.js";import"./entry-attrs-C2OODjD6EW.js";import"./entry-KvMaterialIcon-DcajXwg-0j.js";import"./entry-LoanTag-ByD8VlFF-R.js";import"./entry-KvTextLink-CFK6VYUYhK.js";import"./entry-KvLoadingSpinner-D6PAL1PtJd.js";import"./entry-KvCarousel--umaisw_ND.js";import"./entry-throttle-DR-Bh3IiJx.js";import"./entry-KvLoadingSpinner-D0IZcQeh_0.js";import"./iframe-CWeBLAo0.js";const f={name:"KivaClassicLoanCategorySelector",components:{KvButton:N},emits:["handle-category-click"],props:{loanChannels:{type:Array,default:()=>[]},selectedChannel:{type:Number,default:0}},methods:{handleCategoryClick(e){const n=(e==null?void 0:e.id)??null,a=(e==null?void 0:e.shortName)??"",t=this.$route.path==="/"?"homepage":this.$route.path.replace(/\//g,"-").replace("-","");return this.$kvTrackEvent(t,"click-contentful-loan-carousel-category",a,n,n),this.$emit("handle-category-click",{categoryId:n}),!1}}},K={class:"tw-flex tw-justify-start md:tw-justify-center md:tw-flex-wrap tw-mx-auto tw-overflow-x-auto md:tw-overflow-x-none"};function j(e,n,a,t,o,l){const c=r("kv-button");return i(),d("div",K,[(i(!0),d(L,null,w(a.loanChannels,s=>(i(),p(c,{class:"tw-mx-1 md:tw-mb-3 tw-whitespace-nowrap",key:s.id,variant:a.selectedChannel===s.id?"link":"ghost",onClick:C=>l.handleCategoryClick(s)},{default:m(()=>[b(x(s.shortName),1)],void 0),_:2},1032,["variant","onClick"]))),128))])}const B=h(f,[["render",j]]);f.__docgenInfo={displayName:"KivaClassicLoanCategorySelector",exportName:"default",description:"",tags:{},props:[{name:"loanChannels",description:"Array of loan channel data in an object",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"selectedChannel",type:{name:"number"},defaultValue:{func:!1,value:"0"}}],events:[{name:"handle-category-click",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/ui/ui/src/components/LoanCollections/KivaClassicLoanCategorySelector.vue"]};const y={name:"KivaClassicMultiCategoryCarousel",inject:["apollo","cookieStore"],components:{KivaClassicLoanCarousel:k,KivaClassicLoanCategorySelector:B},props:{contentfulLoanChannels:{type:Array,default:()=>[]},loanDisplaySettings:{type:Object,default:()=>{}}},data(){return{loanChannelData:[],selectedChannel:{},showCarousel:!1}},computed:{combinedLoanChannelData(){return this.contentfulLoanChannels.map(e=>({...this.loanChannelData.find(a=>a.id===e.id),...e}))},loanChannelIds(){return this.contentfulLoanChannels.map(e=>e.id)},loanQueryLimit(){var e;return((e=this.loanDisplaySettings)==null?void 0:e.loanLimit)??1},selectedChannelLoanIds(){var n,a;const e=this.combinedLoanChannelData.find(t=>{var o;return((o=this.selectedChannel)==null?void 0:o.id)===t.id});return((a=(n=e==null?void 0:e.loans)==null?void 0:n.values)==null?void 0:a.map(t=>t.id))??[]},showViewMoreCard(){var e;return((e=this.loanDisplaySettings)==null?void 0:e.showViewMoreCard)??!1}},mounted(){this.fetchLoanChannel()},methods:{handleCategoryClick(e){this.selectedChannel=this.combinedLoanChannelData.find(n=>n.id===e.categoryId)},fetchLoanChannel(){this.apollo.query({query:v`query selectedLoanCategory($loanChannelIds: [Int]!, $loanLimit: Int) {
					lend {
						loanChannelsById(ids: $loanChannelIds){
							id
							name
							url
							# description
							loans(limit: $loanLimit) {
								values {
									id
								}
							}
						}
					}
				}`,variables:{loanChannelIds:this.loanChannelIds,loanLimit:this.loanQueryLimit}}).then(e=>{var t,o;const n=((o=(t=e==null?void 0:e.data)==null?void 0:t.lend)==null?void 0:o.loanChannelsById)??[];this.loanChannelData=n;const a=this.combinedLoanChannelData[0];this.selectedChannel=a,this.showCarousel=!0})}}};function $(e,n,a,t,o,l){const c=r("kiva-classic-loan-category-selector"),s=r("kiva-classic-loan-carousel");return i(),d("div",null,[l.combinedLoanChannelData.length>1?(i(),p(c,{key:0,"loan-channels":l.combinedLoanChannelData,"selected-channel":o.selectedChannel.id,onHandleCategoryClick:l.handleCategoryClick},null,8,["loan-channels","selected-channel","onHandleCategoryClick"])):I("",!0),u(s,{"is-visible":o.showCarousel,"loan-ids":l.selectedChannelLoanIds,"selected-channel":o.selectedChannel,"show-view-more-card":l.showViewMoreCard},null,8,["is-visible","loan-ids","selected-channel","show-view-more-card"])])}const M=h(y,[["render",$]]);y.__docgenInfo={displayName:"KivaClassicMultiCategoryCarousel",exportName:"default",description:"",tags:{},props:[{name:"contentfulLoanChannels",description:`Array of loan channel data in an object
ex. [{ id: 52, shortName: 'some short name' }]`,type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"loanDisplaySettings",description:`Additional display settings
Possible Options:
loanLimit: integer that controls how many loans will be loaded for ALL channels`,type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/LoanCollections/KivaClassicMultiCategoryCarousel.vue"]};const _={name:"LoansByCategoryCarousel",components:{KivaClassicMultiCategoryCarousel:M,KvPageContainer:V,SectionWithBackgroundClassic:S},mixins:[g],props:{content:{type:Object,default:()=>{}}},data(){return{}},computed:{background(){var e,n;return(n=(e=this.content)==null?void 0:e.contents)==null?void 0:n.find(({contentType:a})=>a?a==="background":!1)},contentfulLoanChannels(){var n,a,t;const e=(a=(n=this.content)==null?void 0:n.contents)==null?void 0:a.find(({contentType:o})=>o?o==="uiSetting":!1);return((t=e==null?void 0:e.dataObject)==null?void 0:t.loanChannels)??[]},loanDisplaySettings(){var n,a,t,o;const e=(a=(n=this.content)==null?void 0:n.contents)==null?void 0:a.find(({contentType:l})=>l?l==="uiSetting":!1);return{loanLimit:((t=e==null?void 0:e.dataObject)==null?void 0:t.loanLimit)??1,showViewMoreCard:((o=e==null?void 0:e.dataObject)==null?void 0:o.showViewMoreCard)??!1}}}};function A(e,n,a,t,o,l){const c=r("kiva-classic-multi-category-carousel"),s=r("kv-page-container"),C=r("section-with-background-classic");return i(),p(C,{"background-content":l.background,"theme-name":e.themeName,"vertical-padding":e.verticalPadding},{content:m(()=>[u(s,null,{default:m(()=>[D("div",null,[u(c,{"contentful-loan-channels":l.contentfulLoanChannels,"loan-display-settings":l.loanDisplaySettings},null,8,["contentful-loan-channels","loan-display-settings"])])],void 0,!0),_:1})]),_:1},8,["background-content","theme-name","vertical-padding"])}const Ae=h(_,[["render",A]]);_.__docgenInfo={displayName:"LoansByCategoryCarousel",exportName:"default",description:"",tags:{},props:[{name:"content",description:"Content group content from Contentful",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}}],sourceFiles:["/home/runner/work/ui/ui/src/components/Contentful/LoansByCategoryCarousel.vue"]};export{Ae as default};
