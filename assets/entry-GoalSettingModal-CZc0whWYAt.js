const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./entry-CategoryForm-v9-63ReT6M.js","./entry-vue.esm-bundler-C0PPCo9W96.js","./entry-useBreakpoints-D5z-MrjI4Q.js","./entry-throttle-DL1zg7kAk0.js","./entry-_commonjsHelpers-Cpj98o6Yn6.js","./entry-isSymbol-5pnFTpIKM9.js","./entry-toNumber-MeiYJWOH0A.js","./entry-KvWwwHeader-C1bm1YMh4q.js","./entry-index-CWclSTHHJk.js","./entry-numeral-xVHG5DEP0A.js","./KvWwwHeader-DtWMcmZI.css","./entry-KvCardFrame-CDvFA_PuSe.js","./entry-KvThemeProvider-BF4_ArwXOx.js","./entry-NumberChoice-Kds7Bv-kdi.js","./entry-mdi-B1ONwcTkQ2.js","./entry-KvMaterialIcon-C3KLX5OV-L.js"])))=>i.map(i=>d[i]);
import{_ as V}from"./iframe-Cc_r_Bkf.js";import{t as le,j as d,g as C,w as E,z as y,H as se,C as p,u as s,b as ne,O as G,o as g,q as re,m as h,a as ce,M as L,L as ue,c as x,D as I,E as N,P as ie}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import"./entry-KvWwwHeader-C1bm1YMh4q.js";import{g as _}from"./entry-KvButton-BA7nBLyz1b.js";import{M as de}from"./entry-KvLightbox-y8nxBJS-RZ.js";import"./entry-numeral-xVHG5DEP0A.js";import{M as ge}from"./entry-useBadgeModal-edgCU2M7Bh.js";import{u as fe}from"./entry-useIsMobile-Cv5_qjK3ot.js";import{u as me}from"./entry-useGoalData-CY18ya0ook.js";import{u as ve}from"./entry-vue-router-Di6opnONE0.js";import{G as pe}from"./entry-GoalSelector-CfwDxNzuE2.js";import{_ as ye}from"./entry-_plugin-vue_export-helper-DlAUqK2UKH.js";const he={key:0,class:"tw-mb-3 tw-text-left md:tw-text-center"},be={key:0,class:"tw-mb-3 tw-text-left md:tw-text-center"},ke={class:"tw-flex tw-justify-end tw-gap-2"},B={__name:"GoalSettingModal",props:{show:{type:Boolean,default:!1},totalLoans:{type:Number,default:0},categoriesLoanCount:{type:Object,default:()=>({})},numberOfLoans:{type:Number,default:0},isThanksPage:{type:Boolean,default:!1},showGoalSelector:{type:Boolean,default:!1},goalsV2Enabled:{type:Boolean,default:!1},isGoalSet:{type:Boolean,default:!1},tieredAchievements:{type:Array,default:()=>[]},controlledIsEditing:{type:Boolean,default:!1},controlledSelectedCategory:{type:Object,default:()=>({})}},emits:["close-goal-modal","set-goal","update-goal-choices"],setup(l,{emit:D}){const M=G(()=>V(()=>import("./entry-CategoryForm-v9-63ReT6M.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),O=G(()=>V(()=>import("./entry-NumberChoice-Kds7Bv-kdi.js"),__vite__mapDeps([13,1,14,15,7,4,8,9,10,11,12]),import.meta.url)),b=D,{isMobile:w}=fe(ge),u=ne("$kvTrackEvent"),j=ve(),{getCtaHref:A,getCategories:$,goalProgress:S,goalProgressPercentage:F,loadGoalData:R}=me(),e=l,{numberOfLoans:f,isGoalSet:P}=le(e),n=d(1),t=d(!e.goalsV2Enabled),k=d(0),m=d(e.controlledIsEditing),r=d(f.value?f.value:5),v=$(e.categoriesLoanCount,e.totalLoans),H=e.controlledSelectedCategory&&Object.keys(e.controlledSelectedCategory).length>0,c=d(H?e.controlledSelectedCategory:v[0]),Y=C(()=>{switch(n.value){case 2:return O;case 1:default:return M}}),K=new Date().getFullYear(),q=C(()=>m.value?"Continue":e.goalsV2Enabled?`Set ${K} goal`:n.value===1?"Continue":"Set my goal"),z=C(()=>{var a;return A(r.value,(a=c.value)==null?void 0:a.badgeId,j,S.value)}),J=a=>{var i;const o=a-1;c.value=v[o],(e.show&&t.value||e.isThanksPage)&&u(e.isThanksPage?"post-checkout":"portfolio","click","choose-goal-category",(i=v[o])==null?void 0:i.eventProp)},Q=a=>{r.value=a},U=()=>{r.value=f.value?f.value:k.value?k.value:5,n.value===1&&e.showGoalSelector?t.value=!1:n.value-=1,u(e.isThanksPage?"post-checkout":"portfolio","click","goals-back"),u(e.isThanksPage?"post-checkout":"portfolio","show","view-goal-categories")},W=()=>{var a;if(m.value)m.value=!1,t.value=!1,n.value=1,b("update-goal-choices",c.value);else if(n.value===1&&!e.goalsV2Enabled)n.value+=1,u(e.isThanksPage?"post-checkout":"portfolio","click","goal-setting-continue");else{const o=(a=c.value)==null?void 0:a.badgeId;u(e.isThanksPage?"post-checkout":"portfolio","click",e.isThanksPage?"set-annual-goal":"set-goal-amount",o,r.value);const i=new Date().getFullYear(),ae=`goal-${o}-${i}`,te=r.value,oe=new Date().toISOString();b("set-goal",{goalName:ae,category:o,target:te,dateStarted:oe,status:"in-progress"})}},X=()=>{n.value=1,c.value={...v[0]},t.value=!1},T=()=>{b("close-goal-modal"),setTimeout(()=>{X()},300)},Z=()=>{t.value=!0,m.value=!0,u(e.isThanksPage?"post-checkout":"portfolio","show","view-goal-categories")},ee=a=>{k.value=a,r.value=a};return E(f,a=>{a&&(r.value=a)}),E(P,async a=>{a&&(await R({yearlyProgress:e.goalsV2Enabled}),t.value&&(t.value=!1))}),(a,o)=>(g(),y(s(de),{class:"goal-setting-lightbox",title:"",visible:l.show,onLightboxClosed:T},se({header:p(()=>[!s(w)&&(t.value||l.isThanksPage)?(g(),x("h2",he," Choose an impact area ")):h("",!0)]),default:p(()=>[s(w)&&(t.value||l.isThanksPage)?(g(),x("h2",be," Choose an impact area ")):h("",!0),l.showGoalSelector&&l.goalsV2Enabled?I((g(),y(s(pe),{key:1,style:{"max-width":"612px"},"is-goal-set":s(P),"categories-loan-count":l.categoriesLoanCount,"tracking-category":"portfolio","go-to-url":z.value,"tiered-achievements":l.tieredAchievements,"is-editing":m.value,"selected-category-id":c.value.badgeId,"selected-category-name":c.value.name,"goal-loans":r.value,"goal-progress":s(S),"goal-progress-percentage":s(F),onSetGoalTarget:ee,onSetGoal:o[0]||(o[0]=i=>a.$emit("set-goal",i)),onEditGoal:Z,onCloseModal:T},null,8,["is-goal-set","categories-loan-count","go-to-url","tiered-achievements","is-editing","selected-category-id","selected-category-name","goal-loans","goal-progress","goal-progress-percentage"])),[[N,!t.value]]):h("",!0),I((g(),y(ie(Y.value),{categories:s(v),"pre-selected-category":c.value.id,"selected-category":c.value,"selected-goal-number":r.value,onCategorySelected:J,onNumberChanged:Q},null,40,["categories","pre-selected-category","selected-category","selected-goal-number"])),[[N,t.value||l.isThanksPage]])],void 0),_:2},[t.value||l.isThanksPage?{name:"controls",fn:p(()=>[re("div",ke,[n.value===2?(g(),y(s(_),{key:0,variant:"secondary",onClick:U},{default:p(()=>o[1]||(o[1]=[L(" Back ")]),void 0,!0),_:1,__:[1]})):h("",!0),ce(s(_),{onClick:W},{default:p(()=>[L(ue(q.value),1)],void 0,!0),_:1})])]),key:"0"}:void 0]),1032,["visible"]))}},Be=ye(B,[["__scopeId","data-v-b1b5fb79"]]);B.__docgenInfo={exportName:"default",displayName:"GoalSettingModal",description:"",tags:{},props:[{name:"show",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"totalLoans",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"categoriesLoanCount",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"numberOfLoans",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"isThanksPage",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showGoalSelector",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"goalsV2Enabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isGoalSet",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"tieredAchievements",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"controlledIsEditing",description:"Controlled is editing flag from parent",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"controlledSelectedCategory",description:"Controlled selected category from parent",type:{name:"object"},defaultValue:{func:!1,value:"{}"}}],events:[{name:"set-goal"},{name:"close-goal-modal"},{name:"update-goal-choices"}],sourceFiles:["/home/runner/work/ui/ui/src/components/MyKiva/GoalSettingModal.vue"]};export{Be as G};
