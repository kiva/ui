import{t as S,j as v,g as r,k as b,c as u,o as m,m as f,D as P,A as h,q as o,E as N,a as V,r as $,G as y,L as D}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{$ as k,w as G}from"./entry-imageUtils-XCIqTGZvrk.js";import{_ as M}from"./entry-KvLoadingPlaceholder-B_9_tltQhY.js";import{s as j}from"./entry-KvWwwHeader-C1bm1YMh4q.js";const z={name:"KvUserAvatar",components:{KvLoadingPlaceholder:M},props:{lenderName:{type:String,default:""},lenderImageUrl:{type:String,default:""},isSmall:{type:Boolean,default:!1},showCssPlaceholder:{type:Boolean,default:!1},theme:{type:String,default:"default",validator(n){return["default","ecoGreenLight"].indexOf(n)!==-1}}},setup(n){const{lenderName:t,lenderImageUrl:s,isSmall:e,showCssPlaceholder:d}=S(n),c=v(!0),i=v(null),g=v(null),A=r(()=>!d.value&&t.value===""&&s.value===""||t.value==="Anonymous"),C=r(()=>{const a=e!=null&&e.value?"tw-font-sans tw-font-normal":"tw-font-serif";return`${G(t.value)} ${a}`}),I=r(()=>e!=null&&e.value?"0 0 27 27":"0 0 27.5 27.5"),L=r(()=>{var a;if(d.value)return!0;const l=((a=s==null?void 0:s.value)==null?void 0:a.split("/").pop())??"";return l&&!k(l)}),x=r(()=>{var a;return(a=t==null?void 0:t.value)==null?void 0:a.substring(0,1).toUpperCase()}),w=()=>{c.value=!1},U=(a,l=1e4)=>new Promise((_,B)=>{const H=Date.now()+l,p=()=>{!a||a.complete?_(a):Date.now()>H?B(new Error(`Timeout: ${a.src}`)):setTimeout(p,50)};p()});return b(async()=>{const a=i.value;try{await U(a),w()}catch(l){console.log(l.message)}}),{isAnonymousUser:A,avatarClass:C,userHasImage:L,lenderNameFirstLetter:x,letterViewBox:I,isLegacyPlaceholderAvatar:k,isImageLoading:c,onImgLoad:w,imageRef:i,userAvatar:g}}},E=["src"],R=["viewBox"],Z={x:"50%",y:"55%","dominant-baseline":"middle","text-anchor":"middle"};function F(n,t,s,e,d,c){const i=$("kv-loading-placeholder");return m(),u("div",{ref:"userAvatar",class:h(["data-hj-suppress tw-flex tw-items-center tw-justify-center tw-rounded-full tw-overflow-hidden",{"tw-bg-brand":e.isAnonymousUser&&s.theme==="default","tw-bg-brand-100":e.isAnonymousUser&&s.theme==="ecoGreenLight",[e.avatarClass]:!e.isAnonymousUser}])},[e.isAnonymousUser?(m(),u("svg",{key:0,class:h({"kiva-k__green-light":s.theme==="ecoGreenLight","kiva-k__white":s.theme==="default","kiva-k__small":s.isSmall,"kiva-k__normal":!s.isSmall}),viewBox:"0 0 25 37",xmlns:"http://www.w3.org/2000/svg"},t[1]||(t[1]=[o("path",{d:"M8.22861 0.875H0.857178V36.3125H8.22861V0.875Z"},null,-1),o("path",{d:"M10.1143 23.2751C21.9428 23.2751 24.6857 13.2126 24.6857 11.4626H23.6571C11.8286 11.4626 9.08569 21.5251 9.08569 23.2751H10.1143Z"},null,-1),o("path",{d:"M9.08569 24.2376C9.08569 26.0751 11.1428 36.3126 23.8285 36.3126H24.8571C24.8571 34.4751 22.8 24.2376 10.1143 24.2376H9.08569Z"},null,-1)]),2)):f("",!0),P(V(i,null,null,512),[[N,!e.isAnonymousUser&&e.userHasImage&&e.isImageLoading]]),!e.isAnonymousUser&&e.userHasImage?(m(),u("div",{key:1,class:"tw-w-full tw-h-full",style:y(s.showCssPlaceholder?{display:"var(--user-avatar-display, block)"}:{display:e.isImageLoading?"none":"block"})},[o("img",{ref:"imageRef",src:s.lenderImageUrl,alt:"Image of lender",class:"tw-w-full",style:y(s.showCssPlaceholder?{content:"var(--user-avatar)"}:{}),onLoad:t[0]||(t[0]=g=>e.onImgLoad())},null,44,E)],4)):f("",!0),!e.isAnonymousUser&&!e.userHasImage?(m(),u("svg",{key:2,class:"tw-w-full tw-h-full",fill:"currentColor",viewBox:e.letterViewBox},[o("text",Z,D(e.lenderNameFirstLetter),1)],8,R)):f("",!0)],2)}const J=j(z,[["render",F],["__scopeId","data-v-a36f82cb"]]);export{J as B};
