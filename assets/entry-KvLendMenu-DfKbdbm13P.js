import{K as B,c as l,o as n,J as x,I as T,D as m,M as p,L as A,q as s,j as N,g as _,r as g,m as I,a as v,C as L,z as M,A as z,G as J,t as V,k as Q}from"./entry-vue.esm-bundler-C0PPCo9W96.js";import{y as F,g as W}from"./entry-mdi-B1ONwcTkQ2.js";import{S as X}from"./entry-KvAccordionItem-DnWt5hHrLc.js";import{_ as P}from"./entry-KvLoadingPlaceholder-B_9_tltQhY.js";import{s as K}from"./entry-KvWwwHeader-C1bm1YMh4q.js";import{h as H,_ as Z}from"./entry-KvTabs-CbRnT2lqFN.js";import{y as Y}from"./entry-KvTabPanel-Ct8s7XWvCc.js";import{x as D}from"./entry-KvMaterialIcon-C3KLX5OV-L.js";import{w as ee}from"./entry-KvGrid-Cgm16aFdnL.js";import{u as te}from"./entry-KvPageContainer-Dh8GJwjiow.js";import{g as O}from"./entry-index-CWclSTHHJk.js";import"./entry-KvExpandable-C7Xh6Dr9N8.js";import"./entry-_commonjsHelpers-Cpj98o6Yn6.js";import"./entry-numeral-xVHG5DEP0A.js";const ne=(r,e)=>r.reduce((t,a)=>{const w=String(a[e]);return t[w]||(t[w]=[]),t[w].push(a),t},{}),q=r=>(e,t)=>e[r]>t[r]?1:t[r]>e[r]?-1:0;function ae(r,e){if(!Array.isArray(r))throw new TypeError("list must be an array");return(t,a)=>{const w=t[e],b=a[e];return r.indexOf(w)<r.indexOf(b)?-1:1}}const le={name:"CountryList",props:{countries:{type:Array,default:()=>[]}}},se={class:"tw-whitespace-nowrap tw-font-medium"},oe=["href"],re={key:1,class:"tw-block tw-py-1 tw-text-tertiary"};function ie(r,e,t,a,w,b){const d=B("kv-track-event");return n(),l("ul",se,[(n(!0),l(x,null,T(t.countries,c=>(n(),l("li",{key:c.isoCode,class:"country-list-item"},[c.count>0?m((n(),l("a",{key:0,href:`/lend/filter?country=${c.isoCode}`,class:"tw-text-primary hover:tw-text-action tw-block tw-w-full tw-py-1"},[p(A(c.name)+" ("+A(c.count)+") ",1)],8,oe)),[[d,["TopNav","click-Lend-Country",c.name]]]):(n(),l("span",re,A(c.name)+" (0) ",1))]))),128))])}const E=K(le,[["render",ie],["__scopeId","data-v-07c8276d"]]),ce={props:{searches:{type:Array,default:()=>[]}}},de={class:"tw-font-book"},ue=["href"];function me(r,e,t,a,w,b){return n(),l("ul",de,[(n(!0),l(x,null,T(t.searches,d=>(n(),l("li",{key:d.id},[s("a",{class:"tw-text-primary hover:tw-text-action tw-block tw-w-full tw-py-1",href:d.url},A(d.name),9,ue)]))),128)),e[0]||(e[0]=s("li",null,[s("a",{class:"tw-text-primary hover:tw-text-action tw-block tw-w-full tw-py-1",href:"/lend/saved-search"}," Manage saved searches ")],-1))])}const j=K(ce,[["render",me]]);function pe(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}const ve={components:{KvAccordionItem:X,KvTab:Z,KvTabPanel:Y,KvTabs:H,KvLendMenuCountryList:E,KvLendMenuSearchList:j,KvLoadingPlaceholder:P,KvMaterialIcon:D},props:{categories:{type:Array,default:()=>[]},favorites:{type:Number,default:0},userId:{type:Number,default:null},regions:{type:Array,default:()=>[]},searches:{type:Array,default:()=>[]},isRegionsLoading:{type:Boolean,default:!0},isChannelsLoading:{type:Boolean,default:!0},showMGUpsellLink:{type:Boolean,default:!1},countriesNotLentToUrl:{type:String,default:"/lend/countries-not-lent"}},setup(r){const e=N(null),t=N([]),a=N(null),w=_(()=>r.searches.length>0);return{mdiArrowRight:F,hasSearches:w,navLendCategories:e,regionAccordions:t,searchesLink:a,onClose:()=>{var b,d,c,k,u,C,y;(c=(d=(b=e.value)==null?void 0:b.tabContext)==null?void 0:d.setTab)==null||c.call(d,0),(u=(k=t.value)==null?void 0:k.forEach)==null||u.call(k,o=>{var f;(f=o==null?void 0:o.collapse)==null||f.call(o)}),(y=(C=a.value)==null?void 0:C.collapse)==null||y.call(C)},paramCase:pe}}},we={class:"tw-pb-2"},he={key:0,href:"/monthlygood"},ye={class:"tw-inline-flex tw-items-center tw-py-2 tw-mb-2 tw-gap-0.5 tw-border-b tw-border-tertiary tw-font-medium"},fe={class:"tw-font-medium"},ge=["href"],ke={class:"tw-border-t tw-border-tertiary"},Le={href:"/lend-by-category/recommended-by-lenders",class:"lend-link tw-text-brand"},be={href:"/lend",class:"lend-link"},Ce={href:"/categories",class:"lend-link"},xe={class:"tw-flex"},Se={class:"tw-text-h4"},Ne={class:"tw-font-medium"},Te=["href"],$e={key:1,class:"tw-block tw-py-1 tw-text-tertiary"},Ae={key:0},_e={key:1},Me=["href"];function Ie(r,e,t,a,w,b){const d=g("kv-material-icon"),c=g("kv-tab"),k=g("kv-loading-placeholder"),u=g("kv-tab-panel"),C=g("kv-accordion-item"),y=g("kv-lend-menu-country-list"),o=g("kv-lend-menu-search-list"),f=g("kv-tabs"),h=B("kv-track-event");return n(),l("div",we,[t.showMGUpsellLink?m((n(),l("a",he,[s("span",ye,[e[0]||(e[0]=p(" Lend monthly ")),v(d,{icon:a.mdiArrowRight,class:"tw-w-3 tw-h-3"},null,8,["icon"])])])),[[h,["TopNav","click-Lend-Menu-Monthly-Good","Lend-monthly"]]]):I("",!0),v(f,{ref:"navLendCategories"},{tabNav:L(()=>[m((n(),M(c,{"for-panel":"nav-lend-categories"},{default:L(()=>e[1]||(e[1]=[p(" Categories ")])),_:1})),[[h,["TopNav","click-Lend-Tab-Categories"]]]),m((n(),M(c,{"for-panel":"nav-lend-regions"},{default:L(()=>e[2]||(e[2]=[p(" Regions ")])),_:1})),[[h,["TopNav","click-Lend-Tab-Regions"]]]),t.userId?m((n(),M(c,{key:0,"for-panel":"nav-my-kiva"},{default:L(()=>e[3]||(e[3]=[p(" My Kiva ")])),_:1})),[[h,["TopNav","click-Lend-Tab-My-Kiva"]]]):I("",!0)]),tabPanels:L(()=>[v(u,{id:"nav-lend-categories"},{default:L(()=>[s("ul",fe,[t.isChannelsLoading?(n(),l(x,{key:0},T(14,i=>s("li",{key:i,style:{width:"11rem"},class:"tw-py-1 tw-flex"},[v(k,{class:"tw-inline-block tw-align-middle",style:{height:"1rem"}}),e[4]||(e[4]=s("span",{class:"tw-inline-block"}," ",-1))])),64)):(n(!0),l(x,{key:1},T(t.categories,(i,S)=>(n(),l("li",{key:S},[m((n(),l("a",{href:i.url,class:"lend-link"},[p(A(i.name),1)],8,ge)),[[h,["TopNav","click-Lend-Category",i.name,S+1]]])]))),128)),s("li",ke,[m((n(),l("a",Le,e[5]||(e[5]=[p(" Recommended by lenders ")]))),[[h,["TopNav","click-Lend-Recommended-by-lenders"]]])]),s("li",null,[m((n(),l("a",be,e[6]||(e[6]=[p(" All loans ")]))),[[h,["TopNav","click-Lend-All_Loans"]]])]),s("li",null,[m((n(),l("a",Ce,e[7]||(e[7]=[p(" All categories ")]))),[[h,["TopNav","click-Lend-All_Categories"]]])])])]),_:1}),v(u,{id:"nav-lend-regions"},{default:L(()=>[t.isRegionsLoading?(n(),l(x,{key:0},T(8,i=>v(C,{id:`placeholder-${i}-panel`,key:i,disabled:!0},{header:L(()=>[s("div",xe,[v(k,{class:"tw-inline-block tw-align-middle",style:{height:"1rem"}}),e[8]||(e[8]=s("span",{class:"tw-inline-block tw-text-h4"}," ",-1))])]),_:2},1032,["id"])),64)):(n(!0),l(x,{key:1},T(t.regions,i=>m((n(),M(C,{id:`lend-menu-${a.paramCase(i.name)}-panel`,key:i.name,ref_for:!0,ref:"regionAccordions"},{header:L(()=>[s("h3",Se,A(i.name),1)]),default:L(()=>[v(y,{countries:i.countries},null,8,["countries"])]),_:2},1032,["id"])),[[h,["TopNav","click-Lend-Region",i.name]]])),128))]),_:1}),t.userId?(n(),M(u,{key:0,id:"nav-my-kiva"},{default:L(()=>[s("ul",Ne,[s("li",null,[t.favorites>0?m((n(),l("a",{key:0,href:`/lend?lenderFavorite=${t.userId}`,class:"lend-link"},e[9]||(e[9]=[p(" Saved loans ")]),8,Te)),[[h,["TopNav","click-Lend-Favorites"]]]):(n(),l("span",$e,"Saved loans"))]),a.hasSearches?(n(),l("li",Ae,[v(C,{id:"lend-menu-saved-searches-panel",ref:"searchesLink"},{header:L(()=>e[10]||(e[10]=[s("p",{class:"tw-font-medium"}," Saved searches ",-1)])),default:L(()=>[v(o,{searches:t.searches},null,8,["searches"])]),_:1},512)])):(n(),l("li",_e,e[11]||(e[11]=[s("span",{class:"tw-block tw-py-1 tw-text-tertiary"},"Saved searches",-1)]))),s("li",null,[m((n(),l("a",{href:t.countriesNotLentToUrl,class:"lend-link"},e[12]||(e[12]=[p(" Countries I haven't lent to ")]),8,Me)),[[h,["TopNav","click-Lend-Countries_Not_Lent"]]])])])]),_:1})):I("",!0)]),_:1},512)])}const Re=K(ve,[["render",Ie],["__scopeId","data-v-7256cd7a"]]),Ke={components:{KvGrid:ee,KvLendMenuCountryList:E,KvLendMenuSearchList:j,KvLoadingPlaceholder:P,KvMaterialIcon:D},props:{categories:{type:Array,default:()=>[]},favorites:{type:Number,default:0},isRegionsLoading:{type:Boolean,default:!0},isChannelsLoading:{type:Boolean,default:!0},userId:{type:Number,default:null},regions:{type:Array,default:()=>[]},searches:{type:Array,default:()=>[]},showMGUpsellLink:{type:Boolean,default:!1},countriesNotLentToUrl:{type:String,default:"/lend/countries-not-lent"}},setup(r){const e=N(null),t=N(""),a=_(()=>t.value!==""),w=u=>t.value===u,b=u=>{t.value=u},d=_(()=>{var u;const C={width:"150%"};if(a.value){const y=((u=e.value)==null?void 0:u.clientWidth)??0;C.transform=`translateX(${y*-1}px)`}return C}),c=_(()=>r.regions.filter(u=>w(u.name))),k=_(()=>r.searches.length>0);return{mdiArrowRight:F,mdiChevronLeft:W,categoriesSection:e,openedSection:t,sectionOpen:a,isOpenSection:w,openSection:b,onClose:()=>{t.value=""},openRegions:c,computedStyle:d,hasSearches:k,savedSearchesTitle:"Saved searches"}}},Ue={class:"lend-mega-menu tw-overflow-hidden tw-pb-3 lg:tw-pt-3"},Oe={key:0,href:"/monthlygood"},Be={class:"tw-inline-flex tw-items-center tw-py-1 tw-mb-2 tw-gap-0.5 tw-font-medium tw-text-action"},Ge={ref:"categoriesSection",class:"tw-col-span-7"},qe={class:"tw-flex tw-gap-4 tw-whitespace-nowrap"},Fe={class:"tw-columns-2 tw-gap-4 tw-font-medium"},Pe=["href"],De={class:"tw-font-medium"},Ee={class:"link-item"},je={href:"/lend-by-category/recommended-by-lenders",class:"mega-menu-link"},ze={class:"link-item"},Je={href:"/categories",class:"mega-menu-link"},Ve={class:"link-item"},Qe={class:"mega-menu-link",href:"/lend"},We={key:0},Xe={class:"tw-font-medium"},He=["href"],Ze={key:1,class:"tw-text-secondary tw-py-1 tw-inline-block tw-no-underline hover:tw-underline"},Ye=["aria-pressed"],et={key:1,class:"tw-text-secondary tw-py-1 tw-inline-block"},tt=["href"],nt={class:"tw-col-span-2"},at={class:"tw-col-span-8 tw-flex tw-flex-col"},lt={class:"tw-flex tw-whitespace-nowrap tw-h-full"},st={class:"tw-font-medium"},ot=["aria-pressed","onClick"];function rt(r,e,t,a,w,b){const d=g("kv-material-icon"),c=g("kv-loading-placeholder"),k=g("kv-lend-menu-search-list"),u=g("kv-lend-menu-country-list"),C=g("kv-grid"),y=B("kv-track-event");return n(),l("div",Ue,[s("div",{style:J(a.computedStyle),class:"tw-transition tw-duration-1000 tw-ease-in-out"},[t.showMGUpsellLink?m((n(),l("a",Oe,[s("span",Be,[e[2]||(e[2]=p(" Lend monthly ")),v(d,{icon:a.mdiArrowRight,class:"tw-w-3 tw-h-3"},null,8,["icon"])])])),[[y,["TopNav","click-Lend-Menu-Monthly-Good","Lend-monthly"]]]):I("",!0),v(C,{style:{"grid-template-columns":"repeat(18, minmax(0, 1fr))"}},{default:L(()=>[s("div",Ge,[e[11]||(e[11]=s("h2",{class:"menu-heading tw-mb-2"}," Categories ",-1)),s("div",qe,[s("ul",Fe,[t.isChannelsLoading?(n(),l(x,{key:0},T(14,o=>s("li",{key:o,class:"link-item"},[v(c,{class:"tw-inline-block tw-align-middle",style:{height:"1.25rem"}}),e[3]||(e[3]=s("span",{class:"tw-py-1 tw-inline-block"}," ",-1))])),64)):(n(!0),l(x,{key:1},T(t.categories,(o,f)=>(n(),l("li",{key:f,class:"link-item"},[m((n(),l("a",{href:o.url,class:"tw-text-primary tw-text-left hover:tw-text-action tw-no-underline tw-my-1 tw-inline-block"},[p(A(o.name),1)],8,Pe)),[[y,["TopNav","click-Lend-Category",o.name,f+1]]])]))),128))]),s("div",null,[s("ul",De,[s("li",Ee,[m((n(),l("a",je,e[4]||(e[4]=[p(" Recommended by lenders ")]))),[[y,["TopNav","click-Lend-Recommended-by-lenders"]]])]),s("li",ze,[m((n(),l("a",Je,e[5]||(e[5]=[p(" All categories ")]))),[[y,["TopNav","click-Lend-All_Categories"]]])]),s("li",Ve,[m((n(),l("a",Qe,e[6]||(e[6]=[p(" All loans ")]))),[[y,["TopNav","click-Lend-All_Loans"]]])])]),t.userId?(n(),l("div",We,[e[9]||(e[9]=s("span",{class:"tw-inline-block tw-py-1"}," ",-1)),e[10]||(e[10]=s("h2",{class:"menu-heading tw-my-1"}," My Kiva ",-1)),s("ul",Xe,[s("li",null,[t.favorites>0?m((n(),l("a",{key:0,href:`/lend?lenderFavorite=${t.userId}`,class:"tw-text-primary tw-text-left hover:tw-text-action tw-py-1 tw-inline-block tw-no-underline hover:tw-underline"},e[7]||(e[7]=[p(" Saved loans ")]),8,He)),[[y,["TopNav","click-Lend-Favorites"]]]):(n(),l("span",Ze," Saved loans "))]),s("li",null,[a.hasSearches?(n(),l("button",{key:0,"aria-pressed":a.isOpenSection(a.savedSearchesTitle)?"true":"false",class:"tw-text-primary tw-text-left tw-py-1 tw-inline-block hover:tw-text-action hover:tw-underline",onClick:e[0]||(e[0]=o=>a.openSection(a.savedSearchesTitle))},A(a.savedSearchesTitle),9,Ye)):(n(),l("span",et," Saved searches "))]),s("li",null,[m((n(),l("a",{href:t.countriesNotLentToUrl,class:"tw-text-primary tw-text-left hover:tw-text-action tw-py-1 tw-inline-block tw-no-underline hover:tw-underline"},e[8]||(e[8]=[p(" Countries I haven't lent to ")]),8,tt)),[[y,["TopNav","click-Lend-Countries_Not_Lent"]]])])])])):I("",!0)])])],512),s("div",nt,[a.sectionOpen?(n(),l("button",{key:0,class:"tw-flex",onClick:e[1]||(e[1]=o=>a.openedSection="")},[v(d,{class:"tw-flex-shrink-0 tw-w-3 tw-h-3",icon:a.mdiChevronLeft},null,8,["icon"]),e[12]||(e[12]=s("span",{class:"tw-text-base"}," Back ",-1))])):I("",!0)]),s("div",at,[a.isOpenSection(a.savedSearchesTitle)?(n(),l(x,{key:0},[e[13]||(e[13]=s("h2",{class:"menu-heading tw-mb-2"}," Saved Searches ",-1)),v(k,{class:"search-list tw-h-full",searches:t.searches},null,8,["searches"])],64)):(n(),l(x,{key:1},[e[15]||(e[15]=s("h2",{class:"menu-heading tw-mb-2"}," Regions ",-1)),s("div",lt,[s("ul",st,[t.isRegionsLoading?(n(),l(x,{key:0},T(8,o=>s("li",{key:o,class:"link-item"},[v(c,{class:"tw-inline-block tw-align-middle",style:{height:"1.25rem"}}),e[14]||(e[14]=s("span",{class:"tw-py-1 tw-inline-block"}," ",-1))])),64)):(n(!0),l(x,{key:1},T(t.regions,o=>(n(),l("li",{key:o.name,class:"link-item tw-mr-4"},[m((n(),l("button",{"aria-pressed":a.isOpenSection(o.name)?"true":"false",class:z(["tw-text-primary tw-text-left tw-py-1 hover:tw-text-action hover:tw-underline",{"tw-text-action":a.isOpenSection(o.name)}]),onClick:f=>a.openSection(o.name)},[p(A(o.name),1)],10,ot)),[[y,["TopNav","click-Lend-Region",o.name]]])]))),128))]),(n(!0),l(x,null,T(a.openRegions,o=>(n(),l("div",{key:o.name,class:"tw-h-full"},[v(u,{countries:o.countries,class:"region-list tw-h-full"},null,8,["countries"])]))),128))])],64))])]),_:1})],4)])}const it=K(Ke,[["render",rt],["__scopeId","data-v-3e49579c"]]),ct={components:{KvLendListMenu:Re,KvLendMegaMenu:it,KvPageContainer:te},props:{userId:{type:Number,default:null},showMGUpsellLink:{type:Boolean,default:!1},countriesNotLentToUrl:{type:String,default:"/lend/countries-not-lent"}},emits:["load-lend-menu-data"],setup(r,{emit:e}){const{userId:t}=V(r),a=N([]),w=N([]),b=N(0),d=N([]),c=["North America","Central America","South America","Africa","Eastern Europe","Middle East","Asia","Oceania"],k=N(!0),u=N(!0),C=async f=>{var h,i,S,U;if(f.watchQuery({query:O`query countryFacets {
					lend {
						countryFacets {
							count
							country {
								name
								region
								isoCode
							}
						}
					}

				}`}).subscribe({next:({data:$})=>{var R;w.value=((R=$==null?void 0:$.lend)==null?void 0:R.countryFacets)??[],k.value=!1}}),f.watchQuery({query:O`
					query lendMenuData {
						lend {
							loanChannels(popular: true, applyMinLoanCount: true, limit: 50) {
								values {
									id
									name
									url
								}
							}
						}
					}
				`}).subscribe({next:({data:$})=>{var R,G;a.value=((G=(R=$==null?void 0:$.lend)==null?void 0:R.loanChannels)==null?void 0:G.values)??[],u.value=!1}}),t.value){const{data:$}=await f.query({query:O`
						query lendMenuPrivateData($userId: Int!) {
							lend {
								loans(limit: 1, filters: {
									lenderFavorite: $userId
								}) {
									totalCount
								}
							}
							my {
								savedSearches {
									values {
										id
										name
										url
									}
								}
							}
						}
					`,variables:{userId:t.value},fetchPolicy:"network-only"});b.value=((i=(h=$==null?void 0:$.lend)==null?void 0:h.loans)==null?void 0:i.totalCount)??0,d.value=((U=(S=$==null?void 0:$.my)==null?void 0:S.savedSearches)==null?void 0:U.values)??[]}},y=_(()=>{const f=w.value.map(S=>({name:S.country.name,region:S.country.region,isoCode:S.country.isoCode.toLowerCase(),count:S.count||0})),h=ne(f,"region"),i=[];for(const[S,U]of Object.entries(h))i.push({name:S,countries:U.sort(q("name"))});return i.sort(ae(c,"name"))}),o=_(()=>{var f;return((f=a.value)==null?void 0:f.map(h=>{const i=JSON.parse(JSON.stringify(h));return i.url=i.url.replace("lend","lend-by-category"),i})).sort(q("name"))});return Q(()=>{e("load-lend-menu-data")}),{onLoad:C,regions:y,computedCategories:o,isChannelsLoading:u,isRegionsLoading:k,savedSearches:d,favoritesCount:b}}};function dt(r,e,t,a,w,b){const d=g("kv-lend-list-menu"),c=g("kv-lend-mega-menu"),k=g("kv-page-container");return n(),M(k,{class:"tw-pt-2 lg:tw-pt-0"},{default:L(()=>[v(d,{class:"lg:tw-hidden",categories:a.computedCategories,regions:a.regions,"user-id":t.userId,favorites:a.favoritesCount,searches:a.savedSearches,"is-regions-loading":a.isRegionsLoading,"is-channels-loading":a.isChannelsLoading,"show-m-g-upsell-link":t.showMGUpsellLink,"countries-not-lent-to-url":t.countriesNotLentToUrl},null,8,["categories","regions","user-id","favorites","searches","is-regions-loading","is-channels-loading","show-m-g-upsell-link","countries-not-lent-to-url"]),v(c,{class:"tw-hidden lg:tw-block",categories:a.computedCategories,regions:a.regions,"user-id":t.userId,favorites:a.favoritesCount,searches:a.savedSearches,"is-regions-loading":a.isRegionsLoading,"is-channels-loading":a.isChannelsLoading,"show-m-g-upsell-link":t.showMGUpsellLink,"countries-not-lent-to-url":t.countriesNotLentToUrl},null,8,["categories","regions","user-id","favorites","searches","is-regions-loading","is-channels-loading","show-m-g-upsell-link","countries-not-lent-to-url"])]),_:1})}const St=K(ct,[["render",dt]]);export{St as default};
